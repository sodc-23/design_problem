/* Fabric 2.3.3 */
var fabric = fabric || {
    version: "2.3.3"
};

function resizeCanvasIfNeeded(t) {
    var e = t.targetCanvas,
        i = e.width,
        r = e.height,
        n = t.destinationWidth,
        s = t.destinationHeight;
    i === n && r === s || (e.width = n, e.height = s)
}

function copyGLTo2DDrawImage(t, e) {
    var i = t.canvas,
        r = e.targetCanvas,
        n = r.getContext("2d");
    n.translate(0, r.height), n.scale(1, -1);
    var s = i.height - r.height;
    n.drawImage(i, 0, s, r.width, r.height, 0, 0, r.width, r.height)
}

function copyGLTo2DPutImageData(t, e) {
    var i = e.targetCanvas.getContext("2d"),
        r = e.destinationWidth,
        n = e.destinationHeight,
        s = r * n * 4,
        o = new Uint8Array(this.imageBuffer, 0, s),
        a = new Uint8ClampedArray(this.imageBuffer, 0, s);
    t.readPixels(0, 0, r, n, t.RGBA, t.UNSIGNED_BYTE, o);
    var h = new ImageData(a, r, n);
    i.putImageData(h, 0, 0)
}
"undefined" != typeof exports ? exports.fabric = fabric : "function" == typeof define && define.amd && define([], function() {
        return fabric
    }), "undefined" != typeof document && "undefined" != typeof window ? (fabric.document = document, fabric.window = window) : (fabric.document = require("jsdom").jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"), {
        features: {
            FetchExternalResources: ["img"]
        }
    }), fabric.jsdomImplForWrapper = require("jsdom/lib/jsdom/living/generated/utils").implForWrapper, fabric.nodeCanvas = require("jsdom/lib/jsdom/utils").Canvas, fabric.window = fabric.document.defaultView, DOMParser = require("xmldom").DOMParser), fabric.isTouchSupported = "ontouchstart" in fabric.window, fabric.isLikelyNode = "undefined" != typeof Buffer && "undefined" == typeof window, fabric.SHARED_ATTRIBUTES = ["display", "transform", "fill", "fill-opacity", "fill-rule", "opacity", "stroke", "stroke-dasharray", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "id", "paint-order", "instantiated_by_use"], fabric.DPI = 96, fabric.reNum = "(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)", fabric.fontPaths = {}, fabric.iMatrix = [1, 0, 0, 1, 0, 0], fabric.canvasModule = "canvas", fabric.perfLimitSizeTotal = 2097152, fabric.maxCacheSideLimit = 4096, fabric.minCacheSideLimit = 256, fabric.charWidthsCache = {}, fabric.textureSize = 2048, fabric.enableGLFiltering = !0, fabric.devicePixelRatio = fabric.window.devicePixelRatio || fabric.window.webkitDevicePixelRatio || fabric.window.mozDevicePixelRatio || 1, fabric.browserShadowBlurConstant = 1, fabric.initFilterBackend = function() {
        return fabric.enableGLFiltering && fabric.isWebglSupported && fabric.isWebglSupported(fabric.textureSize) ? (console.log("max texture size: " + fabric.maxTextureSize), new fabric.WebglFilterBackend({
            tileSize: fabric.textureSize
        })) : fabric.Canvas2dFilterBackend ? new fabric.Canvas2dFilterBackend : void 0
    }, "undefined" != typeof document && "undefined" != typeof window && (window.fabric = fabric),
    function() {
        function r(t, e) {
            if (this.__eventListeners[t]) {
                var i = this.__eventListeners[t];
                e ? i[i.indexOf(e)] = !1 : fabric.util.array.fill(i, !1)
            }
        }

        function t(t, e) {
            if (this.__eventListeners || (this.__eventListeners = {}), 1 === arguments.length)
                for (var i in t) this.on(i, t[i]);
            else this.__eventListeners[t] || (this.__eventListeners[t] = []), this.__eventListeners[t].push(e);
            return this
        }

        function e(t, e) {
            if (this.__eventListeners) {
                if (0 === arguments.length)
                    for (t in this.__eventListeners) r.call(this, t);
                else if (1 === arguments.length && "object" == typeof t)
                    for (var i in t) r.call(this, i, t[i]);
                else r.call(this, t, e);
                return this
            }
        }

        function i(t, e) {
            if (this.__eventListeners) {
                var i = this.__eventListeners[t];
                if (i) {
                    for (var r = 0, n = i.length; r < n; r++) i[r] && i[r].call(this, e || {});
                    return this.__eventListeners[t] = i.filter(function(t) {
                        return !1 !== t
                    }), this
                }
            }
        }
        fabric.Observable = {
            observe: t,
            stopObserving: e,
            fire: i,
            on: t,
            off: e,
            trigger: i
        }
    }(), fabric.Collection = {
        _objects: [],
        add: function() {
            if (this._objects.push.apply(this._objects, arguments), this._onObjectAdded)
                for (var t = 0, e = arguments.length; t < e; t++) this._onObjectAdded(arguments[t]);
            return this.renderOnAddRemove && this.requestRenderAll(), this
        },
        insertAt: function(t, e, i) {
            var r = this.getObjects();
            return i ? r[e] = t : r.splice(e, 0, t), this._onObjectAdded && this._onObjectAdded(t), this.renderOnAddRemove && this.requestRenderAll(), this
        },
        remove: function() {
            for (var t, e = this.getObjects(), i = !1, r = 0, n = arguments.length; r < n; r++) - 1 !== (t = e.indexOf(arguments[r])) && (i = !0, e.splice(t, 1), this._onObjectRemoved && this._onObjectRemoved(arguments[r]));
            return this.renderOnAddRemove && i && this.requestRenderAll(), this
        },
        forEachObject: function(t, e) {
            for (var i = this.getObjects(), r = 0, n = i.length; r < n; r++) t.call(e, i[r], r, i);
            return this
        },
        getObjects: function(e) {
            return void 0 === e ? this._objects : this._objects.filter(function(t) {
                return t.type === e
            })
        },
        item: function(t) {
            return this.getObjects()[t]
        },
        isEmpty: function() {
            return 0 === this.getObjects().length
        },
        size: function() {
            return this.getObjects().length
        },
        contains: function(t) {
            return -1 < this.getObjects().indexOf(t)
        },
        complexity: function() {
            return this.getObjects().reduce(function(t, e) {
                return t += e.complexity ? e.complexity() : 0
            }, 0)
        }
    }, fabric.CommonMethods = {
        _setOptions: function(t) {
            for (var e in t) this.set(e, t[e])
        },
        _initGradient: function(t, e) {
            !t || !t.colorStops || t instanceof fabric.Gradient || this.set(e, new fabric.Gradient(t))
        },
        _initPattern: function(t, e, i) {
            !t || !t.source || t instanceof fabric.Pattern ? i && i() : this.set(e, new fabric.Pattern(t, i))
        },
        _initClipping: function(t) {
            if (t.clipTo && "string" == typeof t.clipTo) {
                var e = fabric.util.getFunctionBody(t.clipTo);
                void 0 !== e && (this.clipTo = new Function("ctx", e))
            }
        },
        _setObject: function(t) {
            for (var e in t) this._set(e, t[e])
        },
        set: function(t, e) {
            return "object" == typeof t ? this._setObject(t) : "function" == typeof e && "clipTo" !== t ? this._set(t, e(this.get(t))) : this._set(t, e), this
        },
        _set: function(t, e) {
            this[t] = e
        },
        toggle: function(t) {
            var e = this.get(t);
            return "boolean" == typeof e && this.set(t, !e), this
        },
        get: function(t) {
            return this[t]
        }
    },
    function(s) {
        var d = Math.sqrt,
            g = Math.atan2,
            o = Math.pow,
            a = Math.abs,
            h = Math.PI / 180,
            i = Math.PI / 2;
        fabric.util = {
            cos: function(t) {
                if (0 === t) return 1;
                switch (t < 0 && (t = -t), t / i) {
                    case 1:
                    case 3:
                        return 0;
                    case 2:
                        return -1
                }
                return Math.cos(t)
            },
            sin: function(t) {
                if (0 === t) return 0;
                var e = 1;
                switch (t < 0 && (e = -1), t / i) {
                    case 1:
                        return e;
                    case 2:
                        return 0;
                    case 3:
                        return -e
                }
                return Math.sin(t)
            },
            removeFromArray: function(t, e) {
                var i = t.indexOf(e);
                return -1 !== i && t.splice(i, 1), t
            },
            getRandomInt: function(t, e) {
                return Math.floor(Math.random() * (e - t + 1)) + t
            },
            degreesToRadians: function(t) {
                return t * h
            },
            radiansToDegrees: function(t) {
                return t / h
            },
            rotatePoint: function(t, e, i) {
                t.subtractEquals(e);
                var r = fabric.util.rotateVector(t, i);
                return new fabric.Point(r.x, r.y).addEquals(e)
            },
            rotateVector: function(t, e) {
                var i = fabric.util.sin(e),
                    r = fabric.util.cos(e);
                return {
                    x: t.x * r - t.y * i,
                    y: t.x * i + t.y * r
                }
            },
            transformPoint: function(t, e, i) {
                return i ? new fabric.Point(e[0] * t.x + e[2] * t.y, e[1] * t.x + e[3] * t.y) : new fabric.Point(e[0] * t.x + e[2] * t.y + e[4], e[1] * t.x + e[3] * t.y + e[5])
            },
            makeBoundingBoxFromPoints: function(t) {
                var e = [t[0].x, t[1].x, t[2].x, t[3].x],
                    i = fabric.util.array.min(e),
                    r = fabric.util.array.max(e) - i,
                    n = [t[0].y, t[1].y, t[2].y, t[3].y],
                    s = fabric.util.array.min(n);
                return {
                    left: i,
                    top: s,
                    width: r,
                    height: fabric.util.array.max(n) - s
                }
            },
            invertTransform: function(t) {
                var e = 1 / (t[0] * t[3] - t[1] * t[2]),
                    i = [e * t[3], -e * t[1], -e * t[2], e * t[0]],
                    r = fabric.util.transformPoint({
                        x: t[4],
                        y: t[5]
                    }, i, !0);
                return i[4] = -r.x, i[5] = -r.y, i
            },
            toFixed: function(t, e) {
                return parseFloat(Number(t).toFixed(e))
            },
            parseUnit: function(t, e) {
                var i = /\D{0,2}$/.exec(t),
                    r = parseFloat(t);
                switch (e || (e = fabric.Text.DEFAULT_SVG_FONT_SIZE), i[0]) {
                    case "mm":
                        return r * fabric.DPI / 25.4;
                    case "cm":
                        return r * fabric.DPI / 2.54;
                    case "in":
                        return r * fabric.DPI;
                    case "pt":
                        return r * fabric.DPI / 72;
                    case "pc":
                        return r * fabric.DPI / 72 * 12;
                    case "em":
                        return r * e;
                    default:
                        return r
                }
            },
            falseFunction: function() {
                return !1
            },
            getKlass: function(t, e) {
                return t = fabric.util.string.camelize(t.charAt(0).toUpperCase() + t.slice(1)), fabric.util.resolveNamespace(e)[t]
            },
            getSvgAttributes: function(t) {
                var e = ["instantiated_by_use", "style", "id", "class"];
                switch (t) {
                    case "linearGradient":
                        e = e.concat(["x1", "y1", "x2", "y2", "gradientUnits", "gradientTransform"]);
                        break;
                    case "radialGradient":
                        e = e.concat(["gradientUnits", "gradientTransform", "cx", "cy", "r", "fx", "fy", "fr"]);
                        break;
                    case "stop":
                        e = e.concat(["offset", "stop-color", "stop-opacity"])
                }
                return e
            },
            resolveNamespace: function(t) {
                if (!t) return fabric;
                var e, i = t.split("."),
                    r = i.length,
                    n = s || fabric.window;
                for (e = 0; e < r; ++e) n = n[i[e]];
                return n
            },
            loadImage: function(t, e, i, r) {
                if (t) {
                    var n = fabric.util.createImage(),
                        s = function() {
                            e && e.call(i, n), n = n.onload = n.onerror = null
                        };
                    n.onload = s, n.onerror = function() {
                        fabric.log("Error loading " + n.src), e && e.call(i, null, !0), n = n.onload = n.onerror = null
                    }, 0 !== t.indexOf("data") && r && (n.crossOrigin = r), "data:image/svg" === t.substring(0, 14) && (n.onload = null, fabric.util.loadImageInDom(n, s)), n.src = t
                } else e && e.call(i, t)
            },
            loadImageInDom: function(t, e) {
                var i = fabric.document.createElement("div");
                i.style.width = i.style.height = "1px", i.style.left = i.style.top = "-100%", i.style.position = "absolute", i.appendChild(t), fabric.document.querySelector("body").appendChild(i), t.onload = function() {
                    e(), i.parentNode.removeChild(i), i = null
                }
            },
            enlivenObjects: function(t, e, n, s) {
                function o() {
                    ++i === r && e && e(a)
                }
                var a = [],
                    i = 0,
                    r = (t = t || []).length;
                r ? t.forEach(function(i, r) {
                    i && i.type ? fabric.util.getKlass(i.type, n).fromObject(i, function(t, e) {
                        e || (a[r] = t), s && s(i, t, e), o()
                    }) : o()
                }) : e && e(a)
            },
            enlivenPatterns: function(t, e) {
                function i() {
                    ++n === s && e && e(r)
                }
                var r = [],
                    n = 0,
                    s = (t = t || []).length;
                s ? t.forEach(function(t, e) {
                    t && t.source ? new fabric.Pattern(t, function(t) {
                        r[e] = t, i()
                    }) : (r[e] = t, i())
                }) : e && e(r)
            },
            groupSVGElements: function(t, e, i) {
                var r;
                return 1 === t.length ? t[0] : (e && (e.width && e.height ? e.centerPoint = {
                    x: e.width / 2,
                    y: e.height / 2
                } : (delete e.width, delete e.height)), r = new fabric.Group(t, e), void 0 !== i && (r.sourcePath = i), r)
            },
            populateWithProperties: function(t, e, i) {
                if (i && "[object Array]" === Object.prototype.toString.call(i))
                    for (var r = 0, n = i.length; r < n; r++) i[r] in t && (e[i[r]] = t[i[r]])
            },
            drawDashedLine: function(t, e, i, r, n, s) {
                var o = r - e,
                    a = n - i,
                    h = d(o * o + a * a),
                    c = g(a, o),
                    l = s.length,
                    u = 0,
                    f = !0;
                for (t.save(), t.translate(e, i), t.moveTo(0, 0), t.rotate(c), e = 0; e < h;) h < (e += s[u++ % l]) && (e = h), t[f ? "lineTo" : "moveTo"](e, 0), f = !f;
                t.restore()
            },
            createCanvasElement: function() {
                return fabric.document.createElement("canvas")
            },
            createImage: function() {
                return fabric.document.createElement("img")
            },
            clipContext: function(t, e) {
                e.save(), e.beginPath(), t.clipTo(e), e.clip()
            },
            multiplyTransformMatrices: function(t, e, i) {
                return [t[0] * e[0] + t[2] * e[1], t[1] * e[0] + t[3] * e[1], t[0] * e[2] + t[2] * e[3], t[1] * e[2] + t[3] * e[3], i ? 0 : t[0] * e[4] + t[2] * e[5] + t[4], i ? 0 : t[1] * e[4] + t[3] * e[5] + t[5]]
            },
            qrDecompose: function(t) {
                var e = g(t[1], t[0]),
                    i = o(t[0], 2) + o(t[1], 2),
                    r = d(i),
                    n = (t[0] * t[3] - t[2] * t[1]) / r,
                    s = g(t[0] * t[2] + t[1] * t[3], i);
                return {
                    angle: e / h,
                    scaleX: r,
                    scaleY: n,
                    skewX: s / h,
                    skewY: 0,
                    translateX: t[4],
                    translateY: t[5]
                }
            },
            customTransformMatrix: function(t, e, i) {
                var r = [1, 0, a(Math.tan(i * h)), 1],
                    n = [a(t), 0, 0, a(e)];
                return fabric.util.multiplyTransformMatrices(n, r, !0)
            },
            resetObjectTransform: function(t) {
                t.scaleX = 1, t.scaleY = 1, t.skewX = 0, t.skewY = 0, t.flipX = !1, t.flipY = !1, t.rotate(0)
            },
            getFunctionBody: function(t) {
                return (String(t).match(/function[^{]*\{([\s\S]*)\}/) || {})[1]
            },
            isTransparent: function(t, e, i, r) {
                0 < r && (r < e ? e -= r : e = 0, r < i ? i -= r : i = 0);
                var n, s = !0,
                    o = t.getImageData(e, i, 2 * r || 1, 2 * r || 1),
                    a = o.data.length;
                for (n = 3; n < a && !1 !== (s = o.data[n] <= 0); n += 4);
                return o = null, s
            },
            parsePreserveAspectRatioAttribute: function(t) {
                var e, i = "meet",
                    r = t.split(" ");
                return r && r.length && ("meet" !== (i = r.pop()) && "slice" !== i ? (e = i, i = "meet") : r.length && (e = r.pop())), {
                    meetOrSlice: i,
                    alignX: "none" !== e ? e.slice(1, 4) : "none",
                    alignY: "none" !== e ? e.slice(5, 8) : "none"
                }
            },
            clearFabricFontCache: function(t) {
                (t = (t || "").toLowerCase()) ? fabric.charWidthsCache[t] && delete fabric.charWidthsCache[t]: fabric.charWidthsCache = {}
            },
            limitDimsByArea: function(t, e) {
                var i = Math.sqrt(e * t),
                    r = Math.floor(e / i);
                return {
                    x: Math.floor(i),
                    y: r
                }
            },
            capValue: function(t, e, i) {
                return Math.max(t, Math.min(e, i))
            },
            findScaleToFit: function(t, e) {
                return Math.min(e.width / t.width, e.height / t.height)
            },
            findScaleToCover: function(t, e) {
                return Math.max(e.width / t.width, e.height / t.height)
            }
        }
    }("undefined" != typeof exports ? exports : this),
    function() {
        var I = {},
            C = {},
            j = {},
            L = Array.prototype.join;

        function v(t, e, i, r, n, s, o) {
            var a = L.call(arguments);
            if (I[a]) return I[a];
            var h = Math.PI,
                c = o * h / 180,
                l = fabric.util.sin(c),
                u = fabric.util.cos(c),
                f = 0,
                d = 0,
                g = -u * t * .5 - l * e * .5,
                p = -u * e * .5 + l * t * .5,
                v = (i = Math.abs(i)) * i,
                m = (r = Math.abs(r)) * r,
                b = p * p,
                _ = g * g,
                y = v * m - v * b - m * _,
                x = 0;
            if (y < 0) {
                var C = Math.sqrt(1 - y / (v * m));
                i *= C, r *= C
            } else x = (n === s ? -1 : 1) * Math.sqrt(y / (v * b + m * _));
            var S = x * i * p / r,
                w = -x * r * g / i,
                T = u * S - l * w + .5 * t,
                O = l * S + u * w + .5 * e,
                k = B(1, 0, (g - S) / i, (p - w) / r),
                E = B((g - S) / i, (p - w) / r, (-g - S) / i, (-p - w) / r);
            0 === s && 0 < E ? E -= 2 * h : 1 === s && E < 0 && (E += 2 * h);
            for (var D = Math.ceil(Math.abs(E / h * 2)), j = [], A = E / D, P = 8 / 3 * Math.sin(A / 4) * Math.sin(A / 4) / Math.sin(A / 2), F = k + A, M = 0; M < D; M++) j[M] = R(k, F, u, l, i, r, T, O, P, f, d), f = j[M][4], d = j[M][5], k = F, F += A;
            return I[a] = j
        }

        function R(t, e, i, r, n, s, o, a, h, c, l) {
            var u = L.call(arguments);
            if (C[u]) return C[u];
            var f = fabric.util.cos(t),
                d = fabric.util.sin(t),
                g = fabric.util.cos(e),
                p = fabric.util.sin(e),
                v = i * n * g - r * s * p + o,
                m = r * n * g + i * s * p + a,
                b = c + h * (-i * n * d - r * s * f),
                _ = l + h * (-r * n * d + i * s * f),
                y = v + h * (i * n * p + r * s * g),
                x = m + h * (r * n * p - i * s * g);
            return C[u] = [b, _, y, x, v, m], C[u]
        }

        function B(t, e, i, r) {
            var n = Math.atan2(e, t),
                s = Math.atan2(r, i);
            return n <= s ? s - n : 2 * Math.PI - (n - s)
        }

        function m(t, e, i, r, n, s, o, a) {
            var h = L.call(arguments);
            if (j[h]) return j[h];
            var c, l, u, f, d, g, p, v, m = Math.sqrt,
                b = Math.min,
                _ = Math.max,
                y = Math.abs,
                x = [],
                C = [
                    [],
                    []
                ];
            l = 6 * t - 12 * i + 6 * n, c = -3 * t + 9 * i - 9 * n + 3 * o, u = 3 * i - 3 * t;
            for (var S = 0; S < 2; ++S)
                if (0 < S && (l = 6 * e - 12 * r + 6 * s, c = -3 * e + 9 * r - 9 * s + 3 * a, u = 3 * r - 3 * e), y(c) < 1e-12) {
                    if (y(l) < 1e-12) continue;
                    0 < (f = -u / l) && f < 1 && x.push(f)
                } else(p = l * l - 4 * u * c) < 0 || (0 < (d = (-l + (v = m(p))) / (2 * c)) && d < 1 && x.push(d), 0 < (g = (-l - v) / (2 * c)) && g < 1 && x.push(g));
            for (var w, T, O, k = x.length, E = k; k--;) w = (O = 1 - (f = x[k])) * O * O * t + 3 * O * O * f * i + 3 * O * f * f * n + f * f * f * o, C[0][k] = w, T = O * O * O * e + 3 * O * O * f * r + 3 * O * f * f * s + f * f * f * a, C[1][k] = T;
            C[0][E] = t, C[1][E] = e, C[0][E + 1] = o, C[1][E + 1] = a;
            var D = [{
                x: b.apply(null, C[0]),
                y: b.apply(null, C[1])
            }, {
                x: _.apply(null, C[0]),
                y: _.apply(null, C[1])
            }];
            return j[h] = D
        }
        fabric.util.drawArc = function(t, e, i, r) {
            for (var n = r[0], s = r[1], o = r[2], a = r[3], h = r[4], c = [
                    [],
                    [],
                    [],
                    []
                ], l = v(r[5] - e, r[6] - i, n, s, a, h, o), u = 0, f = l.length; u < f; u++) c[u][0] = l[u][0] + e, c[u][1] = l[u][1] + i, c[u][2] = l[u][2] + e, c[u][3] = l[u][3] + i, c[u][4] = l[u][4] + e, c[u][5] = l[u][5] + i, t.bezierCurveTo.apply(t, c[u])
        }, fabric.util.getBoundsOfArc = function(t, e, i, r, n, s, o, a, h) {
            for (var c, l = 0, u = 0, f = [], d = v(a - t, h - e, i, r, s, o, n), g = 0, p = d.length; g < p; g++) c = m(l, u, d[g][0], d[g][1], d[g][2], d[g][3], d[g][4], d[g][5]), f.push({
                x: c[0].x + t,
                y: c[0].y + e
            }), f.push({
                x: c[1].x + t,
                y: c[1].y + e
            }), l = d[g][4], u = d[g][5];
            return f
        }, fabric.util.getBoundsOfCurve = m
    }(),
    function() {
        var o = Array.prototype.slice;

        function i(t, e, i) {
            if (t && 0 !== t.length) {
                var r = t.length - 1,
                    n = e ? t[r][e] : t[r];
                if (e)
                    for (; r--;) i(t[r][e], n) && (n = t[r][e]);
                else
                    for (; r--;) i(t[r], n) && (n = t[r]);
                return n
            }
        }
        fabric.util.array = {
            fill: function(t, e) {
                for (var i = t.length; i--;) t[i] = e;
                return t
            },
            invoke: function(t, e) {
                for (var i = o.call(arguments, 2), r = [], n = 0, s = t.length; n < s; n++) r[n] = i.length ? t[n][e].apply(t[n], i) : t[n][e].call(t[n]);
                return r
            },
            min: function(t, e) {
                return i(t, e, function(t, e) {
                    return t < e
                })
            },
            max: function(t, e) {
                return i(t, e, function(t, e) {
                    return e <= t
                })
            }
        }
    }(),
    function() {
        function o(t, e, i) {
            if (i)
                if (!fabric.isLikelyNode && e instanceof Element) t = e;
                else if (e instanceof Array) {
                t = [];
                for (var r = 0, n = e.length; r < n; r++) t[r] = o({}, e[r], i)
            } else if (e && "object" == typeof e)
                for (var s in e) e.hasOwnProperty(s) && (t[s] = o({}, e[s], i));
            else t = e;
            else
                for (var s in e) t[s] = e[s];
            return t
        }
        fabric.util.object = {
            extend: o,
            clone: function(t, e) {
                return o({}, t, e)
            }
        }, fabric.util.object.extend(fabric.util, fabric.Observable)
    }(),
    function() {
        function n(t, e) {
            var i = t.charCodeAt(e);
            if (isNaN(i)) return "";
            if (i < 55296 || 57343 < i) return t.charAt(e);
            if (55296 <= i && i <= 56319) {
                if (t.length <= e + 1) throw "High surrogate without following low surrogate";
                var r = t.charCodeAt(e + 1);
                if (r < 56320 || 57343 < r) throw "High surrogate without following low surrogate";
                return t.charAt(e) + t.charAt(e + 1)
            }
            if (0 === e) throw "Low surrogate without preceding high surrogate";
            var n = t.charCodeAt(e - 1);
            if (n < 55296 || 56319 < n) throw "Low surrogate without preceding high surrogate";
            return !1
        }
        fabric.util.string = {
            camelize: function(t) {
                return t.replace(/-+(.)?/g, function(t, e) {
                    return e ? e.toUpperCase() : ""
                })
            },
            capitalize: function(t, e) {
                return t.charAt(0).toUpperCase() + (e ? t.slice(1) : t.slice(1).toLowerCase())
            },
            escapeXml: function(t) {
                return t.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
            },
            graphemeSplit: function(t) {
                var e, i = 0,
                    r = [];
                for (i = 0; i < t.length; i++) !1 !== (e = n(t, i)) && r.push(e);
                return r
            }
        }
    }(),
    function() {
        var s = Array.prototype.slice,
            o = function() {},
            i = function() {
                for (var t in {
                        toString: 1
                    })
                    if ("toString" === t) return !1;
                return !0
            }(),
            a = function(t, r, n) {
                for (var e in r) e in t.prototype && "function" == typeof t.prototype[e] && -1 < (r[e] + "").indexOf("callSuper") ? t.prototype[e] = function(i) {
                    return function() {
                        var t = this.constructor.superclass;
                        this.constructor.superclass = n;
                        var e = r[i].apply(this, arguments);
                        if (this.constructor.superclass = t, "initialize" !== i) return e
                    }
                }(e) : t.prototype[e] = r[e], i && (r.toString !== Object.prototype.toString && (t.prototype.toString = r.toString), r.valueOf !== Object.prototype.valueOf && (t.prototype.valueOf = r.valueOf))
            };

        function h() {}

        function c(t) {
            for (var e = null, i = this; i.constructor.superclass;) {
                var r = i.constructor.superclass.prototype[t];
                if (i[t] !== r) {
                    e = r;
                    break
                }
                i = i.constructor.superclass.prototype
            }
            return e ? 1 < arguments.length ? e.apply(this, s.call(arguments, 1)) : e.call(this) : console.log("tried to callSuper " + t + ", method not found in prototype chain", this)
        }
        fabric.util.createClass = function() {
            var t = null,
                e = s.call(arguments, 0);

            function i() {
                this.initialize.apply(this, arguments)
            }
            "function" == typeof e[0] && (t = e.shift()), i.superclass = t, i.subclasses = [], t && (h.prototype = t.prototype, i.prototype = new h, t.subclasses.push(i));
            for (var r = 0, n = e.length; r < n; r++) a(i, e[r], t);
            return i.prototype.initialize || (i.prototype.initialize = o), (i.prototype.constructor = i).prototype.callSuper = c, i
        }
    }(),
    function() {
        function t(t) {
            var e, i, r = Array.prototype.slice.call(arguments, 1),
                n = r.length;
            for (i = 0; i < n; i++)
                if (e = typeof t[r[i]], !/^(?:function|object|unknown)$/.test(e)) return !1;
            return !0
        }
        var n, s, e, i, a = (e = 0, function(t) {
            return t.__uniqueID || (t.__uniqueID = "uniqueID__" + e++)
        });

        function o(t, e) {
            return {
                handler: e,
                wrappedHandler: (i = t, r = e, function(t) {
                    r.call(n(i), t || fabric.window.event)
                })
            };
            var i, r
        }
        i = {}, n = function(t) {
            return i[t]
        }, s = function(t, e) {
            i[t] = e
        };
        var r, h, c = t(fabric.document.documentElement, "addEventListener", "removeEventListener") && t(fabric.window, "addEventListener", "removeEventListener"),
            l = t(fabric.document.documentElement, "attachEvent", "detachEvent") && t(fabric.window, "attachEvent", "detachEvent"),
            u = {},
            f = {};
        c ? (r = function(t, e, i, r) {
            t && t.addEventListener(e, i, !l && r)
        }, h = function(t, e, i, r) {
            t && t.removeEventListener(e, i, !l && r)
        }) : l ? (r = function(t, e, i) {
            if (t) {
                var r = a(t);
                s(r, t), u[r] || (u[r] = {}), u[r][e] || (u[r][e] = []);
                var n = o(r, i);
                u[r][e].push(n), t.attachEvent("on" + e, n.wrappedHandler)
            }
        }, h = function(t, e, i) {
            if (t) {
                var r, n = a(t);
                if (u[n] && u[n][e])
                    for (var s = 0, o = u[n][e].length; s < o; s++)(r = u[n][e][s]) && r.handler === i && (t.detachEvent("on" + e, r.wrappedHandler), u[n][e][s] = null)
            }
        }) : (r = function(t, e, i) {
            if (t) {
                var n, s, r = a(t);
                if (f[r] || (f[r] = {}), !f[r][e]) {
                    f[r][e] = [];
                    var o = t["on" + e];
                    o && f[r][e].push(o), t["on" + e] = (n = r, s = e, function(t) {
                        if (f[n] && f[n][s])
                            for (var e = f[n][s], i = 0, r = e.length; i < r; i++) e[i].call(this, t || fabric.window.event)
                    })
                }
                f[r][e].push(i)
            }
        }, h = function(t, e, i) {
            if (t) {
                var r = a(t);
                if (f[r] && f[r][e])
                    for (var n = f[r][e], s = 0, o = n.length; s < o; s++) n[s] === i && n.splice(s, 1)
            }
        }), fabric.util.addListener = r, fabric.util.removeListener = h;
        var d = function(t) {
                return t.clientX
            },
            g = function(t) {
                return t.clientY
            };

        function p(t, e, i) {
            var r, n = t["touchend" === t.type ? "changedTouches" : "touches"];
            return n && n[0] && (r = n[0][i]), void 0 === r && (r = t[i]), r
        }
        fabric.isTouchSupported && (d = function(t) {
            return p(t, 0, "clientX")
        }, g = function(t) {
            return p(t, 0, "clientY")
        }), fabric.util.getPointer = function(t) {
            t || (t = fabric.window.event);
            var e = t.target || ("unknown" != typeof t.srcElement ? t.srcElement : null),
                i = fabric.util.getScrollLeftTop(e);
            return {
                x: d(t) + i.left,
                y: g(t) + i.top
            }
        }
    }(),
    function() {
        var t = fabric.document.createElement("div"),
            e = "string" == typeof t.style.opacity,
            i = "string" == typeof t.style.filter,
            r = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,
            n = function(t) {
                return t
            };
        e ? n = function(t, e) {
            return t.style.opacity = e, t
        } : i && (n = function(t, e) {
            var i = t.style;
            return t.currentStyle && !t.currentStyle.hasLayout && (i.zoom = 1), r.test(i.filter) ? (e = .9999 <= e ? "" : "alpha(opacity=" + 100 * e + ")", i.filter = i.filter.replace(r, e)) : i.filter += " alpha(opacity=" + 100 * e + ")", t
        }), fabric.util.setStyle = function(t, e) {
            var i = t.style;
            if (!i) return t;
            if ("string" == typeof e) return t.style.cssText += ";" + e, -1 < e.indexOf("opacity") ? n(t, e.match(/opacity:\s*(\d?\.?\d*)/)[1]) : t;
            for (var r in e) "opacity" === r ? n(t, e[r]) : i["float" === r || "cssFloat" === r ? void 0 === i.styleFloat ? "cssFloat" : "styleFloat" : r] = e[r];
            return t
        }
    }(),
    function() {
        var e = Array.prototype.slice;
        var t, h, i, r, n = function(t) {
            return e.call(t, 0)
        };
        try {
            t = n(fabric.document.childNodes) instanceof Array
        } catch (t) {}

        function s(t, e) {
            var i = fabric.document.createElement(t);
            for (var r in e) "class" === r ? i.className = e[r] : "for" === r ? i.htmlFor = e[r] : i.setAttribute(r, e[r]);
            return i
        }

        function c(t) {
            for (var e = 0, i = 0, r = fabric.document.documentElement, n = fabric.document.body || {
                    scrollLeft: 0,
                    scrollTop: 0
                }; t && (t.parentNode || t.host) && ((t = t.parentNode || t.host) === fabric.document ? (e = n.scrollLeft || r.scrollLeft || 0, i = n.scrollTop || r.scrollTop || 0) : (e += t.scrollLeft || 0, i += t.scrollTop || 0), 1 !== t.nodeType || "fixed" !== t.style.position););
            return {
                left: e,
                top: i
            }
        }
        t || (n = function(t) {
            for (var e = new Array(t.length), i = t.length; i--;) e[i] = t[i];
            return e
        }), h = fabric.document.defaultView && fabric.document.defaultView.getComputedStyle ? function(t, e) {
            var i = fabric.document.defaultView.getComputedStyle(t, null);
            return i ? i[e] : void 0
        } : function(t, e) {
            var i = t.style[e];
            return !i && t.currentStyle && (i = t.currentStyle[e]), i
        }, i = fabric.document.documentElement.style, r = "userSelect" in i ? "userSelect" : "MozUserSelect" in i ? "MozUserSelect" : "WebkitUserSelect" in i ? "WebkitUserSelect" : "KhtmlUserSelect" in i ? "KhtmlUserSelect" : "", fabric.util.makeElementUnselectable = function(t) {
            return void 0 !== t.onselectstart && (t.onselectstart = fabric.util.falseFunction), r ? t.style[r] = "none" : "string" == typeof t.unselectable && (t.unselectable = "on"), t
        }, fabric.util.makeElementSelectable = function(t) {
            return void 0 !== t.onselectstart && (t.onselectstart = null), r ? t.style[r] = "" : "string" == typeof t.unselectable && (t.unselectable = ""), t
        }, fabric.util.getScript = function(t, e) {
            var i = fabric.document.getElementsByTagName("head")[0],
                r = fabric.document.createElement("script"),
                n = !0;
            r.onload = r.onreadystatechange = function(t) {
                if (n) {
                    if ("string" == typeof this.readyState && "loaded" !== this.readyState && "complete" !== this.readyState) return;
                    n = !1, e(t || fabric.window.event), r = r.onload = r.onreadystatechange = null
                }
            }, r.src = t, i.appendChild(r)
        }, fabric.util.getById = function(t) {
            return "string" == typeof t ? fabric.document.getElementById(t) : t
        }, fabric.util.toArray = n, fabric.util.makeElement = s, fabric.util.addClass = function(t, e) {
            t && -1 === (" " + t.className + " ").indexOf(" " + e + " ") && (t.className += (t.className ? " " : "") + e)
        }, fabric.util.wrapElement = function(t, e, i) {
            return "string" == typeof e && (e = s(e, i)), t.parentNode && t.parentNode.replaceChild(e, t), e.appendChild(t), e
        }, fabric.util.getScrollLeftTop = c, fabric.util.getElementOffset = function(t) {
            var e, i, r = t && t.ownerDocument,
                n = {
                    left: 0,
                    top: 0
                },
                s = {
                    left: 0,
                    top: 0
                },
                o = {
                    borderLeftWidth: "left",
                    borderTopWidth: "top",
                    paddingLeft: "left",
                    paddingTop: "top"
                };
            if (!r) return s;
            for (var a in o) s[o[a]] += parseInt(h(t, a), 10) || 0;
            return e = r.documentElement, void 0 !== t.getBoundingClientRect && (n = t.getBoundingClientRect()), i = c(t), {
                left: n.left + i.left - (e.clientLeft || 0) + s.left,
                top: n.top + i.top - (e.clientTop || 0) + s.top
            }
        }, fabric.util.getElementStyle = h, fabric.util.getNodeCanvas = function(t) {
            var e = fabric.jsdomImplForWrapper(t);
            return e._canvas || e._image
        }
    }(),
    function() {
        var h = function() {
            for (var t = [function() {
                    return new ActiveXObject("Microsoft.XMLHTTP")
                }, function() {
                    return new ActiveXObject("Msxml2.XMLHTTP")
                }, function() {
                    return new ActiveXObject("Msxml2.XMLHTTP.3.0")
                }, function() {
                    return new XMLHttpRequest
                }], e = t.length; e--;) try {
                if (t[e]()) return t[e]
            } catch (t) {}
        }();

        function c() {}
        fabric.util.request = function(t, e) {
            e || (e = {});
            var i, r, n = e.method ? e.method.toUpperCase() : "GET",
                s = e.onComplete || function() {},
                o = h(),
                a = e.body || e.parameters;
            return o.onreadystatechange = function() {
                4 === o.readyState && (s(o), o.onreadystatechange = c)
            }, "GET" === n && (a = null, "string" == typeof e.parameters && (i = t, r = e.parameters, t = i + (/\?/.test(i) ? "&" : "?") + r)), o.open(n, t, !0), "POST" !== n && "PUT" !== n || o.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), o.send(a), o
        }
    }(), fabric.log = function() {}, fabric.warn = function() {}, "undefined" != typeof console && ["log", "warn"].forEach(function(t) {
        void 0 !== console[t] && "function" == typeof console[t].apply && (fabric[t] = function() {
            return console[t].apply(console, arguments)
        })
    }),
    function() {
        function e() {
            return !1
        }
        var t = fabric.window.requestAnimationFrame || fabric.window.webkitRequestAnimationFrame || fabric.window.mozRequestAnimationFrame || fabric.window.oRequestAnimationFrame || fabric.window.msRequestAnimationFrame || function(t) {
                return fabric.window.setTimeout(t, 1e3 / 60)
            },
            i = fabric.window.cancelAnimationFrame || fabric.window.clearTimeout;

        function b() {
            return t.apply(fabric.window, arguments)
        }
        fabric.util.animate = function(m) {
            b(function(t) {
                m || (m = {});
                var o, a = t || +new Date,
                    h = m.duration || 500,
                    c = a + h,
                    l = m.onChange || e,
                    u = m.abort || e,
                    f = m.onComplete || e,
                    d = m.easing || function(t, e, i, r) {
                        return -i * Math.cos(t / r * (Math.PI / 2)) + i + e
                    },
                    g = "startValue" in m ? m.startValue : 0,
                    p = "endValue" in m ? m.endValue : 100,
                    v = m.byValue || p - g;
                m.onStart && m.onStart(),
                    function t(e) {
                        if (u()) f(p, 1, 1);
                        else {
                            o = e || +new Date;
                            var i = c < o ? h : o - a,
                                r = i / h,
                                n = d(i, g, v, h),
                                s = Math.abs((n - g) / v);
                            l(n, s, r), c < o ? m.onComplete && m.onComplete() : b(t)
                        }
                    }(a)
            })
        }, fabric.util.requestAnimFrame = b, fabric.util.cancelAnimFrame = function() {
            return i.apply(fabric.window, arguments)
        }
    }(), fabric.util.animateColor = function(t, e, i, c) {
        var r = new fabric.Color(t).getSource(),
            n = new fabric.Color(e).getSource();
        c = c || {}, fabric.util.animate(fabric.util.object.extend(c, {
            duration: i || 500,
            startValue: r,
            endValue: n,
            byValue: n,
            easing: function(t, e, i, r) {
                var n, s, o, a, h = c.colorEasing ? c.colorEasing(t, r) : 1 - Math.cos(t / r * (Math.PI / 2));
                return n = e, s = i, o = h, a = "rgba(" + parseInt(n[0] + o * (s[0] - n[0]), 10) + "," + parseInt(n[1] + o * (s[1] - n[1]), 10) + "," + parseInt(n[2] + o * (s[2] - n[2]), 10), a += "," + (n && s ? parseFloat(n[3] + o * (s[3] - n[3])) : 1), a += ")"
            }
        }))
    },
    function() {
        function o(t, e, i, r) {
            return t < Math.abs(e) ? (t = e, r = i / 4) : r = 0 === e && 0 === t ? i / (2 * Math.PI) * Math.asin(1) : i / (2 * Math.PI) * Math.asin(e / t), {
                a: t,
                c: e,
                p: i,
                s: r
            }
        }

        function a(t, e, i) {
            return t.a * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * i - t.s) * (2 * Math.PI) / t.p)
        }

        function n(t, e, i, r) {
            return i - s(r - t, 0, i, r) + e
        }

        function s(t, e, i, r) {
            return (t /= r) < 1 / 2.75 ? i * (7.5625 * t * t) + e : t < 2 / 2.75 ? i * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + e : t < 2.5 / 2.75 ? i * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + e : i * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + e
        }
        fabric.util.ease = {
            easeInQuad: function(t, e, i, r) {
                return i * (t /= r) * t + e
            },
            easeOutQuad: function(t, e, i, r) {
                return -i * (t /= r) * (t - 2) + e
            },
            easeInOutQuad: function(t, e, i, r) {
                return (t /= r / 2) < 1 ? i / 2 * t * t + e : -i / 2 * (--t * (t - 2) - 1) + e
            },
            easeInCubic: function(t, e, i, r) {
                return i * (t /= r) * t * t + e
            },
            easeOutCubic: function(t, e, i, r) {
                return i * ((t = t / r - 1) * t * t + 1) + e
            },
            easeInOutCubic: function(t, e, i, r) {
                return (t /= r / 2) < 1 ? i / 2 * t * t * t + e : i / 2 * ((t -= 2) * t * t + 2) + e
            },
            easeInQuart: function(t, e, i, r) {
                return i * (t /= r) * t * t * t + e
            },
            easeOutQuart: function(t, e, i, r) {
                return -i * ((t = t / r - 1) * t * t * t - 1) + e
            },
            easeInOutQuart: function(t, e, i, r) {
                return (t /= r / 2) < 1 ? i / 2 * t * t * t * t + e : -i / 2 * ((t -= 2) * t * t * t - 2) + e
            },
            easeInQuint: function(t, e, i, r) {
                return i * (t /= r) * t * t * t * t + e
            },
            easeOutQuint: function(t, e, i, r) {
                return i * ((t = t / r - 1) * t * t * t * t + 1) + e
            },
            easeInOutQuint: function(t, e, i, r) {
                return (t /= r / 2) < 1 ? i / 2 * t * t * t * t * t + e : i / 2 * ((t -= 2) * t * t * t * t + 2) + e
            },
            easeInSine: function(t, e, i, r) {
                return -i * Math.cos(t / r * (Math.PI / 2)) + i + e
            },
            easeOutSine: function(t, e, i, r) {
                return i * Math.sin(t / r * (Math.PI / 2)) + e
            },
            easeInOutSine: function(t, e, i, r) {
                return -i / 2 * (Math.cos(Math.PI * t / r) - 1) + e
            },
            easeInExpo: function(t, e, i, r) {
                return 0 === t ? e : i * Math.pow(2, 10 * (t / r - 1)) + e
            },
            easeOutExpo: function(t, e, i, r) {
                return t === r ? e + i : i * (1 - Math.pow(2, -10 * t / r)) + e
            },
            easeInOutExpo: function(t, e, i, r) {
                return 0 === t ? e : t === r ? e + i : (t /= r / 2) < 1 ? i / 2 * Math.pow(2, 10 * (t - 1)) + e : i / 2 * (2 - Math.pow(2, -10 * --t)) + e
            },
            easeInCirc: function(t, e, i, r) {
                return -i * (Math.sqrt(1 - (t /= r) * t) - 1) + e
            },
            easeOutCirc: function(t, e, i, r) {
                return i * Math.sqrt(1 - (t = t / r - 1) * t) + e
            },
            easeInOutCirc: function(t, e, i, r) {
                return (t /= r / 2) < 1 ? -i / 2 * (Math.sqrt(1 - t * t) - 1) + e : i / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + e
            },
            easeInElastic: function(t, e, i, r) {
                var n = 0;
                return 0 === t ? e : 1 == (t /= r) ? e + i : (n || (n = .3 * r), -a(o(i, i, n, 1.70158), t, r) + e)
            },
            easeOutElastic: function(t, e, i, r) {
                var n = 0;
                if (0 === t) return e;
                if (1 == (t /= r)) return e + i;
                n || (n = .3 * r);
                var s = o(i, i, n, 1.70158);
                return s.a * Math.pow(2, -10 * t) * Math.sin((t * r - s.s) * (2 * Math.PI) / s.p) + s.c + e
            },
            easeInOutElastic: function(t, e, i, r) {
                var n = 0;
                if (0 === t) return e;
                if (2 == (t /= r / 2)) return e + i;
                n || (n = r * (.3 * 1.5));
                var s = o(i, i, n, 1.70158);
                return t < 1 ? -.5 * a(s, t, r) + e : s.a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * r - s.s) * (2 * Math.PI) / s.p) * .5 + s.c + e
            },
            easeInBack: function(t, e, i, r, n) {
                return void 0 === n && (n = 1.70158), i * (t /= r) * t * ((n + 1) * t - n) + e
            },
            easeOutBack: function(t, e, i, r, n) {
                return void 0 === n && (n = 1.70158), i * ((t = t / r - 1) * t * ((n + 1) * t + n) + 1) + e
            },
            easeInOutBack: function(t, e, i, r, n) {
                return void 0 === n && (n = 1.70158), (t /= r / 2) < 1 ? i / 2 * (t * t * ((1 + (n *= 1.525)) * t - n)) + e : i / 2 * ((t -= 2) * t * ((1 + (n *= 1.525)) * t + n) + 2) + e
            },
            easeInBounce: n,
            easeOutBounce: s,
            easeInOutBounce: function(t, e, i, r) {
                return t < r / 2 ? .5 * n(2 * t, 0, i, r) + e : .5 * s(2 * t - r, 0, i, r) + .5 * i + e
            }
        }
    }(),
    function(t) {
        "use strict";
        var C = t.fabric || (t.fabric = {}),
            d = C.util.object.extend,
            u = C.util.object.clone,
            g = C.util.toFixed,
            S = C.util.parseUnit,
            h = C.util.multiplyTransformMatrices,
            p = {
                cx: "left",
                x: "left",
                r: "radius",
                cy: "top",
                y: "top",
                display: "visible",
                visibility: "visible",
                transform: "transformMatrix",
                "fill-opacity": "fillOpacity",
                "fill-rule": "fillRule",
                "font-family": "fontFamily",
                "font-size": "fontSize",
                "font-style": "fontStyle",
                "font-weight": "fontWeight",
                "letter-spacing": "charSpacing",
                "paint-order": "paintFirst",
                "stroke-dasharray": "strokeDashArray",
                "stroke-linecap": "strokeLineCap",
                "stroke-linejoin": "strokeLineJoin",
                "stroke-miterlimit": "strokeMiterLimit",
                "stroke-opacity": "strokeOpacity",
                "stroke-width": "strokeWidth",
                "text-decoration": "textDecoration",
                "text-anchor": "textAnchor",
                opacity: "opacity"
            },
            v = {
                stroke: "strokeOpacity",
                fill: "fillOpacity"
            };

        function m(t, e, i, r) {
            var n, s = "[object Array]" === Object.prototype.toString.call(e);
            if ("fill" !== t && "stroke" !== t || "none" !== e)
                if ("strokeDashArray" === t) e = "none" === e ? null : e.replace(/,/g, " ").split(/\s+/).map(function(t) {
                    return parseFloat(t)
                });
                else if ("transformMatrix" === t) e = i && i.transformMatrix ? h(i.transformMatrix, C.parseTransformAttribute(e)) : C.parseTransformAttribute(e);
            else if ("visible" === t) e = "none" !== e && "hidden" !== e, i && !1 === i.visible && (e = !1);
            else if ("opacity" === t) e = parseFloat(e), i && void 0 !== i.opacity && (e *= i.opacity);
            else if ("textAnchor" === t) e = "start" === e ? "left" : "end" === e ? "right" : "center";
            else if ("charSpacing" === t) n = S(e, r) / r * 1e3;
            else if ("paintFirst" === t) {
                var o = e.indexOf("fill"),
                    a = e.indexOf("stroke");
                e = "fill"; - 1 < o && -1 < a && a < o ? e = "stroke" : -1 === o && -1 < a && (e = "stroke")
            } else n = s ? e.map(S) : S(e, r);
            else e = "";
            return !s && isNaN(n) ? e : n
        }

        function e(t) {
            return new RegExp("^(" + t.join("|") + ")\\b", "i")
        }

        function b(t, e) {
            var i, r, n, s, o = [];
            for (n = 0, s = e.length; n < s; n++) i = e[n], r = t.getElementsByTagName(i), o = o.concat(Array.prototype.slice.call(r));
            return o
        }

        function _(t, e) {
            var i, r = !0;
            return (i = n(t, e.pop())) && e.length && (r = function(t, e) {
                var i, r = !0;
                for (; t.parentNode && 1 === t.parentNode.nodeType && e.length;) r && (i = e.pop()), t = t.parentNode, r = n(t, i);
                return 0 === e.length
            }(t, e)), i && r && 0 === e.length
        }

        function n(t, e) {
            var i, r, n = t.nodeName,
                s = t.getAttribute("class"),
                o = t.getAttribute("id");
            if (i = new RegExp("^" + n, "i"), e = e.replace(i, ""), o && e.length && (i = new RegExp("#" + o + "(?![a-zA-Z\\-]+)", "i"), e = e.replace(i, "")), s && e.length)
                for (r = (s = s.split(" ")).length; r--;) i = new RegExp("\\." + s[r] + "(?![a-zA-Z\\-]+)", "i"), e = e.replace(i, "");
            return 0 === e.length
        }

        function y(t, e) {
            var i;
            if (t.getElementById && (i = t.getElementById(e)), i) return i;
            var r, n, s, o = t.getElementsByTagName("*");
            for (n = 0, s = o.length; n < s; n++)
                if (e === (r = o[n]).getAttribute("id")) return r
        }
        C.svgValidTagNamesRegEx = e(["path", "circle", "polygon", "polyline", "ellipse", "rect", "line", "image", "text", "linearGradient", "radialGradient", "stop"]), C.svgViewBoxElementsRegEx = e(["symbol", "image", "marker", "pattern", "view", "svg"]), C.svgInvalidAncestorsRegEx = e(["pattern", "defs", "symbol", "metadata", "clipPath", "mask", "desc"]), C.svgValidParentsRegEx = e(["symbol", "g", "a", "svg"]), C.cssRules = {}, C.gradientDefs = {}, C.parseTransformAttribute = function() {
            function b(t, e, i) {
                t[i] = Math.tan(C.util.degreesToRadians(e[0]))
            }
            var _ = [1, 0, 0, 1, 0, 0],
                t = C.reNum,
                e = "(?:\\s+,?\\s*|,\\s*)",
                y = "(?:" + ("(?:(matrix)\\s*\\(\\s*(" + t + ")" + e + "(" + t + ")" + e + "(" + t + ")" + e + "(" + t + ")" + e + "(" + t + ")" + e + "(" + t + ")\\s*\\))") + "|" + ("(?:(translate)\\s*\\(\\s*(" + t + ")(?:" + e + "(" + t + "))?\\s*\\))") + "|" + ("(?:(scale)\\s*\\(\\s*(" + t + ")(?:" + e + "(" + t + "))?\\s*\\))") + "|" + ("(?:(rotate)\\s*\\(\\s*(" + t + ")(?:" + e + "(" + t + ")" + e + "(" + t + "))?\\s*\\))") + "|" + ("(?:(skewX)\\s*\\(\\s*(" + t + ")\\s*\\))") + "|" + ("(?:(skewY)\\s*\\(\\s*(" + t + ")\\s*\\))") + ")",
                i = new RegExp("^\\s*(?:" + ("(?:" + y + "(?:" + e + "*" + y + ")*)") + "?)\\s*$"),
                r = new RegExp(y, "g");
            return function(t) {
                var v = _.concat(),
                    m = [];
                if (!t || t && !i.test(t)) return v;
                t.replace(r, function(t) {
                    var e, i, r, n, s, o, a, h, c, l, u, f, d = new RegExp(y).exec(t).filter(function(t) {
                            return !!t
                        }),
                        g = d[1],
                        p = d.slice(2).map(parseFloat);
                    switch (g) {
                        case "translate":
                            f = p, (u = v)[4] = f[0], 2 === f.length && (u[5] = f[1]);
                            break;
                        case "rotate":
                            p[0] = C.util.degreesToRadians(p[0]), s = v, o = p, a = C.util.cos(o[0]), h = C.util.sin(o[0]), l = c = 0, 3 === o.length && (c = o[1], l = o[2]), s[0] = a, s[1] = h, s[2] = -h, s[3] = a, s[4] = c - (a * c - h * l), s[5] = l - (h * c + a * l);
                            break;
                        case "scale":
                            e = v, r = (i = p)[0], n = 2 === i.length ? i[1] : i[0], e[0] = r, e[3] = n;
                            break;
                        case "skewX":
                            b(v, p, 2);
                            break;
                        case "skewY":
                            b(v, p, 1);
                            break;
                        case "matrix":
                            v = p
                    }
                    m.push(v.concat()), v = _.concat()
                });
                for (var e = m[0]; 1 < m.length;) m.shift(), e = C.util.multiplyTransformMatrices(e, m[0]);
                return e
            }
        }();
        var w = new RegExp("^\\s*(" + C.reNum + "+)\\s*,?\\s*(" + C.reNum + "+)\\s*,?\\s*(" + C.reNum + "+)\\s*,?\\s*(" + C.reNum + "+)\\s*$");

        function x(t) {
            var e, i, r, n, s, o, a = t.getAttribute("viewBox"),
                h = 1,
                c = 1,
                l = t.getAttribute("width"),
                u = t.getAttribute("height"),
                f = t.getAttribute("x") || 0,
                d = t.getAttribute("y") || 0,
                g = t.getAttribute("preserveAspectRatio") || "",
                p = !a || !C.svgViewBoxElementsRegEx.test(t.nodeName) || !(a = a.match(w)),
                v = !l || !u || "100%" === l || "100%" === u,
                m = p && v,
                b = {},
                _ = "",
                y = 0,
                x = 0;
            if (b.width = 0, b.height = 0, b.toBeParsed = m) return b;
            if (p) return b.width = S(l), b.height = S(u), b;
            if (e = -parseFloat(a[1]), i = -parseFloat(a[2]), r = parseFloat(a[3]), n = parseFloat(a[4]), v ? (b.width = r, b.height = n) : (b.width = S(l), b.height = S(u), h = b.width / r, c = b.height / n), "none" !== (g = C.util.parsePreserveAspectRatioAttribute(g)).alignX && ("meet" === g.meetOrSlice && (c = h = c < h ? c : h), "slice" === g.meetOrSlice && (c = h = c < h ? h : c), y = b.width - r * h, x = b.height - n * h, "Mid" === g.alignX && (y /= 2), "Mid" === g.alignY && (x /= 2), "Min" === g.alignX && (y = 0), "Min" === g.alignY && (x = 0)), 1 === h && 1 === c && 0 === e && 0 === i && 0 === f && 0 === d) return b;
            if ((f || d) && (_ = " translate(" + S(f) + " " + S(d) + ") "), s = _ + " matrix(" + h + " 0 0 " + c + " " + (e * h + y) + " " + (i * c + x) + ") ", "svg" === t.nodeName) {
                for (o = t.ownerDocument.createElement("g"); t.firstChild;) o.appendChild(t.firstChild);
                t.appendChild(o)
            } else s = (o = t).getAttribute("transform") + s;
            return o.setAttribute("transform", s), b
        }
        C.parseSVGDocument = function(t, i, e, r) {
            if (t) {
                ! function(t) {
                    for (var e = b(t, ["use", "svg:use"]), i = 0; e.length && i < e.length;) {
                        var r, n, s, o, a = e[i],
                            h = a.getAttribute("xlink:href").substr(1),
                            c = a.getAttribute("x") || 0,
                            l = a.getAttribute("y") || 0,
                            u = y(t, h).cloneNode(!0),
                            f = (u.getAttribute("transform") || "") + " translate(" + c + ", " + l + ")",
                            d = e.length;
                        if (x(u), /^svg$/i.test(u.nodeName)) {
                            var g = u.ownerDocument.createElement("g");
                            for (n = 0, o = (s = u.attributes).length; n < o; n++) r = s.item(n), g.setAttribute(r.nodeName, r.nodeValue);
                            for (; u.firstChild;) g.appendChild(u.firstChild);
                            u = g
                        }
                        for (n = 0, o = (s = a.attributes).length; n < o; n++) "x" !== (r = s.item(n)).nodeName && "y" !== r.nodeName && "xlink:href" !== r.nodeName && ("transform" === r.nodeName ? f = r.nodeValue + " " + f : u.setAttribute(r.nodeName, r.nodeValue));
                        u.setAttribute("transform", f), u.setAttribute("instantiated_by_use", "1"), u.removeAttribute("id"), a.parentNode.replaceChild(u, a), e.length === d && i++
                    }
                }(t);
                var n, s, o = C.Object.__uid++,
                    a = x(t),
                    h = C.util.toArray(t.getElementsByTagName("*"));
                if (a.crossOrigin = r && r.crossOrigin, a.svgUid = o, 0 === h.length && C.isLikelyNode) {
                    var c = [];
                    for (n = 0, s = (h = t.selectNodes('//*[name(.)!="svg"]')).length; n < s; n++) c[n] = h[n];
                    h = c
                }
                var l = h.filter(function(t) {
                    return x(t), C.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:", "")) && ! function(t, e) {
                        for (; t && (t = t.parentNode);)
                            if (t.nodeName && e.test(t.nodeName.replace("svg:", "")) && !t.getAttribute("instantiated_by_use")) return !0;
                        return !1
                    }(t, C.svgInvalidAncestorsRegEx)
                });
                !l || l && !l.length ? i && i([], {}) : (C.gradientDefs[o] = C.getGradientDefs(t), C.cssRules[o] = C.getCSSRules(t), C.parseElements(l, function(t, e) {
                    i && i(t, a, e, h)
                }, u(a), e, r))
            }
        };
        var c = new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*(" + C.reNum + "(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|" + C.reNum + "))?\\s+(.*)");
        d(C, {
            parseFontDeclaration: function(t, e) {
                var i = t.match(c);
                if (i) {
                    var r = i[1],
                        n = i[3],
                        s = i[4],
                        o = i[5],
                        a = i[6];
                    r && (e.fontStyle = r), n && (e.fontWeight = isNaN(parseFloat(n)) ? n : parseFloat(n)), s && (e.fontSize = S(s)), a && (e.fontFamily = a), o && (e.lineHeight = "normal" === o ? 1 : o)
                }
            },
            getGradientDefs: function(t) {
                var e, i, r, n = b(t, ["linearGradient", "radialGradient", "svg:linearGradient", "svg:radialGradient"]),
                    s = 0,
                    o = {},
                    a = {};
                for (s = n.length; s--;) r = (e = n[s]).getAttribute("xlink:href"), i = e.getAttribute("id"), r && (a[i] = r.substr(1)), o[i] = e;
                for (i in a) {
                    var h = o[a[i]].cloneNode(!0);
                    for (e = o[i]; h.firstChild;) e.appendChild(h.firstChild)
                }
                return o
            },
            parseAttributes: function(i, t, e) {
                if (i) {
                    var r, n, s = {};
                    void 0 === e && (e = i.getAttribute("svgUid")), i.parentNode && C.svgValidParentsRegEx.test(i.parentNode.nodeName) && (s = C.parseAttributes(i.parentNode, t, e)), n = s && s.fontSize || i.getAttribute("font-size") || C.Text.DEFAULT_SVG_FONT_SIZE;
                    var o = t.reduce(function(t, e) {
                        return (r = i.getAttribute(e)) && (t[e] = r), t
                    }, {});
                    o = d(o, d(function(t, e) {
                        var i = {};
                        for (var r in C.cssRules[e])
                            if (_(t, r.split(" ")))
                                for (var n in C.cssRules[e][r]) i[n] = C.cssRules[e][r][n];
                        return i
                    }(i, e), C.parseStyleAttribute(i)));
                    var a, h, c, l = {};
                    for (var u in o) h = m(a = (c = u) in p ? p[c] : c, o[u], s, n), l[a] = h;
                    l && l.font && C.parseFontDeclaration(l.font, l);
                    var f = d(s, l);
                    return C.svgValidParentsRegEx.test(i.nodeName) ? f : function(t) {
                        for (var e in v)
                            if (void 0 !== t[v[e]] && "" !== t[e]) {
                                if (void 0 === t[e]) {
                                    if (!C.Object.prototype[e]) continue;
                                    t[e] = C.Object.prototype[e]
                                }
                                if (0 !== t[e].indexOf("url(")) {
                                    var i = new C.Color(t[e]);
                                    t[e] = i.setAlpha(g(i.getAlpha() * t[v[e]], 2)).toRgba()
                                }
                            } return t
                    }(f)
                }
            },
            parseElements: function(t, e, i, r, n) {
                new C.ElementsParser(t, e, i, r, n).parse()
            },
            parseStyleAttribute: function(t) {
                var i, r, n, e = {},
                    s = t.getAttribute("style");
                return s && ("string" == typeof s ? (i = e, s.replace(/;\s*$/, "").split(";").forEach(function(t) {
                    var e = t.split(":");
                    r = e[0].trim().toLowerCase(), n = e[1].trim(), i[r] = n
                })) : function(t, e) {
                    var i, r;
                    for (var n in t) void 0 !== t[n] && (i = n.toLowerCase(), r = t[n], e[i] = r)
                }(s, e)), e
            },
            parsePointsAttribute: function(t) {
                if (!t) return null;
                var e, i, r = [];
                for (e = 0, i = (t = (t = t.replace(/,/g, " ").trim()).split(/\s+/)).length; e < i; e += 2) r.push({
                    x: parseFloat(t[e]),
                    y: parseFloat(t[e + 1])
                });
                return r
            },
            getCSSRules: function(t) {
                var a, h, e = t.getElementsByTagName("style"),
                    c = {};
                for (a = 0, h = e.length; a < h; a++) {
                    var i = e[a].textContent || e[a].text;
                    "" !== (i = i.replace(/\/\*[\s\S]*?\*\//g, "")).trim() && i.match(/[^{]*\{[\s\S]*?\}/g).map(function(t) {
                        return t.trim()
                    }).forEach(function(t) {
                        var e = t.match(/([\s\S]*?)\s*\{([^}]*)\}/),
                            i = {},
                            r = e[2].trim().replace(/;$/, "").split(/\s*;\s*/);
                        for (a = 0, h = r.length; a < h; a++) {
                            var n = r[a].split(/\s*:\s*/),
                                s = n[0],
                                o = n[1];
                            i[s] = o
                        }(t = e[1]).split(",").forEach(function(t) {
                            "" !== (t = t.replace(/^svg/i, "").trim()) && (c[t] ? C.util.object.extend(c[t], i) : c[t] = C.util.object.clone(i))
                        })
                    })
                }
                return c
            },
            loadSVGFromURL: function(t, n, i, r) {
                t = t.replace(/^\n\s*/, "").trim(), new C.util.request(t, {
                    method: "get",
                    onComplete: function(t) {
                        var e = t.responseXML;
                        e && !e.documentElement && C.window.ActiveXObject && t.responseText && ((e = new ActiveXObject("Microsoft.XMLDOM")).async = "false", e.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, "")));
                        e && e.documentElement || n && n(null);
                        C.parseSVGDocument(e.documentElement, function(t, e, i, r) {
                            n && n(t, e, i, r)
                        }, i, r)
                    }
                })
            },
            loadSVGFromString: function(t, n, e, i) {
                var r;
                if (t = t.trim(), "undefined" != typeof DOMParser) {
                    var s = new DOMParser;
                    s && s.parseFromString && (r = s.parseFromString(t, "text/xml"))
                } else C.window.ActiveXObject && ((r = new ActiveXObject("Microsoft.XMLDOM")).async = "false", r.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, "")));
                C.parseSVGDocument(r.documentElement, function(t, e, i, r) {
                    n(t, e, i, r)
                }, e, i)
            }
        })
    }("undefined" != typeof exports ? exports : this), fabric.ElementsParser = function(t, e, i, r, n) {
        this.elements = t, this.callback = e, this.options = i, this.reviver = r, this.svgUid = i && i.svgUid || 0, this.parsingOptions = n, this.regexUrl = /^url\(['"]?#([^'"]+)['"]?\)/g
    }, fabric.ElementsParser.prototype.parse = function() {
        this.instances = new Array(this.elements.length), this.numElements = this.elements.length, this.createObjects()
    }, fabric.ElementsParser.prototype.createObjects = function() {
        for (var t = 0, e = this.elements.length; t < e; t++) this.elements[t].setAttribute("svgUid", this.svgUid),
            function(t, e) {
                setTimeout(function() {
                    t.createObject(t.elements[e], e)
                }, 0)
            }(this, t)
    }, fabric.ElementsParser.prototype.createObject = function(t, e) {
        var i = fabric[fabric.util.string.capitalize(t.tagName.replace("svg:", ""))];
        if (i && i.fromElement) try {
            this._createObject(i, t, e)
        } catch (t) {
            fabric.log(t)
        } else this.checkIfDone()
    }, fabric.ElementsParser.prototype._createObject = function(t, e, i) {
        t.fromElement(e, this.createCallback(i, e), this.options)
    }, fabric.ElementsParser.prototype.createCallback = function(i, r) {
        var n = this;
        return function(t) {
            var e;
            n.resolveGradient(t, "fill"), n.resolveGradient(t, "stroke"), t instanceof fabric.Image && (e = t.parsePreserveAspectRatioAttribute(r)), t._removeTransformMatrix(e), n.reviver && n.reviver(r, t), n.instances[i] = t, n.checkIfDone()
        }
    }, fabric.ElementsParser.prototype.resolveGradient = function(t, e) {
        var i = t[e];
        if (/^url\(/.test(i)) {
            var r = this.regexUrl.exec(i)[1];
            this.regexUrl.lastIndex = 0, fabric.gradientDefs[this.svgUid][r] && t.set(e, fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][r], t))
        }
    }, fabric.ElementsParser.prototype.checkIfDone = function() {
        0 == --this.numElements && (this.instances = this.instances.filter(function(t) {
            return null != t
        }), this.callback(this.instances, this.elements))
    },
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {});

        function i(t, e) {
            this.x = t, this.y = e
        }
        e.Point ? e.warn("fabric.Point is already defined") : (e.Point = i).prototype = {
            type: "point",
            constructor: i,
            add: function(t) {
                return new i(this.x + t.x, this.y + t.y)
            },
            addEquals: function(t) {
                return this.x += t.x, this.y += t.y, this
            },
            scalarAdd: function(t) {
                return new i(this.x + t, this.y + t)
            },
            scalarAddEquals: function(t) {
                return this.x += t, this.y += t, this
            },
            subtract: function(t) {
                return new i(this.x - t.x, this.y - t.y)
            },
            subtractEquals: function(t) {
                return this.x -= t.x, this.y -= t.y, this
            },
            scalarSubtract: function(t) {
                return new i(this.x - t, this.y - t)
            },
            scalarSubtractEquals: function(t) {
                return this.x -= t, this.y -= t, this
            },
            multiply: function(t) {
                return new i(this.x * t, this.y * t)
            },
            multiplyEquals: function(t) {
                return this.x *= t, this.y *= t, this
            },
            divide: function(t) {
                return new i(this.x / t, this.y / t)
            },
            divideEquals: function(t) {
                return this.x /= t, this.y /= t, this
            },
            eq: function(t) {
                return this.x === t.x && this.y === t.y
            },
            lt: function(t) {
                return this.x < t.x && this.y < t.y
            },
            lte: function(t) {
                return this.x <= t.x && this.y <= t.y
            },
            gt: function(t) {
                return this.x > t.x && this.y > t.y
            },
            gte: function(t) {
                return this.x >= t.x && this.y >= t.y
            },
            lerp: function(t, e) {
                return void 0 === e && (e = .5), e = Math.max(Math.min(1, e), 0), new i(this.x + (t.x - this.x) * e, this.y + (t.y - this.y) * e)
            },
            distanceFrom: function(t) {
                var e = this.x - t.x,
                    i = this.y - t.y;
                return Math.sqrt(e * e + i * i)
            },
            midPointFrom: function(t) {
                return this.lerp(t)
            },
            min: function(t) {
                return new i(Math.min(this.x, t.x), Math.min(this.y, t.y))
            },
            max: function(t) {
                return new i(Math.max(this.x, t.x), Math.max(this.y, t.y))
            },
            toString: function() {
                return this.x + "," + this.y
            },
            setXY: function(t, e) {
                return this.x = t, this.y = e, this
            },
            setX: function(t) {
                return this.x = t, this
            },
            setY: function(t) {
                return this.y = t, this
            },
            setFromPoint: function(t) {
                return this.x = t.x, this.y = t.y, this
            },
            swap: function(t) {
                var e = this.x,
                    i = this.y;
                this.x = t.x, this.y = t.y, t.x = e, t.y = i
            },
            clone: function() {
                return new i(this.x, this.y)
            }
        }
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var f = t.fabric || (t.fabric = {});

        function d(t) {
            this.status = t, this.points = []
        }
        f.Intersection ? f.warn("fabric.Intersection is already defined") : (f.Intersection = d, f.Intersection.prototype = {
            constructor: d,
            appendPoint: function(t) {
                return this.points.push(t), this
            },
            appendPoints: function(t) {
                return this.points = this.points.concat(t), this
            }
        }, f.Intersection.intersectLineLine = function(t, e, i, r) {
            var n, s = (r.x - i.x) * (t.y - i.y) - (r.y - i.y) * (t.x - i.x),
                o = (e.x - t.x) * (t.y - i.y) - (e.y - t.y) * (t.x - i.x),
                a = (r.y - i.y) * (e.x - t.x) - (r.x - i.x) * (e.y - t.y);
            if (0 !== a) {
                var h = s / a,
                    c = o / a;
                0 <= h && h <= 1 && 0 <= c && c <= 1 ? (n = new d("Intersection")).appendPoint(new f.Point(t.x + h * (e.x - t.x), t.y + h * (e.y - t.y))) : n = new d
            } else n = new d(0 === s || 0 === o ? "Coincident" : "Parallel");
            return n
        }, f.Intersection.intersectLinePolygon = function(t, e, i) {
            var r, n, s, o, a = new d,
                h = i.length;
            for (o = 0; o < h; o++) r = i[o], n = i[(o + 1) % h], s = d.intersectLineLine(t, e, r, n), a.appendPoints(s.points);
            return 0 < a.points.length && (a.status = "Intersection"), a
        }, f.Intersection.intersectPolygonPolygon = function(t, e) {
            var i, r = new d,
                n = t.length;
            for (i = 0; i < n; i++) {
                var s = t[i],
                    o = t[(i + 1) % n],
                    a = d.intersectLinePolygon(s, o, e);
                r.appendPoints(a.points)
            }
            return 0 < r.points.length && (r.status = "Intersection"), r
        }, f.Intersection.intersectPolygonRectangle = function(t, e, i) {
            var r = e.min(i),
                n = e.max(i),
                s = new f.Point(n.x, r.y),
                o = new f.Point(r.x, n.y),
                a = d.intersectLinePolygon(r, s, t),
                h = d.intersectLinePolygon(s, n, t),
                c = d.intersectLinePolygon(n, o, t),
                l = d.intersectLinePolygon(o, r, t),
                u = new d;
            return u.appendPoints(a.points), u.appendPoints(h.points), u.appendPoints(c.points), u.appendPoints(l.points), 0 < u.points.length && (u.status = "Intersection"), u
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var c = t.fabric || (t.fabric = {});

        function l(t) {
            t ? this._tryParsingColor(t) : this.setSource([0, 0, 0, 1])
        }

        function u(t, e, i) {
            return i < 0 && (i += 1), 1 < i && (i -= 1), i < 1 / 6 ? t + 6 * (e - t) * i : i < .5 ? e : i < 2 / 3 ? t + (e - t) * (2 / 3 - i) * 6 : t
        }
        c.Color ? c.warn("fabric.Color is already defined.") : (c.Color = l, c.Color.prototype = {
            _tryParsingColor: function(t) {
                var e;
                t in l.colorNameMap && (t = l.colorNameMap[t]), "transparent" === t && (e = [255, 255, 255, 0]), e || (e = l.sourceFromHex(t)), e || (e = l.sourceFromRgb(t)), e || (e = l.sourceFromHsl(t)), e || (e = [0, 0, 0, 1]), e && this.setSource(e)
            },
            _rgbToHsl: function(t, e, i) {
                t /= 255, e /= 255, i /= 255;
                var r, n, s, o = c.util.array.max([t, e, i]),
                    a = c.util.array.min([t, e, i]);
                if (s = (o + a) / 2, o === a) r = n = 0;
                else {
                    var h = o - a;
                    switch (n = .5 < s ? h / (2 - o - a) : h / (o + a), o) {
                        case t:
                            r = (e - i) / h + (e < i ? 6 : 0);
                            break;
                        case e:
                            r = (i - t) / h + 2;
                            break;
                        case i:
                            r = (t - e) / h + 4
                    }
                    r /= 6
                }
                return [Math.round(360 * r), Math.round(100 * n), Math.round(100 * s)]
            },
            getSource: function() {
                return this._source
            },
            setSource: function(t) {
                this._source = t
            },
            toRgb: function() {
                var t = this.getSource();
                return "rgb(" + t[0] + "," + t[1] + "," + t[2] + ")"
            },
            toRgba: function() {
                var t = this.getSource();
                return "rgba(" + t[0] + "," + t[1] + "," + t[2] + "," + t[3] + ")"
            },
            toHsl: function() {
                var t = this.getSource(),
                    e = this._rgbToHsl(t[0], t[1], t[2]);
                return "hsl(" + e[0] + "," + e[1] + "%," + e[2] + "%)"
            },
            toHsla: function() {
                var t = this.getSource(),
                    e = this._rgbToHsl(t[0], t[1], t[2]);
                return "hsla(" + e[0] + "," + e[1] + "%," + e[2] + "%," + t[3] + ")"
            },
            toHex: function() {
                var t, e, i, r = this.getSource();
                return t = 1 === (t = r[0].toString(16)).length ? "0" + t : t, e = 1 === (e = r[1].toString(16)).length ? "0" + e : e, i = 1 === (i = r[2].toString(16)).length ? "0" + i : i, t.toUpperCase() + e.toUpperCase() + i.toUpperCase()
            },
            toHexa: function() {
                var t, e = this.getSource();
                return t = 1 === (t = (t = Math.round(255 * e[3])).toString(16)).length ? "0" + t : t, this.toHex() + t.toUpperCase()
            },
            getAlpha: function() {
                return this.getSource()[3]
            },
            setAlpha: function(t) {
                var e = this.getSource();
                return e[3] = t, this.setSource(e), this
            },
            toGrayscale: function() {
                var t = this.getSource(),
                    e = parseInt((.3 * t[0] + .59 * t[1] + .11 * t[2]).toFixed(0), 10),
                    i = t[3];
                return this.setSource([e, e, e, i]), this
            },
            toBlackWhite: function(t) {
                var e = this.getSource(),
                    i = (.3 * e[0] + .59 * e[1] + .11 * e[2]).toFixed(0),
                    r = e[3];
                return t = t || 127, i = Number(i) < Number(t) ? 0 : 255, this.setSource([i, i, i, r]), this
            },
            overlayWith: function(t) {
                t instanceof l || (t = new l(t));
                var e, i = [],
                    r = this.getAlpha(),
                    n = this.getSource(),
                    s = t.getSource();
                for (e = 0; e < 3; e++) i.push(Math.round(.5 * n[e] + .5 * s[e]));
                return i[3] = r, this.setSource(i), this
            }
        }, c.Color.reRGBa = /^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i, c.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i, c.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i, c.Color.colorNameMap = {
            aliceblue: "#F0F8FF",
            antiquewhite: "#FAEBD7",
            aqua: "#00FFFF",
            aquamarine: "#7FFFD4",
            azure: "#F0FFFF",
            beige: "#F5F5DC",
            bisque: "#FFE4C4",
            black: "#000000",
            blanchedalmond: "#FFEBCD",
            blue: "#0000FF",
            blueviolet: "#8A2BE2",
            brown: "#A52A2A",
            burlywood: "#DEB887",
            cadetblue: "#5F9EA0",
            chartreuse: "#7FFF00",
            chocolate: "#D2691E",
            coral: "#FF7F50",
            cornflowerblue: "#6495ED",
            cornsilk: "#FFF8DC",
            crimson: "#DC143C",
            cyan: "#00FFFF",
            darkblue: "#00008B",
            darkcyan: "#008B8B",
            darkgoldenrod: "#B8860B",
            darkgray: "#A9A9A9",
            darkgrey: "#A9A9A9",
            darkgreen: "#006400",
            darkkhaki: "#BDB76B",
            darkmagenta: "#8B008B",
            darkolivegreen: "#556B2F",
            darkorange: "#FF8C00",
            darkorchid: "#9932CC",
            darkred: "#8B0000",
            darksalmon: "#E9967A",
            darkseagreen: "#8FBC8F",
            darkslateblue: "#483D8B",
            darkslategray: "#2F4F4F",
            darkslategrey: "#2F4F4F",
            darkturquoise: "#00CED1",
            darkviolet: "#9400D3",
            deeppink: "#FF1493",
            deepskyblue: "#00BFFF",
            dimgray: "#696969",
            dimgrey: "#696969",
            dodgerblue: "#1E90FF",
            firebrick: "#B22222",
            floralwhite: "#FFFAF0",
            forestgreen: "#228B22",
            fuchsia: "#FF00FF",
            gainsboro: "#DCDCDC",
            ghostwhite: "#F8F8FF",
            gold: "#FFD700",
            goldenrod: "#DAA520",
            gray: "#808080",
            grey: "#808080",
            green: "#008000",
            greenyellow: "#ADFF2F",
            honeydew: "#F0FFF0",
            hotpink: "#FF69B4",
            indianred: "#CD5C5C",
            indigo: "#4B0082",
            ivory: "#FFFFF0",
            khaki: "#F0E68C",
            lavender: "#E6E6FA",
            lavenderblush: "#FFF0F5",
            lawngreen: "#7CFC00",
            lemonchiffon: "#FFFACD",
            lightblue: "#ADD8E6",
            lightcoral: "#F08080",
            lightcyan: "#E0FFFF",
            lightgoldenrodyellow: "#FAFAD2",
            lightgray: "#D3D3D3",
            lightgrey: "#D3D3D3",
            lightgreen: "#90EE90",
            lightpink: "#FFB6C1",
            lightsalmon: "#FFA07A",
            lightseagreen: "#20B2AA",
            lightskyblue: "#87CEFA",
            lightslategray: "#778899",
            lightslategrey: "#778899",
            lightsteelblue: "#B0C4DE",
            lightyellow: "#FFFFE0",
            lime: "#00FF00",
            limegreen: "#32CD32",
            linen: "#FAF0E6",
            magenta: "#FF00FF",
            maroon: "#800000",
            mediumaquamarine: "#66CDAA",
            mediumblue: "#0000CD",
            mediumorchid: "#BA55D3",
            mediumpurple: "#9370DB",
            mediumseagreen: "#3CB371",
            mediumslateblue: "#7B68EE",
            mediumspringgreen: "#00FA9A",
            mediumturquoise: "#48D1CC",
            mediumvioletred: "#C71585",
            midnightblue: "#191970",
            mintcream: "#F5FFFA",
            mistyrose: "#FFE4E1",
            moccasin: "#FFE4B5",
            navajowhite: "#FFDEAD",
            navy: "#000080",
            oldlace: "#FDF5E6",
            olive: "#808000",
            olivedrab: "#6B8E23",
            orange: "#FFA500",
            orangered: "#FF4500",
            orchid: "#DA70D6",
            palegoldenrod: "#EEE8AA",
            palegreen: "#98FB98",
            paleturquoise: "#AFEEEE",
            palevioletred: "#DB7093",
            papayawhip: "#FFEFD5",
            peachpuff: "#FFDAB9",
            peru: "#CD853F",
            pink: "#FFC0CB",
            plum: "#DDA0DD",
            powderblue: "#B0E0E6",
            purple: "#800080",
            rebeccapurple: "#663399",
            red: "#FF0000",
            rosybrown: "#BC8F8F",
            royalblue: "#4169E1",
            saddlebrown: "#8B4513",
            salmon: "#FA8072",
            sandybrown: "#F4A460",
            seagreen: "#2E8B57",
            seashell: "#FFF5EE",
            sienna: "#A0522D",
            silver: "#C0C0C0",
            skyblue: "#87CEEB",
            slateblue: "#6A5ACD",
            slategray: "#708090",
            slategrey: "#708090",
            snow: "#FFFAFA",
            springgreen: "#00FF7F",
            steelblue: "#4682B4",
            tan: "#D2B48C",
            teal: "#008080",
            thistle: "#D8BFD8",
            tomato: "#FF6347",
            turquoise: "#40E0D0",
            violet: "#EE82EE",
            wheat: "#F5DEB3",
            white: "#FFFFFF",
            whitesmoke: "#F5F5F5",
            yellow: "#FFFF00",
            yellowgreen: "#9ACD32"
        }, c.Color.fromRgb = function(t) {
            return l.fromSource(l.sourceFromRgb(t))
        }, c.Color.sourceFromRgb = function(t) {
            var e = t.match(l.reRGBa);
            if (e) {
                var i = parseInt(e[1], 10) / (/%$/.test(e[1]) ? 100 : 1) * (/%$/.test(e[1]) ? 255 : 1),
                    r = parseInt(e[2], 10) / (/%$/.test(e[2]) ? 100 : 1) * (/%$/.test(e[2]) ? 255 : 1),
                    n = parseInt(e[3], 10) / (/%$/.test(e[3]) ? 100 : 1) * (/%$/.test(e[3]) ? 255 : 1);
                return [parseInt(i, 10), parseInt(r, 10), parseInt(n, 10), e[4] ? parseFloat(e[4]) : 1]
            }
        }, c.Color.fromRgba = l.fromRgb, c.Color.fromHsl = function(t) {
            return l.fromSource(l.sourceFromHsl(t))
        }, c.Color.sourceFromHsl = function(t) {
            var e = t.match(l.reHSLa);
            if (e) {
                var i, r, n, s = (parseFloat(e[1]) % 360 + 360) % 360 / 360,
                    o = parseFloat(e[2]) / (/%$/.test(e[2]) ? 100 : 1),
                    a = parseFloat(e[3]) / (/%$/.test(e[3]) ? 100 : 1);
                if (0 === o) i = r = n = a;
                else {
                    var h = a <= .5 ? a * (o + 1) : a + o - a * o,
                        c = 2 * a - h;
                    i = u(c, h, s + 1 / 3), r = u(c, h, s), n = u(c, h, s - 1 / 3)
                }
                return [Math.round(255 * i), Math.round(255 * r), Math.round(255 * n), e[4] ? parseFloat(e[4]) : 1]
            }
        }, c.Color.fromHsla = l.fromHsl, c.Color.fromHex = function(t) {
            return l.fromSource(l.sourceFromHex(t))
        }, c.Color.sourceFromHex = function(t) {
            if (t.match(l.reHex)) {
                var e = t.slice(t.indexOf("#") + 1),
                    i = 3 === e.length || 4 === e.length,
                    r = 8 === e.length || 4 === e.length,
                    n = i ? e.charAt(0) + e.charAt(0) : e.substring(0, 2),
                    s = i ? e.charAt(1) + e.charAt(1) : e.substring(2, 4),
                    o = i ? e.charAt(2) + e.charAt(2) : e.substring(4, 6),
                    a = r ? i ? e.charAt(3) + e.charAt(3) : e.substring(6, 8) : "FF";
                return [parseInt(n, 16), parseInt(s, 16), parseInt(o, 16), parseFloat((parseInt(a, 16) / 255).toFixed(2))]
            }
        }, c.Color.fromSource = function(t) {
            var e = new l;
            return e.setSource(t), e
        })
    }("undefined" != typeof exports ? exports : this),
    function() {
        function d(t) {
            var e, i, r, n, s = t.getAttribute("style"),
                o = t.getAttribute("offset") || 0;
            if (o = (o = parseFloat(o) / (/%$/.test(o) ? 100 : 1)) < 0 ? 0 : 1 < o ? 1 : o, s) {
                var a = s.split(/\s*;\s*/);
                for ("" === a[a.length - 1] && a.pop(), n = a.length; n--;) {
                    var h = a[n].split(/\s*:\s*/),
                        c = h[0].trim(),
                        l = h[1].trim();
                    "stop-color" === c ? e = l : "stop-opacity" === c && (r = l)
                }
            }
            return e || (e = t.getAttribute("stop-color") || "rgb(0,0,0)"), r || (r = t.getAttribute("stop-opacity")), i = (e = new fabric.Color(e)).getAlpha(), r = isNaN(parseFloat(r)) ? 1 : parseFloat(r), r *= i, {
                offset: o,
                color: e.toRgb(),
                opacity: r
            }
        }
        var g = fabric.util.object.clone;

        function p(t, e, i) {
            var r, n = 0,
                s = 1,
                o = "";
            for (var a in e) "Infinity" === e[a] ? e[a] = 1 : "-Infinity" === e[a] && (e[a] = 0), r = parseFloat(e[a], 10), s = "string" == typeof e[a] && /^(\d+\.\d+)%|(\d+)%$/.test(e[a]) ? .01 : 1, "x1" === a || "x2" === a || "r2" === a ? (s *= "objectBoundingBox" === i ? t.width : 1, n = "objectBoundingBox" === i && t.left || 0) : "y1" !== a && "y2" !== a || (s *= "objectBoundingBox" === i ? t.height : 1, n = "objectBoundingBox" === i && t.top || 0), e[a] = r * s + n;
            if ("ellipse" === t.type && null !== e.r2 && "objectBoundingBox" === i && t.rx !== t.ry) {
                var h = t.ry / t.rx;
                o = " scale(1, " + h + ")", e.y1 && (e.y1 /= h), e.y2 && (e.y2 /= h)
            }
            return o
        }
        fabric.Gradient = fabric.util.createClass({
            offsetX: 0,
            offsetY: 0,
            initialize: function(t) {
                t || (t = {});
                var e = {};
                this.id = fabric.Object.__uid++, this.type = t.type || "linear", e = {
                    x1: t.coords.x1 || 0,
                    y1: t.coords.y1 || 0,
                    x2: t.coords.x2 || 0,
                    y2: t.coords.y2 || 0
                }, "radial" === this.type && (e.r1 = t.coords.r1 || 0, e.r2 = t.coords.r2 || 0), this.coords = e, this.colorStops = t.colorStops.slice(), t.gradientTransform && (this.gradientTransform = t.gradientTransform), this.offsetX = t.offsetX || this.offsetX, this.offsetY = t.offsetY || this.offsetY
            },
            addColorStop: function(t) {
                for (var e in t) {
                    var i = new fabric.Color(t[e]);
                    this.colorStops.push({
                        offset: parseFloat(e),
                        color: i.toRgb(),
                        opacity: i.getAlpha()
                    })
                }
                return this
            },
            toObject: function(t) {
                var e = {
                    type: this.type,
                    coords: this.coords,
                    colorStops: this.colorStops,
                    offsetX: this.offsetX,
                    offsetY: this.offsetY,
                    gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform
                };
                return fabric.util.populateWithProperties(this, e, t), e
            },
            toSVG: function(t) {
                var e, i, r, n, s = g(this.coords, !0),
                    o = g(this.colorStops, !0),
                    a = s.r1 > s.r2,
                    h = t.width / 2,
                    c = t.height / 2;
                for (var l in o.sort(function(t, e) {
                        return t.offset - e.offset
                    }), "path" === t.type && (h -= t.pathOffset.x, c -= t.pathOffset.y), s) "x1" === l || "x2" === l ? s[l] += this.offsetX - h : "y1" !== l && "y2" !== l || (s[l] += this.offsetY - c);
                if (n = 'id="SVGID_' + this.id + '" gradientUnits="userSpaceOnUse"', this.gradientTransform && (n += ' gradientTransform="matrix(' + this.gradientTransform.join(" ") + ')" '), "linear" === this.type ? r = ["<linearGradient ", n, ' x1="', s.x1, '" y1="', s.y1, '" x2="', s.x2, '" y2="', s.y2, '">\n'] : "radial" === this.type && (r = ["<radialGradient ", n, ' cx="', a ? s.x1 : s.x2, '" cy="', a ? s.y1 : s.y2, '" r="', a ? s.r1 : s.r2, '" fx="', a ? s.x2 : s.x1, '" fy="', a ? s.y2 : s.y1, '">\n']), "radial" === this.type) {
                    if (a)
                        for ((o = o.concat()).reverse(), e = 0, i = o.length; e < i; e++) o[e].offset = 1 - o[e].offset;
                    var u = Math.min(s.r1, s.r2);
                    if (0 < u) {
                        var f = u / Math.max(s.r1, s.r2);
                        for (e = 0, i = o.length; e < i; e++) o[e].offset += f * (1 - o[e].offset)
                    }
                }
                for (e = 0, i = o.length; e < i; e++) {
                    var d = o[e];
                    r.push("<stop ", 'offset="', 100 * d.offset + "%", '" style="stop-color:', d.color, void 0 !== d.opacity ? ";stop-opacity: " + d.opacity : ";", '"/>\n')
                }
                return r.push("linear" === this.type ? "</linearGradient>\n" : "</radialGradient>\n"), r.join("")
            },
            toLive: function(t) {
                var e, i, r, n = fabric.util.object.clone(this.coords);
                if (this.type) {
                    for ("linear" === this.type ? e = t.createLinearGradient(n.x1, n.y1, n.x2, n.y2) : "radial" === this.type && (e = t.createRadialGradient(n.x1, n.y1, n.r1, n.x2, n.y2, n.r2)), i = 0, r = this.colorStops.length; i < r; i++) {
                        var s = this.colorStops[i].color,
                            o = this.colorStops[i].opacity,
                            a = this.colorStops[i].offset;
                        void 0 !== o && (s = new fabric.Color(s).setAlpha(o).toRgba()), e.addColorStop(a, s)
                    }
                    return e
                }
            }
        }), fabric.util.object.extend(fabric.Gradient, {
            fromElement: function(t, e) {
                var i, r, n, s, o, a, h = t.getElementsByTagName("stop"),
                    c = t.getAttribute("gradientUnits") || "objectBoundingBox",
                    l = t.getAttribute("gradientTransform"),
                    u = [];
                for ("linear" === (i = "linearGradient" === t.nodeName || "LINEARGRADIENT" === t.nodeName ? "linear" : "radial") ? r = {
                        x1: (a = t).getAttribute("x1") || 0,
                        y1: a.getAttribute("y1") || 0,
                        x2: a.getAttribute("x2") || "100%",
                        y2: a.getAttribute("y2") || 0
                    } : "radial" === i && (r = {
                        x1: (o = t).getAttribute("fx") || o.getAttribute("cx") || "50%",
                        y1: o.getAttribute("fy") || o.getAttribute("cy") || "50%",
                        r1: 0,
                        x2: o.getAttribute("cx") || "50%",
                        y2: o.getAttribute("cy") || "50%",
                        r2: o.getAttribute("r") || "50%"
                    }), s = h.length; s--;) u.push(d(h[s]));
                n = p(e, r, c);
                var f = new fabric.Gradient({
                    type: i,
                    coords: r,
                    colorStops: u,
                    offsetX: -e.left,
                    offsetY: -e.top
                });
                return (l || "" !== n) && (f.gradientTransform = fabric.parseTransformAttribute((l || "") + n)), f
            },
            forObject: function(t, e) {
                return e || (e = {}), p(t, e.coords, "userSpaceOnUse"), new fabric.Gradient(e)
            }
        })
    }(),
    function() {
        "use strict";
        var n = fabric.util.toFixed;
        fabric.Pattern = fabric.util.createClass({
            repeat: "repeat",
            offsetX: 0,
            offsetY: 0,
            crossOrigin: "",
            patternTransform: null,
            initialize: function(t, e) {
                if (t || (t = {}), this.id = fabric.Object.__uid++, this.setOptions(t), !t.source || t.source && "string" != typeof t.source) e && e(this);
                else if (void 0 !== fabric.util.getFunctionBody(t.source)) this.source = new Function(fabric.util.getFunctionBody(t.source)), e && e(this);
                else {
                    var i = this;
                    this.source = fabric.util.createImage(), fabric.util.loadImage(t.source, function(t) {
                        i.source = t, e && e(i)
                    }, null, this.crossOrigin)
                }
            },
            toObject: function(t) {
                var e, i, r = fabric.Object.NUM_FRACTION_DIGITS;
                return "function" == typeof this.source ? e = String(this.source) : "string" == typeof this.source.src ? e = this.source.src : "object" == typeof this.source && this.source.toDataURL && (e = this.source.toDataURL()), i = {
                    type: "pattern",
                    source: e,
                    repeat: this.repeat,
                    crossOrigin: this.crossOrigin,
                    offsetX: n(this.offsetX, r),
                    offsetY: n(this.offsetY, r),
                    patternTransform: this.patternTransform ? this.patternTransform.concat() : null
                }, fabric.util.populateWithProperties(this, i, t), i
            },
            toSVG: function(t) {
                var e = "function" == typeof this.source ? this.source() : this.source,
                    i = e.width / t.width,
                    r = e.height / t.height,
                    n = this.offsetX / t.width,
                    s = this.offsetY / t.height,
                    o = "";
                return "repeat-x" !== this.repeat && "no-repeat" !== this.repeat || (r = 1), "repeat-y" !== this.repeat && "no-repeat" !== this.repeat || (i = 1), e.src ? o = e.src : e.toDataURL && (o = e.toDataURL()), '<pattern id="SVGID_' + this.id + '" x="' + n + '" y="' + s + '" width="' + i + '" height="' + r + '">\n<image x="0" y="0" width="' + e.width + '" height="' + e.height + '" xlink:href="' + o + '"></image>\n</pattern>\n'
            },
            setOptions: function(t) {
                for (var e in t) this[e] = t[e]
            },
            toLive: function(t) {
                var e = "function" == typeof this.source ? this.source() : this.source;
                if (!e) return "";
                if (void 0 !== e.src) {
                    if (!e.complete) return "";
                    if (0 === e.naturalWidth || 0 === e.naturalHeight) return ""
                }
                return t.createPattern(e, this.repeat)
            }
        })
    }(),
    function(t) {
        "use strict";
        var o = t.fabric || (t.fabric = {}),
            a = o.util.toFixed;
        o.Shadow ? o.warn("fabric.Shadow is already defined.") : (o.Shadow = o.util.createClass({
            color: "rgb(0,0,0)",
            blur: 0,
            offsetX: 0,
            offsetY: 0,
            affectStroke: !1,
            includeDefaultValues: !0,
            initialize: function(t) {
                for (var e in "string" == typeof t && (t = this._parseShadow(t)), t) this[e] = t[e];
                this.id = o.Object.__uid++
            },
            _parseShadow: function(t) {
                var e = t.trim(),
                    i = o.Shadow.reOffsetsAndBlur.exec(e) || [];
                return {
                    color: (e.replace(o.Shadow.reOffsetsAndBlur, "") || "rgb(0,0,0)").trim(),
                    offsetX: parseInt(i[1], 10) || 0,
                    offsetY: parseInt(i[2], 10) || 0,
                    blur: parseInt(i[3], 10) || 0
                }
            },
            toString: function() {
                return [this.offsetX, this.offsetY, this.blur, this.color].join("px ")
            },
            toSVG: function(t) {
                var e = 40,
                    i = 40,
                    r = o.Object.NUM_FRACTION_DIGITS,
                    n = o.util.rotateVector({
                        x: this.offsetX,
                        y: this.offsetY
                    }, o.util.degreesToRadians(-t.angle)),
                    s = new o.Color(this.color);
                return t.width && t.height && (e = 100 * a((Math.abs(n.x) + this.blur) / t.width, r) + 20, i = 100 * a((Math.abs(n.y) + this.blur) / t.height, r) + 20), t.flipX && (n.x *= -1), t.flipY && (n.y *= -1), '<filter id="SVGID_' + this.id + '" y="-' + i + '%" height="' + (100 + 2 * i) + '%" x="-' + e + '%" width="' + (100 + 2 * e) + '%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="' + a(this.blur ? this.blur / 2 : 0, r) + '"></feGaussianBlur>\n\t<feOffset dx="' + a(n.x, r) + '" dy="' + a(n.y, r) + '" result="oBlur" ></feOffset>\n\t<feFlood flood-color="' + s.toRgb() + '" flood-opacity="' + s.getAlpha() + '"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'
            },
            toObject: function() {
                if (this.includeDefaultValues) return {
                    color: this.color,
                    blur: this.blur,
                    offsetX: this.offsetX,
                    offsetY: this.offsetY,
                    affectStroke: this.affectStroke
                };
                var e = {},
                    i = o.Shadow.prototype;
                return ["color", "blur", "offsetX", "offsetY", "affectStroke"].forEach(function(t) {
                    this[t] !== i[t] && (e[t] = this[t])
                }, this), e
            }
        }), o.Shadow.reOffsetsAndBlur = /(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)
    }("undefined" != typeof exports ? exports : this),
    function() {
        "use strict";
        if (fabric.StaticCanvas) fabric.warn("fabric.StaticCanvas is already defined.");
        else {
            var r = fabric.util.object.extend,
                t = fabric.util.getElementOffset,
                c = fabric.util.removeFromArray,
                a = fabric.util.toFixed,
                s = fabric.util.transformPoint,
                o = fabric.util.invertTransform,
                e = new Error("Could not initialize `canvas` element");
            fabric.StaticCanvas = fabric.util.createClass(fabric.CommonMethods, {
                initialize: function(t, e) {
                    e || (e = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this.requestRenderAllBound = this.requestRenderAll.bind(this), this._initStatic(t, e)
                },
                backgroundColor: "",
                backgroundImage: null,
                overlayColor: "",
                overlayImage: null,
                includeDefaultValues: !0,
                stateful: !1,
                renderOnAddRemove: !0,
                clipTo: null,
                controlsAboveOverlay: !1,
                allowTouchScrolling: !1,
                imageSmoothingEnabled: !0,
                viewportTransform: fabric.iMatrix.concat(),
                backgroundVpt: !0,
                overlayVpt: !0,
                onBeforeScaleRotate: function() {},
                enableRetinaScaling: !0,
                vptCoords: {},
                skipOffscreen: !0,
                _initStatic: function(t, e) {
                    var i = this.requestRenderAllBound;
                    this._objects = [], this._createLowerCanvas(t), this._initOptions(e), this._setImageSmoothing(), this.interactive || this._initRetinaScaling(), e.overlayImage && this.setOverlayImage(e.overlayImage, i), e.backgroundImage && this.setBackgroundImage(e.backgroundImage, i), e.backgroundColor && this.setBackgroundColor(e.backgroundColor, i), e.overlayColor && this.setOverlayColor(e.overlayColor, i), this.calcOffset()
                },
                _isRetinaScaling: function() {
                    return 1 !== fabric.devicePixelRatio && this.enableRetinaScaling
                },
                getRetinaScaling: function() {
                    return this._isRetinaScaling() ? fabric.devicePixelRatio : 1
                },
                _initRetinaScaling: function() {
                    this._isRetinaScaling() && (this.lowerCanvasEl.setAttribute("width", this.width * fabric.devicePixelRatio), this.lowerCanvasEl.setAttribute("height", this.height * fabric.devicePixelRatio), this.contextContainer.scale(fabric.devicePixelRatio, fabric.devicePixelRatio))
                },
                calcOffset: function() {
                    return this._offset = t(this.lowerCanvasEl), this
                },
                setOverlayImage: function(t, e, i) {
                    return this.__setBgOverlayImage("overlayImage", t, e, i)
                },
                setBackgroundImage: function(t, e, i) {
                    return this.__setBgOverlayImage("backgroundImage", t, e, i)
                },
                setOverlayColor: function(t, e) {
                    return this.__setBgOverlayColor("overlayColor", t, e)
                },
                setBackgroundColor: function(t, e) {
                    return this.__setBgOverlayColor("backgroundColor", t, e)
                },
                _setImageSmoothing: function() {
                    var t = this.getContext();
                    t.imageSmoothingEnabled = t.imageSmoothingEnabled || t.webkitImageSmoothingEnabled || t.mozImageSmoothingEnabled || t.msImageSmoothingEnabled || t.oImageSmoothingEnabled, t.imageSmoothingEnabled = this.imageSmoothingEnabled
                },
                __setBgOverlayImage: function(e, t, i, r) {
                    return "string" == typeof t ? fabric.util.loadImage(t, function(t) {
                        t && (this[e] = new fabric.Image(t, r)), i && i(t)
                    }, this, r && r.crossOrigin) : (r && t.setOptions(r), this[e] = t, i && i(t)), this
                },
                __setBgOverlayColor: function(t, e, i) {
                    return this[t] = e, this._initGradient(e, t), this._initPattern(e, t, i), this
                },
                _createCanvasElement: function() {
                    var t = fabric.util.createCanvasElement();
                    if (!t) throw e;
                    if (t.style || (t.style = {}), void 0 === t.getContext) throw e;
                    return t
                },
                _initOptions: function(t) {
                    this._setOptions(t), this.width = this.width || parseInt(this.lowerCanvasEl.width, 10) || 0, this.height = this.height || parseInt(this.lowerCanvasEl.height, 10) || 0, this.lowerCanvasEl.style && (this.lowerCanvasEl.width = this.width, this.lowerCanvasEl.height = this.height, this.lowerCanvasEl.style.width = this.width + "px", this.lowerCanvasEl.style.height = this.height + "px", this.viewportTransform = this.viewportTransform.slice())
                },
                _createLowerCanvas: function(t) {
                    t && t.getContext ? this.lowerCanvasEl = t : this.lowerCanvasEl = fabric.util.getById(t) || this._createCanvasElement(), fabric.util.addClass(this.lowerCanvasEl, "lower-canvas"), this.interactive && this._applyCanvasStyle(this.lowerCanvasEl), this.contextContainer = this.lowerCanvasEl.getContext("2d")
                },
                getWidth: function() {
                    return this.width
                },
                getHeight: function() {
                    return this.height
                },
                setWidth: function(t, e) {
                    return this.setDimensions({
                        width: t
                    }, e)
                },
                setHeight: function(t, e) {
                    return this.setDimensions({
                        height: t
                    }, e)
                },
                setDimensions: function(t, e) {
                    var i;
                    for (var r in e = e || {}, t) i = t[r], e.cssOnly || (this._setBackstoreDimension(r, t[r]), i += "px", this.hasLostContext = !0), e.backstoreOnly || this._setCssDimension(r, i);
                    return this._isCurrentlyDrawing && this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles(), this._initRetinaScaling(), this._setImageSmoothing(), this.calcOffset(), e.cssOnly || this.requestRenderAll(), this
                },
                _setBackstoreDimension: function(t, e) {
                    return this.lowerCanvasEl[t] = e, this.upperCanvasEl && (this.upperCanvasEl[t] = e), this.cacheCanvasEl && (this.cacheCanvasEl[t] = e), this[t] = e, this
                },
                _setCssDimension: function(t, e) {
                    return this.lowerCanvasEl.style[t] = e, this.upperCanvasEl && (this.upperCanvasEl.style[t] = e), this.wrapperEl && (this.wrapperEl.style[t] = e), this
                },
                getZoom: function() {
                    return this.viewportTransform[0]
                },
                setViewportTransform: function(t) {
                    var e, i, r, n = this._activeObject;
                    for (this.viewportTransform = t, i = 0, r = this._objects.length; i < r; i++)(e = this._objects[i]).group || e.setCoords(!1, !0);
                    return n && "activeSelection" === n.type && n.setCoords(!1, !0), this.calcViewportBoundaries(), this.renderOnAddRemove && this.requestRenderAll(), this
                },
                zoomToPoint: function(t, e) {
                    var i = t,
                        r = this.viewportTransform.slice(0);
                    t = s(t, o(this.viewportTransform)), r[0] = e, r[3] = e;
                    var n = s(t, r);
                    return r[4] += i.x - n.x, r[5] += i.y - n.y, this.setViewportTransform(r)
                },
                setZoom: function(t) {
                    return this.zoomToPoint(new fabric.Point(0, 0), t), this
                },
                absolutePan: function(t) {
                    var e = this.viewportTransform.slice(0);
                    return e[4] = -t.x, e[5] = -t.y, this.setViewportTransform(e)
                },
                relativePan: function(t) {
                    return this.absolutePan(new fabric.Point(-t.x - this.viewportTransform[4], -t.y - this.viewportTransform[5]))
                },
                getElement: function() {
                    return this.lowerCanvasEl
                },
                _onObjectAdded: function(t) {
                    this.stateful && t.setupState(), t._set("canvas", this), t.setCoords(), this.fire("object:added", {
                        target: t
                    }), t.fire("added")
                },
                _onObjectRemoved: function(t) {
                    this.fire("object:removed", {
                        target: t
                    }), t.fire("removed"), delete t.canvas
                },
                clearContext: function(t) {
                    return t.clearRect(0, 0, this.width, this.height), this
                },
                getContext: function() {
                    return this.contextContainer
                },
                clear: function() {
                    return this._objects.length = 0, this.backgroundImage = null, this.overlayImage = null, this.backgroundColor = "", this.overlayColor = "", this._hasITextHandlers && (this.off("mouse:up", this._mouseUpITextHandler), this._iTextInstances = null, this._hasITextHandlers = !1), this.clearContext(this.contextContainer), this.fire("canvas:cleared"), this.renderOnAddRemove && this.requestRenderAll(), this
                },
                renderAll: function() {
                    var t = this.contextContainer;
                    return this.renderCanvas(t, this._objects), this
                },
                renderAndReset: function() {
                    this.isRendering = 0, this.renderAll()
                },
                requestRenderAll: function() {
                    return this.isRendering || (this.isRendering = fabric.util.requestAnimFrame(this.renderAndResetBound)), this
                },
                calcViewportBoundaries: function() {
                    var t = {},
                        e = this.width,
                        i = this.height,
                        r = o(this.viewportTransform);
                    return t.tl = s({
                        x: 0,
                        y: 0
                    }, r), t.br = s({
                        x: e,
                        y: i
                    }, r), t.tr = new fabric.Point(t.br.x, t.tl.y), t.bl = new fabric.Point(t.tl.x, t.br.y), this.vptCoords = t
                },
                renderCanvas: function(t, e) {
                    var i = this.viewportTransform;
                    this.isRendering && (fabric.util.cancelAnimFrame(this.isRendering), this.isRendering = 0), this.calcViewportBoundaries(), this.clearContext(t), this.fire("before:render"), this.clipTo && fabric.util.clipContext(this, t), this._renderBackground(t), t.save(), t.transform(i[0], i[1], i[2], i[3], i[4], i[5]), this._renderObjects(t, e), t.restore(), !this.controlsAboveOverlay && this.interactive && this.drawControls(t), this.clipTo && t.restore(), this._renderOverlay(t), this.controlsAboveOverlay && this.interactive && this.drawControls(t), this.fire("after:render")
                },
                _renderObjects: function(t, e) {
                    var i, r;
                    for (i = 0, r = e.length; i < r; ++i) e[i] && e[i].render(t)
                },
                _renderBackgroundOrOverlay: function(t, e) {
                    var i, r = this[e + "Color"];
                    r && (t.fillStyle = r.toLive ? r.toLive(t, this) : r, t.fillRect(r.offsetX || 0, r.offsetY || 0, this.width, this.height)), (r = this[e + "Image"]) && (this[e + "Vpt"] && (i = this.viewportTransform, t.save(), t.transform(i[0], i[1], i[2], i[3], i[4], i[5])), r.render(t), this[e + "Vpt"] && t.restore())
                },
                _renderBackground: function(t) {
                    this._renderBackgroundOrOverlay(t, "background")
                },
                _renderOverlay: function(t) {
                    this._renderBackgroundOrOverlay(t, "overlay")
                },
                getCenter: function() {
                    return {
                        top: this.height / 2,
                        left: this.width / 2
                    }
                },
                centerObjectH: function(t) {
                    return this._centerObject(t, new fabric.Point(this.getCenter().left, t.getCenterPoint().y))
                },
                centerObjectV: function(t) {
                    return this._centerObject(t, new fabric.Point(t.getCenterPoint().x, this.getCenter().top))
                },
                centerObject: function(t) {
                    var e = this.getCenter();
                    return this._centerObject(t, new fabric.Point(e.left, e.top))
                },
                viewportCenterObject: function(t) {
                    var e = this.getVpCenter();
                    return this._centerObject(t, e)
                },
                viewportCenterObjectH: function(t) {
                    var e = this.getVpCenter();
                    return this._centerObject(t, new fabric.Point(e.x, t.getCenterPoint().y)), this
                },
                viewportCenterObjectV: function(t) {
                    var e = this.getVpCenter();
                    return this._centerObject(t, new fabric.Point(t.getCenterPoint().x, e.y))
                },
                getVpCenter: function() {
                    var t = this.getCenter(),
                        e = o(this.viewportTransform);
                    return s({
                        x: t.left,
                        y: t.top
                    }, e)
                },
                _centerObject: function(t, e) {
                    return t.setPositionByOrigin(e, "center", "center"), t.setCoords(), this.renderOnAddRemove && this.requestRenderAll(), this
                },
                toDatalessJSON: function(t) {
                    return this.toDatalessObject(t)
                },
                toObject: function(t) {
                    return this._toObjectMethod("toObject", t)
                },
                toDatalessObject: function(t) {
                    return this._toObjectMethod("toDatalessObject", t)
                },
                _toObjectMethod: function(t, e) {
                    var i = {
                        version: fabric.version,
                        objects: this._toObjects(t, e)
                    };
                    return r(i, this.__serializeBgOverlay(t, e)), fabric.util.populateWithProperties(this, i, e), i
                },
                _toObjects: function(e, i) {
                    return this.getObjects().filter(function(t) {
                        return !t.excludeFromExport
                    }).map(function(t) {
                        return this._toObject(t, e, i)
                    }, this)
                },
                _toObject: function(t, e, i) {
                    var r;
                    this.includeDefaultValues || (r = t.includeDefaultValues, t.includeDefaultValues = !1);
                    var n = t[e](i);
                    return this.includeDefaultValues || (t.includeDefaultValues = r), n
                },
                __serializeBgOverlay: function(t, e) {
                    var i = {},
                        r = this.backgroundImage,
                        n = this.overlayImage;
                    return this.backgroundColor && (i.background = this.backgroundColor.toObject ? this.backgroundColor.toObject(e) : this.backgroundColor), this.overlayColor && (i.overlay = this.overlayColor.toObject ? this.overlayColor.toObject(e) : this.overlayColor), r && !r.excludeFromExport && (i.backgroundImage = this._toObject(r, t, e)), n && !n.excludeFromExport && (i.overlayImage = this._toObject(n, t, e)), i
                },
                svgViewportTransformation: !0,
                toSVG: function(t, e) {
                    t || (t = {});
                    var i = [];
                    return this._setSVGPreamble(i, t), this._setSVGHeader(i, t), this._setSVGBgOverlayColor(i, "backgroundColor"), this._setSVGBgOverlayImage(i, "backgroundImage", e), this._setSVGObjects(i, e), this._setSVGBgOverlayColor(i, "overlayColor"), this._setSVGBgOverlayImage(i, "overlayImage", e), i.push("</svg>"), i.join("")
                },
                _setSVGPreamble: function(t, e) {
                    e.suppressPreamble || t.push('<?xml version="1.0" encoding="', e.encoding || "UTF-8", '" standalone="no" ?>\n', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ', '"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')
                },
                _setSVGHeader: function(t, e) {
                    var i, r = e.width || this.width,
                        n = e.height || this.height,
                        s = 'viewBox="0 0 ' + this.width + " " + this.height + '" ',
                        o = fabric.Object.NUM_FRACTION_DIGITS;
                    e.viewBox ? s = 'viewBox="' + e.viewBox.x + " " + e.viewBox.y + " " + e.viewBox.width + " " + e.viewBox.height + '" ' : this.svgViewportTransformation && (i = this.viewportTransform, s = 'viewBox="' + a(-i[4] / i[0], o) + " " + a(-i[5] / i[3], o) + " " + a(this.width / i[0], o) + " " + a(this.height / i[3], o) + '" '), t.push("<svg ", 'xmlns="http://www.w3.org/2000/svg" ', 'xmlns:xlink="http://www.w3.org/1999/xlink" ', 'version="1.1" ', 'width="', r, '" ', 'height="', n, '" ', s, 'xml:space="preserve">\n', "<desc>Created with Fabric.js ", fabric.version, "</desc>\n", "<defs>\n", this.createSVGFontFacesMarkup(), this.createSVGRefElementsMarkup(), "</defs>\n")
                },
                createSVGRefElementsMarkup: function() {
                    var i = this;
                    return ["backgroundColor", "overlayColor"].map(function(t) {
                        var e = i[t];
                        if (e && e.toLive) return e.toSVG(i, !1)
                    }).join("")
                },
                createSVGFontFacesMarkup: function() {
                    var t, e, i, r, n, s, o, a, h = "",
                        c = {},
                        l = fabric.fontPaths,
                        u = this.getObjects();
                    for (o = 0, a = u.length; o < a; o++)
                        if (e = (t = u[o]).fontFamily, -1 !== t.type.indexOf("text") && !c[e] && l[e] && (c[e] = !0, t.styles))
                            for (n in i = t.styles)
                                for (s in r = i[n]) !c[e = r[s].fontFamily] && l[e] && (c[e] = !0);
                    for (var f in c) h += ["\t\t@font-face {\n", "\t\t\tfont-family: '", f, "';\n", "\t\t\tsrc: url('", l[f], "');\n", "\t\t}\n"].join("");
                    return h && (h = ['\t<style type="text/css">', "<![CDATA[\n", h, "]]>", "</style>\n"].join("")), h
                },
                _setSVGObjects: function(t, e) {
                    var i, r, n, s = this.getObjects();
                    for (r = 0, n = s.length; r < n; r++)(i = s[r]).excludeFromExport || this._setSVGObject(t, i, e)
                },
                _setSVGObject: function(t, e, i) {
                    t.push(e.toSVG(i))
                },
                _setSVGBgOverlayImage: function(t, e, i) {
                    this[e] && this[e].toSVG && t.push(this[e].toSVG(i))
                },
                _setSVGBgOverlayColor: function(t, e) {
                    var i = this[e],
                        r = this.viewportTransform,
                        n = this.width / r[0],
                        s = this.height / r[3];
                    if (i)
                        if (i.toLive) {
                            var o = i.repeat;
                            t.push('<rect transform="translate(', n / 2, ",", s / 2, ')"', ' x="', i.offsetX - n / 2, '" y="', i.offsetY - s / 2, '" ', 'width="', "repeat-y" === o || "no-repeat" === o ? i.source.width : n, '" height="', "repeat-x" === o || "no-repeat" === o ? i.source.height : s, '" fill="url(#SVGID_' + i.id + ')"', "></rect>\n")
                        } else t.push('<rect x="0" y="0" width="100%" height="100%" ', 'fill="', this[e], '"', "></rect>\n")
                },
                sendToBack: function(t) {
                    if (!t) return this;
                    var e, i, r, n = this._activeObject;
                    if (t === n && "activeSelection" === t.type)
                        for (e = (r = n._objects).length; e--;) i = r[e], c(this._objects, i), this._objects.unshift(i);
                    else c(this._objects, t), this._objects.unshift(t);
                    return this.renderOnAddRemove && this.requestRenderAll(), this
                },
                bringToFront: function(t) {
                    if (!t) return this;
                    var e, i, r, n = this._activeObject;
                    if (t === n && "activeSelection" === t.type)
                        for (r = n._objects, e = 0; e < r.length; e++) i = r[e], c(this._objects, i), this._objects.push(i);
                    else c(this._objects, t), this._objects.push(t);
                    return this.renderOnAddRemove && this.requestRenderAll(), this
                },
                sendBackwards: function(t, e) {
                    if (!t) return this;
                    var i, r, n, s, o, a = this._activeObject,
                        h = 0;
                    if (t === a && "activeSelection" === t.type)
                        for (o = a._objects, i = 0; i < o.length; i++) r = o[i], 0 + h < (n = this._objects.indexOf(r)) && (s = n - 1, c(this._objects, r), this._objects.splice(s, 0, r)), h++;
                    else 0 !== (n = this._objects.indexOf(t)) && (s = this._findNewLowerIndex(t, n, e), c(this._objects, t), this._objects.splice(s, 0, t));
                    return this.renderOnAddRemove && this.requestRenderAll(), this
                },
                _findNewLowerIndex: function(t, e, i) {
                    var r, n;
                    if (i)
                        for (n = (r = e) - 1; 0 <= n; --n) {
                            if (t.intersectsWithObject(this._objects[n]) || t.isContainedWithinObject(this._objects[n]) || this._objects[n].isContainedWithinObject(t)) {
                                r = n;
                                break
                            }
                        } else r = e - 1;
                    return r
                },
                bringForward: function(t, e) {
                    if (!t) return this;
                    var i, r, n, s, o, a = this._activeObject,
                        h = 0;
                    if (t === a && "activeSelection" === t.type)
                        for (i = (o = a._objects).length; i--;) r = o[i], (n = this._objects.indexOf(r)) < this._objects.length - 1 - h && (s = n + 1, c(this._objects, r), this._objects.splice(s, 0, r)), h++;
                    else(n = this._objects.indexOf(t)) !== this._objects.length - 1 && (s = this._findNewUpperIndex(t, n, e), c(this._objects, t), this._objects.splice(s, 0, t));
                    return this.renderOnAddRemove && this.requestRenderAll(), this
                },
                _findNewUpperIndex: function(t, e, i) {
                    var r, n, s;
                    if (i)
                        for (n = (r = e) + 1, s = this._objects.length; n < s; ++n) {
                            if (t.intersectsWithObject(this._objects[n]) || t.isContainedWithinObject(this._objects[n]) || this._objects[n].isContainedWithinObject(t)) {
                                r = n;
                                break
                            }
                        } else r = e + 1;
                    return r
                },
                moveTo: function(t, e) {
                    return c(this._objects, t), this._objects.splice(e, 0, t), this.renderOnAddRemove && this.requestRenderAll()
                },
                dispose: function() {
                    return this.isRendering && (fabric.util.cancelAnimFrame(this.isRendering), this.isRendering = 0), this.forEachObject(function(t) {
                        t.dispose && t.dispose()
                    }), this._objects = [], this.backgroundImage = null, this.overlayImage = null, this._iTextInstances = null, this.lowerCanvasEl = null, this.contextContainer = null, this
                },
                toString: function() {
                    return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this.getObjects().length + " }>"
                }
            }), r(fabric.StaticCanvas.prototype, fabric.Observable), r(fabric.StaticCanvas.prototype, fabric.Collection), r(fabric.StaticCanvas.prototype, fabric.DataURLExporter), r(fabric.StaticCanvas, {
                EMPTY_JSON: '{"objects": [], "background": "white"}',
                supports: function(t) {
                    var e = fabric.util.createCanvasElement();
                    if (!e || !e.getContext) return null;
                    var i = e.getContext("2d");
                    if (!i) return null;
                    switch (t) {
                        case "getImageData":
                            return void 0 !== i.getImageData;
                        case "setLineDash":
                            return void 0 !== i.setLineDash;
                        case "toDataURL":
                            return void 0 !== e.toDataURL;
                        case "toDataURLWithQuality":
                            try {
                                return e.toDataURL("image/jpeg", 0), !0
                            } catch (t) {}
                            return !1;
                        default:
                            return null
                    }
                }
            }), fabric.StaticCanvas.prototype.toJSON = fabric.StaticCanvas.prototype.toObject, fabric.isLikelyNode && (fabric.StaticCanvas.prototype.createPNGStream = function() {
                var t = fabric.util.getNodeCanvas(this.lowerCanvasEl);
                return t && t.createPNGStream()
            }, fabric.StaticCanvas.prototype.createJPEGStream = function(t) {
                var e = fabric.util.getNodeCanvas(this.lowerCanvasEl);
                return e && e.createJPEGStream(t)
            })
        }
    }(), fabric.BaseBrush = fabric.util.createClass({
        color: "rgb(0, 0, 0)",
        width: 1,
        shadow: null,
        strokeLineCap: "round",
        strokeLineJoin: "round",
        strokeMiterLimit: 10,
        strokeDashArray: null,
        setShadow: function(t) {
            return this.shadow = new fabric.Shadow(t), this
        },
        _setBrushStyles: function() {
            var t = this.canvas.contextTop;
            t.strokeStyle = this.color, t.lineWidth = this.width, t.lineCap = this.strokeLineCap, t.miterLimit = this.strokeMiterLimit, t.lineJoin = this.strokeLineJoin, fabric.StaticCanvas.supports("setLineDash") && t.setLineDash(this.strokeDashArray || [])
        },
        _saveAndTransform: function(t) {
            var e = this.canvas.viewportTransform;
            t.save(), t.transform(e[0], e[1], e[2], e[3], e[4], e[5])
        },
        _setShadow: function() {
            if (this.shadow) {
                var t = this.canvas.contextTop,
                    e = this.canvas.getZoom();
                t.shadowColor = this.shadow.color, t.shadowBlur = this.shadow.blur * e, t.shadowOffsetX = this.shadow.offsetX * e, t.shadowOffsetY = this.shadow.offsetY * e
            }
        },
        _resetShadow: function() {
            var t = this.canvas.contextTop;
            t.shadowColor = "", t.shadowBlur = t.shadowOffsetX = t.shadowOffsetY = 0
        }
    }), fabric.PencilBrush = fabric.util.createClass(fabric.BaseBrush, {
        initialize: function(t) {
            this.canvas = t, this._points = []
        },
        _drawSegment: function(t, e, i) {
            var r = e.midPointFrom(i);
            return t.quadraticCurveTo(e.x, e.y, r.x, r.y), r
        },
        onMouseDown: function(t) {
            this._prepareForDrawing(t), this._captureDrawingPath(t), this._render()
        },
        onMouseMove: function(t) {
            if (this._captureDrawingPath(t) && 1 < this._points.length)
                if (this.needsFullRender) this.canvas.clearContext(this.canvas.contextTop), this._render();
                else {
                    var e = this._points,
                        i = e.length,
                        r = this.canvas.contextTop;
                    this._saveAndTransform(r), this.oldEnd && (r.beginPath(), r.moveTo(this.oldEnd.x, this.oldEnd.y)), this.oldEnd = this._drawSegment(r, e[i - 2], e[i - 1], !0), r.stroke(), r.restore()
                }
        },
        onMouseUp: function() {
            this.oldEnd = void 0, this._finalizeAndAddPath()
        },
        _prepareForDrawing: function(t) {
            var e = new fabric.Point(t.x, t.y);
            this._reset(), this._addPoint(e), this.canvas.contextTop.moveTo(e.x, e.y)
        },
        _addPoint: function(t) {
            return !(1 < this._points.length && t.eq(this._points[this._points.length - 1]) || (this._points.push(t), 0))
        },
        _reset: function() {
            this._points.length = 0, this._setBrushStyles();
            var t = new fabric.Color(this.color);
            this.needsFullRender = t.getAlpha() < 1, this._setShadow()
        },
        _captureDrawingPath: function(t) {
            var e = new fabric.Point(t.x, t.y);
            return this._addPoint(e)
        },
        _render: function() {
            var t, e, i = this.canvas.contextTop,
                r = this._points[0],
                n = this._points[1];
            if (this._saveAndTransform(i), i.beginPath(), 2 === this._points.length && r.x === n.x && r.y === n.y) {
                var s = this.width / 1e3;
                r = new fabric.Point(r.x, r.y), n = new fabric.Point(n.x, n.y), r.x -= s, n.x += s
            }
            for (i.moveTo(r.x, r.y), t = 1, e = this._points.length; t < e; t++) this._drawSegment(i, r, n), r = this._points[t], n = this._points[t + 1];
            i.lineTo(r.x, r.y), i.stroke(), i.restore()
        },
        convertPointsToSVGPath: function(t) {
            var e, i = [],
                r = this.width / 1e3,
                n = new fabric.Point(t[0].x, t[0].y),
                s = new fabric.Point(t[1].x, t[1].y),
                o = t.length,
                a = 1,
                h = 1,
                c = 2 < o;
            for (c && (a = t[2].x < s.x ? -1 : t[2].x === s.x ? 0 : 1, h = t[2].y < s.y ? -1 : t[2].y === s.y ? 0 : 1), i.push("M ", n.x - a * r, " ", n.y - h * r, " "), e = 1; e < o; e++) {
                if (!n.eq(s)) {
                    var l = n.midPointFrom(s);
                    i.push("Q ", n.x, " ", n.y, " ", l.x, " ", l.y, " ")
                }
                n = t[e], e + 1 < t.length && (s = t[e + 1])
            }
            return c && (a = n.x > t[e - 2].x ? 1 : n.x === t[e - 2].x ? 0 : -1, h = n.y > t[e - 2].y ? 1 : n.y === t[e - 2].y ? 0 : -1), i.push("L ", n.x + a * r, " ", n.y + h * r), i
        },
        createPath: function(t) {
            var e = new fabric.Path(t, {
                    fill: null,
                    stroke: this.color,
                    strokeWidth: this.width,
                    strokeLineCap: this.strokeLineCap,
                    strokeMiterLimit: this.strokeMiterLimit,
                    strokeLineJoin: this.strokeLineJoin,
                    strokeDashArray: this.strokeDashArray
                }),
                i = new fabric.Point(e.left + e.width / 2, e.top + e.height / 2);
            return i = e.translateToGivenOrigin(i, "center", "center", e.originX, e.originY), e.top = i.y, e.left = i.x, this.shadow && (this.shadow.affectStroke = !0, e.setShadow(this.shadow)), e
        },
        _finalizeAndAddPath: function() {
            this.canvas.contextTop.closePath();
            var t = this.convertPointsToSVGPath(this._points).join("");
            if ("M 0 0 Q 0 0 0 0 L 0 0" !== t) {
                var e = this.createPath(t);
                this.canvas.clearContext(this.canvas.contextTop), this.canvas.add(e), this.canvas.renderAll(), e.setCoords(), this._resetShadow(), this.canvas.fire("path:created", {
                    path: e
                })
            } else this.canvas.requestRenderAll()
        }
    }), fabric.CircleBrush = fabric.util.createClass(fabric.BaseBrush, {
        width: 10,
        initialize: function(t) {
            this.canvas = t, this.points = []
        },
        drawDot: function(t) {
            var e = this.addPoint(t),
                i = this.canvas.contextTop;
            this._saveAndTransform(i), i.fillStyle = e.fill, i.beginPath(), i.arc(e.x, e.y, e.radius, 0, 2 * Math.PI, !1), i.closePath(), i.fill(), i.restore()
        },
        onMouseDown: function(t) {
            this.points.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.drawDot(t)
        },
        _render: function() {
            var t, e, i, r = this.canvas.contextTop,
                n = this.points;
            for (this._saveAndTransform(r), t = 0, e = n.length; t < e; t++) i = n[t], r.fillStyle = i.fill, r.beginPath(), r.arc(i.x, i.y, i.radius, 0, 2 * Math.PI, !1), r.closePath(), r.fill();
            r.restore()
        },
        onMouseMove: function(t) {
            this.drawDot(t)
        },
        onMouseUp: function() {
            var t, e, i = this.canvas.renderOnAddRemove;
            this.canvas.renderOnAddRemove = !1;
            var r = [];
            for (t = 0, e = this.points.length; t < e; t++) {
                var n = this.points[t],
                    s = new fabric.Circle({
                        radius: n.radius,
                        left: n.x,
                        top: n.y,
                        originX: "center",
                        originY: "center",
                        fill: n.fill
                    });
                this.shadow && s.setShadow(this.shadow), r.push(s)
            }
            var o = new fabric.Group(r, {
                originX: "center",
                originY: "center"
            });
            o.canvas = this.canvas, this.canvas.add(o), this.canvas.fire("path:created", {
                path: o
            }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = i, this.canvas.requestRenderAll()
        },
        addPoint: function(t) {
            var e = new fabric.Point(t.x, t.y),
                i = fabric.util.getRandomInt(Math.max(0, this.width - 20), this.width + 20) / 2,
                r = new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0, 100) / 100).toRgba();
            return e.radius = i, e.fill = r, this.points.push(e), e
        }
    }), fabric.SprayBrush = fabric.util.createClass(fabric.BaseBrush, {
        width: 10,
        density: 20,
        dotWidth: 1,
        dotWidthVariance: 1,
        randomOpacity: !1,
        optimizeOverlapping: !0,
        initialize: function(t) {
            this.canvas = t, this.sprayChunks = []
        },
        onMouseDown: function(t) {
            this.sprayChunks.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.addSprayChunk(t), this.render(this.sprayChunkPoints)
        },
        onMouseMove: function(t) {
            this.addSprayChunk(t), this.render(this.sprayChunkPoints)
        },
        onMouseUp: function() {
            var t = this.canvas.renderOnAddRemove;
            this.canvas.renderOnAddRemove = !1;
            for (var e = [], i = 0, r = this.sprayChunks.length; i < r; i++)
                for (var n = this.sprayChunks[i], s = 0, o = n.length; s < o; s++) {
                    var a = new fabric.Rect({
                        width: n[s].width,
                        height: n[s].width,
                        left: n[s].x + 1,
                        top: n[s].y + 1,
                        originX: "center",
                        originY: "center",
                        fill: this.color
                    });
                    e.push(a)
                }
            this.optimizeOverlapping && (e = this._getOptimizedRects(e));
            var h = new fabric.Group(e, {
                originX: "center",
                originY: "center"
            });
            this.shadow && h.setShadow(this.shadow), this.canvas.add(h), this.canvas.fire("path:created", {
                path: h
            }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = t, this.canvas.requestRenderAll()
        },
        _getOptimizedRects: function(t) {
            var e, i, r, n = {};
            for (i = 0, r = t.length; i < r; i++) n[e = t[i].left + "" + t[i].top] || (n[e] = t[i]);
            var s = [];
            for (e in n) s.push(n[e]);
            return s
        },
        render: function(t) {
            var e, i, r = this.canvas.contextTop;
            for (r.fillStyle = this.color, this._saveAndTransform(r), e = 0, i = t.length; e < i; e++) {
                var n = t[e];
                void 0 !== n.opacity && (r.globalAlpha = n.opacity), r.fillRect(n.x, n.y, n.width, n.width)
            }
            r.restore()
        },
        _render: function() {
            var t, e, i = this.canvas.contextTop;
            for (i.fillStyle = this.color, this._saveAndTransform(i), t = 0, e = this.sprayChunks.length; t < e; t++) this.render(this.sprayChunks[t]);
            i.restore()
        },
        addSprayChunk: function(t) {
            this.sprayChunkPoints = [];
            var e, i, r, n, s = this.width / 2;
            for (n = 0; n < this.density; n++) {
                e = fabric.util.getRandomInt(t.x - s, t.x + s), i = fabric.util.getRandomInt(t.y - s, t.y + s), r = this.dotWidthVariance ? fabric.util.getRandomInt(Math.max(1, this.dotWidth - this.dotWidthVariance), this.dotWidth + this.dotWidthVariance) : this.dotWidth;
                var o = new fabric.Point(e, i);
                o.width = r, this.randomOpacity && (o.opacity = fabric.util.getRandomInt(0, 100) / 100), this.sprayChunkPoints.push(o)
            }
            this.sprayChunks.push(this.sprayChunkPoints)
        }
    }), fabric.PatternBrush = fabric.util.createClass(fabric.PencilBrush, {
        getPatternSrc: function() {
            var t = fabric.document.createElement("canvas"),
                e = t.getContext("2d");
            return t.width = t.height = 25, e.fillStyle = this.color, e.beginPath(), e.arc(10, 10, 10, 0, 2 * Math.PI, !1), e.closePath(), e.fill(), t
        },
        getPatternSrcFunction: function() {
            return String(this.getPatternSrc).replace("this.color", '"' + this.color + '"')
        },
        getPattern: function() {
            return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), "repeat")
        },
        _setBrushStyles: function() {
            this.callSuper("_setBrushStyles"), this.canvas.contextTop.strokeStyle = this.getPattern()
        },
        createPath: function(t) {
            var e = this.callSuper("createPath", t),
                i = e._getLeftTopCoords().scalarAdd(e.strokeWidth / 2);
            return e.stroke = new fabric.Pattern({
                source: this.source || this.getPatternSrcFunction(),
                offsetX: -i.x,
                offsetY: -i.y
            }), e
        }
    }),
    function() {
        var h = fabric.util.getPointer,
            o = fabric.util.degreesToRadians,
            d = fabric.util.radiansToDegrees,
            g = Math.atan2,
            c = Math.abs,
            l = fabric.StaticCanvas.supports("setLineDash");
        for (var t in fabric.Canvas = fabric.util.createClass(fabric.StaticCanvas, {
                initialize: function(t, e) {
                    e || (e = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this._initStatic(t, e), this._initInteractive(), this._createCacheCanvas()
                },
                uniScaleTransform: !1,
                uniScaleKey: "shiftKey",
                centeredScaling: !1,
                centeredRotation: !1,
                centeredKey: "altKey",
                altActionKey: "shiftKey",
                interactive: !0,
                selection: !0,
                selectionKey: "shiftKey",
                altSelectionKey: null,
                selectionColor: "rgba(100, 100, 255, 0.3)",
                selectionDashArray: [],
                selectionBorderColor: "rgba(255, 255, 255, 0.3)",
                selectionLineWidth: 1,
                selectionFullyContained: !1,
                hoverCursor: "move",
                moveCursor: "move",
                defaultCursor: "default",
                freeDrawingCursor: "crosshair",
                rotationCursor: "crosshair",
                notAllowedCursor: "not-allowed",
                containerClass: "canvas-container",
                perPixelTargetFind: !1,
                targetFindTolerance: 0,
                skipTargetFind: !1,
                isDrawingMode: !1,
                preserveObjectStacking: !1,
                snapAngle: 0,
                snapThreshold: null,
                stopContextMenu: !1,
                fireRightClick: !1,
                fireMiddleClick: !1,
                _initInteractive: function() {
                    this._currentTransform = null, this._groupSelector = null, this._initWrapperElement(), this._createUpperCanvas(), this._initEventListeners(), this._initRetinaScaling(), this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this), this.calcOffset()
                },
                _chooseObjectsToRender: function() {
                    var t, e, i, r = this.getActiveObjects();
                    if (0 < r.length && !this.preserveObjectStacking) {
                        e = [], i = [];
                        for (var n = 0, s = this._objects.length; n < s; n++) t = this._objects[n], -1 === r.indexOf(t) ? e.push(t) : i.push(t);
                        1 < r.length && (this._activeObject._objects = i), e.push.apply(e, i)
                    } else e = this._objects;
                    return e
                },
                renderAll: function() {
                    !this.contextTopDirty || this._groupSelector || this.isDrawingMode || (this.clearContext(this.contextTop), this.contextTopDirty = !1), this.hasLostContext && this.renderTopLayer(this.contextTop);
                    var t = this.contextContainer;
                    return this.renderCanvas(t, this._chooseObjectsToRender()), this
                },
                renderTopLayer: function(t) {
                    this.isDrawingMode && this._isCurrentlyDrawing && this.freeDrawingBrush && this.freeDrawingBrush._render(), this.selection && this._groupSelector && this._drawSelection(t)
                },
                renderTop: function() {
                    var t = this.contextTop;
                    return this.clearContext(t), this.renderTopLayer(t), this.fire("after:render"), this.contextTopDirty = !0, this
                },
                _resetCurrentTransform: function() {
                    var t = this._currentTransform;
                    t.target.set({
                        scaleX: t.original.scaleX,
                        scaleY: t.original.scaleY,
                        skewX: t.original.skewX,
                        skewY: t.original.skewY,
                        left: t.original.left,
                        top: t.original.top
                    }), this._shouldCenterTransform(t.target) ? ("center" !== t.originX && ("right" === t.originX ? t.mouseXSign = -1 : t.mouseXSign = 1), "center" !== t.originY && ("bottom" === t.originY ? t.mouseYSign = -1 : t.mouseYSign = 1), t.originX = "center", t.originY = "center") : (t.originX = t.original.originX, t.originY = t.original.originY)
                },
                containsPoint: function(t, e, i) {
                    var r, n = i || this.getPointer(t, !0);
                    return r = e.group && e.group === this._activeObject && "activeSelection" === e.group.type ? this._normalizePointer(e.group, n) : {
                        x: n.x,
                        y: n.y
                    }, e.containsPoint(r) || e._findTargetCorner(n)
                },
                _normalizePointer: function(t, e) {
                    var i = t.calcTransformMatrix(),
                        r = fabric.util.invertTransform(i),
                        n = this.restorePointerVpt(e);
                    return fabric.util.transformPoint(n, r)
                },
                isTargetTransparent: function(t, e, i) {
                    if (t.shouldCache() && t._cacheCanvas) {
                        var r = this._normalizePointer(t, {
                                x: e,
                                y: i
                            }),
                            n = t.cacheTranslationX + r.x * t.zoomX,
                            s = t.cacheTranslationY + r.y * t.zoomY;
                        return fabric.util.isTransparent(t._cacheContext, n, s, this.targetFindTolerance)
                    }
                    var o = this.contextCache,
                        a = t.selectionBackgroundColor,
                        h = this.viewportTransform;
                    return t.selectionBackgroundColor = "", this.clearContext(o), o.save(), o.transform(h[0], h[1], h[2], h[3], h[4], h[5]), t.render(o), o.restore(), t === this._activeObject && t._renderControls(o, {
                        hasBorders: !1,
                        transparentCorners: !1
                    }, {
                        hasBorders: !1
                    }), t.selectionBackgroundColor = a, fabric.util.isTransparent(o, e, i, this.targetFindTolerance)
                },
                _isSelectionKeyPressed: function(e) {
                    return "[object Array]" === Object.prototype.toString.call(this.selectionKey) ? !!this.selectionKey.find(function(t) {
                        return !0 === e[t]
                    }) : e[this.selectionKey]
                },
                _shouldClearSelection: function(t, e) {
                    var i = this.getActiveObjects(),
                        r = this._activeObject;
                    return !e || e && r && 1 < i.length && -1 === i.indexOf(e) && r !== e && !this._isSelectionKeyPressed(t) || e && !e.evented || e && !e.selectable && r && r !== e
                },
                _shouldCenterTransform: function(t) {
                    if (t) {
                        var e, i = this._currentTransform;
                        return "scale" === i.action || "scaleX" === i.action || "scaleY" === i.action ? e = this.centeredScaling || t.centeredScaling : "rotate" === i.action && (e = this.centeredRotation || t.centeredRotation), e ? !i.altKey : i.altKey
                    }
                },
                _getOriginFromCorner: function(t, e) {
                    var i = {
                        x: t.originX,
                        y: t.originY
                    };
                    return "ml" === e || "tl" === e || "bl" === e ? i.x = "right" : "mr" !== e && "tr" !== e && "br" !== e || (i.x = "left"), "tl" === e || "mt" === e || "tr" === e ? i.y = "bottom" : "bl" !== e && "mb" !== e && "br" !== e || (i.y = "top"), i
                },
                _getActionFromCorner: function(t, e, i) {
                    if (!e) return "drag";
                    switch (e) {
                        case "mtr":
                            return "rotate";
                        case "ml":
                        case "mr":
                            return i[this.altActionKey] ? "skewY" : "scaleX";
                        case "mt":
                        case "mb":
                            return i[this.altActionKey] ? "skewX" : "scaleY";
                        default:
                            return "scale"
                    }
                },
                _setupCurrentTransform: function(t, e) {
                    if (e) {
                        var i = this.getPointer(t),
                            r = e._findTargetCorner(this.getPointer(t, !0)),
                            n = this._getActionFromCorner(e, r, t),
                            s = this._getOriginFromCorner(e, r);
                        this._currentTransform = {
                            target: e,
                            action: n,
                            corner: r,
                            scaleX: e.scaleX,
                            scaleY: e.scaleY,
                            skewX: e.skewX,
                            skewY: e.skewY,
                            offsetX: i.x - e.left,
                            offsetY: i.y - e.top,
                            originX: s.x,
                            originY: s.y,
                            ex: i.x,
                            ey: i.y,
                            lastX: i.x,
                            lastY: i.y,
                            theta: o(e.angle),
                            width: e.width * e.scaleX,
                            mouseXSign: 1,
                            mouseYSign: 1,
                            shiftKey: t.shiftKey,
                            altKey: t[this.centeredKey]
                        }, this._currentTransform.original = {
                            left: e.left,
                            top: e.top,
                            scaleX: e.scaleX,
                            scaleY: e.scaleY,
                            skewX: e.skewX,
                            skewY: e.skewY,
                            originX: s.x,
                            originY: s.y
                        }, this._resetCurrentTransform(), this._beforeTransform(t)
                    }
                },
                _translateObject: function(t, e) {
                    var i = this._currentTransform,
                        r = i.target,
                        n = t - i.offsetX,
                        s = e - i.offsetY,
                        o = !r.get("lockMovementX") && r.left !== n,
                        a = !r.get("lockMovementY") && r.top !== s;
                    return o && r.set("left", n), a && r.set("top", s), o || a
                },
                _changeSkewTransformOrigin: function(t, e, i) {
                    var r = "originX",
                        n = {
                            0: "center"
                        },
                        s = e.target.skewX,
                        o = "left",
                        a = "right",
                        h = "mt" === e.corner || "ml" === e.corner ? 1 : -1,
                        c = 1;
                    t = 0 < t ? 1 : -1, "y" === i && (s = e.target.skewY, o = "top", a = "bottom", r = "originY"), n[-1] = o, n[1] = a, e.target.flipX && (c *= -1), e.target.flipY && (c *= -1), 0 === s ? (e.skewSign = -h * t * c, e[r] = n[-t]) : (s = 0 < s ? 1 : -1, e.skewSign = s, e[r] = n[s * h * c])
                },
                _skewObject: function(t, e, i) {
                    var r, n = this._currentTransform,
                        s = n.target,
                        o = s.get("lockSkewingX"),
                        a = s.get("lockSkewingY");
                    if (o && "x" === i || a && "y" === i) return !1;
                    var h, c, l = s.getCenterPoint(),
                        u = s.toLocalPoint(new fabric.Point(t, e), "center", "center")[i],
                        f = s.toLocalPoint(new fabric.Point(n.lastX, n.lastY), "center", "center")[i],
                        d = s._getTransformedDimensions();
                    return this._changeSkewTransformOrigin(u - f, n, i), h = s.toLocalPoint(new fabric.Point(t, e), n.originX, n.originY)[i], c = s.translateToOriginPoint(l, n.originX, n.originY), r = this._setObjectSkew(h, n, i, d), n.lastX = t, n.lastY = e, s.setPositionByOrigin(c, n.originX, n.originY), r
                },
                _setObjectSkew: function(t, e, i, r) {
                    var n, s, o, a, h, c, l, u, f, d, g = e.target,
                        p = e.skewSign;
                    return "x" === i ? (h = "y", c = "Y", l = "X", f = 0, d = g.skewY) : (h = "x", c = "X", l = "Y", f = g.skewX, d = 0), a = g._getTransformedDimensions(f, d), (u = 2 * Math.abs(t) - a[i]) <= 2 ? n = 0 : (n = p * Math.atan(u / g["scale" + l] / (a[h] / g["scale" + c])), n = fabric.util.radiansToDegrees(n)), s = g["skew" + l] !== n, g.set("skew" + l, n), 0 !== g["skew" + c] && (o = g._getTransformedDimensions(), n = r[h] / o[h] * g["scale" + c], g.set("scale" + c, n)), s
                },
                _scaleObject: function(t, e, i) {
                    var r = this._currentTransform,
                        n = r.target,
                        s = n.lockScalingX,
                        o = n.lockScalingY,
                        a = n.lockScalingFlip;
                    if (s && o) return !1;
                    var h, c = n.translateToOriginPoint(n.getCenterPoint(), r.originX, r.originY),
                        l = n.toLocalPoint(new fabric.Point(t, e), r.originX, r.originY),
                        u = n._getTransformedDimensions();
                    return this._setLocalMouse(l, r), h = this._setObjectScale(l, r, s, o, i, a, u), n.setPositionByOrigin(c, r.originX, r.originY), h
                },
                _setObjectScale: function(t, e, i, r, n, s, o) {
                    var a, h, c, l, u = e.target,
                        f = !1,
                        d = !1,
                        g = !1;
                    return c = t.x * u.scaleX / o.x, l = t.y * u.scaleY / o.y, a = u.scaleX !== c, h = u.scaleY !== l, s && c <= 0 && c < u.scaleX && (f = !0, t.x = 0), s && l <= 0 && l < u.scaleY && (d = !0, t.y = 0), "equally" !== n || i || r ? n ? "x" !== n || u.get("lockUniScaling") ? "y" !== n || u.get("lockUniScaling") || d || r || u.set("scaleY", l) && (g = g || h) : f || i || u.set("scaleX", c) && (g = g || a) : (f || i || u.set("scaleX", c) && (g = g || a), d || r || u.set("scaleY", l) && (g = g || h)) : g = this._scaleObjectEqually(t, u, e, o), e.newScaleX = c, e.newScaleY = l, f || d || this._flipObject(e, n), g
                },
                _scaleObjectEqually: function(t, e, i, r) {
                    var n, s = t.y + t.x,
                        o = r.y * i.original.scaleY / e.scaleY + r.x * i.original.scaleX / e.scaleX,
                        a = t.x < 0 ? -1 : 1,
                        h = t.y < 0 ? -1 : 1;
                    return i.newScaleX = a * Math.abs(i.original.scaleX * s / o), i.newScaleY = h * Math.abs(i.original.scaleY * s / o), n = i.newScaleX !== e.scaleX || i.newScaleY !== e.scaleY, e.set("scaleX", i.newScaleX), e.set("scaleY", i.newScaleY), n
                },
                _flipObject: function(t, e) {
                    t.newScaleX < 0 && "y" !== e && ("left" === t.originX ? t.originX = "right" : "right" === t.originX && (t.originX = "left")), t.newScaleY < 0 && "x" !== e && ("top" === t.originY ? t.originY = "bottom" : "bottom" === t.originY && (t.originY = "top"))
                },
                _setLocalMouse: function(t, e) {
                    var i = e.target,
                        r = this.getZoom(),
                        n = i.padding / r;
                    "right" === e.originX ? t.x *= -1 : "center" === e.originX && (t.x *= 2 * e.mouseXSign, t.x < 0 && (e.mouseXSign = -e.mouseXSign)), "bottom" === e.originY ? t.y *= -1 : "center" === e.originY && (t.y *= 2 * e.mouseYSign, t.y < 0 && (e.mouseYSign = -e.mouseYSign)), c(t.x) > n ? t.x < 0 ? t.x += n : t.x -= n : t.x = 0, c(t.y) > n ? t.y < 0 ? t.y += n : t.y -= n : t.y = 0
                },
                _rotateObject: function(t, e) {
                    var i = this._currentTransform,
                        r = i.target,
                        n = r.translateToOriginPoint(r.getCenterPoint(), i.originX, i.originY);
                    if (r.lockRotation) return !1;
                    var s = g(i.ey - n.y, i.ex - n.x),
                        o = g(e - n.y, t - n.x),
                        a = d(o - s + i.theta),
                        h = !0;
                    if (0 < r.snapAngle) {
                        var c = r.snapAngle,
                            l = r.snapThreshold || c,
                            u = Math.ceil(a / c) * c,
                            f = Math.floor(a / c) * c;
                        Math.abs(a - f) < l ? a = f : Math.abs(a - u) < l && (a = u)
                    }
                    return a < 0 && (a = 360 + a), a %= 360, r.angle === a ? h = !1 : (r.angle = a, r.setPositionByOrigin(n, i.originX, i.originY)), h
                },
                setCursor: function(t) {
                    this.upperCanvasEl.style.cursor = t
                },
                _resetObjectTransform: function(t) {
                    t.scaleX = 1, t.scaleY = 1, t.skewX = 0, t.skewY = 0, t.rotate(0)
                },
                _drawSelection: function(t) {
                    var e = this._groupSelector,
                        i = e.left,
                        r = e.top,
                        n = c(i),
                        s = c(r);
                    if (this.selectionColor && (t.fillStyle = this.selectionColor, t.fillRect(e.ex - (0 < i ? 0 : -i), e.ey - (0 < r ? 0 : -r), n, s)), this.selectionLineWidth && this.selectionBorderColor)
                        if (t.lineWidth = this.selectionLineWidth, t.strokeStyle = this.selectionBorderColor, 1 < this.selectionDashArray.length && !l) {
                            var o = e.ex + .5 - (0 < i ? 0 : n),
                                a = e.ey + .5 - (0 < r ? 0 : s);
                            t.beginPath(), fabric.util.drawDashedLine(t, o, a, o + n, a, this.selectionDashArray), fabric.util.drawDashedLine(t, o, a + s - 1, o + n, a + s - 1, this.selectionDashArray), fabric.util.drawDashedLine(t, o, a, o, a + s, this.selectionDashArray), fabric.util.drawDashedLine(t, o + n - 1, a, o + n - 1, a + s, this.selectionDashArray), t.closePath(), t.stroke()
                        } else fabric.Object.prototype._setLineDash.call(this, t, this.selectionDashArray), t.strokeRect(e.ex + .5 - (0 < i ? 0 : n), e.ey + .5 - (0 < r ? 0 : s), n, s)
                },
                findTarget: function(t, e) {
                    if (!this.skipTargetFind) {
                        var i, r, n = this.getPointer(t, !0),
                            s = this._activeObject,
                            o = this.getActiveObjects();
                        if (this.targets = [], 1 < o.length && !e && s === this._searchPossibleTargets([s], n)) return s;
                        if (1 === o.length && s._findTargetCorner(n)) return s;
                        if (1 === o.length && s === this._searchPossibleTargets([s], n)) {
                            if (!this.preserveObjectStacking) return s;
                            i = s, r = this.targets, this.targets = []
                        }
                        var a = this._searchPossibleTargets(this._objects, n);
                        return t[this.altSelectionKey] && a && i && a !== i && (a = i, this.targets = r), a
                    }
                },
                _checkTarget: function(t, e) {
                    if (e && e.visible && e.evented && this.containsPoint(null, e, t)) {
                        if (!this.perPixelTargetFind && !e.perPixelTargetFind || e.isEditing) return !0;
                        if (!this.isTargetTransparent(e, t.x, t.y)) return !0
                    }
                },
                _searchPossibleTargets: function(t, e) {
                    for (var i, r, n, s = t.length; s--;)
                        if (this._checkTarget(e, t[s])) {
                            (i = t[s]).subTargetCheck && i instanceof fabric.Group && (r = this._normalizePointer(i, e), (n = this._searchPossibleTargets(i._objects, r)) && this.targets.push(n));
                            break
                        } return i
                },
                restorePointerVpt: function(t) {
                    return fabric.util.transformPoint(t, fabric.util.invertTransform(this.viewportTransform))
                },
                getPointer: function(t, e) {
                    if (this._absolutePointer && !e) return this._absolutePointer;
                    if (this._pointer && e) return this._pointer;
                    var i, r = h(t),
                        n = this.upperCanvasEl,
                        s = n.getBoundingClientRect(),
                        o = s.width || 0,
                        a = s.height || 0;
                    return o && a || ("top" in s && "bottom" in s && (a = Math.abs(s.top - s.bottom)), "right" in s && "left" in s && (o = Math.abs(s.right - s.left))), this.calcOffset(), r.x = r.x - this._offset.left, r.y = r.y - this._offset.top, e || (r = this.restorePointerVpt(r)), i = 0 === o || 0 === a ? {
                        width: 1,
                        height: 1
                    } : {
                        width: n.width / o,
                        height: n.height / a
                    }, {
                        x: r.x * i.width,
                        y: r.y * i.height
                    }
                },
                _createUpperCanvas: function() {
                    var t = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, "");
                    this.upperCanvasEl ? this.upperCanvasEl.className = "" : this.upperCanvasEl = this._createCanvasElement(), fabric.util.addClass(this.upperCanvasEl, "upper-canvas " + t), this.wrapperEl.appendChild(this.upperCanvasEl), this._copyCanvasStyle(this.lowerCanvasEl, this.upperCanvasEl), this._applyCanvasStyle(this.upperCanvasEl), this.contextTop = this.upperCanvasEl.getContext("2d")
                },
                _createCacheCanvas: function() {
                    this.cacheCanvasEl = this._createCanvasElement(), this.cacheCanvasEl.setAttribute("width", this.width), this.cacheCanvasEl.setAttribute("height", this.height), this.contextCache = this.cacheCanvasEl.getContext("2d")
                },
                _initWrapperElement: function() {
                    this.wrapperEl = fabric.util.wrapElement(this.lowerCanvasEl, "div", {
                        class: this.containerClass
                    }), fabric.util.setStyle(this.wrapperEl, {
                        width: this.width + "px",
                        height: this.height + "px",
                        position: "relative"
                    }), fabric.util.makeElementUnselectable(this.wrapperEl)
                },
                _applyCanvasStyle: function(t) {
                    var e = this.width || t.width,
                        i = this.height || t.height;
                    fabric.util.setStyle(t, {
                        position: "absolute",
                        width: e + "px",
                        height: i + "px",
                        left: 0,
                        top: 0,
                        "touch-action": this.allowTouchScrolling ? "manipulation" : "none"
                    }), t.width = e, t.height = i, fabric.util.makeElementUnselectable(t)
                },
                _copyCanvasStyle: function(t, e) {
                    e.style.cssText = t.style.cssText
                },
                getSelectionContext: function() {
                    return this.contextTop
                },
                getSelectionElement: function() {
                    return this.upperCanvasEl
                },
                getActiveObject: function() {
                    return this._activeObject
                },
                getActiveObjects: function() {
                    var t = this._activeObject;
                    return t ? "activeSelection" === t.type && t._objects ? t._objects.slice(0) : [t] : []
                },
                _onObjectRemoved: function(t) {
                    t === this._activeObject && (this.fire("before:selection:cleared", {
                        target: t
                    }), this._discardActiveObject(), this.fire("selection:cleared", {
                        target: t
                    }), t.fire("deselected")), this._hoveredTarget === t && (this._hoveredTarget = null), this.callSuper("_onObjectRemoved", t)
                },
                _fireSelectionEvents: function(e, t) {
                    var i = !1,
                        r = this.getActiveObjects(),
                        n = [],
                        s = [],
                        o = {
                            e: t
                        };
                    e.forEach(function(t) {
                        -1 === r.indexOf(t) && (i = !0, t.fire("deselected", o), s.push(t))
                    }), r.forEach(function(t) {
                        -1 === e.indexOf(t) && (i = !0, t.fire("selected", o), n.push(t))
                    }), 0 < e.length && 0 < r.length ? (o.selected = n, o.deselected = s, o.updated = n[0] || s[0], o.target = this._activeObject, i && this.fire("selection:updated", o)) : 0 < r.length ? (1 === r.length && (o.target = n[0], this.fire("object:selected", o)), o.selected = n, o.target = this._activeObject, this.fire("selection:created", o)) : 0 < e.length && (o.deselected = s, this.fire("selection:cleared", o))
                },
                setActiveObject: function(t, e) {
                    var i = this.getActiveObjects();
                    return this._setActiveObject(t, e), this._fireSelectionEvents(i, e), this
                },
                _setActiveObject: function(t, e) {
                    return this._activeObject !== t && (!!this._discardActiveObject(e, t) && (!t.onSelect({
                        e: e
                    }) && (this._activeObject = t, !0)))
                },
                _discardActiveObject: function(t, e) {
                    var i = this._activeObject;
                    if (i) {
                        if (i.onDeselect({
                                e: t,
                                object: e
                            })) return !1;
                        this._activeObject = null
                    }
                    return !0
                },
                discardActiveObject: function(t) {
                    var e = this.getActiveObjects();
                    return e.length && this.fire("before:selection:cleared", {
                        target: e[0],
                        e: t
                    }), this._discardActiveObject(t), this._fireSelectionEvents(e, t), this
                },
                dispose: function() {
                    var t = this.wrapperEl;
                    return this.removeListeners(), t.removeChild(this.upperCanvasEl), t.removeChild(this.lowerCanvasEl), this.upperCanvasEl = null, this.cacheCanvasEl = null, this.contextCache = null, this.contextTop = null, t.parentNode && t.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl), delete this.wrapperEl, fabric.StaticCanvas.prototype.dispose.call(this), this
                },
                clear: function() {
                    return this.discardActiveObject(), this.clearContext(this.contextTop), this.callSuper("clear")
                },
                drawControls: function(t) {
                    var e = this._activeObject;
                    e && e._renderControls(t)
                },
                _toObject: function(t, e, i) {
                    var r = this._realizeGroupTransformOnObject(t),
                        n = this.callSuper("_toObject", t, e, i);
                    return this._unwindGroupTransformOnObject(t, r), n
                },
                _realizeGroupTransformOnObject: function(e) {
                    if (e.group && "activeSelection" === e.group.type && this._activeObject === e.group) {
                        var i = {};
                        return ["angle", "flipX", "flipY", "left", "scaleX", "scaleY", "skewX", "skewY", "top"].forEach(function(t) {
                            i[t] = e[t]
                        }), this._activeObject.realizeTransform(e), i
                    }
                    return null
                },
                _unwindGroupTransformOnObject: function(t, e) {
                    e && t.set(e)
                },
                _setSVGObject: function(t, e, i) {
                    var r = this._realizeGroupTransformOnObject(e);
                    this.callSuper("_setSVGObject", t, e, i), this._unwindGroupTransformOnObject(e, r)
                },
                setViewportTransform: function(t) {
                    this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing && this._activeObject.clearContextTop(), fabric.StaticCanvas.prototype.setViewportTransform.call(this, t)
                }
            }), fabric.StaticCanvas) "prototype" !== t && (fabric.Canvas[t] = fabric.StaticCanvas[t]);
        fabric.isTouchSupported && (fabric.Canvas.prototype._setCursorFromEvent = function() {})
    }(),
    function() {
        var n = {
                mt: 0,
                tr: 1,
                mr: 2,
                br: 3,
                mb: 4,
                bl: 5,
                ml: 6,
                tl: 7
            },
            i = fabric.util.addListener,
            r = fabric.util.removeListener,
            s = {
                passive: !1
            };

        function o(t, e) {
            return "which" in t ? t.which === e : t.button === e - 1
        }
        fabric.util.object.extend(fabric.Canvas.prototype, {
            cursorMap: ["n-resize", "ne-resize", "e-resize", "se-resize", "s-resize", "sw-resize", "w-resize", "nw-resize"],
            _initEventListeners: function() {
                this.removeListeners(), this._bindEvents(), this.addOrRemove(i, "add")
            },
            addOrRemove: function(t, e) {
                t(fabric.window, "resize", this._onResize), t(this.upperCanvasEl, "mousedown", this._onMouseDown), t(this.upperCanvasEl, "mousemove", this._onMouseMove, s), t(this.upperCanvasEl, "mouseout", this._onMouseOut), t(this.upperCanvasEl, "mouseenter", this._onMouseEnter), t(this.upperCanvasEl, "wheel", this._onMouseWheel), t(this.upperCanvasEl, "contextmenu", this._onContextMenu), t(this.upperCanvasEl, "dblclick", this._onDoubleClick), t(this.upperCanvasEl, "touchstart", this._onMouseDown, s), t(this.upperCanvasEl, "touchmove", this._onMouseMove, s), t(this.upperCanvasEl, "dragover", this._onDragOver), t(this.upperCanvasEl, "dragenter", this._onDragEnter), t(this.upperCanvasEl, "dragleave", this._onDragLeave), t(this.upperCanvasEl, "drop", this._onDrop), "undefined" != typeof eventjs && e in eventjs && (eventjs[e](this.upperCanvasEl, "gesture", this._onGesture), eventjs[e](this.upperCanvasEl, "drag", this._onDrag), eventjs[e](this.upperCanvasEl, "orientation", this._onOrientationChange), eventjs[e](this.upperCanvasEl, "shake", this._onShake), eventjs[e](this.upperCanvasEl, "longpress", this._onLongPress))
            },
            removeListeners: function() {
                this.addOrRemove(r, "remove"), r(fabric.document, "mouseup", this._onMouseUp), r(fabric.document, "touchend", this._onMouseUp, s), r(fabric.document, "mousemove", this._onMouseMove, s), r(fabric.document, "touchmove", this._onMouseMove, s)
            },
            _bindEvents: function() {
                this.eventsBound || (this._onMouseDown = this._onMouseDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this._onMouseUp = this._onMouseUp.bind(this), this._onResize = this._onResize.bind(this), this._onGesture = this._onGesture.bind(this), this._onDrag = this._onDrag.bind(this), this._onShake = this._onShake.bind(this), this._onLongPress = this._onLongPress.bind(this), this._onOrientationChange = this._onOrientationChange.bind(this), this._onMouseWheel = this._onMouseWheel.bind(this), this._onMouseOut = this._onMouseOut.bind(this), this._onMouseEnter = this._onMouseEnter.bind(this), this._onContextMenu = this._onContextMenu.bind(this), this._onDoubleClick = this._onDoubleClick.bind(this), this._onDragOver = this._onDragOver.bind(this), this._onDragEnter = this._simpleEventHandler.bind(this, "dragenter"), this._onDragLeave = this._simpleEventHandler.bind(this, "dragleave"), this._onDrop = this._simpleEventHandler.bind(this, "drop"), this.eventsBound = !0)
            },
            _onGesture: function(t, e) {
                this.__onTransformGesture && this.__onTransformGesture(t, e)
            },
            _onDrag: function(t, e) {
                this.__onDrag && this.__onDrag(t, e)
            },
            _onMouseWheel: function(t) {
                this.__onMouseWheel(t)
            },
            _onMouseOut: function(t) {
                var e = this._hoveredTarget;
                this.fire("mouse:out", {
                    target: e,
                    e: t
                }), this._hoveredTarget = null, e && e.fire("mouseout", {
                    e: t
                }), this._iTextInstances && this._iTextInstances.forEach(function(t) {
                    t.isEditing && t.hiddenTextarea.focus()
                })
            },
            _onMouseEnter: function(t) {
                this.findTarget(t) || (this.fire("mouse:over", {
                    target: null,
                    e: t
                }), this._hoveredTarget = null)
            },
            _onOrientationChange: function(t, e) {
                this.__onOrientationChange && this.__onOrientationChange(t, e)
            },
            _onShake: function(t, e) {
                this.__onShake && this.__onShake(t, e)
            },
            _onLongPress: function(t, e) {
                this.__onLongPress && this.__onLongPress(t, e)
            },
            _onDragOver: function(t) {
                t.preventDefault();
                var e = this._simpleEventHandler("dragover", t);
                this._fireEnterLeaveEvents(e, t)
            },
            _onContextMenu: function(t) {
                return this.stopContextMenu && (t.stopPropagation(), t.preventDefault()), !1
            },
            _onDoubleClick: function(t) {
                this._cacheTransformEventData(t), this._handleEvent(t, "dblclick"), this._resetTransformEventData(t)
            },
            _onMouseDown: function(t) {
                this.__onMouseDown(t), this._resetTransformEventData(), i(fabric.document, "touchend", this._onMouseUp, s), i(fabric.document, "touchmove", this._onMouseMove, s), r(this.upperCanvasEl, "mousemove", this._onMouseMove, s), r(this.upperCanvasEl, "touchmove", this._onMouseMove, s), "touchstart" === t.type ? r(this.upperCanvasEl, "mousedown", this._onMouseDown) : (i(fabric.document, "mouseup", this._onMouseUp), i(fabric.document, "mousemove", this._onMouseMove, s))
            },
            _onMouseUp: function(t) {
                if (this.__onMouseUp(t), this._resetTransformEventData(), r(fabric.document, "mouseup", this._onMouseUp), r(fabric.document, "touchend", this._onMouseUp, s), r(fabric.document, "mousemove", this._onMouseMove, s), r(fabric.document, "touchmove", this._onMouseMove, s), i(this.upperCanvasEl, "mousemove", this._onMouseMove, s), i(this.upperCanvasEl, "touchmove", this._onMouseMove, s), "touchend" === t.type) {
                    var e = this;
                    setTimeout(function() {
                        i(e.upperCanvasEl, "mousedown", e._onMouseDown)
                    }, 400)
                }
            },
            _onMouseMove: function(t) {
                !this.allowTouchScrolling && t.preventDefault && t.preventDefault(), this.__onMouseMove(t)
            },
            _onResize: function() {
                this.calcOffset()
            },
            _shouldRender: function(t, e) {
                var i = this._activeObject;
                return (!i || !i.isEditing || t !== i) && !!(t && (t.isMoving || t !== i) || !t && i || !t && !i && !this._groupSelector || e && this._previousPointer && this.selection && (e.x !== this._previousPointer.x || e.y !== this._previousPointer.y))
            },
            __onMouseUp: function(t) {
                var e, i = this._currentTransform,
                    r = this._groupSelector,
                    n = !r || 0 === r.left && 0 === r.top;
                if (this._cacheTransformEventData(t), e = this._target, this._handleEvent(t, "up:before"), o(t, 3)) this.fireRightClick && this._handleEvent(t, "up", 3, n);
                else {
                    if (o(t, 2)) return this.fireMiddleClick && this._handleEvent(t, "up", 2, n), void this._resetTransformEventData();
                    if (this.isDrawingMode && this._isCurrentlyDrawing) this._onMouseUpInDrawingMode(t);
                    else {
                        i && this._finalizeCurrentTransform(t);
                        var s = this._shouldRender(e, this._absolutePointer);
                        !e && n || this._maybeGroupObjects(t), e && (e.isMoving = !1), this._setCursorFromEvent(t, e), this._handleEvent(t, "up", 1, n), this._groupSelector = null, this._currentTransform = null, e && (e.__corner = 0), s && this.requestRenderAll()
                    }
                }
            },
            _simpleEventHandler: function(t, e) {
                var i = this.findTarget(e),
                    r = this.targets,
                    n = {
                        e: e,
                        target: i,
                        subTargets: r
                    };
                if (this.fire(t, n), i && i.fire(t, n), !r) return i;
                for (var s = 0; s < r.length; s++) r[s].fire(t, n);
                return i
            },
            _handleEvent: function(t, e, i, r) {
                var n = this._target,
                    s = this.targets || [],
                    o = {
                        e: t,
                        target: n,
                        subTargets: s,
                        button: i || 1,
                        isClick: r || !1,
                        pointer: this._pointer,
                        absolutePointer: this._absolutePointer,
                        transform: this._currentTransform
                    };
                this.fire("mouse:" + e, o), n && n.fire("mouse" + e, o);
                for (var a = 0; a < s.length; a++) s[a].fire("mouse" + e, o)
            },
            _finalizeCurrentTransform: function(t) {
                var e, i = this._currentTransform,
                    r = i.target,
                    n = {
                        e: t,
                        target: r,
                        transform: i
                    };
                r._scaling && (r._scaling = !1), r.setCoords(), (i.actionPerformed || this.stateful && r.hasStateChanged()) && (i.actionPerformed && (e = this._addEventOptions(n, i), this._fire(e, n)), this._fire("modified", n))
            },
            _addEventOptions: function(t, e) {
                var i, r;
                switch (e.action) {
                    case "scaleX":
                        i = "scaled", r = "x";
                        break;
                    case "scaleY":
                        i = "scaled", r = "y";
                        break;
                    case "skewX":
                        i = "skewed", r = "x";
                        break;
                    case "skewY":
                        i = "skewed", r = "y";
                        break;
                    case "scale":
                        i = "scaled", r = "equally";
                        break;
                    case "rotate":
                        i = "rotated";
                        break;
                    case "drag":
                        i = "moved"
                }
                return t.by = r, i
            },
            _onMouseDownInDrawingMode: function(t) {
                this._isCurrentlyDrawing = !0, this.getActiveObject() && this.discardActiveObject(t).requestRenderAll(), this.clipTo && fabric.util.clipContext(this, this.contextTop);
                var e = this.getPointer(t);
                this.freeDrawingBrush.onMouseDown(e), this._handleEvent(t, "down")
            },
            _onMouseMoveInDrawingMode: function(t) {
                if (this._isCurrentlyDrawing) {
                    var e = this.getPointer(t);
                    this.freeDrawingBrush.onMouseMove(e)
                }
                this.setCursor(this.freeDrawingCursor), this._handleEvent(t, "move")
            },
            _onMouseUpInDrawingMode: function(t) {
                this._isCurrentlyDrawing = !1, this.clipTo && this.contextTop.restore(), this.freeDrawingBrush.onMouseUp(), this._handleEvent(t, "up")
            },
            __onMouseDown: function(t) {
                this._cacheTransformEventData(t), this._handleEvent(t, "down:before");
                var e = this._target;
                if (o(t, 3)) this.fireRightClick && this._handleEvent(t, "down", 3);
                else if (o(t, 2)) this.fireMiddleClick && this._handleEvent(t, "down", 2);
                else if (this.isDrawingMode) this._onMouseDownInDrawingMode(t);
                else if (!this._currentTransform) {
                    var i = this._pointer;
                    this._previousPointer = i;
                    var r = this._shouldRender(e, i),
                        n = this._shouldGroup(t, e);
                    this._shouldClearSelection(t, e) ? this.discardActiveObject(t) : n && (this._handleGrouping(t, e), e = this._activeObject), !this.selection || e && (e.selectable || e.isEditing || e === this._activeObject) || (this._groupSelector = {
                        ex: i.x,
                        ey: i.y,
                        top: 0,
                        left: 0
                    }), e && (e.selectable && this.setActiveObject(e, t), e !== this._activeObject || !e.__corner && n || this._setupCurrentTransform(t, e)), this._handleEvent(t, "down"), r && this.requestRenderAll()
                }
            },
            _resetTransformEventData: function() {
                this._target = null, this._pointer = null, this._absolutePointer = null
            },
            _cacheTransformEventData: function(t) {
                this._resetTransformEventData(), this._pointer = this.getPointer(t, !0), this._absolutePointer = this.restorePointerVpt(this._pointer), this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(t) || null
            },
            _beforeTransform: function(t) {
                var e = this._currentTransform;
                this.stateful && e.target.saveState(), this.fire("before:transform", {
                    e: t,
                    transform: e
                }), e.corner && this.onBeforeScaleRotate(e.target)
            },
            __onMouseMove: function(t) {
                var e, i;
                if (this._handleEvent(t, "move:before"), this._cacheTransformEventData(t), this.isDrawingMode) this._onMouseMoveInDrawingMode(t);
                else if (!(void 0 !== t.touches && 1 < t.touches.length)) {
                    var r = this._groupSelector;
                    r ? (i = this._pointer, r.left = i.x - r.ex, r.top = i.y - r.ey, this.renderTop()) : this._currentTransform ? this._transformObject(t) : (e = this.findTarget(t) || null, this._setCursorFromEvent(t, e), this._fireOverOutEvents(e, t)), this._handleEvent(t, "move"), this._resetTransformEventData()
                }
            },
            _fireOverOutEvents: function(t, e) {
                this.fireSynteticInOutEvents(t, e, {
                    targetName: "_hoveredTarget",
                    canvasEvtOut: "mouse:out",
                    evtOut: "mouseout",
                    canvasEvtIn: "mouse:over",
                    evtIn: "mouseover"
                })
            },
            _fireEnterLeaveEvents: function(t, e) {
                this.fireSynteticInOutEvents(t, e, {
                    targetName: "_draggedoverTarget",
                    evtOut: "dragleave",
                    evtIn: "dragenter"
                })
            },
            fireSynteticInOutEvents: function(t, e, i) {
                var r, n, s, o = this[i.targetName],
                    a = o !== t,
                    h = i.canvasEvtIn,
                    c = i.canvasEvtOut;
                a && (r = {
                    e: e,
                    target: t,
                    previousTarget: o
                }, n = {
                    e: e,
                    target: o,
                    nextTarget: t
                }, this[i.targetName] = t), s = t && a, o && a && (c && this.fire(c, n), o.fire(i.evtOut, n)), s && (h && this.fire(h, r), t.fire(i.evtIn, r))
            },
            __onMouseWheel: function(t) {
                this._cacheTransformEventData(t), this._handleEvent(t, "wheel"), this._resetTransformEventData()
            },
            _transformObject: function(t) {
                var e = this.getPointer(t),
                    i = this._currentTransform;
                i.reset = !1, i.target.isMoving = !0, i.shiftKey = t.shiftKey, i.altKey = t[this.centeredKey], this._beforeScaleTransform(t, i), this._performTransformAction(t, i, e), i.actionPerformed && this.requestRenderAll()
            },
            _performTransformAction: function(t, e, i) {
                var r = i.x,
                    n = i.y,
                    s = e.action,
                    o = !1,
                    a = {
                        target: e.target,
                        e: t,
                        transform: e,
                        pointer: i
                    };
                "rotate" === s ? (o = this._rotateObject(r, n)) && this._fire("rotating", a) : "scale" === s ? (o = this._onScale(t, e, r, n)) && this._fire("scaling", a) : "scaleX" === s ? (o = this._scaleObject(r, n, "x")) && this._fire("scaling", a) : "scaleY" === s ? (o = this._scaleObject(r, n, "y")) && this._fire("scaling", a) : "skewX" === s ? (o = this._skewObject(r, n, "x")) && this._fire("skewing", a) : "skewY" === s ? (o = this._skewObject(r, n, "y")) && this._fire("skewing", a) : (o = this._translateObject(r, n)) && (this._fire("moving", a), this.setCursor(a.target.moveCursor || this.moveCursor)), e.actionPerformed = e.actionPerformed || o
            },
            _fire: function(t, e) {
                this.fire("object:" + t, e), e.target.fire(t, e)
            },
            _beforeScaleTransform: function(t, e) {
                if ("scale" === e.action || "scaleX" === e.action || "scaleY" === e.action) {
                    var i = this._shouldCenterTransform(e.target);
                    (i && ("center" !== e.originX || "center" !== e.originY) || !i && "center" === e.originX && "center" === e.originY) && (this._resetCurrentTransform(), e.reset = !0)
                }
            },
            _onScale: function(t, e, i, r) {
                return this._isUniscalePossible(t, e.target) ? (e.currentAction = "scale", this._scaleObject(i, r)) : (e.reset || "scale" !== e.currentAction || this._resetCurrentTransform(), e.currentAction = "scaleEqually", this._scaleObject(i, r, "equally"))
            },
            _isUniscalePossible: function(t, e) {
                return (t[this.uniScaleKey] || this.uniScaleTransform) && !e.get("lockUniScaling")
            },
            _setCursorFromEvent: function(t, e) {
                if (!e) return this.setCursor(this.defaultCursor), !1;
                var i = e.hoverCursor || this.hoverCursor,
                    r = this._activeObject && "activeSelection" === this._activeObject.type ? this._activeObject : null,
                    n = (!r || !r.contains(e)) && e._findTargetCorner(this.getPointer(t, !0));
                n ? this.setCursor(this.getCornerCursor(n, e, t)) : this.setCursor(i)
            },
            getCornerCursor: function(t, e, i) {
                return this.actionIsDisabled(t, e, i) ? this.notAllowedCursor : t in n ? this._getRotatedCornerCursor(t, e, i) : "mtr" === t && e.hasRotatingPoint ? this.rotationCursor : this.defaultCursor
            },
            actionIsDisabled: function(t, e, i) {
                return "mt" === t || "mb" === t ? i[this.altActionKey] ? e.lockSkewingX : e.lockScalingY : "ml" === t || "mr" === t ? i[this.altActionKey] ? e.lockSkewingY : e.lockScalingX : "mtr" === t ? e.lockRotation : this._isUniscalePossible(i, e) ? e.lockScalingX && e.lockScalingY : e.lockScalingX || e.lockScalingY
            },
            _getRotatedCornerCursor: function(t, e, i) {
                var r = Math.round(e.angle % 360 / 45);
                return r < 0 && (r += 8), r += n[t], i[this.altActionKey] && n[t] % 2 == 0 && (r += 2), r %= 8, this.cursorMap[r]
            }
        })
    }(),
    function() {
        var u = Math.min,
            f = Math.max;
        fabric.util.object.extend(fabric.Canvas.prototype, {
            _shouldGroup: function(t, e) {
                var i = this._activeObject;
                return i && this._isSelectionKeyPressed(t) && e && e.selectable && this.selection && (i !== e || "activeSelection" === i.type)
            },
            _handleGrouping: function(t, e) {
                var i = this._activeObject;
                i.__corner || (e !== i || (e = this.findTarget(t, !0))) && (i && "activeSelection" === i.type ? this._updateActiveSelection(e, t) : this._createActiveSelection(e, t))
            },
            _updateActiveSelection: function(t, e) {
                var i = this._activeObject,
                    r = i._objects.slice(0);
                i.contains(t) ? (i.removeWithUpdate(t), this._hoveredTarget = t, 1 === i.size() && this._setActiveObject(i.item(0), e)) : (i.addWithUpdate(t), this._hoveredTarget = i), this._fireSelectionEvents(r, e)
            },
            _createActiveSelection: function(t, e) {
                var i = this.getActiveObjects(),
                    r = this._createGroup(t);
                this._hoveredTarget = r, this._setActiveObject(r, e), this._fireSelectionEvents(i, e)
            },
            _createGroup: function(t) {
                var e = this.getObjects(),
                    i = e.indexOf(this._activeObject) < e.indexOf(t) ? [this._activeObject, t] : [t, this._activeObject];
                return this._activeObject.isEditing && this._activeObject.exitEditing(), new fabric.ActiveSelection(i, {
                    canvas: this
                })
            },
            _groupSelectedObjects: function(t) {
                var e, i = this._collectObjects();
                1 === i.length ? this.setActiveObject(i[0], t) : 1 < i.length && (e = new fabric.ActiveSelection(i.reverse(), {
                    canvas: this
                }), this.setActiveObject(e, t))
            },
            _collectObjects: function() {
                for (var t, e = [], i = this._groupSelector.ex, r = this._groupSelector.ey, n = i + this._groupSelector.left, s = r + this._groupSelector.top, o = new fabric.Point(u(i, n), u(r, s)), a = new fabric.Point(f(i, n), f(r, s)), h = !this.selectionFullyContained, c = i === n && r === s, l = this._objects.length; l-- && !((t = this._objects[l]) && t.selectable && t.visible && (h && t.intersectsWithRect(o, a) || t.isContainedWithinRect(o, a) || h && t.containsPoint(o) || h && t.containsPoint(a)) && (e.push(t), c)););
                return e
            },
            _maybeGroupObjects: function(t) {
                this.selection && this._groupSelector && this._groupSelectedObjects(t), this.setCursor(this.defaultCursor), this._groupSelector = null
            }
        })
    }(),
    function() {
        var r = fabric.StaticCanvas.supports("toDataURLWithQuality");
        fabric.util.object.extend(fabric.StaticCanvas.prototype, {
            toDataURL: function(t) {
                t || (t = {});
                var e = t.format || "png",
                    i = t.quality || 1,
                    r = (t.multiplier || 1) * (t.enableRetinaScaling ? 1 : 1 / this.getRetinaScaling()),
                    n = {
                        left: t.left || 0,
                        top: t.top || 0,
                        width: t.width || 0,
                        height: t.height || 0
                    };
                return this.__toDataURLWithMultiplier(e, i, n, r)
            },
            __toDataURLWithMultiplier: function(t, e, i, r) {
                var n = this.width,
                    s = this.height,
                    o = (i.width || this.width) * r,
                    a = (i.height || this.height) * r,
                    h = this.getZoom() * r,
                    c = this.viewportTransform,
                    l = [h, 0, 0, h, (c[4] - i.left) * r, (c[5] - i.top) * r],
                    u = this.interactive,
                    f = this.skipOffscreen,
                    d = n !== o || s !== a;
                this.viewportTransform = l, this.skipOffscreen = !1, this.interactive = !1, d && this.setDimensions({
                    width: o,
                    height: a
                }, {
                    backstoreOnly: !0
                }), this.renderAll();
                var g = this.__toDataURL(t, e, i);
                return this.interactive = u, this.skipOffscreen = f, this.viewportTransform = c, d && this.setDimensions({
                    width: n,
                    height: s
                }, {
                    backstoreOnly: !0
                }), this.renderAll(), g
            },
            __toDataURL: function(t, e) {
                var i = this.contextContainer.canvas;
                return "jpg" === t && (t = "jpeg"), r ? i.toDataURL("image/" + t, e) : i.toDataURL("image/" + t)
            }
        })
    }(), fabric.util.object.extend(fabric.StaticCanvas.prototype, {
        loadFromDatalessJSON: function(t, e, i) {
            return this.loadFromJSON(t, e, i)
        },
        loadFromJSON: function(t, e, i) {
            if (t) {
                var r = "string" == typeof t ? JSON.parse(t) : fabric.util.object.clone(t),
                    n = this,
                    s = this.renderOnAddRemove;
                return this.renderOnAddRemove = !1, this._enlivenObjects(r.objects, function(t) {
                    n.clear(), n._setBgOverlay(r, function() {
                        t.forEach(function(t, e) {
                            n.insertAt(t, e)
                        }), n.renderOnAddRemove = s, delete r.objects, delete r.backgroundImage, delete r.overlayImage, delete r.background, delete r.overlay, n._setOptions(r), n.renderAll(), e && e()
                    })
                }, i), this
            }
        },
        _setBgOverlay: function(t, e) {
            var i = {
                backgroundColor: !1,
                overlayColor: !1,
                backgroundImage: !1,
                overlayImage: !1
            };
            if (t.backgroundImage || t.overlayImage || t.background || t.overlay) {
                var r = function() {
                    i.backgroundImage && i.overlayImage && i.backgroundColor && i.overlayColor && e && e()
                };
                this.__setBgOverlay("backgroundImage", t.backgroundImage, i, r), this.__setBgOverlay("overlayImage", t.overlayImage, i, r), this.__setBgOverlay("backgroundColor", t.background, i, r), this.__setBgOverlay("overlayColor", t.overlay, i, r)
            } else e && e()
        },
        __setBgOverlay: function(e, t, i, r) {
            var n = this;
            if (!t) return i[e] = !0, void(r && r());
            "backgroundImage" === e || "overlayImage" === e ? fabric.util.enlivenObjects([t], function(t) {
                n[e] = t[0], i[e] = !0, r && r()
            }) : this["set" + fabric.util.string.capitalize(e, !0)](t, function() {
                i[e] = !0, r && r()
            })
        },
        _enlivenObjects: function(t, e, i) {
            t && 0 !== t.length ? fabric.util.enlivenObjects(t, function(t) {
                e && e(t)
            }, null, i) : e && e([])
        },
        _toDataURL: function(e, i) {
            this.clone(function(t) {
                i(t.toDataURL(e))
            })
        },
        _toDataURLWithMultiplier: function(e, i, r) {
            this.clone(function(t) {
                r(t.toDataURLWithMultiplier(e, i))
            })
        },
        clone: function(e, t) {
            var i = JSON.stringify(this.toJSON(t));
            this.cloneWithoutData(function(t) {
                t.loadFromJSON(i, function() {
                    e && e(t)
                })
            })
        },
        cloneWithoutData: function(t) {
            var e = fabric.document.createElement("canvas");
            e.width = this.width, e.height = this.height;
            var i = new fabric.Canvas(e);
            i.clipTo = this.clipTo, this.backgroundImage ? (i.setBackgroundImage(this.backgroundImage.src, function() {
                i.renderAll(), t && t(i)
            }), i.backgroundImageOpacity = this.backgroundImageOpacity, i.backgroundImageStretch = this.backgroundImageStretch) : t && t(i)
        }
    }),
    function(t) {
        "use strict";
        var y = t.fabric || (t.fabric = {}),
            e = y.util.object.extend,
            o = y.util.object.clone,
            r = y.util.toFixed,
            i = y.util.string.capitalize,
            a = y.util.degreesToRadians,
            n = y.StaticCanvas.supports("setLineDash"),
            s = !y.isLikelyNode;
        y.Object || (y.Object = y.util.createClass(y.CommonMethods, {
            type: "object",
            originX: "left",
            originY: "top",
            top: 0,
            left: 0,
            width: 0,
            height: 0,
            scaleX: 1,
            scaleY: 1,
            flipX: !1,
            flipY: !1,
            opacity: 1,
            angle: 0,
            skewX: 0,
            skewY: 0,
            cornerSize: 13,
            transparentCorners: !0,
            hoverCursor: null,
            moveCursor: null,
            padding: 0,
            borderColor: "rgba(102,153,255,0.75)",
            borderDashArray: null,
            cornerColor: "rgba(102,153,255,0.5)",
            cornerStrokeColor: null,
            cornerStyle: "rect",
            cornerDashArray: null,
            centeredScaling: !1,
            centeredRotation: !0,
            fill: "rgb(0,0,0)",
            fillRule: "nonzero",
            globalCompositeOperation: "source-over",
            backgroundColor: "",
            selectionBackgroundColor: "",
            stroke: null,
            strokeWidth: 1,
            strokeDashArray: null,
            strokeLineCap: "butt",
            strokeLineJoin: "miter",
            strokeMiterLimit: 4,
            shadow: null,
            borderOpacityWhenMoving: .4,
            borderScaleFactor: 1,
            transformMatrix: null,
            minScaleLimit: 0,
            selectable: !0,
            evented: !0,
            visible: !0,
            hasControls: !0,
            hasBorders: !0,
            hasRotatingPoint: !0,
            rotatingPointOffset: 40,
            perPixelTargetFind: !1,
            includeDefaultValues: !0,
            clipTo: null,
            lockMovementX: !1,
            lockMovementY: !1,
            lockRotation: !1,
            lockScalingX: !1,
            lockScalingY: !1,
            lockUniScaling: !1,
            lockSkewingX: !1,
            lockSkewingY: !1,
            lockScalingFlip: !1,
            excludeFromExport: !1,
            objectCaching: s,
            statefullCache: !1,
            noScaleCache: !0,
            dirty: !0,
            __corner: 0,
            paintFirst: "fill",
            stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst".split(" "),
            cacheProperties: "fill stroke strokeWidth strokeDashArray width height paintFirst strokeLineCap strokeLineJoin strokeMiterLimit backgroundColor".split(" "),
            initialize: function(t) {
                t && this.setOptions(t)
            },
            _createCacheCanvas: function() {
                this._cacheProperties = {}, this._cacheCanvas = y.document.createElement("canvas"), this._cacheContext = this._cacheCanvas.getContext("2d"), this._updateCacheCanvas(), this.dirty = !0
            },
            _limitCacheSize: function(t) {
                var e = y.perfLimitSizeTotal,
                    i = t.width,
                    r = t.height,
                    n = y.maxCacheSideLimit,
                    s = y.minCacheSideLimit;
                if (i <= n && r <= n && i * r <= e) return i < s && (t.width = s), r < s && (t.height = s), t;
                var o = i / r,
                    a = y.util.limitDimsByArea(o, e),
                    h = y.util.capValue,
                    c = h(s, a.x, n),
                    l = h(s, a.y, n);
                return c < i && (t.zoomX /= i / c, t.width = c, t.capped = !0), l < r && (t.zoomY /= r / l, t.height = l, t.capped = !0), t
            },
            _getCacheCanvasDimensions: function() {
                var t = this.canvas && this.canvas.getZoom() || 1,
                    e = this.getObjectScaling(),
                    i = this.canvas && this.canvas._isRetinaScaling() ? y.devicePixelRatio : 1,
                    r = this._getNonTransformedDimensions(),
                    n = e.scaleX * t * i,
                    s = e.scaleY * t * i;
                return {
                    width: r.x * n + 2,
                    height: r.y * s + 2,
                    zoomX: n,
                    zoomY: s,
                    x: r.x,
                    y: r.y
                }
            },
            _updateCacheCanvas: function() {
                if (this.noScaleCache && this.canvas && this.canvas._currentTransform) {
                    var t = this.canvas._currentTransform.target,
                        e = this.canvas._currentTransform.action;
                    if (this === t && e.slice && "scale" === e.slice(0, 5)) return !1
                }
                var i, r, n = this._cacheCanvas,
                    s = this._limitCacheSize(this._getCacheCanvasDimensions()),
                    o = y.minCacheSideLimit,
                    a = s.width,
                    h = s.height,
                    c = s.zoomX,
                    l = s.zoomY,
                    u = a !== this.cacheWidth || h !== this.cacheHeight,
                    f = this.zoomX !== c || this.zoomY !== l,
                    d = u || f,
                    g = 0,
                    p = 0,
                    v = !1;
                if (u) {
                    var m = this._cacheCanvas.width,
                        b = this._cacheCanvas.height,
                        _ = m < a || b < h;
                    v = _ || (a < .9 * m || h < .9 * b) && o < m && o < b, _ && !s.capped && (o < a || o < h) && (g = .1 * a, p = .1 * h)
                }
                return !!d && (v ? (n.width = Math.ceil(a + g), n.height = Math.ceil(h + p)) : (this._cacheContext.setTransform(1, 0, 0, 1, 0, 0), this._cacheContext.clearRect(0, 0, n.width, n.height)), i = s.x * c / 2, r = s.y * l / 2, this.cacheTranslationX = Math.round(n.width / 2 - i) + i, this.cacheTranslationY = Math.round(n.height / 2 - r) + r, this.cacheWidth = a, this.cacheHeight = h, this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY), this._cacheContext.scale(c, l), this.zoomX = c, this.zoomY = l, !0)
            },
            setOptions: function(t) {
                this._setOptions(t), this._initGradient(t.fill, "fill"), this._initGradient(t.stroke, "stroke"), this._initClipping(t), this._initPattern(t.fill, "fill"), this._initPattern(t.stroke, "stroke")
            },
            transform: function(t) {
                var e;
                e = this.group && !this.group._transformDone ? this.calcTransformMatrix() : this.calcOwnMatrix(), t.transform(e[0], e[1], e[2], e[3], e[4], e[5])
            },
            toObject: function(t) {
                var e = y.Object.NUM_FRACTION_DIGITS,
                    i = {
                        type: this.type,
                        version: y.version,
                        originX: this.originX,
                        originY: this.originY,
                        left: r(this.left, e),
                        top: r(this.top, e),
                        width: r(this.width, e),
                        height: r(this.height, e),
                        fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill,
                        stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke,
                        strokeWidth: r(this.strokeWidth, e),
                        strokeDashArray: this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,
                        strokeLineCap: this.strokeLineCap,
                        strokeLineJoin: this.strokeLineJoin,
                        strokeMiterLimit: r(this.strokeMiterLimit, e),
                        scaleX: r(this.scaleX, e),
                        scaleY: r(this.scaleY, e),
                        angle: r(this.angle, e),
                        flipX: this.flipX,
                        flipY: this.flipY,
                        opacity: r(this.opacity, e),
                        shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow,
                        visible: this.visible,
                        clipTo: this.clipTo && String(this.clipTo),
                        backgroundColor: this.backgroundColor,
                        fillRule: this.fillRule,
                        paintFirst: this.paintFirst,
                        globalCompositeOperation: this.globalCompositeOperation,
                        transformMatrix: this.transformMatrix ? this.transformMatrix.concat() : null,
                        skewX: r(this.skewX, e),
                        skewY: r(this.skewY, e)
                    };
                return y.util.populateWithProperties(this, i, t), this.includeDefaultValues || (i = this._removeDefaultValues(i)), i
            },
            toDatalessObject: function(t) {
                return this.toObject(t)
            },
            _removeDefaultValues: function(e) {
                var i = y.util.getKlass(e.type).prototype;
                return i.stateProperties.forEach(function(t) {
                    e[t] === i[t] && delete e[t], "[object Array]" === Object.prototype.toString.call(e[t]) && "[object Array]" === Object.prototype.toString.call(i[t]) && 0 === e[t].length && 0 === i[t].length && delete e[t]
                }), e
            },
            toString: function() {
                return "#<fabric." + i(this.type) + ">"
            },
            getObjectScaling: function() {
                var t = this.scaleX,
                    e = this.scaleY;
                if (this.group) {
                    var i = this.group.getObjectScaling();
                    t *= i.scaleX, e *= i.scaleY
                }
                return {
                    scaleX: t,
                    scaleY: e
                }
            },
            getObjectOpacity: function() {
                var t = this.opacity;
                return this.group && (t *= this.group.getObjectOpacity()), t
            },
            _set: function(t, e) {
                var i = "scaleX" === t || "scaleY" === t,
                    r = this[t] !== e,
                    n = !1;
                return i && (e = this._constrainScale(e)), "scaleX" === t && e < 0 ? (this.flipX = !this.flipX, e *= -1) : "scaleY" === t && e < 0 ? (this.flipY = !this.flipY, e *= -1) : "shadow" !== t || !e || e instanceof y.Shadow ? "dirty" === t && this.group && this.group.set("dirty", e) : e = new y.Shadow(e), this[t] = e, r && (n = this.group && this.group.isOnACache(), -1 < this.cacheProperties.indexOf(t) ? (this.dirty = !0, n && this.group.set("dirty", !0)) : n && -1 < this.stateProperties.indexOf(t) && this.group.set("dirty", !0)), this
            },
            setOnGroup: function() {},
            getViewportTransform: function() {
                return this.canvas && this.canvas.viewportTransform ? this.canvas.viewportTransform : y.iMatrix.concat()
            },
            isNotVisible: function() {
                return 0 === this.opacity || 0 === this.width && 0 === this.height || !this.visible
            },
            render: function(t) {
                this.isNotVisible() || this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (t.save(), this._setupCompositeOperation(t), this.drawSelectionBackground(t), this.transform(t), this._setOpacity(t), this._setShadow(t, this), this.transformMatrix && t.transform.apply(t, this.transformMatrix), this.clipTo && y.util.clipContext(this, t), this.shouldCache() ? (this._cacheCanvas || this._createCacheCanvas(), this.isCacheDirty() && (this.statefullCache && this.saveState({
                    propertySet: "cacheProperties"
                }), this.drawObject(this._cacheContext), this.dirty = !1), this.drawCacheOnCanvas(t)) : (this._removeCacheCanvas(), this.dirty = !1, this.drawObject(t), this.objectCaching && this.statefullCache && this.saveState({
                    propertySet: "cacheProperties"
                })), this.clipTo && t.restore(), t.restore())
            },
            _removeCacheCanvas: function() {
                this._cacheCanvas = null, this.cacheWidth = 0, this.cacheHeight = 0
            },
            needsItsOwnCache: function() {
                return "stroke" === this.paintFirst && "object" == typeof this.shadow
            },
            shouldCache: function() {
                return this.ownCaching = this.objectCaching && (!this.group || this.needsItsOwnCache() || !this.group.isOnACache()), this.ownCaching
            },
            willDrawShadow: function() {
                return !!this.shadow && (0 !== this.shadow.offsetX || 0 !== this.shadow.offsetY)
            },
            drawObject: function(t) {
                this._renderBackground(t), this._setStrokeStyles(t, this), this._setFillStyles(t, this), this._render(t)
            },
            drawCacheOnCanvas: function(t) {
                t.scale(1 / this.zoomX, 1 / this.zoomY), t.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY)
            },
            isCacheDirty: function(t) {
                if (this.isNotVisible()) return !1;
                if (this._cacheCanvas && !t && this._updateCacheCanvas()) return !0;
                if (this.dirty || this.statefullCache && this.hasStateChanged("cacheProperties")) {
                    if (this._cacheCanvas && !t) {
                        var e = this.cacheWidth / this.zoomX,
                            i = this.cacheHeight / this.zoomY;
                        this._cacheContext.clearRect(-e / 2, -i / 2, e, i)
                    }
                    return !0
                }
                return !1
            },
            _renderBackground: function(t) {
                if (this.backgroundColor) {
                    var e = this._getNonTransformedDimensions();
                    t.fillStyle = this.backgroundColor, t.fillRect(-e.x / 2, -e.y / 2, e.x, e.y), this._removeShadow(t)
                }
            },
            _setOpacity: function(t) {
                this.group && !this.group._transformDone ? t.globalAlpha = this.getObjectOpacity() : t.globalAlpha *= this.opacity
            },
            _setStrokeStyles: function(t, e) {
                e.stroke && (t.lineWidth = e.strokeWidth, t.lineCap = e.strokeLineCap, t.lineJoin = e.strokeLineJoin, t.miterLimit = e.strokeMiterLimit, t.strokeStyle = e.stroke.toLive ? e.stroke.toLive(t, this) : e.stroke)
            },
            _setFillStyles: function(t, e) {
                e.fill && (t.fillStyle = e.fill.toLive ? e.fill.toLive(t, this) : e.fill)
            },
            _setLineDash: function(t, e, i) {
                e && (1 & e.length && e.push.apply(e, e), n ? t.setLineDash(e) : i && i(t))
            },
            _renderControls: function(t, e) {
                var i, r, n, s = this.getViewportTransform(),
                    o = this.calcTransformMatrix();
                r = void 0 !== (e = e || {}).hasBorders ? e.hasBorders : this.hasBorders, n = void 0 !== e.hasControls ? e.hasControls : this.hasControls, o = y.util.multiplyTransformMatrices(s, o), i = y.util.qrDecompose(o), t.save(), t.translate(i.translateX, i.translateY), t.lineWidth = 1 * this.borderScaleFactor, this.group || (t.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1), e.forActiveSelection ? (t.rotate(a(i.angle)), r && this.drawBordersInGroup(t, i, e)) : (t.rotate(a(this.angle)), r && this.drawBorders(t, e)), n && this.drawControls(t, e), t.restore()
            },
            _setShadow: function(t) {
                if (this.shadow) {
                    var e = this.canvas && this.canvas.viewportTransform[0] || 1,
                        i = this.canvas && this.canvas.viewportTransform[3] || 1,
                        r = this.getObjectScaling();
                    this.canvas && this.canvas._isRetinaScaling() && (e *= y.devicePixelRatio, i *= y.devicePixelRatio), t.shadowColor = this.shadow.color, t.shadowBlur = this.shadow.blur * y.browserShadowBlurConstant * (e + i) * (r.scaleX + r.scaleY) / 4, t.shadowOffsetX = this.shadow.offsetX * e * r.scaleX, t.shadowOffsetY = this.shadow.offsetY * i * r.scaleY
                }
            },
            _removeShadow: function(t) {
                this.shadow && (t.shadowColor = "", t.shadowBlur = t.shadowOffsetX = t.shadowOffsetY = 0)
            },
            _applyPatternGradientTransform: function(t, e) {
                if (!e || !e.toLive) return {
                    offsetX: 0,
                    offsetY: 0
                };
                var i = e.gradientTransform || e.patternTransform,
                    r = -this.width / 2 + e.offsetX || 0,
                    n = -this.height / 2 + e.offsetY || 0;
                return t.translate(r, n), i && t.transform(i[0], i[1], i[2], i[3], i[4], i[5]), {
                    offsetX: r,
                    offsetY: n
                }
            },
            _renderPaintInOrder: function(t) {
                "stroke" === this.paintFirst ? (this._renderStroke(t), this._renderFill(t)) : (this._renderFill(t), this._renderStroke(t))
            },
            _renderFill: function(t) {
                this.fill && (t.save(), this._applyPatternGradientTransform(t, this.fill), "evenodd" === this.fillRule ? t.fill("evenodd") : t.fill(), t.restore())
            },
            _renderStroke: function(t) {
                this.stroke && 0 !== this.strokeWidth && (this.shadow && !this.shadow.affectStroke && this._removeShadow(t), t.save(), this._setLineDash(t, this.strokeDashArray, this._renderDashedStroke), this._applyPatternGradientTransform(t, this.stroke), t.stroke(), t.restore())
            },
            _findCenterFromElement: function() {
                return {
                    x: this.left + this.width / 2,
                    y: this.top + this.height / 2
                }
            },
            _assignTransformMatrixProps: function() {
                if (this.transformMatrix) {
                    var t = y.util.qrDecompose(this.transformMatrix);
                    this.flipX = !1, this.flipY = !1, this.set("scaleX", t.scaleX), this.set("scaleY", t.scaleY), this.angle = t.angle, this.skewX = t.skewX, this.skewY = 0
                }
            },
            _removeTransformMatrix: function(t) {
                var e = this._findCenterFromElement();
                this.transformMatrix && (this._assignTransformMatrixProps(), e = y.util.transformPoint(e, this.transformMatrix)), this.transformMatrix = null, t && (this.scaleX *= t.scaleX, this.scaleY *= t.scaleY, this.cropX = t.cropX, this.cropY = t.cropY, e.x += t.offsetLeft, e.y += t.offsetTop, this.width = t.width, this.height = t.height), this.setPositionByOrigin(e, "center", "center")
            },
            clone: function(t, e) {
                var i = this.toObject(e);
                this.constructor.fromObject ? this.constructor.fromObject(i, t) : y.Object._fromObject("Object", i, t)
            },
            cloneAsImage: function(e, t) {
                var i = this.toDataURL(t);
                return y.util.loadImage(i, function(t) {
                    e && e(new y.Image(t))
                }), this
            },
            toDataURL: function(t) {
                t || (t = {});
                var e = y.util.createCanvasElement(),
                    i = this.getBoundingRect();
                e.width = i.width, e.height = i.height, y.util.wrapElement(e, "div");
                var r = new y.StaticCanvas(e, {
                    enableRetinaScaling: t.enableRetinaScaling,
                    renderOnAddRemove: !1,
                    skipOffscreen: !1
                });
                "jpg" === t.format && (t.format = "jpeg"), "jpeg" === t.format && (r.backgroundColor = "#fff");
                var n = {
                    left: this.left,
                    top: this.top
                };
                this.setPositionByOrigin(new y.Point(r.width / 2, r.height / 2), "center", "center");
                var s = this.canvas;
                r.add(this);
                var o = r.toDataURL(t);
                return this.set(n).setCoords(), this.canvas = s, r._objects = [], r.dispose(), r = null, o
            },
            isType: function(t) {
                return this.type === t
            },
            complexity: function() {
                return 1
            },
            toJSON: function(t) {
                return this.toObject(t)
            },
            setGradient: function(t, e) {
                e || (e = {});
                var i = {
                    colorStops: []
                };
                return i.type = e.type || (e.r1 || e.r2 ? "radial" : "linear"), i.coords = {
                    x1: e.x1,
                    y1: e.y1,
                    x2: e.x2,
                    y2: e.y2
                }, (e.r1 || e.r2) && (i.coords.r1 = e.r1, i.coords.r2 = e.r2), i.gradientTransform = e.gradientTransform, y.Gradient.prototype.addColorStop.call(i, e.colorStops), this.set(t, y.Gradient.forObject(this, i))
            },
            setPatternFill: function(t) {
                return this.set("fill", new y.Pattern(t))
            },
            setShadow: function(t) {
                return this.set("shadow", t ? new y.Shadow(t) : null)
            },
            setColor: function(t) {
                return this.set("fill", t), this
            },
            rotate: function(t) {
                var e = ("center" !== this.originX || "center" !== this.originY) && this.centeredRotation;
                return e && this._setOriginToCenter(), this.set("angle", t), e && this._resetOrigin(), this
            },
            centerH: function() {
                return this.canvas && this.canvas.centerObjectH(this), this
            },
            viewportCenterH: function() {
                return this.canvas && this.canvas.viewportCenterObjectH(this), this
            },
            centerV: function() {
                return this.canvas && this.canvas.centerObjectV(this), this
            },
            viewportCenterV: function() {
                return this.canvas && this.canvas.viewportCenterObjectV(this), this
            },
            center: function() {
                return this.canvas && this.canvas.centerObject(this), this
            },
            viewportCenter: function() {
                return this.canvas && this.canvas.viewportCenterObject(this), this
            },
            getLocalPointer: function(t, e) {
                e = e || this.canvas.getPointer(t);
                var i = new y.Point(e.x, e.y),
                    r = this._getLeftTopCoords();
                return this.angle && (i = y.util.rotatePoint(i, r, a(-this.angle))), {
                    x: i.x - r.x,
                    y: i.y - r.y
                }
            },
            _setupCompositeOperation: function(t) {
                this.globalCompositeOperation && (t.globalCompositeOperation = this.globalCompositeOperation)
            }
        }), y.util.createAccessors && y.util.createAccessors(y.Object), e(y.Object.prototype, y.Observable), y.Object.NUM_FRACTION_DIGITS = 2, y.Object._fromObject = function(t, i, r, n) {
            var s = y[t];
            i = o(i, !0), y.util.enlivenPatterns([i.fill, i.stroke], function(t) {
                void 0 !== t[0] && (i.fill = t[0]), void 0 !== t[1] && (i.stroke = t[1]);
                var e = n ? new s(i[n], i) : new s(i);
                r && r(e)
            })
        }, y.Object.__uid = 0)
    }("undefined" != typeof exports ? exports : this),
    function() {
        var a = fabric.util.degreesToRadians,
            l = {
                left: -.5,
                center: 0,
                right: .5
            },
            u = {
                top: -.5,
                center: 0,
                bottom: .5
            };
        fabric.util.object.extend(fabric.Object.prototype, {
            translateToGivenOrigin: function(t, e, i, r, n) {
                var s, o, a, h = t.x,
                    c = t.y;
                return "string" == typeof e ? e = l[e] : e -= .5, "string" == typeof r ? r = l[r] : r -= .5, "string" == typeof i ? i = u[i] : i -= .5, "string" == typeof n ? n = u[n] : n -= .5, o = n - i, ((s = r - e) || o) && (a = this._getTransformedDimensions(), h = t.x + s * a.x, c = t.y + o * a.y), new fabric.Point(h, c)
            },
            translateToCenterPoint: function(t, e, i) {
                var r = this.translateToGivenOrigin(t, e, i, "center", "center");
                return this.angle ? fabric.util.rotatePoint(r, t, a(this.angle)) : r
            },
            translateToOriginPoint: function(t, e, i) {
                var r = this.translateToGivenOrigin(t, "center", "center", e, i);
                return this.angle ? fabric.util.rotatePoint(r, t, a(this.angle)) : r
            },
            getCenterPoint: function() {
                var t = new fabric.Point(this.left, this.top);
                return this.translateToCenterPoint(t, this.originX, this.originY)
            },
            getPointByOrigin: function(t, e) {
                var i = this.getCenterPoint();
                return this.translateToOriginPoint(i, t, e)
            },
            toLocalPoint: function(t, e, i) {
                var r, n, s = this.getCenterPoint();
                return r = void 0 !== e && void 0 !== i ? this.translateToGivenOrigin(s, "center", "center", e, i) : new fabric.Point(this.left, this.top), n = new fabric.Point(t.x, t.y), this.angle && (n = fabric.util.rotatePoint(n, s, -a(this.angle))), n.subtractEquals(r)
            },
            setPositionByOrigin: function(t, e, i) {
                var r = this.translateToCenterPoint(t, e, i),
                    n = this.translateToOriginPoint(r, this.originX, this.originY);
                this.set("left", n.x), this.set("top", n.y)
            },
            adjustPosition: function(t) {
                var e, i, r = a(this.angle),
                    n = this.getScaledWidth(),
                    s = fabric.util.cos(r) * n,
                    o = fabric.util.sin(r) * n;
                e = "string" == typeof this.originX ? l[this.originX] : this.originX - .5, i = "string" == typeof t ? l[t] : t - .5, this.left += s * (i - e), this.top += o * (i - e), this.setCoords(), this.originX = t
            },
            _setOriginToCenter: function() {
                this._originalOriginX = this.originX, this._originalOriginY = this.originY;
                var t = this.getCenterPoint();
                this.originX = "center", this.originY = "center", this.left = t.x, this.top = t.y
            },
            _resetOrigin: function() {
                var t = this.translateToOriginPoint(this.getCenterPoint(), this._originalOriginX, this._originalOriginY);
                this.originX = this._originalOriginX, this.originY = this._originalOriginY, this.left = t.x, this.top = t.y, this._originalOriginX = null, this._originalOriginY = null
            },
            _getLeftTopCoords: function() {
                return this.translateToOriginPoint(this.getCenterPoint(), "left", "top")
            }
        })
    }(),
    function() {
        var k = fabric.util.degreesToRadians,
            E = fabric.util.multiplyTransformMatrices,
            D = fabric.util.transformPoint;
        fabric.util.object.extend(fabric.Object.prototype, {
            oCoords: null,
            aCoords: null,
            ownMatrixCache: null,
            matrixCache: null,
            getCoords: function(t, e) {
                this.oCoords || this.setCoords();
                var i, r = t ? this.aCoords : this.oCoords;
                return i = e ? this.calcCoords(t) : r, [new fabric.Point(i.tl.x, i.tl.y), new fabric.Point(i.tr.x, i.tr.y), new fabric.Point(i.br.x, i.br.y), new fabric.Point(i.bl.x, i.bl.y)]
            },
            intersectsWithRect: function(t, e, i, r) {
                var n = this.getCoords(i, r);
                return "Intersection" === fabric.Intersection.intersectPolygonRectangle(n, t, e).status
            },
            intersectsWithObject: function(t, e, i) {
                return "Intersection" === fabric.Intersection.intersectPolygonPolygon(this.getCoords(e, i), t.getCoords(e, i)).status || t.isContainedWithinObject(this, e, i) || this.isContainedWithinObject(t, e, i)
            },
            isContainedWithinObject: function(t, e, i) {
                for (var r = this.getCoords(e, i), n = 0, s = t._getImageLines(i ? t.calcCoords(e) : e ? t.aCoords : t.oCoords); n < 4; n++)
                    if (!t.containsPoint(r[n], s)) return !1;
                return !0
            },
            isContainedWithinRect: function(t, e, i, r) {
                var n = this.getBoundingRect(i, r);
                return n.left >= t.x && n.left + n.width <= e.x && n.top >= t.y && n.top + n.height <= e.y
            },
            containsPoint: function(t, e, i, r) {
                e = e || this._getImageLines(r ? this.calcCoords(i) : i ? this.aCoords : this.oCoords);
                var n = this._findCrossPoints(t, e);
                return 0 !== n && n % 2 == 1
            },
            isOnScreen: function(t) {
                if (!this.canvas) return !1;
                for (var e, i = this.canvas.vptCoords.tl, r = this.canvas.vptCoords.br, n = this.getCoords(!0, t), s = 0; s < 4; s++)
                    if ((e = n[s]).x <= r.x && e.x >= i.x && e.y <= r.y && e.y >= i.y) return !0;
                return !!this.intersectsWithRect(i, r, !0, t) || this._containsCenterOfCanvas(i, r, t)
            },
            _containsCenterOfCanvas: function(t, e, i) {
                var r = {
                    x: (t.x + e.x) / 2,
                    y: (t.y + e.y) / 2
                };
                return !!this.containsPoint(r, null, !0, i)
            },
            isPartiallyOnScreen: function(t) {
                if (!this.canvas) return !1;
                var e = this.canvas.vptCoords.tl,
                    i = this.canvas.vptCoords.br;
                return !!this.intersectsWithRect(e, i, !0, t) || this._containsCenterOfCanvas(e, i, t)
            },
            _getImageLines: function(t) {
                return {
                    topline: {
                        o: t.tl,
                        d: t.tr
                    },
                    rightline: {
                        o: t.tr,
                        d: t.br
                    },
                    bottomline: {
                        o: t.br,
                        d: t.bl
                    },
                    leftline: {
                        o: t.bl,
                        d: t.tl
                    }
                }
            },
            _findCrossPoints: function(t, e) {
                var i, r, n, s = 0;
                for (var o in e)
                    if (!((n = e[o]).o.y < t.y && n.d.y < t.y || n.o.y >= t.y && n.d.y >= t.y || (n.o.x === n.d.x && n.o.x >= t.x ? r = n.o.x : (0, i = (n.d.y - n.o.y) / (n.d.x - n.o.x), r = -(t.y - 0 * t.x - (n.o.y - i * n.o.x)) / (0 - i)), r >= t.x && (s += 1), 2 !== s))) break;
                return s
            },
            getBoundingRect: function(t, e) {
                var i = this.getCoords(t, e);
                return fabric.util.makeBoundingBoxFromPoints(i)
            },
            getScaledWidth: function() {
                return this._getTransformedDimensions().x
            },
            getScaledHeight: function() {
                return this._getTransformedDimensions().y
            },
            _constrainScale: function(t) {
                return Math.abs(t) < this.minScaleLimit ? t < 0 ? -this.minScaleLimit : this.minScaleLimit : 0 === t ? 1e-4 : t
            },
            scale: function(t) {
                return this._set("scaleX", t), this._set("scaleY", t), this.setCoords()
            },
            scaleToWidth: function(t, e) {
                var i = this.getBoundingRect(e).width / this.getScaledWidth();
                return this.scale(t / this.width / i)
            },
            scaleToHeight: function(t, e) {
                var i = this.getBoundingRect(e).height / this.getScaledHeight();
                return this.scale(t / this.height / i)
            },
            calcCoords: function(t) {
                var e = this._calcRotateMatrix(),
                    i = this._calcTranslateMatrix(),
                    r = E(i, e),
                    n = this.getViewportTransform(),
                    s = t ? r : E(n, r),
                    o = this._getTransformedDimensions(),
                    a = o.x / 2,
                    h = o.y / 2,
                    c = D({
                        x: -a,
                        y: -h
                    }, s),
                    l = D({
                        x: a,
                        y: -h
                    }, s),
                    u = D({
                        x: -a,
                        y: h
                    }, s),
                    f = D({
                        x: a,
                        y: h
                    }, s);
                if (!t) {
                    var d = this.padding,
                        g = k(this.angle),
                        p = fabric.util.cos(g),
                        v = fabric.util.sin(g),
                        m = p * d,
                        b = v * d,
                        _ = m + b,
                        y = m - b;
                    d && (c.x -= y, c.y -= _, l.x += _, l.y -= y, u.x -= _, u.y += y, f.x += y, f.y += _);
                    var x = new fabric.Point((c.x + u.x) / 2, (c.y + u.y) / 2),
                        C = new fabric.Point((l.x + c.x) / 2, (l.y + c.y) / 2),
                        S = new fabric.Point((f.x + l.x) / 2, (f.y + l.y) / 2),
                        w = new fabric.Point((f.x + u.x) / 2, (f.y + u.y) / 2),
                        T = new fabric.Point(C.x + v * this.rotatingPointOffset, C.y - p * this.rotatingPointOffset)
                }
                var O = {
                    tl: c,
                    tr: l,
                    br: f,
                    bl: u
                };
                return t || (O.ml = x, O.mt = C, O.mr = S, O.mb = w, O.mtr = T), O
            },
            setCoords: function(t, e) {
                return this.oCoords = this.calcCoords(t), e || (this.aCoords = this.calcCoords(!0)), t || this._setCornerCoords && this._setCornerCoords(), this
            },
            _calcRotateMatrix: function() {
                if (this.angle) {
                    var t = k(this.angle),
                        e = fabric.util.cos(t),
                        i = fabric.util.sin(t);
                    return [e, i, -i, e, 0, 0]
                }
                return fabric.iMatrix.concat()
            },
            _calcTranslateMatrix: function() {
                var t = this.getCenterPoint();
                return [1, 0, 0, 1, t.x, t.y]
            },
            transformMatrixKey: function(t) {
                var e = "_",
                    i = "";
                return !t && this.group && (i = this.group.transformMatrixKey(t) + e), i + this.top + e + this.left + e + this.scaleX + e + this.scaleY + e + this.skewX + e + this.skewY + e + this.angle + e + this.originX + e + this.originY + e + this.width + e + this.height + e + this.strokeWidth + this.flipX + this.flipY
            },
            calcTransformMatrix: function(t) {
                if (t) return this.calcOwnMatrix();
                var e = this.transformMatrixKey(),
                    i = this.matrixCache || (this.matrixCache = {});
                if (i.key === e) return i.value;
                var r = this.calcOwnMatrix();
                return this.group && (r = E(this.group.calcTransformMatrix(), r)), i.key = e, i.value = r
            },
            calcOwnMatrix: function() {
                var t = this.transformMatrixKey(!0),
                    e = this.ownMatrixCache || (this.ownMatrixCache = {});
                if (e.key === t) return e.value;
                var i, r = this._calcTranslateMatrix(),
                    n = this._calcDimensionsTransformMatrix(this.skewX, this.skewY, !0);
                return this.angle && (i = this._calcRotateMatrix(), r = E(r, i)), r = E(r, n), e.key = t, e.value = r
            },
            _calcDimensionsTransformMatrix: function(t, e, i) {
                var r, n = [this.scaleX * (i && this.flipX ? -1 : 1), 0, 0, this.scaleY * (i && this.flipY ? -1 : 1), 0, 0];
                return t && (r = [1, 0, Math.tan(k(t)), 1], n = E(n, r, !0)), e && (r = [1, Math.tan(k(e)), 0, 1], n = E(n, r, !0)), n
            },
            _getNonTransformedDimensions: function() {
                var t = this.strokeWidth;
                return {
                    x: this.width + t,
                    y: this.height + t
                }
            },
            _getTransformedDimensions: function(t, e) {
                void 0 === t && (t = this.skewX), void 0 === e && (e = this.skewY);
                var i = this._getNonTransformedDimensions();
                if (0 === t && 0 === e) return {
                    x: i.x * this.scaleX,
                    y: i.y * this.scaleY
                };
                var r, n, s = i.x / 2,
                    o = i.y / 2,
                    a = [{
                        x: -s,
                        y: -o
                    }, {
                        x: s,
                        y: -o
                    }, {
                        x: -s,
                        y: o
                    }, {
                        x: s,
                        y: o
                    }],
                    h = this._calcDimensionsTransformMatrix(t, e, !1);
                for (r = 0; r < a.length; r++) a[r] = fabric.util.transformPoint(a[r], h);
                return {
                    x: (n = fabric.util.makeBoundingBoxFromPoints(a)).width,
                    y: n.height
                }
            },
            _calculateCurrentDimensions: function() {
                var t = this.getViewportTransform(),
                    e = this._getTransformedDimensions();
                return fabric.util.transformPoint(e, t, !0).scalarAdd(2 * this.padding)
            }
        })
    }(), fabric.util.object.extend(fabric.Object.prototype, {
        sendToBack: function() {
            return this.group ? fabric.StaticCanvas.prototype.sendToBack.call(this.group, this) : this.canvas.sendToBack(this), this
        },
        bringToFront: function() {
            return this.group ? fabric.StaticCanvas.prototype.bringToFront.call(this.group, this) : this.canvas.bringToFront(this), this
        },
        sendBackwards: function(t) {
            return this.group ? fabric.StaticCanvas.prototype.sendBackwards.call(this.group, this, t) : this.canvas.sendBackwards(this, t), this
        },
        bringForward: function(t) {
            return this.group ? fabric.StaticCanvas.prototype.bringForward.call(this.group, this, t) : this.canvas.bringForward(this, t), this
        },
        moveTo: function(t) {
            return this.group && "activeSelection" !== this.group.type ? fabric.StaticCanvas.prototype.moveTo.call(this.group, this, t) : this.canvas.moveTo(this, t), this
        }
    }),
    function() {
        function u(t, e) {
            if (e) {
                if (e.toLive) return t + ": url(#SVGID_" + e.id + "); ";
                var i = new fabric.Color(e),
                    r = t + ": " + i.toRgb() + "; ",
                    n = i.getAlpha();
                return 1 !== n && (r += t + "-opacity: " + n.toString() + "; "), r
            }
            return t + ": none; "
        }
        var l = fabric.util.toFixed;
        fabric.util.object.extend(fabric.Object.prototype, {
            getSvgStyles: function(t) {
                var e = this.fillRule,
                    i = this.strokeWidth ? this.strokeWidth : "0",
                    r = this.strokeDashArray ? this.strokeDashArray.join(" ") : "none",
                    n = this.strokeLineCap ? this.strokeLineCap : "butt",
                    s = this.strokeLineJoin ? this.strokeLineJoin : "miter",
                    o = this.strokeMiterLimit ? this.strokeMiterLimit : "4",
                    a = void 0 !== this.opacity ? this.opacity : "1",
                    h = this.visible ? "" : " visibility: hidden;",
                    c = t ? "" : this.getSvgFilter(),
                    l = u("fill", this.fill);
                return [u("stroke", this.stroke), "stroke-width: ", i, "; ", "stroke-dasharray: ", r, "; ", "stroke-linecap: ", n, "; ", "stroke-linejoin: ", s, "; ", "stroke-miterlimit: ", o, "; ", l, "fill-rule: ", e, "; ", "opacity: ", a, ";", c, h].join("")
            },
            getSvgSpanStyles: function(t, e) {
                var i = "; ",
                    r = t.fontFamily ? "font-family: " + (-1 === t.fontFamily.indexOf("'") && -1 === t.fontFamily.indexOf('"') ? "'" + t.fontFamily + "'" : t.fontFamily) + i : "",
                    n = t.strokeWidth ? "stroke-width: " + t.strokeWidth + i : "",
                    s = (r = r, t.fontSize ? "font-size: " + t.fontSize + "px" + i : ""),
                    o = t.fontStyle ? "font-style: " + t.fontStyle + i : "",
                    a = t.fontWeight ? "font-weight: " + t.fontWeight + i : "",
                    h = t.fill ? u("fill", t.fill) : "",
                    c = t.stroke ? u("stroke", t.stroke) : "",
                    l = this.getSvgTextDecoration(t);
                return l && (l = "text-decoration: " + l + i), [c, n, r, s, o, a, l, h, t.deltaY ? "baseline-shift: " + -t.deltaY + "; " : "", e ? "white-space: pre; " : ""].join("")
            },
            getSvgTextDecoration: function(t) {
                return "overline" in t || "underline" in t || "linethrough" in t ? (t.overline ? "overline " : "") + (t.underline ? "underline " : "") + (t.linethrough ? "line-through " : "") : ""
            },
            getSvgFilter: function() {
                return this.shadow ? "filter: url(#SVGID_" + this.shadow.id + ");" : ""
            },
            getSvgId: function() {
                return this.id ? 'id="' + this.id + '" ' : ""
            },
            getSvgTransform: function() {
                var t = this.angle,
                    e = this.skewX % 360,
                    i = this.skewY % 360,
                    r = this.getCenterPoint(),
                    n = fabric.Object.NUM_FRACTION_DIGITS,
                    s = "translate(" + l(r.x, n) + " " + l(r.y, n) + ")",
                    o = 0 !== t ? " rotate(" + l(t, n) + ")" : "",
                    a = 1 === this.scaleX && 1 === this.scaleY ? "" : " scale(" + l(this.scaleX, n) + " " + l(this.scaleY, n) + ")",
                    h = 0 !== e ? " skewX(" + l(e, n) + ")" : "",
                    c = 0 !== i ? " skewY(" + l(i, n) + ")" : "";
                return [s, o, a, this.flipX ? " matrix(-1 0 0 1 0 0) " : "", this.flipY ? " matrix(1 0 0 -1 0 0)" : "", h, c].join("")
            },
            getSvgTransformMatrix: function() {
                return this.transformMatrix ? " matrix(" + this.transformMatrix.join(" ") + ") " : ""
            },
            _setSVGBg: function(t) {
                if (this.backgroundColor) {
                    var e = fabric.Object.NUM_FRACTION_DIGITS;
                    t.push("\t\t<rect ", this._getFillAttributes(this.backgroundColor), ' x="', l(-this.width / 2, e), '" y="', l(-this.height / 2, e), '" width="', l(this.width, e), '" height="', l(this.height, e), '"></rect>\n')
                }
            },
            _createBaseSVGMarkup: function() {
                var t = [];
                return this.fill && this.fill.toLive && t.push(this.fill.toSVG(this, !1)), this.stroke && this.stroke.toLive && t.push(this.stroke.toSVG(this, !1)), this.shadow && t.push(this.shadow.toSVG(this)), t
            },
            addPaintOrder: function() {
                return "fill" !== this.paintFirst ? ' paint-order="' + this.paintFirst + '" ' : ""
            }
        })
    }(),
    function() {
        var n = fabric.util.object.extend,
            r = "stateProperties";

        function s(e, t, i) {
            var r = {};
            i.forEach(function(t) {
                r[t] = e[t]
            }), n(e[t], r, !0)
        }
        fabric.util.object.extend(fabric.Object.prototype, {
            hasStateChanged: function(t) {
                var e = "_" + (t = t || r);
                return Object.keys(this[e]).length < this[t].length || ! function t(e, i, r) {
                    if (e === i) return !0;
                    if (Array.isArray(e)) {
                        if (!Array.isArray(i) || e.length !== i.length) return !1;
                        for (var n = 0, s = e.length; n < s; n++)
                            if (!t(e[n], i[n])) return !1;
                        return !0
                    }
                    if (e && "object" == typeof e) {
                        var o, a = Object.keys(e);
                        if (!i || "object" != typeof i || !r && a.length !== Object.keys(i).length) return !1;
                        for (n = 0, s = a.length; n < s; n++)
                            if (!t(e[o = a[n]], i[o])) return !1;
                        return !0
                    }
                }(this[e], this, !0)
            },
            saveState: function(t) {
                var e = t && t.propertySet || r,
                    i = "_" + e;
                return this[i] ? (s(this, i, this[e]), t && t.stateProperties && s(this, i, t.stateProperties), this) : this.setupState(t)
            },
            setupState: function(t) {
                var e = (t = t || {}).propertySet || r;
                return this["_" + (t.propertySet = e)] = {}, this.saveState(t), this
            }
        })
    }(),
    function() {
        var h = fabric.util.degreesToRadians;
        fabric.util.object.extend(fabric.Object.prototype, {
            _controlsVisibility: null,
            _findTargetCorner: function(t) {
                if (!this.hasControls || this.group || !this.canvas || this.canvas._activeObject !== this) return !1;
                var e, i, r = t.x,
                    n = t.y;
                for (var s in this.__corner = 0, this.oCoords)
                    if (this.isControlVisible(s) && ("mtr" !== s || this.hasRotatingPoint) && (!this.get("lockUniScaling") || "mt" !== s && "mr" !== s && "mb" !== s && "ml" !== s) && (i = this._getImageLines(this.oCoords[s].corner), 0 !== (e = this._findCrossPoints({
                            x: r,
                            y: n
                        }, i)) && e % 2 == 1)) return this.__corner = s;
                return !1
            },
            _setCornerCoords: function() {
                var t, e, i = this.oCoords,
                    r = h(45 - this.angle),
                    n = .707106 * this.cornerSize,
                    s = n * fabric.util.cos(r),
                    o = n * fabric.util.sin(r);
                for (var a in i) t = i[a].x, e = i[a].y, i[a].corner = {
                    tl: {
                        x: t - o,
                        y: e - s
                    },
                    tr: {
                        x: t + s,
                        y: e - o
                    },
                    bl: {
                        x: t - s,
                        y: e + o
                    },
                    br: {
                        x: t + o,
                        y: e + s
                    }
                }
            },
            drawSelectionBackground: function(t) {
                if (!this.selectionBackgroundColor || this.canvas && !this.canvas.interactive || this.canvas && this.canvas._activeObject !== this) return this;
                t.save();
                var e = this.getCenterPoint(),
                    i = this._calculateCurrentDimensions(),
                    r = this.canvas.viewportTransform;
                return t.translate(e.x, e.y), t.scale(1 / r[0], 1 / r[3]), t.rotate(h(this.angle)), t.fillStyle = this.selectionBackgroundColor, t.fillRect(-i.x / 2, -i.y / 2, i.x, i.y), t.restore(), this
            },
            drawBorders: function(t, e) {
                e = e || {};
                var i = this._calculateCurrentDimensions(),
                    r = 1 / this.borderScaleFactor,
                    n = i.x + r,
                    s = i.y + r,
                    o = void 0 !== e.hasRotatingPoint ? e.hasRotatingPoint : this.hasRotatingPoint,
                    a = void 0 !== e.hasControls ? e.hasControls : this.hasControls,
                    h = void 0 !== e.rotatingPointOffset ? e.rotatingPointOffset : this.rotatingPointOffset;
                if (t.save(), t.strokeStyle = e.borderColor || this.borderColor, this._setLineDash(t, e.borderDashArray || this.borderDashArray, null), t.strokeRect(-n / 2, -s / 2, n, s), o && this.isControlVisible("mtr") && a) {
                    var c = -s / 2;
                    t.beginPath(), t.moveTo(0, c), t.lineTo(0, c - h), t.stroke()
                }
                return t.restore(), this
            },
            drawBordersInGroup: function(t, e, i) {
                i = i || {};
                var r = this._getNonTransformedDimensions(),
                    n = fabric.util.customTransformMatrix(e.scaleX, e.scaleY, e.skewX),
                    s = fabric.util.transformPoint(r, n),
                    o = 1 / this.borderScaleFactor,
                    a = s.x + o,
                    h = s.y + o;
                return t.save(), this._setLineDash(t, i.borderDashArray || this.borderDashArray, null), t.strokeStyle = i.borderColor || this.borderColor, t.strokeRect(-a / 2, -h / 2, a, h), t.restore(), this
            },
            drawControls: function(t, e) {
                e = e || {};
                var i = this._calculateCurrentDimensions(),
                    r = i.x,
                    n = i.y,
                    s = e.cornerSize || this.cornerSize,
                    o = -(r + s) / 2,
                    a = -(n + s) / 2,
                    h = void 0 !== e.transparentCorners ? e.transparentCorners : this.transparentCorners,
                    c = void 0 !== e.hasRotatingPoint ? e.hasRotatingPoint : this.hasRotatingPoint,
                    l = h ? "stroke" : "fill";
                return t.save(), t.strokeStyle = t.fillStyle = e.cornerColor || this.cornerColor, this.transparentCorners || (t.strokeStyle = e.cornerStrokeColor || this.cornerStrokeColor), this._setLineDash(t, e.cornerDashArray || this.cornerDashArray, null), this._drawControl("tl", t, l, o, a, e), this._drawControl("tr", t, l, o + r, a, e), this._drawControl("bl", t, l, o, a + n, e), this._drawControl("br", t, l, o + r, a + n, e), this.get("lockUniScaling") || (this._drawControl("mt", t, l, o + r / 2, a, e), this._drawControl("mb", t, l, o + r / 2, a + n, e), this._drawControl("mr", t, l, o + r, a + n / 2, e), this._drawControl("ml", t, l, o, a + n / 2, e)), c && this._drawControl("mtr", t, l, o + r / 2, a - this.rotatingPointOffset, e), t.restore(), this
            },
            _drawControl: function(t, e, i, r, n, s) {
                if (s = s || {}, this.isControlVisible(t)) {
                    var o = this.cornerSize,
                        a = !this.transparentCorners && this.cornerStrokeColor;
                    switch (s.cornerStyle || this.cornerStyle) {
                        case "circle":
                            e.beginPath(), e.arc(r + o / 2, n + o / 2, o / 2, 0, 2 * Math.PI, !1), e[i](), a && e.stroke();
                            break;
                        default:
                            this.transparentCorners || e.clearRect(r, n, o, o), e[i + "Rect"](r, n, o, o), a && e.strokeRect(r, n, o, o)
                    }
                }
            },
            isControlVisible: function(t) {
                return this._getControlsVisibility()[t]
            },
            setControlVisible: function(t, e) {
                return this._getControlsVisibility()[t] = e, this
            },
            setControlsVisibility: function(t) {
                for (var e in t || (t = {}), t) this.setControlVisible(e, t[e]);
                return this
            },
            _getControlsVisibility: function() {
                return this._controlsVisibility || (this._controlsVisibility = {
                    tl: !0,
                    tr: !0,
                    br: !0,
                    bl: !0,
                    ml: !0,
                    mt: !0,
                    mr: !0,
                    mb: !0,
                    mtr: !0
                }), this._controlsVisibility
            },
            onDeselect: function() {},
            onSelect: function() {}
        })
    }(), fabric.util.object.extend(fabric.StaticCanvas.prototype, {
        FX_DURATION: 500,
        fxCenterObjectH: function(e, t) {
            var i = function() {},
                r = (t = t || {}).onComplete || i,
                n = t.onChange || i,
                s = this;
            return fabric.util.animate({
                startValue: e.left,
                endValue: this.getCenter().left,
                duration: this.FX_DURATION,
                onChange: function(t) {
                    e.set("left", t), s.requestRenderAll(), n()
                },
                onComplete: function() {
                    e.setCoords(), r()
                }
            }), this
        },
        fxCenterObjectV: function(e, t) {
            var i = function() {},
                r = (t = t || {}).onComplete || i,
                n = t.onChange || i,
                s = this;
            return fabric.util.animate({
                startValue: e.top,
                endValue: this.getCenter().top,
                duration: this.FX_DURATION,
                onChange: function(t) {
                    e.set("top", t), s.requestRenderAll(), n()
                },
                onComplete: function() {
                    e.setCoords(), r()
                }
            }), this
        },
        fxRemove: function(e, t) {
            var i = function() {},
                r = (t = t || {}).onComplete || i,
                n = t.onChange || i,
                s = this;
            return fabric.util.animate({
                startValue: e.opacity,
                endValue: 0,
                duration: this.FX_DURATION,
                onChange: function(t) {
                    e.set("opacity", t), s.requestRenderAll(), n()
                },
                onComplete: function() {
                    s.remove(e), r()
                }
            }), this
        }
    }), fabric.util.object.extend(fabric.Object.prototype, {
        animate: function() {
            if (arguments[0] && "object" == typeof arguments[0]) {
                var t, e, i = [];
                for (t in arguments[0]) i.push(t);
                for (var r = 0, n = i.length; r < n; r++) t = i[r], e = r !== n - 1, this._animate(t, arguments[0][t], arguments[1], e)
            } else this._animate.apply(this, arguments);
            return this
        },
        _animate: function(r, t, n, s) {
            var o, a = this;
            t = t.toString(), n = n ? fabric.util.object.clone(n) : {}, ~r.indexOf(".") && (o = r.split("."));
            var e = o ? this.get(o[0])[o[1]] : this.get(r);
            "from" in n || (n.from = e), t = ~t.indexOf("=") ? e + parseFloat(t.replace("=", "")) : parseFloat(t), fabric.util.animate({
                startValue: n.from,
                endValue: t,
                byValue: n.by,
                easing: n.easing,
                duration: n.duration,
                abort: n.abort && function() {
                    return n.abort.call(a)
                },
                onChange: function(t, e, i) {
                    o ? a[o[0]][o[1]] = t : a.set(r, t), s || n.onChange && n.onChange(t, e, i)
                },
                onComplete: function(t, e, i) {
                    s || (a.setCoords(), n.onComplete && n.onComplete(t, e, i))
                }
            })
        }
    }),
    function(t) {
        "use strict";
        var s = t.fabric || (t.fabric = {}),
            o = s.util.object.extend,
            r = s.util.object.clone,
            i = {
                x1: 1,
                x2: 1,
                y1: 1,
                y2: 1
            },
            n = s.StaticCanvas.supports("setLineDash");

        function e(t, e) {
            var i = t.origin,
                r = t.axis1,
                n = t.axis2,
                s = t.dimension,
                o = e.nearest,
                a = e.center,
                h = e.farthest;
            return function() {
                switch (this.get(i)) {
                    case o:
                        return Math.min(this.get(r), this.get(n));
                    case a:
                        return Math.min(this.get(r), this.get(n)) + .5 * this.get(s);
                    case h:
                        return Math.max(this.get(r), this.get(n))
                }
            }
        }
        s.Line ? s.warn("fabric.Line is already defined") : (s.Line = s.util.createClass(s.Object, {
            type: "line",
            x1: 0,
            y1: 0,
            x2: 0,
            y2: 0,
            cacheProperties: s.Object.prototype.cacheProperties.concat("x1", "x2", "y1", "y2"),
            initialize: function(t, e) {
                t || (t = [0, 0, 0, 0]), this.callSuper("initialize", e), this.set("x1", t[0]), this.set("y1", t[1]), this.set("x2", t[2]), this.set("y2", t[3]), this._setWidthHeight(e)
            },
            _setWidthHeight: function(t) {
                t || (t = {}), this.width = Math.abs(this.x2 - this.x1), this.height = Math.abs(this.y2 - this.y1), this.left = "left" in t ? t.left : this._getLeftToOriginX(), this.top = "top" in t ? t.top : this._getTopToOriginY()
            },
            _set: function(t, e) {
                return this.callSuper("_set", t, e), void 0 !== i[t] && this._setWidthHeight(), this
            },
            _getLeftToOriginX: e({
                origin: "originX",
                axis1: "x1",
                axis2: "x2",
                dimension: "width"
            }, {
                nearest: "left",
                center: "center",
                farthest: "right"
            }),
            _getTopToOriginY: e({
                origin: "originY",
                axis1: "y1",
                axis2: "y2",
                dimension: "height"
            }, {
                nearest: "top",
                center: "center",
                farthest: "bottom"
            }),
            _render: function(t) {
                if (t.beginPath(), !this.strokeDashArray || this.strokeDashArray && n) {
                    var e = this.calcLinePoints();
                    t.moveTo(e.x1, e.y1), t.lineTo(e.x2, e.y2)
                }
                t.lineWidth = this.strokeWidth;
                var i = t.strokeStyle;
                t.strokeStyle = this.stroke || t.fillStyle, this.stroke && this._renderStroke(t), t.strokeStyle = i
            },
            _renderDashedStroke: function(t) {
                var e = this.calcLinePoints();
                t.beginPath(), s.util.drawDashedLine(t, e.x1, e.y1, e.x2, e.y2, this.strokeDashArray), t.closePath()
            },
            _findCenterFromElement: function() {
                return {
                    x: (this.x1 + this.x2) / 2,
                    y: (this.y1 + this.y2) / 2
                }
            },
            toObject: function(t) {
                return o(this.callSuper("toObject", t), this.calcLinePoints())
            },
            _getNonTransformedDimensions: function() {
                var t = this.callSuper("_getNonTransformedDimensions");
                return "butt" === this.strokeLineCap && (0 === this.width && (t.y -= this.strokeWidth), 0 === this.height && (t.x -= this.strokeWidth)), t
            },
            calcLinePoints: function() {
                var t = this.x1 <= this.x2 ? -1 : 1,
                    e = this.y1 <= this.y2 ? -1 : 1,
                    i = t * this.width * .5,
                    r = e * this.height * .5;
                return {
                    x1: i,
                    x2: t * this.width * -.5,
                    y1: r,
                    y2: e * this.height * -.5
                }
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = this.calcLinePoints();
                return e.push("<line ", this.getSvgId(), 'x1="', i.x1, '" y1="', i.y1, '" x2="', i.x2, '" y2="', i.y2, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"/>\n'), t ? t(e.join("")) : e.join("")
            }
        }), s.Line.ATTRIBUTE_NAMES = s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")), s.Line.fromElement = function(t, e, i) {
            i = i || {};
            var r = s.parseAttributes(t, s.Line.ATTRIBUTE_NAMES),
                n = [r.x1 || 0, r.y1 || 0, r.x2 || 0, r.y2 || 0];
            e(new s.Line(n, o(r, i)))
        }, s.Line.fromObject = function(t, e) {
            var i = r(t, !0);
            i.points = [t.x1, t.y1, t.x2, t.y2], s.Object._fromObject("Line", i, function(t) {
                delete t.points, e && e(t)
            }, "points")
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var h = t.fabric || (t.fabric = {}),
            c = Math.PI;
        h.Circle ? h.warn("fabric.Circle is already defined.") : (h.Circle = h.util.createClass(h.Object, {
            type: "circle",
            radius: 0,
            startAngle: 0,
            endAngle: 2 * c,
            cacheProperties: h.Object.prototype.cacheProperties.concat("radius", "startAngle", "endAngle"),
            _set: function(t, e) {
                return this.callSuper("_set", t, e), "radius" === t && this.setRadius(e), this
            },
            toObject: function(t) {
                return this.callSuper("toObject", ["radius", "startAngle", "endAngle"].concat(t))
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = (this.endAngle - this.startAngle) % (2 * c);
                i = (this.endAngle - this.startAngle) > 2 * c ? 0 : i;
                if (0 === i) e.push("<circle ", this.getSvgId(), 'cx="0" cy="0" ', 'r="', this.radius, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), " ", this.getSvgTransformMatrix(), '"', this.addPaintOrder(), "/>\n");
                else {
                    var r = h.util.cos(this.startAngle) * this.radius,
                        n = h.util.sin(this.startAngle) * this.radius,
                        s = h.util.cos(this.endAngle) * this.radius,
                        o = h.util.sin(this.endAngle) * this.radius,
                        a = c < i ? "1" : "0";
                    e.push('<path d="M ' + r + " " + n, " A " + this.radius + " " + this.radius, " 0 ", +a + " 1", " " + s + " " + o, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), " ", this.getSvgTransformMatrix(), '"', this.addPaintOrder(), '/>\n')
                }
                return t ? t(e.join("")) : e.join("")
            },
            _render: function(t) {
                t.beginPath(), t.arc(0, 0, this.radius, this.startAngle, this.endAngle, !1), this._renderPaintInOrder(t)
            },
            getRadiusX: function() {
                return this.get("radius") * this.get("scaleX")
            },
            getRadiusY: function() {
                return this.get("radius") * this.get("scaleY")
            },
            setRadius: function(t) {
                return this.radius = t, this.set("width", 2 * t).set("height", 2 * t)
            }
        }), h.Circle.ATTRIBUTE_NAMES = h.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")), h.Circle.fromElement = function(t, e) {
            var i, r = h.parseAttributes(t, h.Circle.ATTRIBUTE_NAMES);
            if (!("radius" in (i = r) && 0 <= i.radius)) throw new Error("value of `r` attribute is required and can not be negative");
            r.left = (r.left || 0) - r.radius, r.top = (r.top || 0) - r.radius, e(new h.Circle(r))
        }, h.Circle.fromObject = function(t, e) {
            return h.Object._fromObject("Circle", t, e)
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var r = t.fabric || (t.fabric = {});
        r.Triangle ? r.warn("fabric.Triangle is already defined") : (r.Triangle = r.util.createClass(r.Object, {
            type: "triangle",
            width: 100,
            height: 100,
            _render: function(t) {
                var e = this.width / 2,
                    i = this.height / 2;
                t.beginPath(), t.moveTo(-e, i), t.lineTo(0, -i), t.lineTo(e, i), t.closePath(), this._renderPaintInOrder(t)
            },
            _renderDashedStroke: function(t) {
                var e = this.width / 2,
                    i = this.height / 2;
                t.beginPath(), r.util.drawDashedLine(t, -e, i, 0, -i, this.strokeDashArray), r.util.drawDashedLine(t, 0, -i, e, i, this.strokeDashArray), r.util.drawDashedLine(t, e, i, -e, i, this.strokeDashArray), t.closePath()
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = this.width / 2,
                    r = this.height / 2,
                    n = [-i + " " + r, "0 " + -r, i + " " + r].join(",");
                return e.push("<polygon ", this.getSvgId(), 'points="', n, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), '"', this.addPaintOrder(), "/>"), t ? t(e.join("")) : e.join("")
            }
        }), r.Triangle.fromObject = function(t, e) {
            return r.Object._fromObject("Triangle", t, e)
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var r = t.fabric || (t.fabric = {}),
            e = 2 * Math.PI;
        r.Ellipse ? r.warn("fabric.Ellipse is already defined.") : (r.Ellipse = r.util.createClass(r.Object, {
            type: "ellipse",
            rx: 0,
            ry: 0,
            cacheProperties: r.Object.prototype.cacheProperties.concat("rx", "ry"),
            initialize: function(t) {
                this.callSuper("initialize", t), this.set("rx", t && t.rx || 0), this.set("ry", t && t.ry || 0)
            },
            _set: function(t, e) {
                switch (this.callSuper("_set", t, e), t) {
                    case "rx":
                        this.rx = e, this.set("width", 2 * e);
                        break;
                    case "ry":
                        this.ry = e, this.set("height", 2 * e)
                }
                return this
            },
            getRx: function() {
                return this.get("rx") * this.get("scaleX")
            },
            getRy: function() {
                return this.get("ry") * this.get("scaleY")
            },
            toObject: function(t) {
                return this.callSuper("toObject", ["rx", "ry"].concat(t))
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup();
                return e.push("<ellipse ", this.getSvgId(), 'cx="0" cy="0" ', 'rx="', this.rx, '" ry="', this.ry, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"', this.addPaintOrder(), "/>\n"), t ? t(e.join("")) : e.join("")
            },
            _render: function(t) {
                t.beginPath(), t.save(), t.transform(1, 0, 0, this.ry / this.rx, 0, 0), t.arc(0, 0, this.rx, 0, e, !1), t.restore(), this._renderPaintInOrder(t)
            }
        }), r.Ellipse.ATTRIBUTE_NAMES = r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")), r.Ellipse.fromElement = function(t, e) {
            var i = r.parseAttributes(t, r.Ellipse.ATTRIBUTE_NAMES);
            i.left = (i.left || 0) - i.rx, i.top = (i.top || 0) - i.ry, e(new r.Ellipse(i))
        }, r.Ellipse.fromObject = function(t, e) {
            return r.Object._fromObject("Ellipse", t, e)
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var s = t.fabric || (t.fabric = {}),
            o = s.util.object.extend;
        s.Rect ? s.warn("fabric.Rect is already defined") : (s.Rect = s.util.createClass(s.Object, {
            stateProperties: s.Object.prototype.stateProperties.concat("rx", "ry"),
            type: "rect",
            rx: 0,
            ry: 0,
            cacheProperties: s.Object.prototype.cacheProperties.concat("rx", "ry"),
            initialize: function(t) {
                this.callSuper("initialize", t), this._initRxRy()
            },
            _initRxRy: function() {
                this.rx && !this.ry ? this.ry = this.rx : this.ry && !this.rx && (this.rx = this.ry)
            },
            _render: function(t) {
                if (1 !== this.width || 1 !== this.height) {
                    var e = this.rx ? Math.min(this.rx, this.width / 2) : 0,
                        i = this.ry ? Math.min(this.ry, this.height / 2) : 0,
                        r = this.width,
                        n = this.height,
                        s = -this.width / 2,
                        o = -this.height / 2,
                        a = 0 !== e || 0 !== i,
                        h = .4477152502;
                    t.beginPath(), t.moveTo(s + e, o), t.lineTo(s + r - e, o), a && t.bezierCurveTo(s + r - h * e, o, s + r, o + h * i, s + r, o + i), t.lineTo(s + r, o + n - i), a && t.bezierCurveTo(s + r, o + n - h * i, s + r - h * e, o + n, s + r - e, o + n), t.lineTo(s + e, o + n), a && t.bezierCurveTo(s + h * e, o + n, s, o + n - h * i, s, o + n - i), t.lineTo(s, o + i), a && t.bezierCurveTo(s, o + h * i, s + h * e, o, s + e, o), t.closePath(), this._renderPaintInOrder(t)
                } else t.fillRect(-.5, -.5, 1, 1)
            },
            _renderDashedStroke: function(t) {
                var e = -this.width / 2,
                    i = -this.height / 2,
                    r = this.width,
                    n = this.height;
                t.beginPath(), s.util.drawDashedLine(t, e, i, e + r, i, this.strokeDashArray), s.util.drawDashedLine(t, e + r, i, e + r, i + n, this.strokeDashArray), s.util.drawDashedLine(t, e + r, i + n, e, i + n, this.strokeDashArray), s.util.drawDashedLine(t, e, i + n, e, i, this.strokeDashArray), t.closePath()
            },
            toObject: function(t) {
                return this.callSuper("toObject", ["rx", "ry"].concat(t))
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = -this.width / 2,
                    r = -this.height / 2;
                return e.push("<rect ", this.getSvgId(), 'x="', i, '" y="', r, '" rx="', this.get("rx"), '" ry="', this.get("ry"), '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"', this.addPaintOrder(), "/>\n"), t ? t(e.join("")) : e.join("")
            }
        }), s.Rect.ATTRIBUTE_NAMES = s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")), s.Rect.fromElement = function(t, e, i) {
            if (!t) return e(null);
            i = i || {};
            var r = s.parseAttributes(t, s.Rect.ATTRIBUTE_NAMES);
            r.left = r.left || 0, r.top = r.top || 0;
            var n = new s.Rect(o(i ? s.util.object.clone(i) : {}, r));
            n.visible = n.visible && 0 < n.width && 0 < n.height, e(n)
        }, s.Rect.fromObject = function(t, e) {
            return s.Object._fromObject("Rect", t, e)
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var h = t.fabric || (t.fabric = {}),
            e = h.util.object.extend,
            r = h.util.array.min,
            n = h.util.array.max,
            c = h.util.toFixed;
        h.Polyline ? h.warn("fabric.Polyline is already defined") : (h.Polyline = h.util.createClass(h.Object, {
            type: "polyline",
            points: null,
            cacheProperties: h.Object.prototype.cacheProperties.concat("points"),
            initialize: function(t, e) {
                e = e || {}, this.points = t || [], this.callSuper("initialize", e);
                var i = this._calcDimensions();
                void 0 === e.left && (this.left = i.left), void 0 === e.top && (this.top = i.top), this.width = i.width, this.height = i.height, this.pathOffset = {
                    x: i.left + this.width / 2,
                    y: i.top + this.height / 2
                }
            },
            _calcDimensions: function() {
                var t = this.points,
                    e = r(t, "x") || 0,
                    i = r(t, "y") || 0;
                return {
                    left: e,
                    top: i,
                    width: (n(t, "x") || 0) - e,
                    height: (n(t, "y") || 0) - i
                }
            },
            toObject: function(t) {
                return e(this.callSuper("toObject", t), {
                    points: this.points.concat()
                })
            },
            toSVG: function(t) {
                for (var e = [], i = this.pathOffset.x, r = this.pathOffset.y, n = this._createBaseSVGMarkup(), s = h.Object.NUM_FRACTION_DIGITS, o = 0, a = this.points.length; o < a; o++) e.push(c(this.points[o].x - i, s), ",", c(this.points[o].y - r, s), " ");
                return n.push("<", this.type, " ", this.getSvgId(), 'points="', e.join(""), '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), " ", this.getSvgTransformMatrix(), '"', this.addPaintOrder(), "/>\n"), t ? t(n.join("")) : n.join("")
            },
            commonRender: function(t) {
                var e, i = this.points.length,
                    r = this.pathOffset.x,
                    n = this.pathOffset.y;
                if (!i || isNaN(this.points[i - 1].y)) return !1;
                t.beginPath(), t.moveTo(this.points[0].x - r, this.points[0].y - n);
                for (var s = 0; s < i; s++) e = this.points[s], t.lineTo(e.x - r, e.y - n);
                return !0
            },
            _render: function(t) {
                this.commonRender(t) && this._renderPaintInOrder(t)
            },
            _renderDashedStroke: function(t) {
                var e, i;
                t.beginPath();
                for (var r = 0, n = this.points.length; r < n; r++) e = this.points[r], i = this.points[r + 1] || e, h.util.drawDashedLine(t, e.x, e.y, i.x, i.y, this.strokeDashArray)
            },
            complexity: function() {
                return this.get("points").length
            }
        }), h.Polyline.ATTRIBUTE_NAMES = h.SHARED_ATTRIBUTES.concat(), h.Polyline.fromElement = function(t, e, i) {
            if (!t) return e(null);
            i || (i = {});
            var r = h.parsePointsAttribute(t.getAttribute("points")),
                n = h.parseAttributes(t, h.Polyline.ATTRIBUTE_NAMES);
            e(new h.Polyline(r, h.util.object.extend(n, i)))
        }, h.Polyline.fromObject = function(t, e) {
            return h.Object._fromObject("Polyline", t, e, "points")
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var s = t.fabric || (t.fabric = {}),
            o = s.util.object.extend;
        s.Polygon ? s.warn("fabric.Polygon is already defined") : (s.Polygon = s.util.createClass(s.Polyline, {
            type: "polygon",
            _render: function(t) {
                this.commonRender(t) && (t.closePath(), this._renderPaintInOrder(t))
            },
            _renderDashedStroke: function(t) {
                this.callSuper("_renderDashedStroke", t), t.closePath()
            }
        }), s.Polygon.ATTRIBUTE_NAMES = s.SHARED_ATTRIBUTES.concat(), s.Polygon.fromElement = function(t, e, i) {
            if (!t) return e(null);
            i || (i = {});
            var r = s.parsePointsAttribute(t.getAttribute("points")),
                n = s.parseAttributes(t, s.Polygon.ATTRIBUTE_NAMES);
            e(new s.Polygon(r, o(n, i)))
        }, s.Polygon.fromObject = function(t, e) {
            return s.Object._fromObject("Polygon", t, e, "points")
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var m = t.fabric || (t.fabric = {}),
            b = m.util.array.min,
            _ = m.util.array.max,
            n = m.util.object.extend,
            r = Object.prototype.toString,
            p = m.util.drawArc,
            y = {
                m: 2,
                l: 2,
                h: 1,
                v: 1,
                c: 6,
                s: 4,
                q: 4,
                t: 2,
                a: 7
            },
            x = {
                m: "l",
                M: "L"
            };
        m.Path ? m.warn("fabric.Path is already defined") : (m.Path = m.util.createClass(m.Object, {
            type: "path",
            path: null,
            cacheProperties: m.Object.prototype.cacheProperties.concat("path", "fillRule"),
            stateProperties: m.Object.prototype.stateProperties.concat("path"),
            initialize: function(t, e) {
                e = e || {}, this.callSuper("initialize", e), t || (t = []);
                var i = "[object Array]" === r.call(t);
                this.path = i ? t : t.match && t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi), this.path && (i || (this.path = this._parsePath()), this._setPositionDimensions(e))
            },
            _setPositionDimensions: function(t) {
                var e = this._parseDimensions();
                this.width = e.width, this.height = e.height, void 0 === t.left && (this.left = e.left), void 0 === t.top && (this.top = e.top), this.pathOffset = this.pathOffset || {
                    x: e.left + this.width / 2,
                    y: e.top + this.height / 2
                }
            },
            _renderPathCommands: function(t) {
                var e, i, r, n = null,
                    s = 0,
                    o = 0,
                    a = 0,
                    h = 0,
                    c = 0,
                    l = 0,
                    u = -this.pathOffset.x,
                    f = -this.pathOffset.y;
                t.beginPath();
                for (var d = 0, g = this.path.length; d < g; ++d) {
                    switch ((e = this.path[d])[0]) {
                        case "l":
                            a += e[1], h += e[2], t.lineTo(a + u, h + f);
                            break;
                        case "L":
                            a = e[1], h = e[2], t.lineTo(a + u, h + f);
                            break;
                        case "h":
                            a += e[1], t.lineTo(a + u, h + f);
                            break;
                        case "H":
                            a = e[1], t.lineTo(a + u, h + f);
                            break;
                        case "v":
                            h += e[1], t.lineTo(a + u, h + f);
                            break;
                        case "V":
                            h = e[1], t.lineTo(a + u, h + f);
                            break;
                        case "m":
                            s = a += e[1], o = h += e[2], t.moveTo(a + u, h + f);
                            break;
                        case "M":
                            s = a = e[1], o = h = e[2], t.moveTo(a + u, h + f);
                            break;
                        case "c":
                            i = a + e[5], r = h + e[6], c = a + e[3], l = h + e[4], t.bezierCurveTo(a + e[1] + u, h + e[2] + f, c + u, l + f, i + u, r + f), a = i, h = r;
                            break;
                        case "C":
                            a = e[5], h = e[6], c = e[3], l = e[4], t.bezierCurveTo(e[1] + u, e[2] + f, c + u, l + f, a + u, h + f);
                            break;
                        case "s":
                            i = a + e[3], r = h + e[4], null === n[0].match(/[CcSs]/) ? (c = a, l = h) : (c = 2 * a - c, l = 2 * h - l), t.bezierCurveTo(c + u, l + f, a + e[1] + u, h + e[2] + f, i + u, r + f), c = a + e[1], l = h + e[2], a = i, h = r;
                            break;
                        case "S":
                            i = e[3], r = e[4], null === n[0].match(/[CcSs]/) ? (c = a, l = h) : (c = 2 * a - c, l = 2 * h - l), t.bezierCurveTo(c + u, l + f, e[1] + u, e[2] + f, i + u, r + f), a = i, h = r, c = e[1], l = e[2];
                            break;
                        case "q":
                            i = a + e[3], r = h + e[4], c = a + e[1], l = h + e[2], t.quadraticCurveTo(c + u, l + f, i + u, r + f), a = i, h = r;
                            break;
                        case "Q":
                            i = e[3], r = e[4], t.quadraticCurveTo(e[1] + u, e[2] + f, i + u, r + f), a = i, h = r, c = e[1], l = e[2];
                            break;
                        case "t":
                            i = a + e[1], r = h + e[2], null === n[0].match(/[QqTt]/) ? (c = a, l = h) : (c = 2 * a - c, l = 2 * h - l), t.quadraticCurveTo(c + u, l + f, i + u, r + f), a = i, h = r;
                            break;
                        case "T":
                            i = e[1], r = e[2], null === n[0].match(/[QqTt]/) ? (c = a, l = h) : (c = 2 * a - c, l = 2 * h - l), t.quadraticCurveTo(c + u, l + f, i + u, r + f), a = i, h = r;
                            break;
                        case "a":
                            p(t, a + u, h + f, [e[1], e[2], e[3], e[4], e[5], e[6] + a + u, e[7] + h + f]), a += e[6], h += e[7];
                            break;
                        case "A":
                            p(t, a + u, h + f, [e[1], e[2], e[3], e[4], e[5], e[6] + u, e[7] + f]), a = e[6], h = e[7];
                            break;
                        case "z":
                        case "Z":
                            a = s, h = o, t.closePath()
                    }
                    n = e
                }
            },
            _render: function(t) {
                this._renderPathCommands(t), this._renderPaintInOrder(t)
            },
            toString: function() {
                return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>"
            },
            toObject: function(t) {
                return n(this.callSuper("toObject", t), {
                    path: this.path.map(function(t) {
                        return t.slice()
                    }),
                    top: this.top,
                    left: this.left
                })
            },
            toDatalessObject: function(t) {
                var e = this.toObject(["sourcePath"].concat(t));
                return e.sourcePath && delete e.path, e
            },
            toSVG: function(t) {
                for (var e, i = [], r = this._createBaseSVGMarkup(), n = 0, s = this.path.length; n < s; n++) i.push(this.path[n].join(" "));
                var o = i.join(" ");
                return e = " translate(" + -this.pathOffset.x + ", " + -this.pathOffset.y + ") ", r.push("<path ", this.getSvgId(), 'd="', o, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), e, this.getSvgTransformMatrix(), '" stroke-linecap="round" ', this.addPaintOrder(), "/>\n"), t ? t(r.join("")) : r.join("")
            },
            complexity: function() {
                return this.path.length
            },
            _parsePath: function() {
                for (var t, e, i, r, n, s = [], o = [], a = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi, h = 0, c = this.path.length; h < c; h++) {
                    for (r = (t = this.path[h]).slice(1).trim(), o.length = 0; i = a.exec(r);) o.push(i[0]);
                    n = [t.charAt(0)];
                    for (var l = 0, u = o.length; l < u; l++) e = parseFloat(o[l]), isNaN(e) || n.push(e);
                    var f = n[0],
                        d = y[f.toLowerCase()],
                        g = x[f] || f;
                    if (n.length - 1 > d)
                        for (var p = 1, v = n.length; p < v; p += d) s.push([f].concat(n.slice(p, p + d))), f = g;
                    else s.push(n)
                }
                return s
            },
            _parseDimensions: function() {
                for (var t, e, i, r, n = [], s = [], o = null, a = 0, h = 0, c = 0, l = 0, u = 0, f = 0, d = 0, g = this.path.length; d < g; ++d) {
                    switch ((t = this.path[d])[0]) {
                        case "l":
                            c += t[1], l += t[2], r = [];
                            break;
                        case "L":
                            c = t[1], l = t[2], r = [];
                            break;
                        case "h":
                            c += t[1], r = [];
                            break;
                        case "H":
                            c = t[1], r = [];
                            break;
                        case "v":
                            l += t[1], r = [];
                            break;
                        case "V":
                            l = t[1], r = [];
                            break;
                        case "m":
                            a = c += t[1], h = l += t[2], r = [];
                            break;
                        case "M":
                            a = c = t[1], h = l = t[2], r = [];
                            break;
                        case "c":
                            e = c + t[5], i = l + t[6], u = c + t[3], f = l + t[4], r = m.util.getBoundsOfCurve(c, l, c + t[1], l + t[2], u, f, e, i), c = e, l = i;
                            break;
                        case "C":
                            u = t[3], f = t[4], r = m.util.getBoundsOfCurve(c, l, t[1], t[2], u, f, t[5], t[6]), c = t[5], l = t[6];
                            break;
                        case "s":
                            e = c + t[3], i = l + t[4], null === o[0].match(/[CcSs]/) ? (u = c, f = l) : (u = 2 * c - u, f = 2 * l - f), r = m.util.getBoundsOfCurve(c, l, u, f, c + t[1], l + t[2], e, i), u = c + t[1], f = l + t[2], c = e, l = i;
                            break;
                        case "S":
                            e = t[3], i = t[4], null === o[0].match(/[CcSs]/) ? (u = c, f = l) : (u = 2 * c - u, f = 2 * l - f), r = m.util.getBoundsOfCurve(c, l, u, f, t[1], t[2], e, i), c = e, l = i, u = t[1], f = t[2];
                            break;
                        case "q":
                            e = c + t[3], i = l + t[4], u = c + t[1], f = l + t[2], r = m.util.getBoundsOfCurve(c, l, u, f, u, f, e, i), c = e, l = i;
                            break;
                        case "Q":
                            u = t[1], f = t[2], r = m.util.getBoundsOfCurve(c, l, u, f, u, f, t[3], t[4]), c = t[3], l = t[4];
                            break;
                        case "t":
                            e = c + t[1], i = l + t[2], null === o[0].match(/[QqTt]/) ? (u = c, f = l) : (u = 2 * c - u, f = 2 * l - f), r = m.util.getBoundsOfCurve(c, l, u, f, u, f, e, i), c = e, l = i;
                            break;
                        case "T":
                            e = t[1], i = t[2], null === o[0].match(/[QqTt]/) ? (u = c, f = l) : (u = 2 * c - u, f = 2 * l - f), r = m.util.getBoundsOfCurve(c, l, u, f, u, f, e, i), c = e, l = i;
                            break;
                        case "a":
                            r = m.util.getBoundsOfArc(c, l, t[1], t[2], t[3], t[4], t[5], t[6] + c, t[7] + l), c += t[6], l += t[7];
                            break;
                        case "A":
                            r = m.util.getBoundsOfArc(c, l, t[1], t[2], t[3], t[4], t[5], t[6], t[7]), c = t[6], l = t[7];
                            break;
                        case "z":
                        case "Z":
                            c = a, l = h
                    }
                    o = t, r.forEach(function(t) {
                        n.push(t.x), s.push(t.y)
                    }), n.push(c), s.push(l)
                }
                var p = b(n) || 0,
                    v = b(s) || 0;
                return {
                    left: p,
                    top: v,
                    width: (_(n) || 0) - p,
                    height: (_(s) || 0) - v
                }
            }
        }), m.Path.fromObject = function(i, r) {
            if ("string" == typeof i.sourcePath) {
                var t = i.sourcePath;
                m.loadSVGFromURL(t, function(t) {
                    var e = t[0];
                    e.setOptions(i), r && r(e)
                })
            } else m.Object._fromObject("Path", i, r, "path")
        }, m.Path.ATTRIBUTE_NAMES = m.SHARED_ATTRIBUTES.concat(["d"]), m.Path.fromElement = function(t, e, i) {
            var r = m.parseAttributes(t, m.Path.ATTRIBUTE_NAMES);
            e(new m.Path(r.d, n(r, i)))
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var o = t.fabric || (t.fabric = {}),
            i = o.util.object.extend,
            a = o.util.array.min,
            h = o.util.array.max;
        o.Group || (o.Group = o.util.createClass(o.Object, o.Collection, {
            type: "group",
            strokeWidth: 0,
            subTargetCheck: !1,
            cacheProperties: [],
            useSetOnGroup: !1,
            initialize: function(t, e, i) {
                e = e || {}, this._objects = [], i && this.callSuper("initialize", e), this._objects = t || [];
                for (var r = this._objects.length; r--;) this._objects[r].group = this;
                if (e.originX && (this.originX = e.originX), e.originY && (this.originY = e.originY), i) this._updateObjectsACoords();
                else {
                    var n = e && e.centerPoint;
                    n || this._calcBounds(), this._updateObjectsCoords(n), delete e.centerPoint, this.callSuper("initialize", e)
                }
                this.setCoords()
            },
            _updateObjectsACoords: function() {
                for (var t = this._objects.length; t--;) this._objects[t].setCoords(!0, !0)
            },
            _updateObjectsCoords: function(t) {
                t = t || this.getCenterPoint();
                for (var e = this._objects.length; e--;) this._updateObjectCoords(this._objects[e], t)
            },
            _updateObjectCoords: function(t, e) {
                var i = t.left,
                    r = t.top;
                t.set({
                    left: i - e.x,
                    top: r - e.y
                }), t.group = this, t.setCoords(!0, !0)
            },
            toString: function() {
                return "#<fabric.Group: (" + this.complexity() + ")>"
            },
            addWithUpdate: function(t) {
                return this._restoreObjectsState(), o.util.resetObjectTransform(this), t && (this._objects.push(t), t.group = this, t._set("canvas", this.canvas)), this._calcBounds(), this._updateObjectsCoords(), this.setCoords(), this.dirty = !0, this
            },
            removeWithUpdate: function(t) {
                return this._restoreObjectsState(), o.util.resetObjectTransform(this), this.remove(t), this._calcBounds(), this._updateObjectsCoords(), this.setCoords(), this.dirty = !0, this
            },
            _onObjectAdded: function(t) {
                this.dirty = !0, t.group = this, t._set("canvas", this.canvas)
            },
            _onObjectRemoved: function(t) {
                this.dirty = !0, delete t.group
            },
            _set: function(t, e) {
                var i = this._objects.length;
                if (this.useSetOnGroup)
                    for (; i--;) this._objects[i].setOnGroup(t, e);
                if ("canvas" === t)
                    for (i = this._objects.length; i--;) this._objects[i]._set(t, e);
                this.callSuper("_set", t, e)
            },
            toObject: function(r) {
                var t = this.getObjects().map(function(t) {
                    var e = t.includeDefaultValues;
                    t.includeDefaultValues = t.group.includeDefaultValues;
                    var i = t.toObject(r);
                    return t.includeDefaultValues = e, i
                });
                return i(this.callSuper("toObject", r), {
                    objects: t
                })
            },
            toDatalessObject: function(r) {
                var t, e = this.sourcePath;
                return t = e || this.getObjects().map(function(t) {
                    var e = t.includeDefaultValues;
                    t.includeDefaultValues = t.group.includeDefaultValues;
                    var i = t.toDatalessObject(r);
                    return t.includeDefaultValues = e, i
                }), i(this.callSuper("toDatalessObject", r), {
                    objects: t
                })
            },
            render: function(t) {
                this._transformDone = !0, this.callSuper("render", t), this._transformDone = !1
            },
            shouldCache: function() {
                var t = this.objectCaching && (!this.group || this.needsItsOwnCache() || !this.group.isOnACache());
                if (this.ownCaching = t)
                    for (var e = 0, i = this._objects.length; e < i; e++)
                        if (this._objects[e].willDrawShadow()) return this.ownCaching = !1;
                return t
            },
            willDrawShadow: function() {
                if (this.shadow) return this.callSuper("willDrawShadow");
                for (var t = 0, e = this._objects.length; t < e; t++)
                    if (this._objects[t].willDrawShadow()) return !0;
                return !1
            },
            isOnACache: function() {
                return this.ownCaching || this.group && this.group.isOnACache()
            },
            drawObject: function(t) {
                for (var e = 0, i = this._objects.length; e < i; e++) this._objects[e].render(t)
            },
            isCacheDirty: function() {
                if (this.callSuper("isCacheDirty")) return !0;
                if (!this.statefullCache) return !1;
                for (var t = 0, e = this._objects.length; t < e; t++)
                    if (this._objects[t].isCacheDirty(!0)) {
                        if (this._cacheCanvas) {
                            var i = this.cacheWidth / this.zoomX,
                                r = this.cacheHeight / this.zoomY;
                            this._cacheContext.clearRect(-i / 2, -r / 2, i, r)
                        }
                        return !0
                    } return !1
            },
            _restoreObjectsState: function() {
                return this._objects.forEach(this._restoreObjectState, this), this
            },
            realizeTransform: function(t) {
                var e = t.calcTransformMatrix(),
                    i = o.util.qrDecompose(e),
                    r = new o.Point(i.translateX, i.translateY);
                return t.flipX = !1, t.flipY = !1, t.set("scaleX", i.scaleX), t.set("scaleY", i.scaleY), t.skewX = i.skewX, t.skewY = i.skewY, t.angle = i.angle, t.setPositionByOrigin(r, "center", "center"), t
            },
            _restoreObjectState: function(t) {
                return this.realizeTransform(t), t.setCoords(), delete t.group, this
            },
            destroy: function() {
                return this._objects.forEach(function(t) {
                    t.set("dirty", !0)
                }), this._restoreObjectsState()
            },
            toActiveSelection: function() {
                if (this.canvas) {
                    var t = this._objects,
                        e = this.canvas;
                    this._objects = [];
                    var i = this.toObject();
                    delete i.objects;
                    var r = new o.ActiveSelection([]);
                    return r.set(i), r.type = "activeSelection", e.remove(this), t.forEach(function(t) {
                        t.group = r, t.dirty = !0, e.add(t)
                    }), r.canvas = e, r._objects = t, (e._activeObject = r).setCoords(), r
                }
            },
            ungroupOnCanvas: function() {
                return this._restoreObjectsState()
            },
            setObjectsCoords: function() {
                return this.forEachObject(function(t) {
                    t.setCoords(!0, !0)
                }), this
            },
            _calcBounds: function(t) {
                for (var e, i, r, n = [], s = [], o = ["tr", "br", "bl", "tl"], a = 0, h = this._objects.length, c = o.length; a < h; ++a)
                    for ((e = this._objects[a]).setCoords(!0), r = 0; r < c; r++) i = o[r], n.push(e.oCoords[i].x), s.push(e.oCoords[i].y);
                this.set(this._getBounds(n, s, t))
            },
            _getBounds: function(t, e, i) {
                var r = new o.Point(a(t), a(e)),
                    n = new o.Point(h(t), h(e)),
                    s = {
                        width: n.x - r.x || 0,
                        height: n.y - r.y || 0
                    };
                return i || (s.left = r.x || 0, s.top = r.y || 0, "center" === this.originX && (s.left += s.width / 2), "right" === this.originX && (s.left += s.width), "center" === this.originY && (s.top += s.height / 2), "bottom" === this.originY && (s.top += s.height)), s
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup();
                e.push("<g ", this.getSvgId(), 'transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '" style="', this.getSvgFilter(), '">\n');
                for (var i = 0, r = this._objects.length; i < r; i++) e.push("\t", this._objects[i].toSVG(t));
                return e.push("</g>\n"), t ? t(e.join("")) : e.join("")
            }
        }), o.Group.fromObject = function(i, r) {
            o.util.enlivenObjects(i.objects, function(t) {
                var e = o.util.object.clone(i, !0);
                delete e.objects, r && r(new o.Group(t, e, !0))
            })
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var n = t.fabric || (t.fabric = {});
        n.ActiveSelection || (n.ActiveSelection = n.util.createClass(n.Group, {
            type: "activeSelection",
            initialize: function(t, e) {
                e = e || {}, this._objects = t || [];
                for (var i = this._objects.length; i--;) this._objects[i].group = this;
                e.originX && (this.originX = e.originX), e.originY && (this.originY = e.originY), this._calcBounds(), this._updateObjectsCoords(), n.Object.prototype.initialize.call(this, e), this.setCoords()
            },
            toGroup: function() {
                var t = this._objects;
                this._objects = [];
                var e = this.toObject(),
                    i = new n.Group([]);
                if (delete e.objects, i.set(e), i.type = "group", t.forEach(function(t) {
                        t.group = i, t.canvas.remove(t)
                    }), i._objects = t, !this.canvas) return i;
                var r = this.canvas;
                return r.add(i), (r._activeObject = i).setCoords(), i
            },
            onDeselect: function() {
                return this.destroy(), !1
            },
            toString: function() {
                return "#<fabric.ActiveSelection: (" + this.complexity() + ")>"
            },
            _set: function(t, e) {
                var i = this._objects.length;
                if ("canvas" === t)
                    for (; i--;) this._objects[i].set(t, e);
                if (this.useSetOnGroup)
                    for (; i--;) this._objects[i].setOnGroup(t, e);
                n.Object.prototype._set.call(this, t, e)
            },
            shouldCache: function() {
                return !1
            },
            willDrawShadow: function() {
                if (this.shadow) return this.callSuper("willDrawShadow");
                for (var t = 0, e = this._objects.length; t < e; t++)
                    if (this._objects[t].willDrawShadow()) return !0;
                return !1
            },
            isOnACache: function() {
                return !1
            },
            _renderControls: function(t, e, i) {
                t.save(), t.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1, this.callSuper("_renderControls", t, e), void 0 === (i = i || {}).hasControls && (i.hasControls = !1), void 0 === i.hasRotatingPoint && (i.hasRotatingPoint = !1), i.forActiveSelection = !0;
                for (var r = 0, n = this._objects.length; r < n; r++) this._objects[r]._renderControls(t, i);
                t.restore()
            }
        }), n.ActiveSelection.fromObject = function(e, i) {
            n.util.enlivenObjects(e.objects, function(t) {
                delete e.objects, i && i(new n.ActiveSelection(t, e, !0))
            })
        })
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var n = fabric.util.object.extend;
        t.fabric || (t.fabric = {}), t.fabric.Image ? fabric.warn("fabric.Image is already defined.") : (fabric.Image = fabric.util.createClass(fabric.Object, {
            type: "image",
            crossOrigin: "",
            strokeWidth: 0,
            _lastScaleX: 1,
            _lastScaleY: 1,
            _filterScalingX: 1,
            _filterScalingY: 1,
            minimumScaleTrigger: .5,
            stateProperties: fabric.Object.prototype.stateProperties.concat("cropX", "cropY"),
            objectCaching: !1,
            cacheKey: "",
            cropX: 0,
            cropY: 0,
            initialize: function(t, e) {
                e || (e = {}), this.filters = [], this.cacheKey = "texture" + fabric.Object.__uid++, this.callSuper("initialize", e), this._initElement(t, e)
            },
            getElement: function() {
                return this._element
            },
            setElement: function(t, e) {
                var i = fabric.filterBackend;
                return i && i.evictCachesForKey && (i.evictCachesForKey(this.cacheKey), i.evictCachesForKey(this.cacheKey + "_filtered")), this._element = t, this._originalElement = t, this._initConfig(e), this.resizeFilter && this.applyResizeFilters(), 0 !== this.filters.length && this.applyFilters(), this
            },
            dispose: function() {
                var t = fabric.filterBackend;
                t && t.evictCachesForKey && (t.evictCachesForKey(this.cacheKey), t.evictCachesForKey(this.cacheKey + "_filtered")), this._originalElement = void 0, this._element = void 0, this._filteredEl = void 0
            },
            setCrossOrigin: function(t) {
                return this.crossOrigin = t, this._element.crossOrigin = t, this
            },
            getOriginalSize: function() {
                var t = this.getElement();
                return {
                    width: t.width,
                    height: t.height
                }
            },
            _stroke: function(t) {
                if (this.stroke && 0 !== this.strokeWidth) {
                    var e = this.width / 2,
                        i = this.height / 2;
                    t.beginPath(), t.moveTo(-e, -i), t.lineTo(e, -i), t.lineTo(e, i), t.lineTo(-e, i), t.lineTo(-e, -i), t.closePath()
                }
            },
            _renderDashedStroke: function(t) {
                var e = -this.width / 2,
                    i = -this.height / 2,
                    r = this.width,
                    n = this.height;
                t.save(), this._setStrokeStyles(t, this), t.beginPath(), fabric.util.drawDashedLine(t, e, i, e + r, i, this.strokeDashArray), fabric.util.drawDashedLine(t, e + r, i, e + r, i + n, this.strokeDashArray), fabric.util.drawDashedLine(t, e + r, i + n, e, i + n, this.strokeDashArray), fabric.util.drawDashedLine(t, e, i + n, e, i, this.strokeDashArray), t.closePath(), t.restore()
            },
            toObject: function(t) {
                var e = [];
                this.filters.forEach(function(t) {
                    t && e.push(t.toObject())
                });
                var i = n(this.callSuper("toObject", ["crossOrigin", "cropX", "cropY"].concat(t)), {
                    src: this.getSrc(),
                    filters: e
                });
                return this.resizeFilter && (i.resizeFilter = this.resizeFilter.toObject()), i
            },
            hasCrop: function() {
                return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = -this.width / 2,
                    r = -this.height / 2,
                    n = "";
                if (this.hasCrop()) {
                    var s = fabric.Object.__uid++;
                    e.push('<clipPath id="imageCrop_' + s + '">\n', '\t<rect x="' + i + '" y="' + r + '" width="' + this.width + '" height="' + this.height + '" />\n', "</clipPath>\n"), n = ' clip-path="url(#imageCrop_' + s + ')" '
                }
                e.push('<g transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '">\n');
                var o = ["\t<image ", this.getSvgId(), 'xlink:href="', this.getSvgSrc(!0), '" x="', i - this.cropX, '" y="', r - this.cropY, '" style="', this.getSvgStyles(), '" width="', this._element.width || this._element.naturalWidth, '" height="', this._element.height || this._element.height, '"', n, "></image>\n"];
                if ("fill" === this.paintFirst && Array.prototype.push.apply(e, o), this.stroke || this.strokeDashArray) {
                    var a = this.fill;
                    this.fill = null, e.push("\t<rect ", 'x="', i, '" y="', r, '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '"/>\n'), this.fill = a
                }
                return "fill" !== this.paintFirst && Array.prototype.push.apply(e, o), e.push("</g>\n"), t ? t(e.join("")) : e.join("")
            },
            getSrc: function(t) {
                var e = t ? this._element : this._originalElement;
                return e ? e.toDataURL ? e.toDataURL() : e.src : this.src || ""
            },
            setSrc: function(t, e, i) {
                return fabric.util.loadImage(t, function(t) {
                    this.setElement(t, i), this._setWidthHeight(), e(this)
                }, this, i && i.crossOrigin), this
            },
            toString: function() {
                return '#<fabric.Image: { src: "' + this.getSrc() + '" }>'
            },
            applyResizeFilters: function() {
                var t = this.resizeFilter,
                    e = this.canvas ? this.canvas.getRetinaScaling() : 1,
                    i = this.minimumScaleTrigger,
                    r = this.scaleX * e,
                    n = this.scaleY * e,
                    s = this._filteredEl || this._originalElement;
                if (this.group && this.set("dirty", !0), !t || i < r && i < n) return this._element = s, this._filterScalingX = 1, void(this._filterScalingY = 1);
                fabric.filterBackend || (fabric.filterBackend = fabric.initFilterBackend());
                var o = fabric.util.createCanvasElement(),
                    a = this._filteredEl ? this.cacheKey : this.cacheKey + "_filtered",
                    h = s.width,
                    c = s.height;
                o.width = h, o.height = c, this._element = o, t.scaleX = r, t.scaleY = n, fabric.filterBackend.applyFilters([t], s, h, c, this._element, a), this._filterScalingX = o.width / this._originalElement.width, this._filterScalingY = o.height / this._originalElement.height
            },
            applyFilters: function(t) {
                if (t = (t = t || this.filters || []).filter(function(t) {
                        return t
                    }), this.group && this.set("dirty", !0), 0 === t.length) return this._element = this._originalElement, this._filteredEl = null, this._filterScalingX = 1, this._filterScalingY = 1, this;
                var e = this._originalElement,
                    i = e.naturalWidth || e.width,
                    r = e.naturalHeight || e.height;
                if (this._element === this._originalElement) {
                    var n = fabric.util.createCanvasElement();
                    n.width = i, n.height = r, this._element = n, this._filteredEl = n
                } else this._element.getContext("2d").clearRect(0, 0, i, r);
                return fabric.filterBackend || (fabric.filterBackend = fabric.initFilterBackend()), fabric.filterBackend.applyFilters(t, this._originalElement, i, r, this._element, this.cacheKey), this._originalElement.width === this._element.width && this._originalElement.height === this._element.height || (this._filterScalingX = this._element.width / this._originalElement.width, this._filterScalingY = this._element.height / this._originalElement.height), this
            },
            _render: function(t) {
                !1 === this.isMoving && this.resizeFilter && this._needsResize() && (this._lastScaleX = this.scaleX, this._lastScaleY = this.scaleY, this.applyResizeFilters()), this._stroke(t), this._renderPaintInOrder(t)
            },
            _renderFill: function(t) {
                var e = this.width,
                    i = this.height,
                    r = e * this._filterScalingX,
                    n = i * this._filterScalingY,
                    s = -e / 2,
                    o = -i / 2,
                    a = this._element;
                a && t.drawImage(a, this.cropX * this._filterScalingX, this.cropY * this._filterScalingY, r, n, s, o, e, i)
            },
            _needsResize: function() {
                return this.scaleX !== this._lastScaleX || this.scaleY !== this._lastScaleY
            },
            _resetWidthHeight: function() {
                var t = this.getElement();
                this.set("width", t.width), this.set("height", t.height)
            },
            _initElement: function(t, e) {
                this.setElement(fabric.util.getById(t), e), fabric.util.addClass(this.getElement(), fabric.Image.CSS_CANVAS)
            },
            _initConfig: function(t) {
                t || (t = {}), this.setOptions(t), this._setWidthHeight(t), this._element && this.crossOrigin && (this._element.crossOrigin = this.crossOrigin)
            },
            _initFilters: function(t, e) {
                t && t.length ? fabric.util.enlivenObjects(t, function(t) {
                    e && e(t)
                }, "fabric.Image.filters") : e && e()
            },
            _setWidthHeight: function(t) {
                this.width = t && "width" in t ? t.width : this.getElement() && this.getElement().width || 0, this.height = t && "height" in t ? t.height : this.getElement() && this.getElement().height || 0
            },
            parsePreserveAspectRatioAttribute: function() {
                var t, e = fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ""),
                    i = this._element.width,
                    r = this._element.height,
                    n = 1,
                    s = 1,
                    o = 0,
                    a = 0,
                    h = 0,
                    c = 0,
                    l = this.width,
                    u = this.height,
                    f = {
                        width: l,
                        height: u
                    };
                return !e || "none" === e.alignX && "none" === e.alignY ? (n = l / i, s = u / r) : ("meet" === e.meetOrSlice && (t = (l - i * (n = s = fabric.util.findScaleToFit(this._element, f))) / 2, "Min" === e.alignX && (o = -t), "Max" === e.alignX && (o = t), t = (u - r * s) / 2, "Min" === e.alignY && (a = -t), "Max" === e.alignY && (a = t)), "slice" === e.meetOrSlice && (t = i - l / (n = s = fabric.util.findScaleToCover(this._element, f)), "Mid" === e.alignX && (h = t / 2), "Max" === e.alignX && (h = t), t = r - u / s, "Mid" === e.alignY && (c = t / 2), "Max" === e.alignY && (c = t), i = l / n, r = u / s)), {
                    width: i,
                    height: r,
                    scaleX: n,
                    scaleY: s,
                    offsetLeft: o,
                    offsetTop: a,
                    cropX: h,
                    cropY: c
                }
            }
        }), fabric.Image.CSS_CANVAS = "canvas-img", fabric.Image.prototype.getSvgSrc = fabric.Image.prototype.getSrc, fabric.Image.fromObject = function(t, r) {
            var n = fabric.util.object.clone(t);
            fabric.util.loadImage(n.src, function(i, t) {
                t ? r && r(null, t) : fabric.Image.prototype._initFilters.call(n, n.filters, function(t) {
                    n.filters = t || [], fabric.Image.prototype._initFilters.call(n, [n.resizeFilter], function(t) {
                        n.resizeFilter = t[0];
                        var e = new fabric.Image(i, n);
                        r(e)
                    })
                })
            }, null, n.crossOrigin)
        }, fabric.Image.fromURL = function(t, e, i) {
            fabric.util.loadImage(t, function(t) {
                e && e(new fabric.Image(t, i))
            }, null, i && i.crossOrigin)
        }, fabric.Image.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")), fabric.Image.fromElement = function(t, e, i) {
            var r = fabric.parseAttributes(t, fabric.Image.ATTRIBUTE_NAMES);
            fabric.Image.fromURL(r["xlink:href"], e, n(i ? fabric.util.object.clone(i) : {}, r))
        })
    }("undefined" != typeof exports ? exports : this), fabric.util.object.extend(fabric.Object.prototype, {
        _getAngleValueForStraighten: function() {
            var t = this.angle % 360;
            return 0 < t ? 90 * Math.round((t - 1) / 90) : 90 * Math.round(t / 90)
        },
        straighten: function() {
            return this.rotate(this._getAngleValueForStraighten()), this
        },
        fxStraighten: function(t) {
            var e = function() {},
                i = (t = t || {}).onComplete || e,
                r = t.onChange || e,
                n = this;
            return fabric.util.animate({
                startValue: this.get("angle"),
                endValue: this._getAngleValueForStraighten(),
                duration: this.FX_DURATION,
                onChange: function(t) {
                    n.rotate(t), r()
                },
                onComplete: function() {
                    n.setCoords(), i()
                }
            }), this
        }
    }), fabric.util.object.extend(fabric.StaticCanvas.prototype, {
        straightenObject: function(t) {
            return t.straighten(), this.requestRenderAll(), this
        },
        fxStraightenObject: function(t) {
            return t.fxStraighten({
                onChange: this.requestRenderAllBound
            }), this
        }
    }),
    function() {
        "use strict";

        function t(t) {
            t && t.tileSize && (this.tileSize = t.tileSize), this.setupGLContext(this.tileSize, this.tileSize), this.captureGPUInfo()
        }
        fabric.isWebglSupported = function(t) {
            if (fabric.isLikelyNode) return !1;
            t = t || fabric.WebglFilterBackend.prototype.tileSize;
            var e, i, r, n = document.createElement("canvas"),
                s = n.getContext("webgl") || n.getContext("experimental-webgl"),
                o = !1;
            if (s) {
                fabric.maxTextureSize = s.getParameter(s.MAX_TEXTURE_SIZE), o = fabric.maxTextureSize >= t;
                for (var a = ["highp", "mediump", "lowp"], h = 0; h < 3; h++)
                    if (void 0, i = "precision " + a[h] + " float;\nvoid main(){}", r = (e = s).createShader(e.FRAGMENT_SHADER), e.shaderSource(r, i), e.compileShader(r), e.getShaderParameter(r, e.COMPILE_STATUS)) {
                        fabric.webGlPrecision = a[h];
                        break
                    }
            }
            return this.isSupported = o
        }, (fabric.WebglFilterBackend = t).prototype = {
            tileSize: 2048,
            resources: {},
            setupGLContext: function(t, e) {
                this.dispose(), this.createWebGLCanvas(t, e), this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), this.chooseFastestCopyGLTo2DMethod(t, e)
            },
            chooseFastestCopyGLTo2DMethod: function(t, e) {
                var i, r = void 0 !== window.performance;
                try {
                    new ImageData(1, 1), i = !0
                } catch (t) {
                    i = !1
                }
                var n = "undefined" != typeof ArrayBuffer,
                    s = "undefined" != typeof Uint8ClampedArray;
                if (r && i && n && s) {
                    var o, a, h = fabric.util.createCanvasElement(),
                        c = new ArrayBuffer(t * e * 4),
                        l = {
                            imageBuffer: c,
                            destinationWidth: t,
                            destinationHeight: e,
                            targetCanvas: h
                        };
                    h.width = t, h.height = e, o = window.performance.now(), copyGLTo2DDrawImage.call(l, this.gl, l), a = window.performance.now() - o, o = window.performance.now(), copyGLTo2DPutImageData.call(l, this.gl, l), window.performance.now() - o < a ? (this.imageBuffer = c, this.copyGLTo2D = copyGLTo2DPutImageData) : this.copyGLTo2D = copyGLTo2DDrawImage
                }
            },
            createWebGLCanvas: function(t, e) {
                var i = fabric.util.createCanvasElement();
                i.width = t, i.height = e;
                var r = {
                        alpha: !0,
                        premultipliedAlpha: !1,
                        depth: !1,
                        stencil: !1,
                        antialias: !1
                    },
                    n = i.getContext("webgl", r);
                n || (n = i.getContext("experimental-webgl", r)), n && (n.clearColor(0, 0, 0, 0), this.canvas = i, this.gl = n)
            },
            applyFilters: function(t, e, i, r, n, s) {
                var o, a = this.gl;
                s && (o = this.getCachedTexture(s, e));
                var h = {
                        originalWidth: e.width || e.originalWidth,
                        originalHeight: e.height || e.originalHeight,
                        sourceWidth: i,
                        sourceHeight: r,
                        destinationWidth: i,
                        destinationHeight: r,
                        context: a,
                        sourceTexture: this.createTexture(a, i, r, !o && e),
                        targetTexture: this.createTexture(a, i, r),
                        originalTexture: o || this.createTexture(a, i, r, !o && e),
                        passes: t.length,
                        webgl: !0,
                        aPosition: this.aPosition,
                        programCache: this.programCache,
                        pass: 0,
                        filterBackend: this,
                        targetCanvas: n
                    },
                    c = a.createFramebuffer();
                return a.bindFramebuffer(a.FRAMEBUFFER, c), t.forEach(function(t) {
                    t && t.applyTo(h)
                }), resizeCanvasIfNeeded(h), this.copyGLTo2D(a, h), a.bindTexture(a.TEXTURE_2D, null), a.deleteTexture(h.sourceTexture), a.deleteTexture(h.targetTexture), a.deleteFramebuffer(c), n.getContext("2d").setTransform(1, 0, 0, 1, 0, 0), h
            },
            applyFiltersDebug: function(t, e, i, r, n, s) {
                var o = this.gl,
                    a = this.applyFilters(t, e, i, r, n, s),
                    h = o.getError();
                if (h !== o.NO_ERROR) {
                    var c = this.glErrorToString(o, h),
                        l = new Error("WebGL Error " + c);
                    throw l.glErrorCode = h, l
                }
                return a
            },
            glErrorToString: function(t, e) {
                if (!t) return "Context undefined for error code: " + e;
                if ("number" != typeof e) return "Error code is not a number";
                switch (e) {
                    case t.NO_ERROR:
                        return "NO_ERROR";
                    case t.INVALID_ENUM:
                        return "INVALID_ENUM";
                    case t.INVALID_VALUE:
                        return "INVALID_VALUE";
                    case t.INVALID_OPERATION:
                        return "INVALID_OPERATION";
                    case t.INVALID_FRAMEBUFFER_OPERATION:
                        return "INVALID_FRAMEBUFFER_OPERATION";
                    case t.OUT_OF_MEMORY:
                        return "OUT_OF_MEMORY";
                    case t.CONTEXT_LOST_WEBGL:
                        return "CONTEXT_LOST_WEBGL";
                    default:
                        return "UNKNOWN_ERROR"
                }
            },
            dispose: function() {
                this.canvas && (this.canvas = null, this.gl = null), this.clearWebGLCaches()
            },
            clearWebGLCaches: function() {
                this.programCache = {}, this.textureCache = {}
            },
            createTexture: function(t, e, i, r) {
                var n = t.createTexture();
                return t.bindTexture(t.TEXTURE_2D, n), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), r ? t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, r) : t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, e, i, 0, t.RGBA, t.UNSIGNED_BYTE, null), n
            },
            getCachedTexture: function(t, e) {
                if (this.textureCache[t]) return this.textureCache[t];
                var i = this.createTexture(this.gl, e.width, e.height, e);
                return this.textureCache[t] = i
            },
            evictCachesForKey: function(t) {
                this.textureCache[t] && (this.gl.deleteTexture(this.textureCache[t]), delete this.textureCache[t])
            },
            copyGLTo2D: copyGLTo2DDrawImage,
            captureGPUInfo: function() {
                if (this.gpuInfo) return this.gpuInfo;
                var t = this.gl,
                    e = t.getExtension("WEBGL_debug_renderer_info"),
                    i = {
                        renderer: "",
                        vendor: ""
                    };
                if (e) {
                    var r = t.getParameter(e.UNMASKED_RENDERER_WEBGL),
                        n = t.getParameter(e.UNMASKED_VENDOR_WEBGL);
                    r && (i.renderer = r.toLowerCase()), n && (i.vendor = n.toLowerCase())
                }
                return this.gpuInfo = i
            }
        }
    }(),
    function() {
        "use strict";
        var t = function() {};

        function e() {}(fabric.Canvas2dFilterBackend = e).prototype = {
            evictCachesForKey: t,
            dispose: t,
            clearWebGLCaches: t,
            resources: {},
            applyFilters: function(t, e, i, r, n) {
                var s = n.getContext("2d");
                s.drawImage(e, 0, 0, i, r);
                var o = {
                    sourceWidth: i,
                    sourceHeight: r,
                    imageData: s.getImageData(0, 0, i, r),
                    originalEl: e,
                    originalImageData: s.getImageData(0, 0, i, r),
                    canvasEl: n,
                    ctx: s,
                    filterBackend: this
                };
                return t.forEach(function(t) {
                    t.applyTo(o)
                }), o.imageData.width === i && o.imageData.height === r || (n.width = o.imageData.width, n.height = o.imageData.height), s.putImageData(o.imageData, 0, 0), o
            }
        }
    }(), fabric.Image.filters = fabric.Image.filters || {}, fabric.Image.filters.BaseFilter = fabric.util.createClass({
        type: "BaseFilter",
        vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
        fragmentSource: "precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",
        initialize: function(t) {
            t && this.setOptions(t)
        },
        setOptions: function(t) {
            for (var e in t) this[e] = t[e]
        },
        createProgram: function(t, e, i) {
            e = e || this.fragmentSource, i = i || this.vertexSource, "highp" !== fabric.webGlPrecision && (e = e.replace(/precision highp float/g, "precision " + fabric.webGlPrecision + " float"));
            var r = t.createShader(t.VERTEX_SHADER);
            if (t.shaderSource(r, i), t.compileShader(r), !t.getShaderParameter(r, t.COMPILE_STATUS)) throw new Error("Vertex shader compile error for " + this.type + ": " + t.getShaderInfoLog(r));
            var n = t.createShader(t.FRAGMENT_SHADER);
            if (t.shaderSource(n, e), t.compileShader(n), !t.getShaderParameter(n, t.COMPILE_STATUS)) throw new Error("Fragment shader compile error for " + this.type + ": " + t.getShaderInfoLog(n));
            var s = t.createProgram();
            if (t.attachShader(s, r), t.attachShader(s, n), t.linkProgram(s), !t.getProgramParameter(s, t.LINK_STATUS)) throw new Error('Shader link error for "${this.type}" ' + t.getProgramInfoLog(s));
            var o = this.getAttributeLocations(t, s),
                a = this.getUniformLocations(t, s) || {};
            return a.uStepW = t.getUniformLocation(s, "uStepW"), a.uStepH = t.getUniformLocation(s, "uStepH"), {
                program: s,
                attributeLocations: o,
                uniformLocations: a
            }
        },
        getAttributeLocations: function(t, e) {
            return {
                aPosition: t.getAttribLocation(e, "aPosition")
            }
        },
        getUniformLocations: function() {
            return {}
        },
        sendAttributeData: function(t, e, i) {
            var r = e.aPosition,
                n = t.createBuffer();
            t.bindBuffer(t.ARRAY_BUFFER, n), t.enableVertexAttribArray(r), t.vertexAttribPointer(r, 2, t.FLOAT, !1, 0, 0), t.bufferData(t.ARRAY_BUFFER, i, t.STATIC_DRAW)
        },
        _setupFrameBuffer: function(t) {
            var e, i, r = t.context;
            1 < t.passes ? (e = t.destinationWidth, i = t.destinationHeight, t.sourceWidth === e && t.sourceHeight === i || (r.deleteTexture(t.targetTexture), t.targetTexture = t.filterBackend.createTexture(r, e, i)), r.framebufferTexture2D(r.FRAMEBUFFER, r.COLOR_ATTACHMENT0, r.TEXTURE_2D, t.targetTexture, 0)) : (r.bindFramebuffer(r.FRAMEBUFFER, null), r.finish())
        },
        _swapTextures: function(t) {
            t.passes--, t.pass++;
            var e = t.targetTexture;
            t.targetTexture = t.sourceTexture, t.sourceTexture = e
        },
        isNeutralState: function() {
            return !1
        },
        applyTo: function(t) {
            if (t.webgl) {
                if (1 < t.passes && this.isNeutralState(t)) return;
                this._setupFrameBuffer(t), this.applyToWebGL(t), this._swapTextures(t)
            } else this.isNeutralState() || this.applyTo2d(t)
        },
        retrieveShader: function(t) {
            return t.programCache.hasOwnProperty(this.type) || (t.programCache[this.type] = this.createProgram(t.context)), t.programCache[this.type]
        },
        applyToWebGL: function(t) {
            var e = t.context,
                i = this.retrieveShader(t);
            0 === t.pass && t.originalTexture ? e.bindTexture(e.TEXTURE_2D, t.originalTexture) : e.bindTexture(e.TEXTURE_2D, t.sourceTexture), e.useProgram(i.program), this.sendAttributeData(e, i.attributeLocations, t.aPosition), e.uniform1f(i.uniformLocations.uStepW, 1 / t.sourceWidth), e.uniform1f(i.uniformLocations.uStepH, 1 / t.sourceHeight), this.sendUniformData(e, i.uniformLocations), e.viewport(0, 0, t.destinationWidth, t.destinationHeight), e.drawArrays(e.TRIANGLE_STRIP, 0, 4)
        },
        bindAdditionalTexture: function(t, e, i) {
            t.activeTexture(i), t.bindTexture(t.TEXTURE_2D, e), t.activeTexture(t.TEXTURE0)
        },
        unbindAdditionalTexture: function(t, e) {
            t.activeTexture(e), t.bindTexture(t.TEXTURE_2D, null), t.activeTexture(t.TEXTURE0)
        },
        getMainParameter: function() {
            return this[this.mainParameter]
        },
        setMainParameter: function(t) {
            this[this.mainParameter] = t
        },
        sendUniformData: function() {},
        createHelpLayer: function(t) {
            if (!t.helpLayer) {
                var e = document.createElement("canvas");
                e.width = t.sourceWidth, e.height = t.sourceHeight, t.helpLayer = e
            }
        },
        toObject: function() {
            var t = {
                    type: this.type
                },
                e = this.mainParameter;
            return e && (t[e] = this[e]), t
        },
        toJSON: function() {
            return this.toObject()
        }
    }), fabric.Image.filters.BaseFilter.fromObject = function(t, e) {
        var i = new fabric.Image.filters[t.type](t);
        return e && e(i), i
    },
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.Image.filters,
            r = e.util.createClass;
        i.ColorMatrix = r(i.BaseFilter, {
            type: "ColorMatrix",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",
            matrix: [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
            mainParameter: "matrix",
            colorsOnly: !0,
            initialize: function(t) {
                this.callSuper("initialize", t), this.matrix = this.matrix.slice(0)
            },
            isNeutralState: function() {
                for (var t = i.ColorMatrix, e = 20; e--;)
                    if (this.matrix[e] !== t.prototype.matrix[e]) return !1;
                return !0
            },
            applyTo2d: function(t) {
                var e, i, r, n, s, o = t.imageData.data,
                    a = o.length,
                    h = this.matrix,
                    c = this.colorsOnly;
                for (s = 0; s < a; s += 4) e = o[s], i = o[s + 1], r = o[s + 2], c ? (o[s] = e * h[0] + i * h[1] + r * h[2] + 255 * h[4], o[s + 1] = e * h[5] + i * h[6] + r * h[7] + 255 * h[9], o[s + 2] = e * h[10] + i * h[11] + r * h[12] + 255 * h[14]) : (n = o[s + 3], o[s] = e * h[0] + i * h[1] + r * h[2] + n * h[3] + 255 * h[4], o[s + 1] = e * h[5] + i * h[6] + r * h[7] + n * h[8] + 255 * h[9], o[s + 2] = e * h[10] + i * h[11] + r * h[12] + n * h[13] + 255 * h[14], o[s + 3] = e * h[15] + i * h[16] + r * h[17] + n * h[18] + 255 * h[19])
            },
            getUniformLocations: function(t, e) {
                return {
                    uColorMatrix: t.getUniformLocation(e, "uColorMatrix"),
                    uConstants: t.getUniformLocation(e, "uConstants")
                }
            },
            sendUniformData: function(t, e) {
                var i = this.matrix,
                    r = [i[0], i[1], i[2], i[3], i[5], i[6], i[7], i[8], i[10], i[11], i[12], i[13], i[15], i[16], i[17], i[18]],
                    n = [i[4], i[9], i[14], i[19]];
                t.uniformMatrix4fv(e.uColorMatrix, !1, r), t.uniform4fv(e.uConstants, n)
            }
        }), e.Image.filters.ColorMatrix.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.Image.filters,
            r = e.util.createClass;
        i.Brightness = r(i.BaseFilter, {
            type: "Brightness",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",
            brightness: 0,
            mainParameter: "brightness",
            applyTo2d: function(t) {
                if (0 !== this.brightness) {
                    var e, i = t.imageData.data,
                        r = i.length,
                        n = Math.round(255 * this.brightness);
                    for (e = 0; e < r; e += 4) i[e] = i[e] + n, i[e + 1] = i[e + 1] + n, i[e + 2] = i[e + 2] + n
                }
            },
            getUniformLocations: function(t, e) {
                return {
                    uBrightness: t.getUniformLocation(e, "uBrightness")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform1f(e.uBrightness, this.brightness)
            }
        }), e.Image.filters.Brightness.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.util.object.extend,
            r = e.Image.filters,
            n = e.util.createClass;
        r.Convolute = n(r.BaseFilter, {
            type: "Convolute",
            opaque: !1,
            matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0],
            fragmentSource: {
                Convolute_3_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                Convolute_3_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                Convolute_5_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                Convolute_5_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                Convolute_7_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                Convolute_7_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                Convolute_9_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                Convolute_9_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"
            },
            retrieveShader: function(t) {
                var e = Math.sqrt(this.matrix.length),
                    i = this.type + "_" + e + "_" + (this.opaque ? 1 : 0),
                    r = this.fragmentSource[i];
                return t.programCache.hasOwnProperty(i) || (t.programCache[i] = this.createProgram(t.context, r)), t.programCache[i]
            },
            applyTo2d: function(t) {
                var e, i, r, n, s, o, a, h, c, l, u, f, d, g = t.imageData,
                    p = g.data,
                    v = this.matrix,
                    m = Math.round(Math.sqrt(v.length)),
                    b = Math.floor(m / 2),
                    _ = g.width,
                    y = g.height,
                    x = t.ctx.createImageData(_, y),
                    C = x.data,
                    S = this.opaque ? 1 : 0;
                for (u = 0; u < y; u++)
                    for (l = 0; l < _; l++) {
                        for (s = 4 * (u * _ + l), d = n = r = i = e = 0; d < m; d++)
                            for (f = 0; f < m; f++) o = l + f - b, (a = u + d - b) < 0 || y < a || o < 0 || _ < o || (h = 4 * (a * _ + o), c = v[d * m + f], e += p[h] * c, i += p[h + 1] * c, r += p[h + 2] * c, S || (n += p[h + 3] * c));
                        C[s] = e, C[s + 1] = i, C[s + 2] = r, C[s + 3] = S ? p[s + 3] : n
                    }
                t.imageData = x
            },
            getUniformLocations: function(t, e) {
                return {
                    uMatrix: t.getUniformLocation(e, "uMatrix"),
                    uOpaque: t.getUniformLocation(e, "uOpaque"),
                    uHalfSize: t.getUniformLocation(e, "uHalfSize"),
                    uSize: t.getUniformLocation(e, "uSize")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform1fv(e.uMatrix, this.matrix)
            },
            toObject: function() {
                return i(this.callSuper("toObject"), {
                    opaque: this.opaque,
                    matrix: this.matrix
                })
            }
        }), e.Image.filters.Convolute.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.Image.filters,
            r = e.util.createClass;
        i.Grayscale = r(i.BaseFilter, {
            type: "Grayscale",
            fragmentSource: {
                average: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",
                lightness: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",
                luminosity: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"
            },
            mode: "average",
            mainParameter: "mode",
            applyTo2d: function(t) {
                var e, i, r = t.imageData.data,
                    n = r.length,
                    s = this.mode;
                for (e = 0; e < n; e += 4) "average" === s ? i = (r[e] + r[e + 1] + r[e + 2]) / 3 : "lightness" === s ? i = (Math.min(r[e], r[e + 1], r[e + 2]) + Math.max(r[e], r[e + 1], r[e + 2])) / 2 : "luminosity" === s && (i = .21 * r[e] + .72 * r[e + 1] + .07 * r[e + 2]), r[e] = i, r[e + 1] = i, r[e + 2] = i
            },
            retrieveShader: function(t) {
                var e = this.type + "_" + this.mode;
                if (!t.programCache.hasOwnProperty(e)) {
                    var i = this.fragmentSource[this.mode];
                    t.programCache[e] = this.createProgram(t.context, i)
                }
                return t.programCache[e]
            },
            getUniformLocations: function(t, e) {
                return {
                    uMode: t.getUniformLocation(e, "uMode")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform1i(e.uMode, 1)
            }
        }), e.Image.filters.Grayscale.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.Image.filters,
            r = e.util.createClass;
        i.Invert = r(i.BaseFilter, {
            type: "Invert",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",
            invert: !0,
            mainParameter: "invert",
            applyTo2d: function(t) {
                if (this.invert) {
                    var e, i = t.imageData.data,
                        r = i.length;
                    for (e = 0; e < r; e += 4) i[e] = 255 - i[e], i[e + 1] = 255 - i[e + 1], i[e + 2] = 255 - i[e + 2]
                }
            },
            getUniformLocations: function(t, e) {
                return {
                    uInvert: t.getUniformLocation(e, "uInvert")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform1i(e.uInvert, this.invert)
            }
        }), e.Image.filters.Invert.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.util.object.extend,
            r = e.Image.filters,
            n = e.util.createClass;
        r.Noise = n(r.BaseFilter, {
            type: "Noise",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",
            mainParameter: "noise",
            noise: 0,
            applyTo2d: function(t) {
                if (0 !== this.noise) {
                    var e, i, r = t.imageData.data,
                        n = r.length,
                        s = this.noise;
                    for (e = 0, n = r.length; e < n; e += 4) i = (.5 - Math.random()) * s, r[e] += i, r[e + 1] += i, r[e + 2] += i
                }
            },
            getUniformLocations: function(t, e) {
                return {
                    uNoise: t.getUniformLocation(e, "uNoise"),
                    uSeed: t.getUniformLocation(e, "uSeed")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform1f(e.uNoise, this.noise / 255), t.uniform1f(e.uSeed, Math.random())
            },
            toObject: function() {
                return i(this.callSuper("toObject"), {
                    noise: this.noise
                })
            }
        }), e.Image.filters.Noise.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.Image.filters,
            r = e.util.createClass;
        i.Pixelate = r(i.BaseFilter, {
            type: "Pixelate",
            blocksize: 4,
            mainParameter: "blocksize",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",
            applyTo2d: function(t) {
                if (1 !== this.blocksize) {
                    var e, i, r, n, s, o, a, h, c, l, u, f = t.imageData,
                        d = f.data,
                        g = f.height,
                        p = f.width;
                    for (i = 0; i < g; i += this.blocksize)
                        for (r = 0; r < p; r += this.blocksize)
                            for (n = d[e = 4 * i * p + 4 * r], s = d[e + 1], o = d[e + 2], a = d[e + 3], l = Math.min(i + this.blocksize, g), u = Math.min(r + this.blocksize, p), h = i; h < l; h++)
                                for (c = r; c < u; c++) d[e = 4 * h * p + 4 * c] = n, d[e + 1] = s, d[e + 2] = o, d[e + 3] = a
                }
            },
            isNeutralState: function() {
                return 1 === this.blocksize
            },
            getUniformLocations: function(t, e) {
                return {
                    uBlocksize: t.getUniformLocation(e, "uBlocksize"),
                    uStepW: t.getUniformLocation(e, "uStepW"),
                    uStepH: t.getUniformLocation(e, "uStepH")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform1f(e.uBlocksize, this.blocksize)
            }
        }), e.Image.filters.Pixelate.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var l = t.fabric || (t.fabric = {}),
            e = l.util.object.extend,
            i = l.Image.filters,
            r = l.util.createClass;
        i.RemoveColor = r(i.BaseFilter, {
            type: "RemoveColor",
            color: "#FFFFFF",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",
            distance: .02,
            useAlpha: !1,
            applyTo2d: function(t) {
                var e, i, r, n, s = t.imageData.data,
                    o = 255 * this.distance,
                    a = new l.Color(this.color).getSource(),
                    h = [a[0] - o, a[1] - o, a[2] - o],
                    c = [a[0] + o, a[1] + o, a[2] + o];
                for (e = 0; e < s.length; e += 4) i = s[e], r = s[e + 1], n = s[e + 2], h[0] < i && h[1] < r && h[2] < n && i < c[0] && r < c[1] && n < c[2] && (s[e + 3] = 0)
            },
            getUniformLocations: function(t, e) {
                return {
                    uLow: t.getUniformLocation(e, "uLow"),
                    uHigh: t.getUniformLocation(e, "uHigh")
                }
            },
            sendUniformData: function(t, e) {
                var i = new l.Color(this.color).getSource(),
                    r = parseFloat(this.distance),
                    n = [0 + i[0] / 255 - r, 0 + i[1] / 255 - r, 0 + i[2] / 255 - r, 1],
                    s = [i[0] / 255 + r, i[1] / 255 + r, i[2] / 255 + r, 1];
                t.uniform4fv(e.uLow, n), t.uniform4fv(e.uHigh, s)
            },
            toObject: function() {
                return e(this.callSuper("toObject"), {
                    color: this.color,
                    distance: this.distance
                })
            }
        }), l.Image.filters.RemoveColor.fromObject = l.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.Image.filters,
            r = e.util.createClass,
            n = {
                Brownie: [.5997, .34553, -.27082, 0, .186, -.0377, .86095, .15059, 0, -.1449, .24113, -.07441, .44972, 0, -.02965, 0, 0, 0, 1, 0],
                Vintage: [.62793, .32021, -.03965, 0, .03784, .02578, .64411, .03259, 0, .02926, .0466, -.08512, .52416, 0, .02023, 0, 0, 0, 1, 0],
                Kodachrome: [1.12855, -.39673, -.03992, 0, .24991, -.16404, 1.08352, -.05498, 0, .09698, -.16786, -.56034, 1.60148, 0, .13972, 0, 0, 0, 1, 0],
                Technicolor: [1.91252, -.85453, -.09155, 0, .04624, -.30878, 1.76589, -.10601, 0, -.27589, -.2311, -.75018, 1.84759, 0, .12137, 0, 0, 0, 1, 0],
                Polaroid: [1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0],
                Sepia: [.393, .769, .189, 0, 0, .349, .686, .168, 0, 0, .272, .534, .131, 0, 0, 0, 0, 0, 1, 0],
                BlackWhite: [1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 0, 0, 0, 1, 0]
            };
        for (var s in n) i[s] = r(i.ColorMatrix, {
            type: s,
            matrix: n[s],
            mainParameter: !1,
            colorsOnly: !0
        }), e.Image.filters[s].fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var f = t.fabric,
            e = f.Image.filters,
            i = f.util.createClass;
        e.BlendColor = i(e.BaseFilter, {
            type: "BlendColor",
            color: "#F95C63",
            mode: "multiply",
            alpha: 1,
            fragmentSource: {
                multiply: "gl_FragColor.rgb *= uColor.rgb;\n",
                screen: "gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",
                add: "gl_FragColor.rgb += uColor.rgb;\n",
                diff: "gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",
                subtract: "gl_FragColor.rgb -= uColor.rgb;\n",
                lighten: "gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",
                darken: "gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",
                exclusion: "gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",
                overlay: "if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",
                tint: "gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"
            },
            buildSource: function(t) {
                return "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n" + this.fragmentSource[t] + "}\n}"
            },
            retrieveShader: function(t) {
                var e, i = this.type + "_" + this.mode;
                return t.programCache.hasOwnProperty(i) || (e = this.buildSource(this.mode), t.programCache[i] = this.createProgram(t.context, e)), t.programCache[i]
            },
            applyTo2d: function(t) {
                var e, i, r, n, s, o, a, h = t.imageData.data,
                    c = h.length,
                    l = 1 - this.alpha;
                e = (a = new f.Color(this.color).getSource())[0] * this.alpha, i = a[1] * this.alpha, r = a[2] * this.alpha;
                for (var u = 0; u < c; u += 4) switch (n = h[u], s = h[u + 1], o = h[u + 2], this.mode) {
                    case "multiply":
                        h[u] = n * e / 255, h[u + 1] = s * i / 255, h[u + 2] = o * r / 255;
                        break;
                    case "screen":
                        h[u] = 255 - (255 - n) * (255 - e) / 255, h[u + 1] = 255 - (255 - s) * (255 - i) / 255, h[u + 2] = 255 - (255 - o) * (255 - r) / 255;
                        break;
                    case "add":
                        h[u] = n + e, h[u + 1] = s + i, h[u + 2] = o + r;
                        break;
                    case "diff":
                    case "difference":
                        h[u] = Math.abs(n - e), h[u + 1] = Math.abs(s - i), h[u + 2] = Math.abs(o - r);
                        break;
                    case "subtract":
                        h[u] = n - e, h[u + 1] = s - i, h[u + 2] = o - r;
                        break;
                    case "darken":
                        h[u] = Math.min(n, e), h[u + 1] = Math.min(s, i), h[u + 2] = Math.min(o, r);
                        break;
                    case "lighten":
                        h[u] = Math.max(n, e), h[u + 1] = Math.max(s, i), h[u + 2] = Math.max(o, r);
                        break;
                    case "overlay":
                        h[u] = e < 128 ? 2 * n * e / 255 : 255 - 2 * (255 - n) * (255 - e) / 255, h[u + 1] = i < 128 ? 2 * s * i / 255 : 255 - 2 * (255 - s) * (255 - i) / 255, h[u + 2] = r < 128 ? 2 * o * r / 255 : 255 - 2 * (255 - o) * (255 - r) / 255;
                        break;
                    case "exclusion":
                        h[u] = e + n - 2 * e * n / 255, h[u + 1] = i + s - 2 * i * s / 255, h[u + 2] = r + o - 2 * r * o / 255;
                        break;
                    case "tint":
                        h[u] = e + n * l, h[u + 1] = i + s * l, h[u + 2] = r + o * l
                }
            },
            getUniformLocations: function(t, e) {
                return {
                    uColor: t.getUniformLocation(e, "uColor")
                }
            },
            sendUniformData: function(t, e) {
                var i = new f.Color(this.color).getSource();
                i[0] = this.alpha * i[0] / 255, i[1] = this.alpha * i[1] / 255, i[2] = this.alpha * i[2] / 255, i[3] = this.alpha, t.uniform4fv(e.uColor, i)
            },
            toObject: function() {
                return {
                    type: this.type,
                    color: this.color,
                    mode: this.mode,
                    alpha: this.alpha
                }
            }
        }), f.Image.filters.BlendColor.fromObject = f.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var n = t.fabric,
            e = n.Image.filters,
            i = n.util.createClass;
        e.BlendImage = i(e.BaseFilter, {
            type: "BlendImage",
            image: null,
            mode: "multiply",
            alpha: 1,
            vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
            fragmentSource: {
                multiply: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",
                mask: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"
            },
            retrieveShader: function(t) {
                var e = this.type + "_" + this.mode,
                    i = this.fragmentSource[this.mode];
                return t.programCache.hasOwnProperty(e) || (t.programCache[e] = this.createProgram(t.context, i)), t.programCache[e]
            },
            applyToWebGL: function(t) {
                var e = t.context,
                    i = this.createTexture(t.filterBackend, this.image);
                this.bindAdditionalTexture(e, i, e.TEXTURE1), this.callSuper("applyToWebGL", t), this.unbindAdditionalTexture(e, e.TEXTURE1)
            },
            createTexture: function(t, e) {
                return t.getCachedTexture(e.cacheKey, e._element)
            },
            calculateMatrix: function() {
                var t = this.image,
                    e = t._element.width,
                    i = t._element.height;
                return [1 / t.scaleX, 0, 0, 0, 1 / t.scaleY, 0, -t.left / e, -t.top / i, 1]
            },
            applyTo2d: function(t) {
                var e, i, r, n, s, o, a, h, c, l, u, f = t.imageData,
                    d = t.filterBackend.resources,
                    g = f.data,
                    p = g.length,
                    v = t.imageData.width,
                    m = t.imageData.height,
                    b = this.image;
                d.blendImage || (d.blendImage = document.createElement("canvas")), (c = d.blendImage).width === v && c.height === m || (c.width = v, c.height = m), (l = c.getContext("2d")).setTransform(b.scaleX, 0, 0, b.scaleY, b.left, b.top), l.drawImage(b._element, 0, 0, v, m), u = l.getImageData(0, 0, v, m).data;
                for (var _ = 0; _ < p; _ += 4) switch (s = g[_], o = g[_ + 1], a = g[_ + 2], h = g[_ + 3], e = u[_], i = u[_ + 1], r = u[_ + 2], n = u[_ + 3], this.mode) {
                    case "multiply":
                        g[_] = s * e / 255, g[_ + 1] = o * i / 255, g[_ + 2] = a * r / 255, g[_ + 3] = h * n / 255;
                        break;
                    case "mask":
                        g[_ + 3] = n
                }
            },
            getUniformLocations: function(t, e) {
                return {
                    uTransformMatrix: t.getUniformLocation(e, "uTransformMatrix"),
                    uImage: t.getUniformLocation(e, "uImage")
                }
            },
            sendUniformData: function(t, e) {
                var i = this.calculateMatrix();
                t.uniform1i(e.uImage, 1), t.uniformMatrix3fv(e.uTransformMatrix, !1, i)
            },
            toObject: function() {
                return {
                    type: this.type,
                    image: this.image && this.image.toObject(),
                    mode: this.mode,
                    alpha: this.alpha
                }
            }
        }), n.Image.filters.BlendImage.fromObject = function(i, r) {
            n.Image.fromObject(i.image, function(t) {
                var e = n.util.object.clone(i);
                e.image = t, r(new n.Image.filters.BlendImage(e))
            })
        }
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var m = t.fabric || (t.fabric = {}),
            A = Math.pow,
            P = Math.floor,
            F = Math.sqrt,
            M = Math.abs,
            c = Math.round,
            r = Math.sin,
            I = Math.ceil,
            e = m.Image.filters,
            i = m.util.createClass;
        e.Resize = i(e.BaseFilter, {
            type: "Resize",
            resizeType: "hermite",
            scaleX: 0,
            scaleY: 0,
            lanczosLobes: 3,
            getUniformLocations: function(t, e) {
                return {
                    uDelta: t.getUniformLocation(e, "uDelta"),
                    uTaps: t.getUniformLocation(e, "uTaps")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform2fv(e.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]), t.uniform1fv(e.uTaps, this.taps)
            },
            retrieveShader: function(t) {
                var e = this.getFilterWindow(),
                    i = this.type + "_" + e;
                if (!t.programCache.hasOwnProperty(i)) {
                    var r = this.generateShader(e);
                    t.programCache[i] = this.createProgram(t.context, r)
                }
                return t.programCache[i]
            },
            getFilterWindow: function() {
                var t = this.tempScale;
                return Math.ceil(this.lanczosLobes / t)
            },
            getTaps: function() {
                for (var t = this.lanczosCreate(this.lanczosLobes), e = this.tempScale, i = this.getFilterWindow(), r = new Array(i), n = 1; n <= i; n++) r[n - 1] = t(n * e);
                return r
            },
            generateShader: function(t) {
                for (var e = new Array(t), i = this.fragmentSourceTOP, r = 1; r <= t; r++) e[r - 1] = r + ".0 * uDelta";
                return i += "uniform float uTaps[" + t + "];\n", i += "void main() {\n", i += "  vec4 color = texture2D(uTexture, vTexCoord);\n", i += "  float sum = 1.0;\n", e.forEach(function(t, e) {
                    i += "  color += texture2D(uTexture, vTexCoord + " + t + ") * uTaps[" + e + "];\n", i += "  color += texture2D(uTexture, vTexCoord - " + t + ") * uTaps[" + e + "];\n", i += "  sum += 2.0 * uTaps[" + e + "];\n"
                }), i += "  gl_FragColor = color / sum;\n", i += "}"
            },
            fragmentSourceTOP: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",
            applyTo: function(t) {
                if (t.webgl) {
                    if (1 < t.passes && this.isNeutralState(t)) return;
                    t.passes++, this.width = t.sourceWidth, this.horizontal = !0, this.dW = Math.round(this.width * this.scaleX), this.dH = t.sourceHeight, this.tempScale = this.dW / this.width, this.taps = this.getTaps(), t.destinationWidth = this.dW, this._setupFrameBuffer(t), this.applyToWebGL(t), this._swapTextures(t), t.sourceWidth = t.destinationWidth, this.height = t.sourceHeight, this.horizontal = !1, this.dH = Math.round(this.height * this.scaleY), this.tempScale = this.dH / this.height, this.taps = this.getTaps(), t.destinationHeight = this.dH, this._setupFrameBuffer(t), this.applyToWebGL(t), this._swapTextures(t), t.sourceHeight = t.destinationHeight
                } else this.isNeutralState(t) || this.applyTo2d(t)
            },
            isNeutralState: function(t) {
                var e = t.scaleX || this.scaleX,
                    i = t.scaleY || this.scaleY;
                return 1 === e && 1 === i
            },
            lanczosCreate: function(i) {
                return function(t) {
                    if (i <= t || t <= -i) return 0;
                    if (t < 1.1920929e-7 && -1.1920929e-7 < t) return 1;
                    var e = (t *= Math.PI) / i;
                    return r(t) / t * r(e) / e
                }
            },
            applyTo2d: function(t) {
                var e = t.imageData,
                    i = this.scaleX,
                    r = this.scaleY;
                this.rcpScaleX = 1 / i, this.rcpScaleY = 1 / r;
                var n, s = e.width,
                    o = e.height,
                    a = c(s * i),
                    h = c(o * r);
                "sliceHack" === this.resizeType ? n = this.sliceByTwo(t, s, o, a, h) : "hermite" === this.resizeType ? n = this.hermiteFastResize(t, s, o, a, h) : "bilinear" === this.resizeType ? n = this.bilinearFiltering(t, s, o, a, h) : "lanczos" === this.resizeType && (n = this.lanczosResize(t, s, o, a, h)), t.imageData = n
            },
            sliceByTwo: function(t, e, i, r, n) {
                var s, o, a = t.imageData,
                    h = !1,
                    c = !1,
                    l = .5 * e,
                    u = .5 * i,
                    f = m.filterBackend.resources,
                    d = 0,
                    g = 0,
                    p = e,
                    v = 0;
                for (f.sliceByTwo || (f.sliceByTwo = document.createElement("canvas")), ((s = f.sliceByTwo).width < 1.5 * e || s.height < i) && (s.width = 1.5 * e, s.height = i), (o = s.getContext("2d")).clearRect(0, 0, 1.5 * e, i), o.putImageData(a, 0, 0), r = P(r), n = P(n); !h || !c;) i = u, r < P(.5 * (e = l)) ? l = P(.5 * l) : (l = r, h = !0), n < P(.5 * u) ? u = P(.5 * u) : (u = n, c = !0), o.drawImage(s, d, g, e, i, p, v, l, u), d = p, g = v, v += u;
                return o.getImageData(d, g, r, n)
            },
            lanczosResize: function(t, g, p, v, m) {
                var b = t.imageData.data,
                    _ = t.ctx.createImageData(v, m),
                    y = _.data,
                    x = this.lanczosCreate(this.lanczosLobes),
                    C = this.rcpScaleX,
                    S = this.rcpScaleY,
                    w = 2 / this.rcpScaleX,
                    T = 2 / this.rcpScaleY,
                    O = I(C * this.lanczosLobes / 2),
                    k = I(S * this.lanczosLobes / 2),
                    E = {},
                    D = {},
                    j = {};
                return function t(e) {
                    var i, r, n, s, o, a, h, c, l, u, f;
                    for (D.x = (e + .5) * C, j.x = P(D.x), i = 0; i < m; i++) {
                        for (D.y = (i + .5) * S, j.y = P(D.y), l = c = h = a = o = 0, r = j.x - O; r <= j.x + O; r++)
                            if (!(r < 0 || g <= r)) {
                                u = P(1e3 * M(r - D.x)), E[u] || (E[u] = {});
                                for (var d = j.y - k; d <= j.y + k; d++) d < 0 || p <= d || (f = P(1e3 * M(d - D.y)), E[u][f] || (E[u][f] = x(F(A(u * w, 2) + A(f * T, 2)) / 1e3)), 0 < (n = E[u][f]) && (o += n, a += n * b[s = 4 * (d * g + r)], h += n * b[s + 1], c += n * b[s + 2], l += n * b[s + 3]))
                            } y[s = 4 * (i * v + e)] = a / o, y[s + 1] = h / o, y[s + 2] = c / o, y[s + 3] = l / o
                    }
                    return ++e < v ? t(e) : _
                }(0)
            },
            bilinearFiltering: function(t, e, i, r, n) {
                var s, o, a, h, c, l, u, f, d, g = 0,
                    p = this.rcpScaleX,
                    v = this.rcpScaleY,
                    m = 4 * (e - 1),
                    b = t.imageData.data,
                    _ = t.ctx.createImageData(r, n),
                    y = _.data;
                for (a = 0; a < n; a++)
                    for (h = 0; h < r; h++)
                        for (c = p * h - (s = P(p * h)), l = v * a - (o = P(v * a)), d = 4 * (o * e + s), u = 0; u < 4; u++) f = b[d + u] * (1 - c) * (1 - l) + b[d + 4 + u] * c * (1 - l) + b[d + m + u] * l * (1 - c) + b[d + m + 4 + u] * c * l, y[g++] = f;
                return _
            },
            hermiteFastResize: function(t, e, i, r, n) {
                for (var s = this.rcpScaleX, o = this.rcpScaleY, a = I(s / 2), h = I(o / 2), c = t.imageData.data, l = t.ctx.createImageData(r, n), u = l.data, f = 0; f < n; f++)
                    for (var d = 0; d < r; d++) {
                        for (var g = 4 * (d + f * r), p = 0, v = 0, m = 0, b = 0, _ = 0, y = 0, x = 0, C = (f + .5) * o, S = P(f * o); S < (f + 1) * o; S++)
                            for (var w = M(C - (S + .5)) / h, T = (d + .5) * s, O = w * w, k = P(d * s); k < (d + 1) * s; k++) {
                                var E = M(T - (k + .5)) / a,
                                    D = F(O + E * E);
                                1 < D && D < -1 || 0 < (p = 2 * D * D * D - 3 * D * D + 1) && (x += p * c[(E = 4 * (k + S * e)) + 3], m += p, c[E + 3] < 255 && (p = p * c[E + 3] / 250), b += p * c[E], _ += p * c[E + 1], y += p * c[E + 2], v += p)
                            }
                        u[g] = b / v, u[g + 1] = _ / v, u[g + 2] = y / v, u[g + 3] = x / m
                    }
                return l
            },
            toObject: function() {
                return {
                    type: this.type,
                    scaleX: this.scaleX,
                    scaleY: this.scaleY,
                    resizeType: this.resizeType,
                    lanczosLobes: this.lanczosLobes
                }
            }
        }), m.Image.filters.Resize.fromObject = m.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.Image.filters,
            r = e.util.createClass;
        i.Contrast = r(i.BaseFilter, {
            type: "Contrast",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",
            contrast: 0,
            mainParameter: "contrast",
            applyTo2d: function(t) {
                if (0 !== this.contrast) {
                    var e, i = t.imageData.data,
                        r = i.length,
                        n = Math.floor(255 * this.contrast),
                        s = 259 * (n + 255) / (255 * (259 - n));
                    for (e = 0; e < r; e += 4) i[e] = s * (i[e] - 128) + 128, i[e + 1] = s * (i[e + 1] - 128) + 128, i[e + 2] = s * (i[e + 2] - 128) + 128
                }
            },
            getUniformLocations: function(t, e) {
                return {
                    uContrast: t.getUniformLocation(e, "uContrast")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform1f(e.uContrast, this.contrast)
            }
        }), e.Image.filters.Contrast.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.Image.filters,
            r = e.util.createClass;
        i.Saturation = r(i.BaseFilter, {
            type: "Saturation",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",
            saturation: 0,
            mainParameter: "saturation",
            applyTo2d: function(t) {
                if (0 !== this.saturation) {
                    var e, i, r = t.imageData.data,
                        n = r.length,
                        s = -this.saturation;
                    for (e = 0; e < n; e += 4) i = Math.max(r[e], r[e + 1], r[e + 2]), r[e] += i !== r[e] ? (i - r[e]) * s : 0, r[e + 1] += i !== r[e + 1] ? (i - r[e + 1]) * s : 0, r[e + 2] += i !== r[e + 2] ? (i - r[e + 2]) * s : 0
                }
            },
            getUniformLocations: function(t, e) {
                return {
                    uSaturation: t.getUniformLocation(e, "uSaturation")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform1f(e.uSaturation, -this.saturation)
            }
        }), e.Image.filters.Saturation.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var g = t.fabric || (t.fabric = {}),
            e = g.Image.filters,
            i = g.util.createClass;
        e.Blur = i(e.BaseFilter, {
            type: "Blur",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",
            blur: 0,
            mainParameter: "blur",
            applyTo: function(t) {
                t.webgl ? (this.aspectRatio = t.sourceWidth / t.sourceHeight, t.passes++, this._setupFrameBuffer(t), this.horizontal = !0, this.applyToWebGL(t), this._swapTextures(t), this._setupFrameBuffer(t), this.horizontal = !1, this.applyToWebGL(t), this._swapTextures(t)) : this.applyTo2d(t)
            },
            applyTo2d: function(t) {
                t.imageData = this.simpleBlur(t)
            },
            simpleBlur: function(t) {
                var e, i, r = t.filterBackend.resources,
                    n = t.imageData.width,
                    s = t.imageData.height;
                r.blurLayer1 || (r.blurLayer1 = g.util.createCanvasElement(), r.blurLayer2 = g.util.createCanvasElement()), e = r.blurLayer1, i = r.blurLayer2, e.width === n && e.height === s || (i.width = e.width = n, i.height = e.height = s);
                var o, a, h, c, l = e.getContext("2d"),
                    u = i.getContext("2d"),
                    f = .06 * this.blur * .5;
                for (l.putImageData(t.imageData, 0, 0), u.clearRect(0, 0, n, s), c = -15; c <= 15; c++) h = f * (a = c / 15) * n + (o = (Math.random() - .5) / 4), u.globalAlpha = 1 - Math.abs(a), u.drawImage(e, h, o), l.drawImage(i, 0, 0), u.globalAlpha = 1, u.clearRect(0, 0, i.width, i.height);
                for (c = -15; c <= 15; c++) h = f * (a = c / 15) * s + (o = (Math.random() - .5) / 4), u.globalAlpha = 1 - Math.abs(a), u.drawImage(e, o, h), l.drawImage(i, 0, 0), u.globalAlpha = 1, u.clearRect(0, 0, i.width, i.height);
                t.ctx.drawImage(e, 0, 0);
                var d = t.ctx.getImageData(0, 0, e.width, e.height);
                return l.globalAlpha = 1, l.clearRect(0, 0, e.width, e.height), d
            },
            getUniformLocations: function(t, e) {
                return {
                    delta: t.getUniformLocation(e, "uDelta")
                }
            },
            sendUniformData: function(t, e) {
                var i = this.chooseRightDelta();
                t.uniform2fv(e.delta, i)
            },
            chooseRightDelta: function() {
                var t, e = 1,
                    i = [0, 0];
                return this.horizontal ? 1 < this.aspectRatio && (e = 1 / this.aspectRatio) : this.aspectRatio < 1 && (e = this.aspectRatio), t = e * this.blur * .12, this.horizontal ? i[0] = t : i[1] = t, i
            }
        }), e.Blur.fromObject = g.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.Image.filters,
            r = e.util.createClass;
        i.Gamma = r(i.BaseFilter, {
            type: "Gamma",
            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",
            gamma: [1, 1, 1],
            mainParameter: "gamma",
            applyTo2d: function(t) {
                var e, i = t.imageData.data,
                    r = this.gamma,
                    n = i.length,
                    s = 1 / r[0],
                    o = 1 / r[1],
                    a = 1 / r[2];
                for (this.rVals || (this.rVals = new Uint8Array(256), this.gVals = new Uint8Array(256), this.bVals = new Uint8Array(256)), e = 0, n = 256; e < n; e++) this.rVals[e] = 255 * Math.pow(e / 255, s), this.gVals[e] = 255 * Math.pow(e / 255, o), this.bVals[e] = 255 * Math.pow(e / 255, a);
                for (e = 0, n = i.length; e < n; e += 4) i[e] = this.rVals[i[e]], i[e + 1] = this.gVals[i[e + 1]], i[e + 2] = this.bVals[i[e + 2]]
            },
            getUniformLocations: function(t, e) {
                return {
                    uGamma: t.getUniformLocation(e, "uGamma")
                }
            },
            sendUniformData: function(t, e) {
                t.uniform3fv(e.uGamma, this.gamma)
            }
        }), e.Image.filters.Gamma.fromObject = e.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var n = t.fabric || (t.fabric = {}),
            e = n.Image.filters,
            i = n.util.createClass;
        e.Composed = i(e.BaseFilter, {
            type: "Composed",
            subFilters: [],
            initialize: function(t) {
                this.callSuper("initialize", t), this.subFilters = this.subFilters.slice(0)
            },
            applyTo: function(e) {
                e.passes += this.subFilters.length - 1, this.subFilters.forEach(function(t) {
                    t.applyTo(e)
                })
            },
            toObject: function() {
                return n.util.object.extend(this.callSuper("toObject"), {
                    subFilters: this.subFilters.map(function(t) {
                        return t.toObject()
                    })
                })
            }
        }), n.Image.filters.Composed.fromObject = function(t, e) {
            var i = (t.subFilters || []).map(function(t) {
                    return new n.Image.filters[t.type](t)
                }),
                r = new n.Image.filters.Composed({
                    subFilters: i
                });
            return e && e(r), r
        }
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var s = t.fabric || (t.fabric = {}),
            e = s.Image.filters,
            i = s.util.createClass;
        e.HueRotation = i(e.ColorMatrix, {
            type: "HueRotation",
            rotation: 0,
            mainParameter: "rotation",
            calculateMatrix: function() {
                var t = this.rotation * Math.PI,
                    e = s.util.cos(t),
                    i = s.util.sin(t),
                    r = Math.sqrt(1 / 3) * i,
                    n = 1 - e;
                this.matrix = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], this.matrix[0] = e + n / 3, this.matrix[1] = 1 / 3 * n - r, this.matrix[2] = 1 / 3 * n + r, this.matrix[5] = 1 / 3 * n + r, this.matrix[6] = e + 1 / 3 * n, this.matrix[7] = 1 / 3 * n - r, this.matrix[10] = 1 / 3 * n - r, this.matrix[11] = 1 / 3 * n + r, this.matrix[12] = e + 1 / 3 * n
            },
            applyTo: function(t) {
                this.calculateMatrix(), s.Image.filters.BaseFilter.prototype.applyTo.call(this, t)
            }
        }), s.Image.filters.HueRotation.fromObject = s.Image.filters.BaseFilter.fromObject
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var d = t.fabric || (t.fabric = {}),
            g = d.util.object.clone;
        d.Text ? d.warn("fabric.Text is already defined") : (d.Text = d.util.createClass(d.Object, {
            _dimensionAffectingProps: ["fontSize", "fontWeight", "fontFamily", "fontStyle", "lineHeight", "text", "charSpacing", "textAlign", "styles"],
            _reNewline: /\r?\n/,
            _reSpacesAndTabs: /[ \t\r]/g,
            _reSpaceAndTab: /[ \t\r]/,
            _reWords: /\S+/g,
            type: "text",
            fontSize: 40,
            fontWeight: "normal",
            fontFamily: "Times New Roman",
            underline: !1,
            overline: !1,
            linethrough: !1,
            textAlign: "left",
            fontStyle: "normal",
            lineHeight: 1.16,
            superscript: {
                size: .6,
                baseline: -.35
            },
            subscript: {
                size: .6,
                baseline: .11
            },
            textBackgroundColor: "",
            stateProperties: d.Object.prototype.stateProperties.concat("fontFamily", "fontWeight", "fontSize", "text", "underline", "overline", "linethrough", "textAlign", "fontStyle", "lineHeight", "textBackgroundColor", "charSpacing", "styles"),
            cacheProperties: d.Object.prototype.cacheProperties.concat("fontFamily", "fontWeight", "fontSize", "text", "underline", "overline", "linethrough", "textAlign", "fontStyle", "lineHeight", "textBackgroundColor", "charSpacing", "styles"),
            stroke: null,
            shadow: null,
            _fontSizeFraction: .222,
            offsets: {
                underline: .1,
                linethrough: -.315,
                overline: -.88
            },
            _fontSizeMult: 1.13,
            charSpacing: 0,
            styles: null,
            _measuringContext: null,
            deltaY: 0,
            _styleProperties: ["stroke", "strokeWidth", "fill", "fontFamily", "fontSize", "fontWeight", "fontStyle", "underline", "overline", "linethrough", "deltaY", "textBackgroundColor"],
            __charBounds: [],
            CACHE_FONT_SIZE: 400,
            MIN_TEXT_WIDTH: 2,
            initialize: function(t, e) {
                this.styles = e && e.styles || {}, this.text = t, this.__skipDimension = !0, this.callSuper("initialize", e), this.__skipDimension = !1, this.initDimensions(), this.setCoords(), this.setupState({
                    propertySet: "_dimensionAffectingProps"
                })
            },
            getMeasuringContext: function() {
                return d._measuringContext || (d._measuringContext = this.canvas && this.canvas.contextCache || d.util.createCanvasElement().getContext("2d")), d._measuringContext
            },
            _splitText: function() {
                var t = this._splitTextIntoLines(this.text);
                return this.textLines = t.lines, this._textLines = t.graphemeLines, this._unwrappedTextLines = t._unwrappedLines, this._text = t.graphemeText, t
            },
            initDimensions: function() {
                this.__skipDimension || (this._splitText(), this._clearCache(), this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH, -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(), this.height = this.calcTextHeight(), this.saveState({
                    propertySet: "_dimensionAffectingProps"
                }))
            },
            enlargeSpaces: function() {
                for (var t, e, i, r, n, s, o, a = 0, h = this._textLines.length; a < h; a++)
                    if (("justify" === this.textAlign || a !== h - 1 && !this.isEndOfWrapping(a)) && (r = 0, n = this._textLines[a], (e = this.getLineWidth(a)) < this.width && (o = this.textLines[a].match(this._reSpacesAndTabs)))) {
                        i = o.length, t = (this.width - e) / i;
                        for (var c = 0, l = n.length; c <= l; c++) s = this.__charBounds[a][c], this._reSpaceAndTab.test(n[c]) ? (s.width += t, s.kernedWidth += t, s.left += r, r += t) : s.left += r
                    }
            },
            isEndOfWrapping: function(t) {
                return t === this._textLines.length - 1
            },
            toString: function() {
                return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>'
            },
            _getCacheCanvasDimensions: function() {
                var t = this.callSuper("_getCacheCanvasDimensions"),
                    e = this.fontSize;
                return t.width += e * t.zoomX, t.height += e * t.zoomY, t
            },
            _render: function(t) {
                this._setTextStyles(t), this._renderTextLinesBackground(t), this._renderTextDecoration(t, "underline"), this._renderText(t), this._renderTextDecoration(t, "overline"), this._renderTextDecoration(t, "linethrough")
            },
            _renderText: function(t) {
                "stroke" === this.paintFirst ? (this._renderTextStroke(t), this._renderTextFill(t)) : (this._renderTextFill(t), this._renderTextStroke(t))
            },
            _setTextStyles: function(t, e, i) {
                t.textBaseline = "alphabetic", t.font = this._getFontDeclaration(e, i)
            },
            calcTextWidth: function() {
                for (var t = this.getLineWidth(0), e = 1, i = this._textLines.length; e < i; e++) {
                    var r = this.getLineWidth(e);
                    t < r && (t = r)
                }
                return t
            },
            _renderTextLine: function(t, e, i, r, n, s) {
                this._renderChars(t, e, i, r, n, s)
            },
            _renderTextLinesBackground: function(t) {
                if (this.textBackgroundColor || this.styleHas("textBackgroundColor")) {
                    for (var e, i, r, n, s, o, a = 0, h = t.fillStyle, c = this._getLeftOffset(), l = this._getTopOffset(), u = 0, f = 0, d = 0, g = this._textLines.length; d < g; d++)
                        if (e = this.getHeightOfLine(d), this.textBackgroundColor || this.styleHas("textBackgroundColor", d)) {
                            r = this._textLines[d], i = this._getLineLeftOffset(d), u = f = 0, n = this.getValueOfPropertyAt(d, 0, "textBackgroundColor");
                            for (var p = 0, v = r.length; p < v; p++) s = this.__charBounds[d][p], (o = this.getValueOfPropertyAt(d, p, "textBackgroundColor")) !== n ? ((t.fillStyle = n) && t.fillRect(c + i + u, l + a, f, e / this.lineHeight), u = s.left, f = s.width, n = o) : f += s.kernedWidth;
                            o && (t.fillStyle = o, t.fillRect(c + i + u, l + a, f, e / this.lineHeight)), a += e
                        } else a += e;
                    t.fillStyle = h, this._removeShadow(t)
                }
            },
            getFontCache: function(t) {
                var e = t.fontFamily.toLowerCase();
                d.charWidthsCache[e] || (d.charWidthsCache[e] = {});
                var i = d.charWidthsCache[e],
                    r = t.fontStyle.toLowerCase() + "_" + (t.fontWeight + "").toLowerCase();
                return i[r] || (i[r] = {}), i[r]
            },
            _applyCharStyles: function(t, e, i, r, n) {
                this._setFillStyles(e, n), this._setStrokeStyles(e, n), e.font = this._getFontDeclaration(n)
            },
            _measureChar: function(t, e, i, r) {
                var n, s, o, a, h = this.getFontCache(e),
                    c = i + t,
                    l = this._getFontDeclaration(e) === this._getFontDeclaration(r),
                    u = e.fontSize / this.CACHE_FONT_SIZE;
                if (i && void 0 !== h[i] && (o = h[i]), void 0 !== h[t] && (a = n = h[t]), l && void 0 !== h[c] && (a = (s = h[c]) - o), void 0 === n || void 0 === o || void 0 === s) {
                    var f = this.getMeasuringContext();
                    this._setTextStyles(f, e, !0)
                }
                return void 0 === n && (a = n = f.measureText(t).width, h[t] = n), void 0 === o && l && i && (o = f.measureText(i).width, h[i] = o), l && void 0 === s && (s = f.measureText(c).width, a = (h[c] = s) - o), {
                    width: n * u,
                    kernedWidth: a * u
                }
            },
            getHeightOfChar: function(t, e) {
                return this.getValueOfPropertyAt(t, e, "fontSize")
            },
            measureLine: function(t) {
                var e = this._measureLine(t);
                return 0 !== this.charSpacing && (e.width -= this._getWidthOfCharSpacing()), e.width < 0 && (e.width = 0), e
            },
            _measureLine: function(t) {
                var e, i, r, n, s = 0,
                    o = this._textLines[t],
                    a = new Array(o.length);
                for (this.__charBounds[t] = a, e = 0; e < o.length; e++) i = o[e], n = this._getGraphemeBox(i, t, e, r), s += (a[e] = n).kernedWidth, r = i;
                return a[e] = {
                    left: n ? n.left + n.width : 0,
                    width: 0,
                    kernedWidth: 0,
                    height: this.fontSize
                }, {
                    width: s,
                    numOfSpaces: 0
                }
            },
            _getGraphemeBox: function(t, e, i, r, n) {
                var s, o = this.getCompleteStyleDeclaration(e, i),
                    a = r ? this.getCompleteStyleDeclaration(e, i - 1) : {},
                    h = this._measureChar(t, o, r, a),
                    c = h.kernedWidth,
                    l = h.width;
                0 !== this.charSpacing && (l += s = this._getWidthOfCharSpacing(), c += s);
                var u = {
                    width: l,
                    left: 0,
                    height: o.fontSize,
                    kernedWidth: c,
                    deltaY: o.deltaY
                };
                if (0 < i && !n) {
                    var f = this.__charBounds[e][i - 1];
                    u.left = f.left + f.width + h.kernedWidth - h.width
                }
                return u
            },
            getHeightOfLine: function(t) {
                if (this.__lineHeights[t]) return this.__lineHeights[t];
                for (var e = this._textLines[t], i = this.getHeightOfChar(t, 0), r = 1, n = e.length; r < n; r++) i = Math.max(this.getHeightOfChar(t, r), i);
                return this.__lineHeights[t] = i * this.lineHeight * this._fontSizeMult
            },
            calcTextHeight: function() {
                for (var t, e = 0, i = 0, r = this._textLines.length; i < r; i++) t = this.getHeightOfLine(i), e += i === r - 1 ? t / this.lineHeight : t;
                return e
            },
            _getLeftOffset: function() {
                return -this.width / 2
            },
            _getTopOffset: function() {
                return -this.height / 2
            },
            _renderTextCommon: function(t, e) {
                t.save();
                for (var i = 0, r = this._getLeftOffset(), n = this._getTopOffset(), s = this._applyPatternGradientTransform(t, "fillText" === e ? this.fill : this.stroke), o = 0, a = this._textLines.length; o < a; o++) {
                    var h = this.getHeightOfLine(o),
                        c = h / this.lineHeight,
                        l = this._getLineLeftOffset(o);
                    this._renderTextLine(e, t, this._textLines[o], r + l - s.offsetX, n + i + c - s.offsetY, o), i += h
                }
                t.restore()
            },
            _renderTextFill: function(t) {
                (this.fill || this.styleHas("fill")) && this._renderTextCommon(t, "fillText")
            },
            _renderTextStroke: function(t) {
                (this.stroke && 0 !== this.strokeWidth || !this.isEmptyStyles()) && (this.shadow && !this.shadow.affectStroke && this._removeShadow(t), t.save(), this._setLineDash(t, this.strokeDashArray), t.beginPath(), this._renderTextCommon(t, "strokeText"), t.closePath(), t.restore())
            },
            _renderChars: function(t, e, i, r, n, s) {
                var o, a, h, c, l = this.getHeightOfLine(s),
                    u = -1 !== this.textAlign.indexOf("justify"),
                    f = "",
                    d = 0,
                    g = !u && 0 === this.charSpacing && this.isEmptyStyles(s);
                if (e.save(), n -= l * this._fontSizeFraction / this.lineHeight, g) return this._renderChar(t, e, s, 0, this.textLines[s], r, n, l), void e.restore();
                for (var p = 0, v = i.length - 1; p <= v; p++) c = p === v || this.charSpacing, f += i[p], h = this.__charBounds[s][p], 0 === d ? (r += h.kernedWidth - h.width, d += h.width) : d += h.kernedWidth, u && !c && this._reSpaceAndTab.test(i[p]) && (c = !0), c || (o = o || this.getCompleteStyleDeclaration(s, p), a = this.getCompleteStyleDeclaration(s, p + 1), c = this._hasStyleChanged(o, a)), c && (this._renderChar(t, e, s, p, f, r, n, l), f = "", o = a, r += d, d = 0);
                e.restore()
            },
            _renderChar: function(t, e, i, r, n, s, o) {
                var a = this._getStyleDeclaration(i, r),
                    h = this.getCompleteStyleDeclaration(i, r),
                    c = "fillText" === t && h.fill,
                    l = "strokeText" === t && h.stroke && h.strokeWidth;
                (l || c) && (a && e.save(), this._applyCharStyles(t, e, i, r, h), a && a.textBackgroundColor && this._removeShadow(e), a && a.deltaY && (o += a.deltaY), c && e.fillText(n, s, o), l && e.strokeText(n, s, o), a && e.restore())
            },
            setSuperscript: function(t, e) {
                return this._setScript(t, e, this.superscript)
            },
            setSubscript: function(t, e) {
                return this._setScript(t, e, this.subscript)
            },
            _setScript: function(t, e, i) {
                var r = this.get2DCursorLocation(t, !0),
                    n = this.getValueOfPropertyAt(r.lineIndex, r.charIndex, "fontSize"),
                    s = this.getValueOfPropertyAt(r.lineIndex, r.charIndex, "deltaY"),
                    o = {
                        fontSize: n * i.size,
                        deltaY: s + n * i.baseline
                    };
                return this.setSelectionStyles(o, t, e), this
            },
            _hasStyleChanged: function(t, e) {
                return t.fill !== e.fill || t.stroke !== e.stroke || t.strokeWidth !== e.strokeWidth || t.fontSize !== e.fontSize || t.fontFamily !== e.fontFamily || t.fontWeight !== e.fontWeight || t.fontStyle !== e.fontStyle || t.deltaY !== e.deltaY
            },
            _hasStyleChangedForSvg: function(t, e) {
                return this._hasStyleChanged(t, e) || t.overline !== e.overline || t.underline !== e.underline || t.linethrough !== e.linethrough
            },
            _getLineLeftOffset: function(t) {
                var e = this.getLineWidth(t);
                return "center" === this.textAlign ? (this.width - e) / 2 : "right" === this.textAlign ? this.width - e : "justify-center" === this.textAlign && this.isEndOfWrapping(t) ? (this.width - e) / 2 : "justify-right" === this.textAlign && this.isEndOfWrapping(t) ? this.width - e : 0
            },
            _clearCache: function() {
                this.__lineWidths = [], this.__lineHeights = [], this.__charBounds = []
            },
            _shouldClearDimensionCache: function() {
                var t = this._forceClearCache;
                return t || (t = this.hasStateChanged("_dimensionAffectingProps")), t && (this.dirty = !0, this._forceClearCache = !1), t
            },
            getLineWidth: function(t) {
                return this.__lineWidths[t] ? this.__lineWidths[t] : (e = "" === this._textLines[t] ? 0 : this.measureLine(t).width, this.__lineWidths[t] = e);
                var e
            },
            _getWidthOfCharSpacing: function() {
                return 0 !== this.charSpacing ? this.fontSize * this.charSpacing / 1e3 : 0
            },
            getValueOfPropertyAt: function(t, e, i) {
                var r = this._getStyleDeclaration(t, e);
                return r && void 0 !== r[i] ? r[i] : this[i]
            },
            _renderTextDecoration: function(t, e) {
                if (this[e] || this.styleHas(e)) {
                    for (var i, r, n, s, o, a, h, c, l, u, f, d, g, p, v, m, b = this._getLeftOffset(), _ = this._getTopOffset(), y = this._getWidthOfCharSpacing(), x = 0, C = this._textLines.length; x < C; x++)
                        if (i = this.getHeightOfLine(x), this[e] || this.styleHas(e, x)) {
                            h = this._textLines[x], p = i / this.lineHeight, s = this._getLineLeftOffset(x), f = u = 0, c = this.getValueOfPropertyAt(x, 0, e), m = this.getValueOfPropertyAt(x, 0, "fill"), l = _ + p * (1 - this._fontSizeFraction), r = this.getHeightOfChar(x, 0), o = this.getValueOfPropertyAt(x, 0, "deltaY");
                            for (var S = 0, w = h.length; S < w; S++) d = this.__charBounds[x][S], g = this.getValueOfPropertyAt(x, S, e), v = this.getValueOfPropertyAt(x, S, "fill"), n = this.getHeightOfChar(x, S), a = this.getValueOfPropertyAt(x, S, "deltaY"), (g !== c || v !== m || n !== r || a !== o) && 0 < f ? (t.fillStyle = m, c && m && t.fillRect(b + s + u, l + this.offsets[e] * r + o, f, this.fontSize / 15), u = d.left, f = d.width, c = g, m = v, r = n, o = a) : f += d.kernedWidth;
                            t.fillStyle = v, g && v && t.fillRect(b + s + u, l + this.offsets[e] * r + o, f - y, this.fontSize / 15), _ += i
                        } else _ += i;
                    this._removeShadow(t)
                }
            },
            _getFontDeclaration: function(t, e) {
                var i = t || this,
                    r = this.fontFamily,
                    n = -1 < d.Text.genericFonts.indexOf(r.toLowerCase()),
                    s = void 0 === r || -1 < r.indexOf("'") || -1 < r.indexOf('"') || n ? i.fontFamily : '"' + i.fontFamily + '"';
                return [d.isLikelyNode ? i.fontWeight : i.fontStyle, d.isLikelyNode ? i.fontStyle : i.fontWeight, e ? this.CACHE_FONT_SIZE + "px" : i.fontSize + "px", s].join(" ")
            },
            render: function(t) {
                this.visible && (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (this._shouldClearDimensionCache() && this.initDimensions(), this.callSuper("render", t)))
            },
            _splitTextIntoLines: function(t) {
                for (var e = t.split(this._reNewline), i = new Array(e.length), r = ["\n"], n = [], s = 0; s < e.length; s++) i[s] = d.util.string.graphemeSplit(e[s]), n = n.concat(i[s], r);
                return n.pop(), {
                    _unwrappedLines: i,
                    lines: e,
                    graphemeText: n,
                    graphemeLines: i
                }
            },
            toObject: function(t) {
                var e = ["text", "fontSize", "fontWeight", "fontFamily", "fontStyle", "lineHeight", "underline", "overline", "linethrough", "textAlign", "textBackgroundColor", "charSpacing"].concat(t),
                    i = this.callSuper("toObject", e);
                return i.styles = g(this.styles, !0), i
            },
            set: function(t, e) {
                this.callSuper("set", t, e);
                var i = !1;
                if ("object" == typeof t)
                    for (var r in t) i = i || -1 !== this._dimensionAffectingProps.indexOf(r);
                else i = -1 !== this._dimensionAffectingProps.indexOf(t);
                return i && (this.initDimensions(), this.setCoords()), this
            },
            complexity: function() {
                return 1
            }
        }), d.Text.ATTRIBUTE_NAMES = d.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")), d.Text.DEFAULT_SVG_FONT_SIZE = 16, d.Text.fromElement = function(t, e, i) {
            if (!t) return e(null);
            var r = d.parseAttributes(t, d.Text.ATTRIBUTE_NAMES),
                n = r.textAnchor || "left";
            if ((i = d.util.object.extend(i ? g(i) : {}, r)).top = i.top || 0, i.left = i.left || 0, r.textDecoration) {
                var s = r.textDecoration; - 1 !== s.indexOf("underline") && (i.underline = !0), -1 !== s.indexOf("overline") && (i.overline = !0), -1 !== s.indexOf("line-through") && (i.linethrough = !0), delete i.textDecoration
            }
            "dx" in r && (i.left += r.dx), "dy" in r && (i.top += r.dy), "fontSize" in i || (i.fontSize = d.Text.DEFAULT_SVG_FONT_SIZE);
            var o = "";
            "textContent" in t ? o = t.textContent : "firstChild" in t && null !== t.firstChild && "data" in t.firstChild && null !== t.firstChild.data && (o = t.firstChild.data), o = o.replace(/^\s+|\s+$|\n+/g, "").replace(/\s+/g, " ");
            var a = i.strokeWidth;
            i.strokeWidth = 0;
            var h = new d.Text(o, i),
                c = h.getScaledHeight() / h.height,
                l = ((h.height + h.strokeWidth) * h.lineHeight - h.height) * c,
                u = h.getScaledHeight() + l,
                f = 0;
            "center" === n && (f = h.getScaledWidth() / 2), "right" === n && (f = h.getScaledWidth()), h.set({
                left: h.left - f,
                top: h.top - (u - h.fontSize * (.07 + h._fontSizeFraction)) / h.lineHeight,
                strokeWidth: void 0 !== a ? a : 1
            }), e(h)
        }, d.Text.fromObject = function(t, e) {
            return d.Object._fromObject("Text", t, e, "text")
        }, d.Text.genericFonts = ["sans-serif", "serif", "cursive", "fantasy", "monospace"], d.util.createAccessors && d.util.createAccessors(d.Text))
    }("undefined" != typeof exports ? exports : this), fabric.util.object.extend(fabric.Text.prototype, {
        isEmptyStyles: function(t) {
            if (!this.styles) return !0;
            if (void 0 !== t && !this.styles[t]) return !0;
            var e = void 0 === t ? this.styles : {
                line: this.styles[t]
            };
            for (var i in e)
                for (var r in e[i])
                    for (var n in e[i][r]) return !1;
            return !0
        },
        styleHas: function(t, e) {
            if (!this.styles || !t || "" === t) return !1;
            if (void 0 !== e && !this.styles[e]) return !1;
            var i = void 0 === e ? this.styles : {
                line: this.styles[e]
            };
            for (var r in i)
                for (var n in i[r])
                    if (void 0 !== i[r][n][t]) return !0;
            return !1
        },
        cleanStyle: function(t) {
            if (!this.styles || !t || "" === t) return !1;
            var e, i, r = this.styles,
                n = 0,
                s = !0,
                o = 0;
            for (var a in r) {
                for (var h in e = 0, r[a]) {
                    var c;
                    n++, (c = r[a][h]).hasOwnProperty(t) ? (i ? c[t] !== i && (s = !1) : i = c[t], c[t] === this[t] && delete c[t]) : s = !1, 0 !== Object.keys(c).length ? e++ : delete r[a][h]
                }
                0 === e && delete r[a]
            }
            for (var l = 0; l < this._textLines.length; l++) o += this._textLines[l].length;
            s && n === o && (this[t] = i, this.removeStyle(t))
        },
        removeStyle: function(t) {
            if (this.styles && t && "" !== t) {
                var e, i, r, n = this.styles;
                for (i in n) {
                    for (r in e = n[i]) delete e[r][t], 0 === Object.keys(e[r]).length && delete e[r];
                    0 === Object.keys(e).length && delete n[i]
                }
            }
        },
        _extendStyles: function(t, e) {
            var i = this.get2DCursorLocation(t);
            this._getLineStyle(i.lineIndex) || this._setLineStyle(i.lineIndex, {}), this._getStyleDeclaration(i.lineIndex, i.charIndex) || this._setStyleDeclaration(i.lineIndex, i.charIndex, {}), fabric.util.object.extend(this._getStyleDeclaration(i.lineIndex, i.charIndex), e)
        },
        get2DCursorLocation: function(t, e) {
            void 0 === t && (t = this.selectionStart);
            for (var i = e ? this._unwrappedTextLines : this._textLines, r = i.length, n = 0; n < r; n++) {
                if (t <= i[n].length) return {
                    lineIndex: n,
                    charIndex: t
                };
                t -= i[n].length + 1
            }
            return {
                lineIndex: n - 1,
                charIndex: i[n - 1].length < t ? i[n - 1].length : t
            }
        },
        getSelectionStyles: function(t, e, i) {
            void 0 === t && (t = this.selectionStart || 0), void 0 === e && (e = this.selectionEnd || t);
            for (var r = [], n = t; n < e; n++) r.push(this.getStyleAtPosition(n, i));
            return r
        },
        getStyleAtPosition: function(t, e) {
            var i = this.get2DCursorLocation(t);
            return (e ? this.getCompleteStyleDeclaration(i.lineIndex, i.charIndex) : this._getStyleDeclaration(i.lineIndex, i.charIndex)) || {}
        },
        setSelectionStyles: function(t, e, i) {
            void 0 === e && (e = this.selectionStart || 0), void 0 === i && (i = this.selectionEnd || e);
            for (var r = e; r < i; r++) this._extendStyles(r, t);
            return this._forceClearCache = !0, this
        },
        _getStyleDeclaration: function(t, e) {
            var i = this.styles && this.styles[t];
            return i ? i[e] : null
        },
        getCompleteStyleDeclaration: function(t, e) {
            for (var i, r = this._getStyleDeclaration(t, e) || {}, n = {}, s = 0; s < this._styleProperties.length; s++) n[i = this._styleProperties[s]] = void 0 === r[i] ? this[i] : r[i];
            return n
        },
        _setStyleDeclaration: function(t, e, i) {
            this.styles[t][e] = i
        },
        _deleteStyleDeclaration: function(t, e) {
            delete this.styles[t][e]
        },
        _getLineStyle: function(t) {
            return this.styles[t]
        },
        _setLineStyle: function(t, e) {
            this.styles[t] = e
        },
        _deleteLineStyle: function(t) {
            delete this.styles[t]
        }
    }),
    function() {
        function n(t) {
            t.textDecoration && (-1 < t.textDecoration.indexOf("underline") && (t.underline = !0), -1 < t.textDecoration.indexOf("line-through") && (t.linethrough = !0), -1 < t.textDecoration.indexOf("overline") && (t.overline = !0), delete t.textDecoration)
        }
        fabric.IText = fabric.util.createClass(fabric.Text, fabric.Observable, {
            type: "i-text",
            selectionStart: 0,
            selectionEnd: 0,
            selectionColor: "rgba(17,119,255,0.3)",
            isEditing: !1,
            editable: !0,
            editingBorderColor: "rgba(102,153,255,0.25)",
            cursorWidth: 2,
            cursorColor: "#333",
            cursorDelay: 1e3,
            cursorDuration: 600,
            caching: !0,
            _reSpace: /\s|\n/,
            _currentCursorOpacity: 0,
            _selectionDirection: null,
            _abortCursorAnimation: !1,
            __widthOfSpace: [],
            inCompositionMode: !1,
            initialize: function(t, e) {
                this.callSuper("initialize", t, e), this.initBehavior()
            },
            setSelectionStart: function(t) {
                t = Math.max(t, 0), this._updateAndFire("selectionStart", t)
            },
            setSelectionEnd: function(t) {
                t = Math.min(t, this.text.length), this._updateAndFire("selectionEnd", t)
            },
            _updateAndFire: function(t, e) {
                this[t] !== e && (this._fireSelectionChanged(), this[t] = e), this._updateTextarea()
            },
            _fireSelectionChanged: function() {
                this.fire("selection:changed"), this.canvas && this.canvas.fire("text:selection:changed", {
                    target: this
                })
            },
            initDimensions: function() {
                this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this.callSuper("initDimensions")
            },
            render: function(t) {
                this.clearContextTop(), this.callSuper("render", t), this.cursorOffsetCache = {}, this.renderCursorOrSelection()
            },
            _render: function(t) {
                this.callSuper("_render", t)
            },
            clearContextTop: function(t) {
                if (this.isEditing && this.canvas && this.canvas.contextTop) {
                    var e = this.canvas.contextTop,
                        i = this.canvas.viewportTransform;
                    e.save(), e.transform(i[0], i[1], i[2], i[3], i[4], i[5]), this.transform(e), this.transformMatrix && e.transform.apply(e, this.transformMatrix), this._clearTextArea(e), t || e.restore()
                }
            },
            renderCursorOrSelection: function() {
                if (this.isEditing && this.canvas) {
                    var t, e = this._getCursorBoundaries();
                    this.canvas && this.canvas.contextTop ? (t = this.canvas.contextTop, this.clearContextTop(!0)) : (t = this.canvas.contextContainer).save(), this.selectionStart === this.selectionEnd ? this.renderCursor(e, t) : this.renderSelection(e, t), t.restore()
                }
            },
            _clearTextArea: function(t) {
                var e = this.width + 4,
                    i = this.height + 4;
                t.clearRect(-e / 2, -i / 2, e, i)
            },
            _getCursorBoundaries: function(t) {
                void 0 === t && (t = this.selectionStart);
                var e = this._getLeftOffset(),
                    i = this._getTopOffset(),
                    r = this._getCursorBoundariesOffsets(t);
                return {
                    left: e,
                    top: i,
                    leftOffset: r.left,
                    topOffset: r.top
                }
            },
            _getCursorBoundariesOffsets: function(t) {
                if (this.cursorOffsetCache && "top" in this.cursorOffsetCache) return this.cursorOffsetCache;
                var e, i, r, n, s = 0,
                    o = 0,
                    a = this.get2DCursorLocation(t);
                r = a.charIndex, i = a.lineIndex;
                for (var h = 0; h < i; h++) s += this.getHeightOfLine(h);
                e = this._getLineLeftOffset(i);
                var c = this.__charBounds[i][r];
                return c && (o = c.left), 0 !== this.charSpacing && r === this._textLines[i].length && (o -= this._getWidthOfCharSpacing()), n = {
                    top: s,
                    left: e + (0 < o ? o : 0)
                }, this.cursorOffsetCache = n, this.cursorOffsetCache
            },
            renderCursor: function(t, e) {
                var i = this.get2DCursorLocation(),
                    r = i.lineIndex,
                    n = 0 < i.charIndex ? i.charIndex - 1 : 0,
                    s = this.getValueOfPropertyAt(r, n, "fontSize"),
                    o = this.scaleX * this.canvas.getZoom(),
                    a = this.cursorWidth / o,
                    h = t.topOffset,
                    c = this.getValueOfPropertyAt(r, n, "deltaY");
                h += (1 - this._fontSizeFraction) * this.getHeightOfLine(r) / this.lineHeight - s * (1 - this._fontSizeFraction), this.inCompositionMode && this.renderSelection(t, e), e.fillStyle = this.getValueOfPropertyAt(r, n, "fill"), e.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity, e.fillRect(t.left + t.leftOffset - a / 2, h + t.top + c, a, s)
            },
            renderSelection: function(t, e) {
                for (var i = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart, r = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd, n = -1 !== this.textAlign.indexOf("justify"), s = this.get2DCursorLocation(i), o = this.get2DCursorLocation(r), a = s.lineIndex, h = o.lineIndex, c = s.charIndex < 0 ? 0 : s.charIndex, l = o.charIndex < 0 ? 0 : o.charIndex, u = a; u <= h; u++) {
                    var f, d = this._getLineLeftOffset(u) || 0,
                        g = this.getHeightOfLine(u),
                        p = 0,
                        v = 0;
                    if (u === a && (p = this.__charBounds[a][c].left), a <= u && u < h) v = n && !this.isEndOfWrapping(u) ? this.width : this.getLineWidth(u) || 5;
                    else if (u === h)
                        if (0 === l) v = this.__charBounds[h][l].left;
                        else {
                            var m = this._getWidthOfCharSpacing();
                            v = this.__charBounds[h][l - 1].left + this.__charBounds[h][l - 1].width - m
                        } f = g, (this.lineHeight < 1 || u === h && 1 < this.lineHeight) && (g /= this.lineHeight), this.inCompositionMode ? (e.fillStyle = this.compositionColor || "black", e.fillRect(t.left + d + p, t.top + t.topOffset + g, v - p, 1)) : (e.fillStyle = this.selectionColor, e.fillRect(t.left + d + p, t.top + t.topOffset, v - p, g)), t.topOffset += f
                }
            },
            getCurrentCharFontSize: function() {
                var t = this._getCurrentCharIndex();
                return this.getValueOfPropertyAt(t.l, t.c, "fontSize")
            },
            getCurrentCharColor: function() {
                var t = this._getCurrentCharIndex();
                return this.getValueOfPropertyAt(t.l, t.c, "fill")
            },
            _getCurrentCharIndex: function() {
                var t = this.get2DCursorLocation(this.selectionStart, !0),
                    e = 0 < t.charIndex ? t.charIndex - 1 : 0;
                return {
                    l: t.lineIndex,
                    c: e
                }
            }
        }), fabric.IText.fromObject = function(t, e) {
            if (n(t), t.styles)
                for (var i in t.styles)
                    for (var r in t.styles[i]) n(t.styles[i][r]);
            fabric.Object._fromObject("IText", t, e, "text")
        }
    }(),
    function() {
        var c = fabric.util.object.clone;
        fabric.util.object.extend(fabric.IText.prototype, {
            initBehavior: function() {
                this.initAddedHandler(), this.initRemovedHandler(), this.initCursorSelectionHandlers(), this.initDoubleClickSimulation(), this.mouseMoveHandler = this.mouseMoveHandler.bind(this)
            },
            onDeselect: function() {
                this.isEditing && this.exitEditing(), this.selected = !1
            },
            initAddedHandler: function() {
                var e = this;
                this.on("added", function() {
                    var t = e.canvas;
                    t && (t._hasITextHandlers || (t._hasITextHandlers = !0, e._initCanvasHandlers(t)), t._iTextInstances = t._iTextInstances || [], t._iTextInstances.push(e))
                })
            },
            initRemovedHandler: function() {
                var e = this;
                this.on("removed", function() {
                    var t = e.canvas;
                    t && (t._iTextInstances = t._iTextInstances || [], fabric.util.removeFromArray(t._iTextInstances, e), 0 === t._iTextInstances.length && (t._hasITextHandlers = !1, e._removeCanvasHandlers(t)))
                })
            },
            _initCanvasHandlers: function(t) {
                t._mouseUpITextHandler = function() {
                    t._iTextInstances && t._iTextInstances.forEach(function(t) {
                        t.__isMousedown = !1
                    })
                }, t.on("mouse:up", t._mouseUpITextHandler)
            },
            _removeCanvasHandlers: function(t) {
                t.off("mouse:up", t._mouseUpITextHandler)
            },
            _tick: function() {
                this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, "_onTickComplete")
            },
            _animateCursor: function(t, e, i, r) {
                var n;
                return n = {
                    isAborted: !1,
                    abort: function() {
                        this.isAborted = !0
                    }
                }, t.animate("_currentCursorOpacity", e, {
                    duration: i,
                    onComplete: function() {
                        n.isAborted || t[r]()
                    },
                    onChange: function() {
                        t.canvas && t.selectionStart === t.selectionEnd && t.renderCursorOrSelection()
                    },
                    abort: function() {
                        return n.isAborted
                    }
                }), n
            },
            _onTickComplete: function() {
                var t = this;
                this._cursorTimeout1 && clearTimeout(this._cursorTimeout1), this._cursorTimeout1 = setTimeout(function() {
                    t._currentTickCompleteState = t._animateCursor(t, 0, this.cursorDuration / 2, "_tick")
                }, 100)
            },
            initDelayedCursor: function(t) {
                var e = this,
                    i = t ? 0 : this.cursorDelay;
                this.abortCursorAnimation(), this._currentCursorOpacity = 1, this._cursorTimeout2 = setTimeout(function() {
                    e._tick()
                }, i)
            },
            abortCursorAnimation: function() {
                var t = this._currentTickState || this._currentTickCompleteState,
                    e = this.canvas;
                this._currentTickState && this._currentTickState.abort(), this._currentTickCompleteState && this._currentTickCompleteState.abort(), clearTimeout(this._cursorTimeout1), clearTimeout(this._cursorTimeout2), this._currentCursorOpacity = 0, t && e && e.clearContext(e.contextTop || e.contextContainer)
            },
            selectAll: function() {
                return this.selectionStart = 0, this.selectionEnd = this._text.length, this._fireSelectionChanged(), this._updateTextarea(), this
            },
            getSelectedText: function() {
                return this._text.slice(this.selectionStart, this.selectionEnd).join("")
            },
            findWordBoundaryLeft: function(t) {
                var e = 0,
                    i = t - 1;
                if (this._reSpace.test(this._text[i]))
                    for (; this._reSpace.test(this._text[i]);) e++, i--;
                for (;
                    /\S/.test(this._text[i]) && -1 < i;) e++, i--;
                return t - e
            },
            findWordBoundaryRight: function(t) {
                var e = 0,
                    i = t;
                if (this._reSpace.test(this._text[i]))
                    for (; this._reSpace.test(this._text[i]);) e++, i++;
                for (;
                    /\S/.test(this._text[i]) && i < this.text.length;) e++, i++;
                return t + e
            },
            findLineBoundaryLeft: function(t) {
                for (var e = 0, i = t - 1; !/\n/.test(this._text[i]) && -1 < i;) e++, i--;
                return t - e
            },
            findLineBoundaryRight: function(t) {
                for (var e = 0, i = t; !/\n/.test(this._text[i]) && i < this.text.length;) e++, i++;
                return t + e
            },
            searchWordBoundary: function(t, e) {
                for (var i = this._reSpace.test(this.text.charAt(t)) ? t - 1 : t, r = this.text.charAt(i), n = /[ \n\.,;!\?\-]/; !n.test(r) && 0 < i && i < this.text.length;) i += e, r = this.text.charAt(i);
                return n.test(r) && "\n" !== r && (i += 1 === e ? 0 : 1), i
            },
            selectWord: function(t) {
                t = t || this.selectionStart;
                var e = this.searchWordBoundary(t, -1),
                    i = this.searchWordBoundary(t, 1);
                this.selectionStart = e, this.selectionEnd = i, this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection()
            },
            selectLine: function(t) {
                t = t || this.selectionStart;
                var e = this.findLineBoundaryLeft(t),
                    i = this.findLineBoundaryRight(t);
                return this.selectionStart = e, this.selectionEnd = i, this._fireSelectionChanged(), this._updateTextarea(), this
            },
            enterEditing: function(t) {
                if (!this.isEditing && this.editable) return this.canvas && (this.canvas.calcOffset(), this.exitEditingOnOthers(this.canvas)), this.isEditing = !0, this.initHiddenTextarea(t), this.hiddenTextarea.focus(), this.hiddenTextarea.value = this.text, this._updateTextarea(), this._saveEditingProps(), this._setEditingProps(), this._textBeforeEdit = this.text, this._tick(), this.fire("editing:entered"), this._fireSelectionChanged(), this.canvas && (this.canvas.fire("text:editing:entered", {
                    target: this
                }), this.initMouseMoveHandler(), this.canvas.requestRenderAll()), this
            },
            exitEditingOnOthers: function(t) {
                t._iTextInstances && t._iTextInstances.forEach(function(t) {
                    t.selected = !1, t.isEditing && t.exitEditing()
                })
            },
            initMouseMoveHandler: function() {
                this.canvas.on("mouse:move", this.mouseMoveHandler)
            },
            mouseMoveHandler: function(t) {
                if (this.__isMousedown && this.isEditing) {
                    var e = this.getSelectionStartFromPointer(t.e),
                        i = this.selectionStart,
                        r = this.selectionEnd;
                    (e === this.__selectionStartOnMouseDown && i !== r || i !== e && r !== e) && (e > this.__selectionStartOnMouseDown ? (this.selectionStart = this.__selectionStartOnMouseDown, this.selectionEnd = e) : (this.selectionStart = e, this.selectionEnd = this.__selectionStartOnMouseDown), this.selectionStart === i && this.selectionEnd === r || (this.restartCursorIfNeeded(), this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection()))
                }
            },
            _setEditingProps: function() {
                this.hoverCursor = "text", this.canvas && (this.canvas.defaultCursor = this.canvas.moveCursor = "text"), this.borderColor = this.editingBorderColor, this.hasControls = this.selectable = !1, this.lockMovementX = this.lockMovementY = !0
            },
            fromStringToGraphemeSelection: function(t, e, i) {
                var r = i.slice(0, t),
                    n = fabric.util.string.graphemeSplit(r).length;
                if (t === e) return {
                    selectionStart: n,
                    selectionEnd: n
                };
                var s = i.slice(t, e);
                return {
                    selectionStart: n,
                    selectionEnd: n + fabric.util.string.graphemeSplit(s).length
                }
            },
            fromGraphemeToStringSelection: function(t, e, i) {
                var r = i.slice(0, t).join("").length;
                return t === e ? {
                    selectionStart: r,
                    selectionEnd: r
                } : {
                    selectionStart: r,
                    selectionEnd: r + i.slice(t, e).join("").length
                }
            },
            _updateTextarea: function() {
                if (this.cursorOffsetCache = {}, this.hiddenTextarea) {
                    if (!this.inCompositionMode) {
                        var t = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text);
                        this.hiddenTextarea.selectionStart = t.selectionStart, this.hiddenTextarea.selectionEnd = t.selectionEnd
                    }
                    this.updateTextareaPosition()
                }
            },
            updateFromTextArea: function() {
                if (this.hiddenTextarea) {
                    this.cursorOffsetCache = {}, this.text = this.hiddenTextarea.value, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords());
                    var t = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value);
                    this.selectionEnd = this.selectionStart = t.selectionEnd, this.inCompositionMode || (this.selectionStart = t.selectionStart), this.updateTextareaPosition()
                }
            },
            updateTextareaPosition: function() {
                if (this.selectionStart === this.selectionEnd) {
                    var t = this._calcTextareaPosition();
                    this.hiddenTextarea.style.left = t.left, this.hiddenTextarea.style.top = t.top
                }
            },
            _calcTextareaPosition: function() {
                if (!this.canvas) return {
                    x: 1,
                    y: 1
                };
                var t = this.inCompositionMode ? this.compositionStart : this.selectionStart,
                    e = this._getCursorBoundaries(t),
                    i = this.get2DCursorLocation(t),
                    r = i.lineIndex,
                    n = i.charIndex,
                    s = this.getValueOfPropertyAt(r, n, "fontSize") * this.lineHeight,
                    o = e.leftOffset,
                    a = this.calcTransformMatrix(),
                    h = {
                        x: e.left + o,
                        y: e.top + e.topOffset + s
                    },
                    c = this.canvas.upperCanvasEl,
                    l = c.width,
                    u = c.height,
                    f = l - s,
                    d = u - s,
                    g = c.clientWidth / l,
                    p = c.clientHeight / u;
                return h = fabric.util.transformPoint(h, a), (h = fabric.util.transformPoint(h, this.canvas.viewportTransform)).x *= g, h.y *= p, h.x < 0 && (h.x = 0), h.x > f && (h.x = f), h.y < 0 && (h.y = 0), h.y > d && (h.y = d), h.x += this.canvas._offset.left, h.y += this.canvas._offset.top, {
                    left: h.x + "px",
                    top: h.y + "px",
                    fontSize: s + "px",
                    charHeight: s
                }
            },
            _saveEditingProps: function() {
                this._savedProps = {
                    hasControls: this.hasControls,
                    borderColor: this.borderColor,
                    lockMovementX: this.lockMovementX,
                    lockMovementY: this.lockMovementY,
                    hoverCursor: this.hoverCursor,
                    defaultCursor: this.canvas && this.canvas.defaultCursor,
                    moveCursor: this.canvas && this.canvas.moveCursor
                }
            },
            _restoreEditingProps: function() {
                this._savedProps && (this.hoverCursor = this._savedProps.hoverCursor, this.hasControls = this._savedProps.hasControls, this.borderColor = this._savedProps.borderColor, this.lockMovementX = this._savedProps.lockMovementX, this.lockMovementY = this._savedProps.lockMovementY, this.canvas && (this.canvas.defaultCursor = this._savedProps.defaultCursor, this.canvas.moveCursor = this._savedProps.moveCursor))
            },
            exitEditing: function() {
                var t = this._textBeforeEdit !== this.text;
                return this.selected = !1, this.isEditing = !1, this.selectable = !0, this.selectionEnd = this.selectionStart, this.hiddenTextarea && (this.hiddenTextarea.blur && this.hiddenTextarea.blur(), this.canvas && this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea), this.hiddenTextarea = null), this.abortCursorAnimation(), this._restoreEditingProps(), this._currentCursorOpacity = 0, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this.fire("editing:exited"), t && this.fire("modified"), this.canvas && (this.canvas.off("mouse:move", this.mouseMoveHandler), this.canvas.fire("text:editing:exited", {
                    target: this
                }), t && this.canvas.fire("object:modified", {
                    target: this
                })), this
            },
            _removeExtraneousStyles: function() {
                for (var t in this.styles) this._textLines[t] || delete this.styles[t]
            },
            removeStyleFromTo: function(t, e) {
                var i, r, n = this.get2DCursorLocation(t, !0),
                    s = this.get2DCursorLocation(e, !0),
                    o = n.lineIndex,
                    a = n.charIndex,
                    h = s.lineIndex,
                    c = s.charIndex;
                if (o !== h) {
                    if (this.styles[o])
                        for (i = a; i < this._unwrappedTextLines[o].length; i++) delete this.styles[o][i];
                    if (this.styles[h])
                        for (i = c; i < this._unwrappedTextLines[h].length; i++)(r = this.styles[h][i]) && (this.styles[o] || (this.styles[o] = {}), this.styles[o][a + i - c] = r);
                    for (i = o + 1; i <= h; i++) delete this.styles[i];
                    this.shiftLineStyles(h, o - h)
                } else if (this.styles[o]) {
                    r = this.styles[o];
                    var l, u, f = c - a;
                    for (i = a; i < c; i++) delete r[i];
                    for (u in this.styles[o]) c <= (l = parseInt(u, 10)) && (r[l - f] = r[u], delete r[u])
                }
            },
            shiftLineStyles: function(t, e) {
                var i = c(this.styles);
                for (var r in this.styles) {
                    var n = parseInt(r, 10);
                    t < n && (this.styles[n + e] = i[n], i[n - e] || delete this.styles[n])
                }
            },
            restartCursorIfNeeded: function() {
                this._currentTickState && !this._currentTickState.isAborted && this._currentTickCompleteState && !this._currentTickCompleteState.isAborted || this.initDelayedCursor()
            },
            insertNewlineStyleObject: function(t, e, i, r) {
                var n, s = {},
                    o = !1;
                for (var a in i || (i = 1), this.shiftLineStyles(t, i), this.styles[t] && (n = this.styles[t][0 === e ? e : e - 1]), this.styles[t]) {
                    var h = parseInt(a, 10);
                    e <= h && (o = !0, s[h - e] = this.styles[t][a], delete this.styles[t][a])
                }
                for (o ? this.styles[t + i] = s : delete this.styles[t + i]; 1 < i;) i--, r && r[i] ? this.styles[t + i] = {
                    0: c(r[i])
                } : n ? this.styles[t + i] = {
                    0: c(n)
                } : delete this.styles[t + i];
                this._forceClearCache = !0
            },
            insertCharStyleObject: function(t, e, i, r) {
                this.styles || (this.styles = {});
                var n = this.styles[t],
                    s = n ? c(n) : {};
                for (var o in i || (i = 1), s) {
                    var a = parseInt(o, 10);
                    e <= a && (n[a + i] = s[a], s[a - i] || delete n[a])
                }
                if (this._forceClearCache = !0, r)
                    for (; i--;) Object.keys(r[i]).length && (this.styles[t] || (this.styles[t] = {}), this.styles[t][e + i] = c(r[i]));
                else if (n)
                    for (var h = n[e ? e - 1 : 1]; h && i--;) this.styles[t][e + i] = c(h)
            },
            insertNewStyleBlock: function(t, e, i) {
                for (var r = this.get2DCursorLocation(e, !0), n = [0], s = 0, o = 0; o < t.length; o++) "\n" === t[o] ? n[++s] = 0 : n[s]++;
                0 < n[0] && (this.insertCharStyleObject(r.lineIndex, r.charIndex, n[0], i), i = i && i.slice(n[0] + 1)), s && this.insertNewlineStyleObject(r.lineIndex, r.charIndex + n[0], s);
                for (o = 1; o < s; o++) 0 < n[o] ? this.insertCharStyleObject(r.lineIndex + o, 0, n[o], i) : i && (this.styles[r.lineIndex + o][0] = i[0]), i = i && i.slice(n[o] + 1);
                0 < n[o] && this.insertCharStyleObject(r.lineIndex + o, 0, n[o], i)
            },
            setSelectionStartEndWithShift: function(t, e, i) {
                i <= t ? (e === t ? this._selectionDirection = "left" : "right" === this._selectionDirection && (this._selectionDirection = "left", this.selectionEnd = t), this.selectionStart = i) : t < i && i < e ? "right" === this._selectionDirection ? this.selectionEnd = i : this.selectionStart = i : (e === t ? this._selectionDirection = "right" : "left" === this._selectionDirection && (this._selectionDirection = "right", this.selectionStart = e), this.selectionEnd = i)
            },
            setSelectionInBoundaries: function() {
                var t = this.text.length;
                this.selectionStart > t ? this.selectionStart = t : this.selectionStart < 0 && (this.selectionStart = 0), this.selectionEnd > t ? this.selectionEnd = t : this.selectionEnd < 0 && (this.selectionEnd = 0)
            }
        })
    }(), fabric.util.object.extend(fabric.IText.prototype, {
        initDoubleClickSimulation: function() {
            this.__lastClickTime = +new Date, this.__lastLastClickTime = +new Date, this.__lastPointer = {}, this.on("mousedown", this.onMouseDown)
        },
        onMouseDown: function(t) {
            if (this.canvas) {
                this.__newClickTime = +new Date;
                var e = t.pointer;
                this.isTripleClick(e) && (this.fire("tripleclick", t), this._stopEvent(t.e)), this.__lastLastClickTime = this.__lastClickTime, this.__lastClickTime = this.__newClickTime, this.__lastPointer = e, this.__lastIsEditing = this.isEditing, this.__lastSelected = this.selected
            }
        },
        isTripleClick: function(t) {
            return this.__newClickTime - this.__lastClickTime < 500 && this.__lastClickTime - this.__lastLastClickTime < 500 && this.__lastPointer.x === t.x && this.__lastPointer.y === t.y
        },
        _stopEvent: function(t) {
            t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation()
        },
        initCursorSelectionHandlers: function() {
            this.initMousedownHandler(), this.initMouseupHandler(), this.initClicks()
        },
        initClicks: function() {
            this.on("mousedblclick", function(t) {
                this.selectWord(this.getSelectionStartFromPointer(t.e))
            }), this.on("tripleclick", function(t) {
                this.selectLine(this.getSelectionStartFromPointer(t.e))
            })
        },
        _mouseDownHandler: function(t) {
            !this.canvas || !this.editable || t.e.button && 1 !== t.e.button || (this.__isMousedown = !0, this.selected && this.setCursorByClick(t.e), this.isEditing && (this.__selectionStartOnMouseDown = this.selectionStart, this.selectionStart === this.selectionEnd && this.abortCursorAnimation(), this.renderCursorOrSelection()))
        },
        _mouseDownHandlerBefore: function(t) {
            !this.canvas || !this.editable || t.e.button && 1 !== t.e.button || this === this.canvas._activeObject && (this.selected = !0)
        },
        initMousedownHandler: function() {
            this.on("mousedown", this._mouseDownHandler), this.on("mousedown:before", this._mouseDownHandlerBefore)
        },
        initMouseupHandler: function() {
            this.on("mouseup", this.mouseUpHandler)
        },
        mouseUpHandler: function(t) {
            this.__isMousedown = !1, !this.editable || t.transform && t.transform.actionPerformed || t.e.button && 1 !== t.e.button || (this.__lastSelected && !this.__corner && (this.enterEditing(t.e), this.selectionStart === this.selectionEnd ? this.initDelayedCursor(!0) : this.renderCursorOrSelection()), this.selected = !0)
        },
        setCursorByClick: function(t) {
            var e = this.getSelectionStartFromPointer(t),
                i = this.selectionStart,
                r = this.selectionEnd;
            t.shiftKey ? this.setSelectionStartEndWithShift(i, r, e) : (this.selectionStart = e, this.selectionEnd = e), this.isEditing && (this._fireSelectionChanged(), this._updateTextarea())
        },
        getSelectionStartFromPointer: function(t) {
            for (var e = this.getLocalPointer(t), i = 0, r = 0, n = 0, s = 0, o = 0, a = 0, h = this._textLines.length; a < h && n <= e.y; a++) n += this.getHeightOfLine(a) * this.scaleY, 0 < (o = a) && (s += this._textLines[a - 1].length + 1);
            r = this._getLineLeftOffset(o) * this.scaleX;
            for (var c = 0, l = this._textLines[o].length; c < l && (i = r, (r += this.__charBounds[o][c].kernedWidth * this.scaleX) <= e.x); c++) s++;
            return this._getNewSelectionStartFromOffset(e, i, r, s, l)
        },
        _getNewSelectionStartFromOffset: function(t, e, i, r, n) {
            var s = t.x - e,
                o = i - t.x,
                a = r + (s < o || o < 0 ? 0 : 1);
            return this.flipX && (a = n - a), a > this._text.length && (a = this._text.length), a
        }
    }), fabric.util.object.extend(fabric.IText.prototype, {
        initHiddenTextarea: function() {
            this.hiddenTextarea = fabric.document.createElement("textarea"), this.hiddenTextarea.setAttribute("autocapitalize", "off"), this.hiddenTextarea.setAttribute("autocorrect", "off"), this.hiddenTextarea.setAttribute("autocomplete", "off"), this.hiddenTextarea.setAttribute("spellcheck", "false"), this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea", ""), this.hiddenTextarea.setAttribute("wrap", "off");
            var t = this._calcTextareaPosition();
            this.hiddenTextarea.style.cssText = "position: absolute; top: " + t.top + "; left: " + t.left + "; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; line-height: 1px; paddingtop: " + t.fontSize + ";", fabric.document.body.appendChild(this.hiddenTextarea), fabric.util.addListener(this.hiddenTextarea, "keydown", this.onKeyDown.bind(this)), fabric.util.addListener(this.hiddenTextarea, "keyup", this.onKeyUp.bind(this)), fabric.util.addListener(this.hiddenTextarea, "input", this.onInput.bind(this)), fabric.util.addListener(this.hiddenTextarea, "copy", this.copy.bind(this)), fabric.util.addListener(this.hiddenTextarea, "cut", this.copy.bind(this)), fabric.util.addListener(this.hiddenTextarea, "paste", this.paste.bind(this)), fabric.util.addListener(this.hiddenTextarea, "compositionstart", this.onCompositionStart.bind(this)), fabric.util.addListener(this.hiddenTextarea, "compositionupdate", this.onCompositionUpdate.bind(this)), fabric.util.addListener(this.hiddenTextarea, "compositionend", this.onCompositionEnd.bind(this)), !this._clickHandlerInitialized && this.canvas && (fabric.util.addListener(this.canvas.upperCanvasEl, "click", this.onClick.bind(this)), this._clickHandlerInitialized = !0)
        },
        keysMap: {
            9: "exitEditing",
            27: "exitEditing",
            33: "moveCursorUp",
            34: "moveCursorDown",
            35: "moveCursorRight",
            36: "moveCursorLeft",
            37: "moveCursorLeft",
            38: "moveCursorUp",
            39: "moveCursorRight",
            40: "moveCursorDown"
        },
        ctrlKeysMapUp: {
            67: "copy",
            88: "cut"
        },
        ctrlKeysMapDown: {
            65: "selectAll"
        },
        onClick: function() {
            this.hiddenTextarea && this.hiddenTextarea.focus()
        },
        onKeyDown: function(t) {
            if (this.isEditing && !this.inCompositionMode) {
                if (t.keyCode in this.keysMap) this[this.keysMap[t.keyCode]](t);
                else {
                    if (!(t.keyCode in this.ctrlKeysMapDown && (t.ctrlKey || t.metaKey))) return;
                    this[this.ctrlKeysMapDown[t.keyCode]](t)
                }
                t.stopImmediatePropagation(), t.preventDefault(), 33 <= t.keyCode && t.keyCode <= 40 ? (this.clearContextTop(), this.renderCursorOrSelection()) : this.canvas && this.canvas.requestRenderAll()
            }
        },
        onKeyUp: function(t) {
            !this.isEditing || this._copyDone || this.inCompositionMode ? this._copyDone = !1 : t.keyCode in this.ctrlKeysMapUp && (t.ctrlKey || t.metaKey) && (this[this.ctrlKeysMapUp[t.keyCode]](t), t.stopImmediatePropagation(), t.preventDefault(), this.canvas && this.canvas.requestRenderAll())
        },
        onInput: function(t) {
            var e = this.fromPaste;
            if (this.fromPaste = !1, t && t.stopPropagation(), this.isEditing) {
                var i, r, n = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,
                    s = this._text.length,
                    o = n.length,
                    a = o - s;
                if ("" === this.hiddenTextarea.value) return this.styles = {}, this.updateFromTextArea(), this.fire("changed"), void(this.canvas && (this.canvas.fire("text:changed", {
                    target: this
                }), this.canvas.requestRenderAll()));
                var h = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value),
                    c = this.selectionStart > h.selectionStart;
                this.selectionStart !== this.selectionEnd ? (i = this._text.slice(this.selectionStart, this.selectionEnd), a += this.selectionEnd - this.selectionStart) : o < s && (i = c ? this._text.slice(this.selectionEnd + a, this.selectionEnd) : this._text.slice(this.selectionStart, this.selectionStart - a)), r = n.slice(h.selectionEnd - a, h.selectionEnd), i && i.length && (this.selectionStart !== this.selectionEnd ? this.removeStyleFromTo(this.selectionStart, this.selectionEnd) : c ? this.removeStyleFromTo(this.selectionEnd - i.length, this.selectionEnd) : this.removeStyleFromTo(this.selectionEnd, this.selectionEnd + i.length)), r.length && (e && r.join("") === fabric.copiedText ? this.insertNewStyleBlock(r, this.selectionStart, fabric.copiedTextStyle) : this.insertNewStyleBlock(r, this.selectionStart)), this.updateFromTextArea(), this.fire("changed"), this.canvas && (this.canvas.fire("text:changed", {
                    target: this
                }), this.canvas.requestRenderAll())
            }
        },
        onCompositionStart: function() {
            this.inCompositionMode = !0
        },
        onCompositionEnd: function() {
            this.inCompositionMode = !1
        },
        onCompositionUpdate: function(t) {
            this.compositionStart = t.target.selectionStart, this.compositionEnd = t.target.selectionEnd, this.updateTextareaPosition()
        },
        copy: function() {
            this.selectionStart !== this.selectionEnd && (fabric.copiedText = this.getSelectedText(), fabric.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd, !0), this._copyDone = !0)
        },
        paste: function() {
            this.fromPaste = !0
        },
        _getClipboardData: function(t) {
            return t && t.clipboardData || fabric.window.clipboardData
        },
        _getWidthBeforeCursor: function(t, e) {
            var i, r = this._getLineLeftOffset(t);
            return 0 < e && (r += (i = this.__charBounds[t][e - 1]).left + i.width), r
        },
        getDownCursorOffset: function(t, e) {
            var i = this._getSelectionForOffset(t, e),
                r = this.get2DCursorLocation(i),
                n = r.lineIndex;
            if (n === this._textLines.length - 1 || t.metaKey || 34 === t.keyCode) return this._text.length - i;
            var s = r.charIndex,
                o = this._getWidthBeforeCursor(n, s),
                a = this._getIndexOnLine(n + 1, o);
            return this._textLines[n].slice(s).length + a + 2
        },
        _getSelectionForOffset: function(t, e) {
            return t.shiftKey && this.selectionStart !== this.selectionEnd && e ? this.selectionEnd : this.selectionStart
        },
        getUpCursorOffset: function(t, e) {
            var i = this._getSelectionForOffset(t, e),
                r = this.get2DCursorLocation(i),
                n = r.lineIndex;
            if (0 === n || t.metaKey || 33 === t.keyCode) return -i;
            var s = r.charIndex,
                o = this._getWidthBeforeCursor(n, s),
                a = this._getIndexOnLine(n - 1, o),
                h = this._textLines[n].slice(0, s);
            return -this._textLines[n - 1].length + a - h.length
        },
        _getIndexOnLine: function(t, e) {
            for (var i, r, n = this._textLines[t], s = this._getLineLeftOffset(t), o = 0, a = 0, h = n.length; a < h; a++)
                if (e < (s += i = this.__charBounds[t][a].width)) {
                    r = !0;
                    var c = s - i,
                        l = s,
                        u = Math.abs(c - e);
                    o = Math.abs(l - e) < u ? a : a - 1;
                    break
                } return r || (o = n.length - 1), o
        },
        moveCursorDown: function(t) {
            this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorUpOrDown("Down", t)
        },
        moveCursorUp: function(t) {
            0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorUpOrDown("Up", t)
        },
        _moveCursorUpOrDown: function(t, e) {
            var i = this["get" + t + "CursorOffset"](e, "right" === this._selectionDirection);
            e.shiftKey ? this.moveCursorWithShift(i) : this.moveCursorWithoutShift(i), 0 !== i && (this.setSelectionInBoundaries(), this.abortCursorAnimation(), this._currentCursorOpacity = 1, this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea())
        },
        moveCursorWithShift: function(t) {
            var e = "left" === this._selectionDirection ? this.selectionStart + t : this.selectionEnd + t;
            return this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, e), 0 !== t
        },
        moveCursorWithoutShift: function(t) {
            return t < 0 ? (this.selectionStart += t, this.selectionEnd = this.selectionStart) : (this.selectionEnd += t, this.selectionStart = this.selectionEnd), 0 !== t
        },
        moveCursorLeft: function(t) {
            0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorLeftOrRight("Left", t)
        },
        _move: function(t, e, i) {
            var r;
            if (t.altKey) r = this["findWordBoundary" + i](this[e]);
            else {
                if (!t.metaKey && 35 !== t.keyCode && 36 !== t.keyCode) return this[e] += "Left" === i ? -1 : 1, !0;
                r = this["findLineBoundary" + i](this[e])
            }
            if (void 0 !== typeof r && this[e] !== r) return this[e] = r, !0
        },
        _moveLeft: function(t, e) {
            return this._move(t, e, "Left")
        },
        _moveRight: function(t, e) {
            return this._move(t, e, "Right")
        },
        moveCursorLeftWithoutShift: function(t) {
            var e = !0;
            return this._selectionDirection = "left", this.selectionEnd === this.selectionStart && 0 !== this.selectionStart && (e = this._moveLeft(t, "selectionStart")), this.selectionEnd = this.selectionStart, e
        },
        moveCursorLeftWithShift: function(t) {
            return "right" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveLeft(t, "selectionEnd") : 0 !== this.selectionStart ? (this._selectionDirection = "left", this._moveLeft(t, "selectionStart")) : void 0
        },
        moveCursorRight: function(t) {
            this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorLeftOrRight("Right", t)
        },
        _moveCursorLeftOrRight: function(t, e) {
            var i = "moveCursor" + t + "With";
            this._currentCursorOpacity = 1, e.shiftKey ? i += "Shift" : i += "outShift", this[i](e) && (this.abortCursorAnimation(), this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea())
        },
        moveCursorRightWithShift: function(t) {
            return "left" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveRight(t, "selectionStart") : this.selectionEnd !== this._text.length ? (this._selectionDirection = "right", this._moveRight(t, "selectionEnd")) : void 0
        },
        moveCursorRightWithoutShift: function(t) {
            var e = !0;
            return this._selectionDirection = "right", this.selectionStart === this.selectionEnd ? (e = this._moveRight(t, "selectionStart"), this.selectionEnd = this.selectionStart) : this.selectionStart = this.selectionEnd, e
        },
        removeChars: function(t, e) {
            void 0 === e && (e = t + 1), this.removeStyleFromTo(t, e), this._text.splice(t, e - t), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles()
        },
        insertChars: function(t, e, i, r) {
            void 0 === r && (r = i), i < r && this.removeStyleFromTo(i, r);
            var n = fabric.util.string.graphemeSplit(t);
            this.insertNewStyleBlock(n, i, e), this._text = [].concat(this._text.slice(0, i), n, this._text.slice(r)), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles()
        }
    }),
    function() {
        var l = fabric.util.toFixed,
            u = /  +/g;
        fabric.util.object.extend(fabric.Text.prototype, {
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = this._getSVGLeftTopOffsets(),
                    r = this._getSVGTextAndBg(i.textTop, i.textLeft);
                return this._wrapSVGTextAndBg(e, r), t ? t(e.join("")) : e.join("")
            },
            _getSVGLeftTopOffsets: function() {
                return {
                    textLeft: -this.width / 2,
                    textTop: -this.height / 2,
                    lineTop: this.getHeightOfLine(0)
                }
            },
            _wrapSVGTextAndBg: function(t, e) {
                var i = this.getSvgFilter(),
                    r = "" === i ? "" : ' style="' + i + '"',
                    n = this.getSvgTextDecoration(this);
                t.push("\t<g ", this.getSvgId(), 'transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"', r, ">\n", e.textBgRects.join(""), '\t\t<text xml:space="preserve" ', this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "", this.fontSize ? 'font-size="' + this.fontSize + '" ' : "", this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "", this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "", n ? 'text-decoration="' + n + '" ' : "", 'style="', this.getSvgStyles(!0), '"', this.addPaintOrder(), " >", e.textSpans.join(""), "</text>\n", "\t</g>\n")
            },
            _getSVGTextAndBg: function(t, e) {
                var i, r = [],
                    n = [],
                    s = t;
                this._setSVGBg(n);
                for (var o = 0, a = this._textLines.length; o < a; o++) i = this._getLineLeftOffset(o), (this.textBackgroundColor || this.styleHas("textBackgroundColor", o)) && this._setSVGTextLineBg(n, o, e + i, s), this._setSVGTextLineText(r, o, e + i, s), s += this.getHeightOfLine(o);
                return {
                    textSpans: r,
                    textBgRects: n
                }
            },
            _createTextCharSpan: function(t, e, i, r) {
                var n = t !== t.trim() || t.match(u),
                    s = this.getSvgSpanStyles(e, n),
                    o = s ? 'style="' + s + '"' : "",
                    a = e.deltaY,
                    h = "",
                    c = fabric.Object.NUM_FRACTION_DIGITS;
                return a && (h = ' dy="' + l(a, c) + '" '), ['<tspan x="', l(i, c), '" y="', l(r, c), '" ', h, o, ">", fabric.util.string.escapeXml(t), "</tspan>"].join("")
            },
            _setSVGTextLineText: function(t, e, i, r) {
                var n, s, o, a, h, c = this.getHeightOfLine(e),
                    l = -1 !== this.textAlign.indexOf("justify"),
                    u = "",
                    f = 0,
                    d = this._textLines[e];
                r += c * (1 - this._fontSizeFraction) / this.lineHeight;
                for (var g = 0, p = d.length - 1; g <= p; g++) h = g === p || this.charSpacing, u += d[g], o = this.__charBounds[e][g], 0 === f ? (i += o.kernedWidth - o.width, f += o.width) : f += o.kernedWidth, l && !h && this._reSpaceAndTab.test(d[g]) && (h = !0), h || (n = n || this.getCompleteStyleDeclaration(e, g), s = this.getCompleteStyleDeclaration(e, g + 1), h = this._hasStyleChangedForSvg(n, s)), h && (a = this._getStyleDeclaration(e, g) || {}, t.push(this._createTextCharSpan(u, a, i, r)), u = "", n = s, i += f, f = 0)
            },
            _pushTextBgRect: function(t, e, i, r, n, s) {
                var o = fabric.Object.NUM_FRACTION_DIGITS;
                t.push("\t\t<rect ", this._getFillAttributes(e), ' x="', l(i, o), '" y="', l(r, o), '" width="', l(n, o), '" height="', l(s, o), '"></rect>\n')
            },
            _setSVGTextLineBg: function(t, e, i, r) {
                for (var n, s, o = this._textLines[e], a = this.getHeightOfLine(e) / this.lineHeight, h = 0, c = 0, l = this.getValueOfPropertyAt(e, 0, "textBackgroundColor"), u = 0, f = o.length; u < f; u++) n = this.__charBounds[e][u], (s = this.getValueOfPropertyAt(e, u, "textBackgroundColor")) !== l ? (l && this._pushTextBgRect(t, l, i + c, r, h, a), c = n.left, h = n.width, l = s) : h += n.kernedWidth;
                s && this._pushTextBgRect(t, s, i + c, r, h, a)
            },
            _getFillAttributes: function(t) {
                var e = t && "string" == typeof t ? new fabric.Color(t) : "";
                return e && e.getSource() && 1 !== e.getAlpha() ? 'opacity="' + e.getAlpha() + '" fill="' + e.setAlpha(1).toRgb() + '"' : 'fill="' + t + '"'
            },
            _getSVGLineTopOffset: function(t) {
                for (var e, i = 0, r = 0; r < t; r++) i += this.getHeightOfLine(r);
                return e = this.getHeightOfLine(r), {
                    lineTop: i,
                    offset: (this._fontSizeMult - this._fontSizeFraction) * e / (this.lineHeight * this._fontSizeMult)
                }
            },
            getSvgStyles: function(t) {
                return fabric.Object.prototype.getSvgStyles.call(this, t) + " white-space: pre;"
            }
        })
    }(),
    function(t) {
        "use strict";
        var v = t.fabric || (t.fabric = {});
        v.Textbox = v.util.createClass(v.IText, v.Observable, {
            type: "textbox",
            minWidth: 20,
            dynamicMinWidth: 2,
            __cachedLines: null,
            lockScalingFlip: !0,
            noScaleCache: !1,
            _dimensionAffectingProps: v.Text.prototype._dimensionAffectingProps.concat("width"),
            initDimensions: function() {
                this.__skipDimension || (this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this._clearCache(), this.dynamicMinWidth = 0, this._styleMap = this._generateStyleMap(this._splitText()), this.dynamicMinWidth > this.width && this._set("width", this.dynamicMinWidth), -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(), this.height = this.calcTextHeight(), this.saveState({
                    propertySet: "_dimensionAffectingProps"
                }))
            },
            _generateStyleMap: function(t) {
                for (var e = 0, i = 0, r = 0, n = {}, s = 0; s < t.graphemeLines.length; s++) "\n" === t.graphemeText[r] && 0 < s ? (i = 0, r++, e++) : this._reSpaceAndTab.test(t.graphemeText[r]) && 0 < s && (i++, r++), n[s] = {
                    line: e,
                    offset: i
                }, r += t.graphemeLines[s].length, i += t.graphemeLines[s].length;
                return n
            },
            styleHas: function(t, e) {
                if (this._styleMap && !this.isWrapping) {
                    var i = this._styleMap[e];
                    i && (e = i.line)
                }
                return v.Text.prototype.styleHas.call(this, t, e)
            },
            isEmptyStyles: function(t) {
                var e, i, r = 0,
                    n = !1,
                    s = this._styleMap[t],
                    o = this._styleMap[t + 1];
                for (var a in s && (t = s.line, r = s.offset), o && (n = o.line === t, e = o.offset), i = void 0 === t ? this.styles : {
                        line: this.styles[t]
                    })
                    for (var h in i[a])
                        if (r <= h && (!n || h < e))
                            for (var c in i[a][h]) return !1;
                return !0
            },
            _getStyleDeclaration: function(t, e) {
                if (this._styleMap && !this.isWrapping) {
                    var i = this._styleMap[t];
                    if (!i) return null;
                    t = i.line, e = i.offset + e
                }
                return this.callSuper("_getStyleDeclaration", t, e)
            },
            _setStyleDeclaration: function(t, e, i) {
                var r = this._styleMap[t];
                t = r.line, e = r.offset + e, this.styles[t][e] = i
            },
            _deleteStyleDeclaration: function(t, e) {
                var i = this._styleMap[t];
                t = i.line, e = i.offset + e, delete this.styles[t][e]
            },
            _getLineStyle: function(t) {
                var e = this._styleMap[t];
                return this.styles[e.line]
            },
            _setLineStyle: function(t, e) {
                var i = this._styleMap[t];
                this.styles[i.line] = e
            },
            _deleteLineStyle: function(t) {
                var e = this._styleMap[t];
                delete this.styles[e.line]
            },
            _wrapText: function(t, e) {
                var i, r = [];
                for (this.isWrapping = !0, i = 0; i < t.length; i++) r = r.concat(this._wrapLine(t[i], i, e));
                return this.isWrapping = !1, r
            },
            _measureWord: function(t, e, i) {
                var r, n = 0;
                i = i || 0;
                for (var s = 0, o = t.length; s < o; s++) {
                    n += this._getGraphemeBox(t[s], e, s + i, r, !0).kernedWidth, r = t[s]
                }
                return n
            },
            _wrapLine: function(t, e, i, r) {
                var n = 0,
                    s = [],
                    o = [],
                    a = t.split(this._reSpaceAndTab),
                    h = "",
                    c = 0,
                    l = 0,
                    u = 0,
                    f = 0,
                    d = !0,
                    g = this._getWidthOfCharSpacing();
                i -= r = r || 0;
                for (var p = 0; p < a.length; p++) h = v.util.string.graphemeSplit(a[p]), l = this._measureWord(h, e, c), c += h.length, i <= (n += u + l - g) && !d ? (s.push(o), o = [], n = l, d = !0) : n += g, d || o.push(" "), o = o.concat(h), u = this._measureWord([" "], e, c), c++, d = !1, f < l && (f = l);
                return p && s.push(o), f + r > this.dynamicMinWidth && (this.dynamicMinWidth = f - g + r), s
            },
            isEndOfWrapping: function(t) {
                return !this._styleMap[t + 1] || this._styleMap[t + 1].line !== this._styleMap[t].line
            },
            _splitTextIntoLines: function(t) {
                for (var e = v.Text.prototype._splitTextIntoLines.call(this, t), i = this._wrapText(e.lines, this.width), r = new Array(i.length), n = 0; n < i.length; n++) r[n] = i[n].join("");
                return e.lines = r, e.graphemeLines = i, e
            },
            getMinWidth: function() {
                return Math.max(this.minWidth, this.dynamicMinWidth)
            },
            toObject: function(t) {
                return this.callSuper("toObject", ["minWidth"].concat(t))
            }
        }), v.Textbox.fromObject = function(t, e) {
            return v.Object._fromObject("Textbox", t, e, "text")
        }
    }("undefined" != typeof exports ? exports : this),
    function() {
        var l = fabric.Canvas.prototype._setObjectScale;
        fabric.Canvas.prototype._setObjectScale = function(t, e, i, r, n, s, o) {
            var a = e.target;
            if (!("x" === n && a instanceof fabric.Textbox)) return l.call(fabric.Canvas.prototype, t, e, i, r, n, s, o);
            var h = a._getTransformedDimensions().x,
                c = a.width * (t.x / h);
            return c >= a.getMinWidth() ? (a.set("width", c), !0) : void 0
        }, fabric.util.object.extend(fabric.Textbox.prototype, {
            _removeExtraneousStyles: function() {
                for (var t in this._styleMap) this._textLines[t] || delete this.styles[this._styleMap[t].line]
            }
        })
    }();
/* tooltipster v4.1.6 */
! function(a, b) {
    "function" == typeof define && define.amd ? define(["jquery"], function(a) {
        return b(a)
    }) : "object" == typeof exports ? module.exports = b(require("jquery")) : b(jQuery)
}(this, function(a) {
    function b(a) {
        this.$container, this.constraints = null, this.__$tooltip, this.__init(a)
    }

    function c(b, c) {
        var d = !0;
        return a.each(b, function(a, e) {
            return void 0 === c[a] || b[a] !== c[a] ? (d = !1, !1) : void 0
        }), d
    }

    function d(b) {
        var c = b.attr("id"),
            d = c ? h.window.document.getElementById(c) : null;
        return d ? d === b[0] : a.contains(h.window.document.body, b[0])
    }

    function e() {
        if (!g) return !1;
        var a = g.document.body || g.document.documentElement,
            b = a.style,
            c = "transition",
            d = ["Moz", "Webkit", "Khtml", "O", "ms"];
        if ("string" == typeof b[c]) return !0;
        c = c.charAt(0).toUpperCase() + c.substr(1);
        for (var e = 0; e < d.length; e++)
            if ("string" == typeof b[d[e] + c]) return !0;
        return !1
    }
    var f = {
            animation: "fade",
            animationDuration: 350,
            content: null,
            contentAsHTML: !1,
            contentCloning: !1,
            debug: !0,
            delay: 300,
            delayTouch: [300, 500],
            functionInit: null,
            functionBefore: null,
            functionReady: null,
            functionAfter: null,
            functionFormat: null,
            IEmin: 6,
            interactive: !1,
            multiple: !1,
            parent: "body",
            plugins: ["sideTip"],
            repositionOnScroll: !1,
            restoration: "none",
            selfDestruction: !0,
            theme: [],
            timer: 0,
            trackerInterval: 500,
            trackOrigin: !1,
            trackTooltip: !1,
            trigger: "hover",
            triggerClose: {
                click: !1,
                mouseleave: !1,
                originClick: !1,
                scroll: !1,
                tap: !1,
                touchleave: !1
            },
            triggerOpen: {
                click: !1,
                mouseenter: !1,
                tap: !1,
                touchstart: !1
            },
            updateAnimation: "rotate",
            zIndex: 9999999
        },
        g = "undefined" != typeof window ? window : null,
        h = {
            hasTouchCapability: !(!g || !("ontouchstart" in g || g.DocumentTouch && g.document instanceof g.DocumentTouch || g.navigator.maxTouchPoints)),
            hasTransitions: e(),
            IE: !1,
            semVer: "4.1.6",
            window: g
        },
        i = function() {
            this.__$emitterPrivate = a({}), this.__$emitterPublic = a({}), this.__instancesLatestArr = [], this.__plugins = {}, this._env = h
        };
    i.prototype = {
        __bridge: function(b, c, d) {
            if (!c[d]) {
                var e = function() {};
                e.prototype = b;
                var g = new e;
                g.__init && g.__init(c), a.each(b, function(a, b) {
                    0 != a.indexOf("__") && (c[a] ? f.debug && console.log("The " + a + " method of the " + d + " plugin conflicts with another plugin or native methods") : (c[a] = function() {
                        return g[a].apply(g, Array.prototype.slice.apply(arguments))
                    }, c[a].bridged = g))
                }), c[d] = g
            }
            return this
        },
        __setWindow: function(a) {
            return h.window = a, this
        },
        _getRuler: function(a) {
            return new b(a)
        },
        _off: function() {
            return this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this
        },
        _on: function() {
            return this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this
        },
        _one: function() {
            return this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this
        },
        _plugin: function(b) {
            var c = this;
            if ("string" == typeof b) {
                var d = b,
                    e = null;
                return d.indexOf(".") > 0 ? e = c.__plugins[d] : a.each(c.__plugins, function(a, b) {
                    return b.name.substring(b.name.length - d.length - 1) == "." + d ? (e = b, !1) : void 0
                }), e
            }
            if (b.name.indexOf(".") < 0) throw new Error("Plugins must be namespaced");
            return c.__plugins[b.name] = b, b.core && c.__bridge(b.core, c, b.name), this
        },
        _trigger: function() {
            var a = Array.prototype.slice.apply(arguments);
            return "string" == typeof a[0] && (a[0] = {
                type: a[0]
            }), this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, a), this.__$emitterPublic.trigger.apply(this.__$emitterPublic, a), this
        },
        instances: function(b) {
            var c = [],
                d = b || ".tooltipstered";
            return a(d).each(function() {
                var b = a(this),
                    d = b.data("tooltipster-ns");
                d && a.each(d, function(a, d) {
                    c.push(b.data(d))
                })
            }), c
        },
        instancesLatest: function() {
            return this.__instancesLatestArr
        },
        off: function() {
            return this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this
        },
        on: function() {
            return this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this
        },
        one: function() {
            return this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this
        },
        origins: function(b) {
            var c = b ? b + " " : "";
            return a(c + ".tooltipstered").toArray()
        },
        setDefaults: function(b) {
            return a.extend(f, b), this
        },
        triggerHandler: function() {
            return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this
        }
    }, a.tooltipster = new i, a.Tooltipster = function(b, c) {
        this.__callbacks = {
            close: [],
            open: []
        }, this.__closingTime, this.__Content, this.__contentBcr, this.__destroyed = !1, this.__destroying = !1, this.__$emitterPrivate = a({}), this.__$emitterPublic = a({}), this.__enabled = !0, this.__garbageCollector, this.__Geometry, this.__lastPosition, this.__namespace = "tooltipster-" + Math.round(1e6 * Math.random()), this.__options, this.__$originParents, this.__pointerIsOverOrigin = !1, this.__previousThemes = [], this.__state = "closed", this.__timeouts = {
            close: [],
            open: null
        }, this.__touchEvents = [], this.__tracker = null, this._$origin, this._$tooltip, this.__init(b, c)
    }, a.Tooltipster.prototype = {
        __init: function(b, c) {
            var d = this;
            if (d._$origin = a(b), d.__options = a.extend(!0, {}, f, c), d.__optionsFormat(), !h.IE || h.IE >= d.__options.IEmin) {
                var e = null;
                if (void 0 === d._$origin.data("tooltipster-initialTitle") && (e = d._$origin.attr("title"), void 0 === e && (e = null), d._$origin.data("tooltipster-initialTitle", e)), null !== d.__options.content) d.__contentSet(d.__options.content);
                else {
                    var g, i = d._$origin.attr("data-tooltip-content");
                    i && (g = a(i)), g && g[0] ? d.__contentSet(g.first()) : d.__contentSet(e)
                }
                d._$origin.removeAttr("title").addClass("tooltipstered"), d.__prepareOrigin(), d.__prepareGC(), a.each(d.__options.plugins, function(a, b) {
                    d._plug(b)
                }), h.hasTouchCapability && a("body").on("touchmove." + d.__namespace + "-triggerOpen", function(a) {
                    d._touchRecordEvent(a)
                }), d._on("created", function() {
                    d.__prepareTooltip()
                })._on("repositioned", function(a) {
                    d.__lastPosition = a.position
                })
            } else d.__options.disabled = !0
        },
        __contentInsert: function() {
            var a = this,
                b = a._$tooltip.find(".tooltipster-content"),
                c = a.__Content,
                d = function(a) {
                    c = a
                };
            return a._trigger({
                type: "format",
                content: a.__Content,
                format: d
            }), a.__options.functionFormat && (c = a.__options.functionFormat.call(a, a, {
                origin: a._$origin[0]
            }, a.__Content)), "string" != typeof c || a.__options.contentAsHTML ? b.empty().append(c) : b.text(c), a
        },
        __contentSet: function(b) {
            return b instanceof a && this.__options.contentCloning && (b = b.clone(!0)), this.__Content = b, this._trigger({
                type: "updated",
                content: b
            }), this
        },
        __destroyError: function() {
            throw new Error("This tooltip has been destroyed and cannot execute your method call.")
        },
        __geometry: function() {
            var b = this,
                c = b._$origin,
                d = b._$origin.is("area");
            if (d) {
                var e = b._$origin.parent().attr("name");
                c = a('img[usemap="#' + e + '"]')
            }
            var f = c[0].getBoundingClientRect(),
                g = a(h.window.document),
                i = a(h.window),
                j = c,
                k = {
                    available: {
                        document: null,
                        window: null
                    },
                    document: {
                        size: {
                            height: g.height(),
                            width: g.width()
                        }
                    },
                    window: {
                        scroll: {
                            left: h.window.scrollX || h.window.document.documentElement.scrollLeft,
                            top: h.window.scrollY || h.window.document.documentElement.scrollTop
                        },
                        size: {
                            height: i.height(),
                            width: i.width()
                        }
                    },
                    origin: {
                        fixedLineage: !1,
                        offset: {},
                        size: {
                            height: f.bottom - f.top,
                            width: f.right - f.left
                        },
                        usemapImage: d ? c[0] : null,
                        windowOffset: {
                            bottom: f.bottom,
                            left: f.left,
                            right: f.right,
                            top: f.top
                        }
                    }
                };
            if (d) {
                var l = b._$origin.attr("shape"),
                    m = b._$origin.attr("coords");
                if (m && (m = m.split(","), a.map(m, function(a, b) {
                        m[b] = parseInt(a)
                    })), "default" != l) switch (l) {
                    case "circle":
                        var n = m[0],
                            o = m[1],
                            p = m[2],
                            q = o - p,
                            r = n - p;
                        k.origin.size.height = 2 * p, k.origin.size.width = k.origin.size.height, k.origin.windowOffset.left += r, k.origin.windowOffset.top += q;
                        break;
                    case "rect":
                        var s = m[0],
                            t = m[1],
                            u = m[2],
                            v = m[3];
                        k.origin.size.height = v - t, k.origin.size.width = u - s, k.origin.windowOffset.left += s, k.origin.windowOffset.top += t;
                        break;
                    case "poly":
                        for (var w = 0, x = 0, y = 0, z = 0, A = "even", B = 0; B < m.length; B++) {
                            var C = m[B];
                            "even" == A ? (C > y && (y = C, 0 === B && (w = y)), w > C && (w = C), A = "odd") : (C > z && (z = C, 1 == B && (x = z)), x > C && (x = C), A = "even")
                        }
                        k.origin.size.height = z - x, k.origin.size.width = y - w, k.origin.windowOffset.left += w, k.origin.windowOffset.top += x
                }
            }
            var D = function(a) {
                k.origin.size.height = a.height, k.origin.windowOffset.left = a.left, k.origin.windowOffset.top = a.top, k.origin.size.width = a.width
            };
            for (b._trigger({
                    type: "geometry",
                    edit: D,
                    geometry: {
                        height: k.origin.size.height,
                        left: k.origin.windowOffset.left,
                        top: k.origin.windowOffset.top,
                        width: k.origin.size.width
                    }
                }), k.origin.windowOffset.right = k.origin.windowOffset.left + k.origin.size.width, k.origin.windowOffset.bottom = k.origin.windowOffset.top + k.origin.size.height, k.origin.offset.left = k.origin.windowOffset.left + k.window.scroll.left, k.origin.offset.top = k.origin.windowOffset.top + k.window.scroll.top, k.origin.offset.bottom = k.origin.offset.top + k.origin.size.height, k.origin.offset.right = k.origin.offset.left + k.origin.size.width, k.available.document = {
                    bottom: {
                        height: k.document.size.height - k.origin.offset.bottom,
                        width: k.document.size.width
                    },
                    left: {
                        height: k.document.size.height,
                        width: k.origin.offset.left
                    },
                    right: {
                        height: k.document.size.height,
                        width: k.document.size.width - k.origin.offset.right
                    },
                    top: {
                        height: k.origin.offset.top,
                        width: k.document.size.width
                    }
                }, k.available.window = {
                    bottom: {
                        height: Math.max(k.window.size.height - Math.max(k.origin.windowOffset.bottom, 0), 0),
                        width: k.window.size.width
                    },
                    left: {
                        height: k.window.size.height,
                        width: Math.max(k.origin.windowOffset.left, 0)
                    },
                    right: {
                        height: k.window.size.height,
                        width: Math.max(k.window.size.width - Math.max(k.origin.windowOffset.right, 0), 0)
                    },
                    top: {
                        height: Math.max(k.origin.windowOffset.top, 0),
                        width: k.window.size.width
                    }
                };
                "html" != j[0].tagName.toLowerCase();) {
                if ("fixed" == j.css("position")) {
                    k.origin.fixedLineage = !0;
                    break
                }
                j = j.parent()
            }
            return k
        },
        __optionsFormat: function() {
            return "number" == typeof this.__options.animationDuration && (this.__options.animationDuration = [this.__options.animationDuration, this.__options.animationDuration]), "number" == typeof this.__options.delay && (this.__options.delay = [this.__options.delay, this.__options.delay]), "number" == typeof this.__options.delayTouch && (this.__options.delayTouch = [this.__options.delayTouch, this.__options.delayTouch]), "string" == typeof this.__options.theme && (this.__options.theme = [this.__options.theme]), "string" == typeof this.__options.parent && (this.__options.parent = a(this.__options.parent)), "hover" == this.__options.trigger ? (this.__options.triggerOpen = {
                mouseenter: !0,
                touchstart: !0
            }, this.__options.triggerClose = {
                mouseleave: !0,
                originClick: !0,
                touchleave: !0
            }) : "click" == this.__options.trigger && (this.__options.triggerOpen = {
                click: !0,
                tap: !0
            }, this.__options.triggerClose = {
                click: !0,
                tap: !0
            }), this._trigger("options"), this
        },
        __prepareGC: function() {
            var b = this;
            return b.__options.selfDestruction ? b.__garbageCollector = setInterval(function() {
                var c = (new Date).getTime();
                b.__touchEvents = a.grep(b.__touchEvents, function(a, b) {
                    return c - a.time > 6e4
                }), d(b._$origin) || b.destroy()
            }, 2e4) : clearInterval(b.__garbageCollector), b
        },
        __prepareOrigin: function() {
            var a = this;
            if (a._$origin.off("." + a.__namespace + "-triggerOpen"), h.hasTouchCapability && a._$origin.on("touchstart." + a.__namespace + "-triggerOpen touchend." + a.__namespace + "-triggerOpen touchcancel." + a.__namespace + "-triggerOpen", function(b) {
                    a._touchRecordEvent(b)
                }), a.__options.triggerOpen.click || a.__options.triggerOpen.tap && h.hasTouchCapability) {
                var b = "";
                a.__options.triggerOpen.click && (b += "click." + a.__namespace + "-triggerOpen "), a.__options.triggerOpen.tap && h.hasTouchCapability && (b += "touchend." + a.__namespace + "-triggerOpen"), a._$origin.on(b, function(b) {
                    a._touchIsMeaningfulEvent(b) && a._open(b)
                })
            }
            if (a.__options.triggerOpen.mouseenter || a.__options.triggerOpen.touchstart && h.hasTouchCapability) {
                var b = "";
                a.__options.triggerOpen.mouseenter && (b += "mouseenter." + a.__namespace + "-triggerOpen "), a.__options.triggerOpen.touchstart && h.hasTouchCapability && (b += "touchstart." + a.__namespace + "-triggerOpen"), a._$origin.on(b, function(b) {
                    !a._touchIsTouchEvent(b) && a._touchIsEmulatedEvent(b) || (a.__pointerIsOverOrigin = !0, a._openShortly(b))
                })
            }
            if (a.__options.triggerClose.mouseleave || a.__options.triggerClose.touchleave && h.hasTouchCapability) {
                var b = "";
                a.__options.triggerClose.mouseleave && (b += "mouseleave." + a.__namespace + "-triggerOpen "), a.__options.triggerClose.touchleave && h.hasTouchCapability && (b += "touchend." + a.__namespace + "-triggerOpen touchcancel." + a.__namespace + "-triggerOpen"), a._$origin.on(b, function(b) {
                    a._touchIsMeaningfulEvent(b) && (a.__pointerIsOverOrigin = !1)
                })
            }
            return a
        },
        __prepareTooltip: function() {
            var b = this,
                c = b.__options.interactive ? "auto" : "";
            return b._$tooltip.attr("id", b.__namespace).css({
                "pointer-events": c,
                zIndex: b.__options.zIndex
            }), a.each(b.__previousThemes, function(a, c) {
                b._$tooltip.removeClass(c)
            }), a.each(b.__options.theme, function(a, c) {
                b._$tooltip.addClass(c)
            }), b.__previousThemes = a.merge([], b.__options.theme), b
        },
        __scrollHandler: function(b) {
            var c = this;
            if (c.__options.triggerClose.scroll) c._close(b);
            else {
                if (b.target === h.window.document) c.__Geometry.origin.fixedLineage || c.__options.repositionOnScroll && c.reposition(b);
                else {
                    var d = c.__geometry(),
                        e = !1;
                    if ("fixed" != c._$origin.css("position") && c.__$originParents.each(function(b, c) {
                            var f = a(c),
                                g = f.css("overflow-x"),
                                h = f.css("overflow-y");
                            if ("visible" != g || "visible" != h) {
                                var i = c.getBoundingClientRect();
                                if ("visible" != g && (d.origin.windowOffset.left < i.left || d.origin.windowOffset.right > i.right)) return e = !0, !1;
                                if ("visible" != h && (d.origin.windowOffset.top < i.top || d.origin.windowOffset.bottom > i.bottom)) return e = !0, !1
                            }
                            return "fixed" == f.css("position") ? !1 : void 0
                        }), e) c._$tooltip.css("visibility", "hidden");
                    else if (c._$tooltip.css("visibility", "visible"), c.__options.repositionOnScroll) c.reposition(b);
                    else {
                        var f = d.origin.offset.left - c.__Geometry.origin.offset.left,
                            g = d.origin.offset.top - c.__Geometry.origin.offset.top;
                        c._$tooltip.css({
                            left: c.__lastPosition.coord.left + f,
                            top: c.__lastPosition.coord.top + g
                        })
                    }
                }
                c._trigger({
                    type: "scroll",
                    event: b
                })
            }
            return c
        },
        __stateSet: function(a) {
            return this.__state = a, this._trigger({
                type: "state",
                state: a
            }), this
        },
        __timeoutsClear: function() {
            return clearTimeout(this.__timeouts.open), this.__timeouts.open = null, a.each(this.__timeouts.close, function(a, b) {
                clearTimeout(b)
            }), this.__timeouts.close = [], this
        },
        __trackerStart: function() {
            var a = this,
                b = a._$tooltip.find(".tooltipster-content");
            return a.__options.trackTooltip && (a.__contentBcr = b[0].getBoundingClientRect()), a.__tracker = setInterval(function() {
                if (d(a._$origin) && d(a._$tooltip)) {
                    if (a.__options.trackOrigin) {
                        var e = a.__geometry(),
                            f = !1;
                        c(e.origin.size, a.__Geometry.origin.size) && (a.__Geometry.origin.fixedLineage ? c(e.origin.windowOffset, a.__Geometry.origin.windowOffset) && (f = !0) : c(e.origin.offset, a.__Geometry.origin.offset) && (f = !0)), f || (a.__options.triggerClose.mouseleave ? a._close() : a.reposition())
                    }
                    if (a.__options.trackTooltip) {
                        var g = b[0].getBoundingClientRect();
                        g.height === a.__contentBcr.height && g.width === a.__contentBcr.width || (a.reposition(), a.__contentBcr = g)
                    }
                } else a._close()
            }, a.__options.trackerInterval), a
        },
        _close: function(b, c) {
            var d = this,
                e = !0;
            if (d._trigger({
                    type: "close",
                    event: b,
                    stop: function() {
                        e = !1
                    }
                }), e || d.__destroying) {
                c && d.__callbacks.close.push(c), d.__callbacks.open = [], d.__timeoutsClear();
                var f = function() {
                    a.each(d.__callbacks.close, function(a, c) {
                        c.call(d, d, {
                            event: b,
                            origin: d._$origin[0]
                        })
                    }), d.__callbacks.close = []
                };
                if ("closed" != d.__state) {
                    var g = !0,
                        i = new Date,
                        j = i.getTime(),
                        k = j + d.__options.animationDuration[1];
                    if ("disappearing" == d.__state && k > d.__closingTime && (g = !1), g) {
                        d.__closingTime = k, "disappearing" != d.__state && d.__stateSet("disappearing");
                        var l = function() {
                            clearInterval(d.__tracker), d._trigger({
                                type: "closing",
                                event: b
                            }), d._$tooltip.off("." + d.__namespace + "-triggerClose").removeClass("tooltipster-dying"), a(h.window).off("." + d.__namespace + "-triggerClose"), d.__$originParents.each(function(b, c) {
                                a(c).off("scroll." + d.__namespace + "-triggerClose")
                            }), d.__$originParents = null, a("body").off("." + d.__namespace + "-triggerClose"), d._$origin.off("." + d.__namespace + "-triggerClose"), d._off("dismissable"), d.__stateSet("closed"), d._trigger({
                                type: "after",
                                event: b
                            }), d.__options.functionAfter && d.__options.functionAfter.call(d, d, {
                                event: b,
                                origin: d._$origin[0]
                            }), f()
                        };
                        h.hasTransitions ? (d._$tooltip.css({
                            "-moz-animation-duration": d.__options.animationDuration[1] + "ms",
                            "-ms-animation-duration": d.__options.animationDuration[1] + "ms",
                            "-o-animation-duration": d.__options.animationDuration[1] + "ms",
                            "-webkit-animation-duration": d.__options.animationDuration[1] + "ms",
                            "animation-duration": d.__options.animationDuration[1] + "ms",
                            "transition-duration": d.__options.animationDuration[1] + "ms"
                        }), d._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"), d.__options.animationDuration[1] > 0 && d._$tooltip.delay(d.__options.animationDuration[1]), d._$tooltip.queue(l)) : d._$tooltip.stop().fadeOut(d.__options.animationDuration[1], l)
                    }
                } else f()
            }
            return d
        },
        _off: function() {
            return this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this
        },
        _on: function() {
            return this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this
        },
        _one: function() {
            return this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this
        },
        _open: function(b, c) {
            var e = this;
            if (!e.__destroying && d(e._$origin) && e.__enabled) {
                var f = !0;
                if ("closed" == e.__state && (e._trigger({
                        type: "before",
                        event: b,
                        stop: function() {
                            f = !1
                        }
                    }), f && e.__options.functionBefore && (f = e.__options.functionBefore.call(e, e, {
                        event: b,
                        origin: e._$origin[0]
                    }))), f !== !1 && null !== e.__Content) {
                    c && e.__callbacks.open.push(c), e.__callbacks.close = [], e.__timeoutsClear();
                    var g, i = function() {
                        "stable" != e.__state && e.__stateSet("stable"), a.each(e.__callbacks.open, function(a, b) {
                            b.call(e, e, {
                                origin: e._$origin[0],
                                tooltip: e._$tooltip[0]
                            })
                        }), e.__callbacks.open = []
                    };
                    if ("closed" !== e.__state) g = 0, "disappearing" === e.__state ? (e.__stateSet("appearing"), h.hasTransitions ? (e._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"), e.__options.animationDuration[0] > 0 && e._$tooltip.delay(e.__options.animationDuration[0]), e._$tooltip.queue(i)) : e._$tooltip.stop().fadeIn(i)) : "stable" == e.__state && i();
                    else {
                        if (e.__stateSet("appearing"), g = e.__options.animationDuration[0], e.__contentInsert(), e.reposition(b, !0), h.hasTransitions ? (e._$tooltip.addClass("tooltipster-" + e.__options.animation).addClass("tooltipster-initial").css({
                                "-moz-animation-duration": e.__options.animationDuration[0] + "ms",
                                "-ms-animation-duration": e.__options.animationDuration[0] + "ms",
                                "-o-animation-duration": e.__options.animationDuration[0] + "ms",
                                "-webkit-animation-duration": e.__options.animationDuration[0] + "ms",
                                "animation-duration": e.__options.animationDuration[0] + "ms",
                                "transition-duration": e.__options.animationDuration[0] + "ms"
                            }), setTimeout(function() {
                                "closed" != e.__state && (e._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"), e.__options.animationDuration[0] > 0 && e._$tooltip.delay(e.__options.animationDuration[0]), e._$tooltip.queue(i))
                            }, 0)) : e._$tooltip.css("display", "none").fadeIn(e.__options.animationDuration[0], i), e.__trackerStart(), a(h.window).on("resize." + e.__namespace + "-triggerClose", function(b) {
                                var c = a(document.activeElement);
                                (c.is("input") || c.is("textarea")) && a.contains(e._$tooltip[0], c[0]) || e.reposition(b)
                            }).on("scroll." + e.__namespace + "-triggerClose", function(a) {
                                e.__scrollHandler(a)
                            }), e.__$originParents = e._$origin.parents(), e.__$originParents.each(function(b, c) {
                                a(c).on("scroll." + e.__namespace + "-triggerClose", function(a) {
                                    e.__scrollHandler(a)
                                })
                            }), e.__options.triggerClose.mouseleave || e.__options.triggerClose.touchleave && h.hasTouchCapability) {
                            e._on("dismissable", function(a) {
                                a.dismissable ? a.delay ? (m = setTimeout(function() {
                                    e._close(a.event)
                                }, a.delay), e.__timeouts.close.push(m)) : e._close(a) : clearTimeout(m)
                            });
                            var j = e._$origin,
                                k = "",
                                l = "",
                                m = null;
                            e.__options.interactive && (j = j.add(e._$tooltip)), e.__options.triggerClose.mouseleave && (k += "mouseenter." + e.__namespace + "-triggerClose ", l += "mouseleave." + e.__namespace + "-triggerClose "), e.__options.triggerClose.touchleave && h.hasTouchCapability && (k += "touchstart." + e.__namespace + "-triggerClose", l += "touchend." + e.__namespace + "-triggerClose touchcancel." + e.__namespace + "-triggerClose"), j.on(l, function(a) {
                                if (e._touchIsTouchEvent(a) || !e._touchIsEmulatedEvent(a)) {
                                    var b = "mouseleave" == a.type ? e.__options.delay : e.__options.delayTouch;
                                    e._trigger({
                                        delay: b[1],
                                        dismissable: !0,
                                        event: a,
                                        type: "dismissable"
                                    })
                                }
                            }).on(k, function(a) {
                                !e._touchIsTouchEvent(a) && e._touchIsEmulatedEvent(a) || e._trigger({
                                    dismissable: !1,
                                    event: a,
                                    type: "dismissable"
                                })
                            })
                        }
                        e.__options.triggerClose.originClick && e._$origin.on("click." + e.__namespace + "-triggerClose", function(a) {
                            e._touchIsTouchEvent(a) || e._touchIsEmulatedEvent(a) || e._close(a)
                        }), (e.__options.triggerClose.click || e.__options.triggerClose.tap && h.hasTouchCapability) && setTimeout(function() {
                            if ("closed" != e.__state) {
                                var b = "";
                                e.__options.triggerClose.click && (b += "click." + e.__namespace + "-triggerClose "), e.__options.triggerClose.tap && h.hasTouchCapability && (b += "touchend." + e.__namespace + "-triggerClose"), a("body").on(b, function(b) {
                                    e._touchIsMeaningfulEvent(b) && (e._touchRecordEvent(b), e.__options.interactive && a.contains(e._$tooltip[0], b.target) || e._close(b))
                                }), e.__options.triggerClose.tap && h.hasTouchCapability && a("body").on("touchstart." + e.__namespace + "-triggerClose", function(a) {
                                    e._touchRecordEvent(a)
                                })
                            }
                        }, 0), e._trigger("ready"), e.__options.functionReady && e.__options.functionReady.call(e, e, {
                            origin: e._$origin[0],
                            tooltip: e._$tooltip[0]
                        })
                    }
                    if (e.__options.timer > 0) {
                        var m = setTimeout(function() {
                            e._close()
                        }, e.__options.timer + g);
                        e.__timeouts.close.push(m)
                    }
                }
            }
            return e
        },
        _openShortly: function(a) {
            var b = this,
                c = !0;
            if ("stable" != b.__state && "appearing" != b.__state && !b.__timeouts.open && (b._trigger({
                    type: "start",
                    event: a,
                    stop: function() {
                        c = !1
                    }
                }), c)) {
                var d = 0 == a.type.indexOf("touch") ? b.__options.delayTouch : b.__options.delay;
                d[0] ? b.__timeouts.open = setTimeout(function() {
                    b.__timeouts.open = null, b.__pointerIsOverOrigin && b._touchIsMeaningfulEvent(a) ? (b._trigger("startend"), b._open(a)) : b._trigger("startcancel")
                }, d[0]) : (b._trigger("startend"), b._open(a))
            }
            return b
        },
        _optionsExtract: function(b, c) {
            var d = this,
                e = a.extend(!0, {}, c),
                f = d.__options[b];
            return f || (f = {}, a.each(c, function(a, b) {
                var c = d.__options[a];
                void 0 !== c && (f[a] = c)
            })), a.each(e, function(b, c) {
                void 0 !== f[b] && ("object" != typeof c || c instanceof Array || null == c || "object" != typeof f[b] || f[b] instanceof Array || null == f[b] ? e[b] = f[b] : a.extend(e[b], f[b]))
            }), e
        },
        _plug: function(b) {
            var c = a.tooltipster._plugin(b);
            if (!c) throw new Error('The "' + b + '" plugin is not defined');
            return c.instance && a.tooltipster.__bridge(c.instance, this, c.name), this
        },
        _touchIsEmulatedEvent: function(a) {
            for (var b = !1, c = (new Date).getTime(), d = this.__touchEvents.length - 1; d >= 0; d--) {
                var e = this.__touchEvents[d];
                if (!(c - e.time < 500)) break;
                e.target === a.target && (b = !0)
            }
            return b
        },
        _touchIsMeaningfulEvent: function(a) {
            return this._touchIsTouchEvent(a) && !this._touchSwiped(a.target) || !this._touchIsTouchEvent(a) && !this._touchIsEmulatedEvent(a)
        },
        _touchIsTouchEvent: function(a) {
            return 0 == a.type.indexOf("touch")
        },
        _touchRecordEvent: function(a) {
            return this._touchIsTouchEvent(a) && (a.time = (new Date).getTime(), this.__touchEvents.push(a)), this
        },
        _touchSwiped: function(a) {
            for (var b = !1, c = this.__touchEvents.length - 1; c >= 0; c--) {
                var d = this.__touchEvents[c];
                if ("touchmove" == d.type) {
                    b = !0;
                    break
                }
                if ("touchstart" == d.type && a === d.target) break
            }
            return b
        },
        _trigger: function() {
            var b = Array.prototype.slice.apply(arguments);
            return "string" == typeof b[0] && (b[0] = {
                type: b[0]
            }), b[0].instance = this, b[0].origin = this._$origin ? this._$origin[0] : null, b[0].tooltip = this._$tooltip ? this._$tooltip[0] : null, this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, b), a.tooltipster._trigger.apply(a.tooltipster, b), this.__$emitterPublic.trigger.apply(this.__$emitterPublic, b), this
        },
        _unplug: function(b) {
            var c = this;
            if (c[b]) {
                var d = a.tooltipster._plugin(b);
                d.instance && a.each(d.instance, function(a, d) {
                    c[a] && c[a].bridged === c[b] && delete c[a]
                }), c[b].__destroy && c[b].__destroy(), delete c[b]
            }
            return c
        },
        close: function(a) {
            return this.__destroyed ? this.__destroyError() : this._close(null, a), this
        },
        content: function(a) {
            var b = this;
            if (void 0 === a) return b.__Content;
            if (b.__destroyed) b.__destroyError();
            else if (b.__contentSet(a), null !== b.__Content) {
                if ("closed" !== b.__state && (b.__contentInsert(), b.reposition(), b.__options.updateAnimation))
                    if (h.hasTransitions) {
                        var c = b.__options.updateAnimation;
                        b._$tooltip.addClass("tooltipster-update-" + c), setTimeout(function() {
                            "closed" != b.__state && b._$tooltip.removeClass("tooltipster-update-" + c)
                        }, 1e3)
                    } else b._$tooltip.fadeTo(200, .5, function() {
                        "closed" != b.__state && b._$tooltip.fadeTo(200, 1)
                    })
            } else b._close();
            return b
        },
        destroy: function() {
            var b = this;
            return b.__destroyed ? b.__destroyError() : b.__destroying || (b.__destroying = !0, b._close(null, function() {
                b._trigger("destroy"), b.__destroying = !1, b.__destroyed = !0, b._$origin.removeData(b.__namespace).off("." + b.__namespace + "-triggerOpen"), a("body").off("." + b.__namespace + "-triggerOpen");
                var c = b._$origin.data("tooltipster-ns");
                if (c)
                    if (1 === c.length) {
                        var d = null;
                        "previous" == b.__options.restoration ? d = b._$origin.data("tooltipster-initialTitle") : "current" == b.__options.restoration && (d = "string" == typeof b.__Content ? b.__Content : a("<div></div>").append(b.__Content).html()), d && b._$origin.attr("title", d), b._$origin.removeClass("tooltipstered"), b._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")
                    } else c = a.grep(c, function(a, c) {
                        return a !== b.__namespace
                    }), b._$origin.data("tooltipster-ns", c);
                b._trigger("destroyed"), b._off(), b.off(), b.__Content = null, b.__$emitterPrivate = null, b.__$emitterPublic = null, b.__options.parent = null, b._$origin = null, b._$tooltip = null, a.tooltipster.__instancesLatestArr = a.grep(a.tooltipster.__instancesLatestArr, function(a, c) {
                    return b !== a
                }), clearInterval(b.__garbageCollector)
            })), b
        },
        disable: function() {
            return this.__destroyed ? (this.__destroyError(), this) : (this._close(), this.__enabled = !1, this)
        },
        elementOrigin: function() {
            return this.__destroyed ? void this.__destroyError() : this._$origin[0]
        },
        elementTooltip: function() {
            return this._$tooltip ? this._$tooltip[0] : null
        },
        enable: function() {
            return this.__enabled = !0, this
        },
        hide: function(a) {
            return this.close(a)
        },
        instance: function() {
            return this
        },
        off: function() {
            return this.__destroyed || this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this
        },
        on: function() {
            return this.__destroyed ? this.__destroyError() : this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this
        },
        one: function() {
            return this.__destroyed ? this.__destroyError() : this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this
        },
        open: function(a) {
            return this.__destroyed || this.__destroying ? this.__destroyError() : this._open(null, a), this
        },
        option: function(b, c) {
            return void 0 === c ? this.__options[b] : (this.__destroyed ? this.__destroyError() : (this.__options[b] = c, this.__optionsFormat(), a.inArray(b, ["trigger", "triggerClose", "triggerOpen"]) >= 0 && this.__prepareOrigin(), "selfDestruction" === b && this.__prepareGC()), this)
        },
        reposition: function(a, b) {
            var c = this;
            return c.__destroyed ? c.__destroyError() : "closed" != c.__state && d(c._$origin) && (b || d(c._$tooltip)) && (b || c._$tooltip.detach(), c.__Geometry = c.__geometry(), c._trigger({
                type: "reposition",
                event: a,
                helper: {
                    geo: c.__Geometry
                }
            })), c
        },
        show: function(a) {
            return this.open(a)
        },
        status: function() {
            return {
                destroyed: this.__destroyed,
                destroying: this.__destroying,
                enabled: this.__enabled,
                open: "closed" !== this.__state,
                state: this.__state
            }
        },
        triggerHandler: function() {
            return this.__destroyed ? this.__destroyError() : this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this
        }
    }, a.fn.tooltipster = function() {
        var b = Array.prototype.slice.apply(arguments),
            c = "You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.";
        if (0 === this.length) return this;
        if ("string" == typeof b[0]) {
            var d = "#*$~&";
            return this.each(function() {
                var e = a(this).data("tooltipster-ns"),
                    f = e ? a(this).data(e[0]) : null;
                if (!f) throw new Error("You called Tooltipster's \"" + b[0] + '" method on an uninitialized element');
                if ("function" != typeof f[b[0]]) throw new Error('Unknown method "' + b[0] + '"');
                this.length > 1 && "content" == b[0] && (b[1] instanceof a || "object" == typeof b[1] && null != b[1] && b[1].tagName) && !f.__options.contentCloning && f.__options.debug && console.log(c);
                var g = f[b[0]](b[1], b[2]);
                return g !== f || "instance" === b[0] ? (d = g, !1) : void 0
            }), "#*$~&" !== d ? d : this
        }
        a.tooltipster.__instancesLatestArr = [];
        var e = b[0] && void 0 !== b[0].multiple,
            g = e && b[0].multiple || !e && f.multiple,
            h = b[0] && void 0 !== b[0].content,
            i = h && b[0].content || !h && f.content,
            j = b[0] && void 0 !== b[0].contentCloning,
            k = j && b[0].contentCloning || !j && f.contentCloning,
            l = b[0] && void 0 !== b[0].debug,
            m = l && b[0].debug || !l && f.debug;
        return this.length > 1 && (i instanceof a || "object" == typeof i && null != i && i.tagName) && !k && m && console.log(c), this.each(function() {
            var c = !1,
                d = a(this),
                e = d.data("tooltipster-ns"),
                f = null;
            e ? g ? c = !0 : m && (console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."), console.log(this)) : c = !0, c && (f = new a.Tooltipster(this, b[0]), e || (e = []), e.push(f.__namespace), d.data("tooltipster-ns", e), d.data(f.__namespace, f), f.__options.functionInit && f.__options.functionInit.call(f, f, {
                origin: this
            }), f._trigger("init")), a.tooltipster.__instancesLatestArr.push(f)
        }), this
    }, b.prototype = {
        __init: function(b) {
            this.__$tooltip = b, this.__$tooltip.css({
                left: 0,
                overflow: "hidden",
                position: "absolute",
                top: 0
            }).find(".tooltipster-content").css("overflow", "auto"), this.$container = a('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo("body")
        },
        __forceRedraw: function() {
            var a = this.__$tooltip.parent();
            this.__$tooltip.detach(), this.__$tooltip.appendTo(a)
        },
        constrain: function(a, b) {
            return this.constraints = {
                width: a,
                height: b
            }, this.__$tooltip.css({
                display: "block",
                height: "",
                overflow: "auto",
                width: a
            }), this
        },
        destroy: function() {
            this.__$tooltip.detach().find(".tooltipster-content").css({
                display: "",
                overflow: ""
            }), this.$container.remove()
        },
        free: function() {
            return this.constraints = null, this.__$tooltip.css({
                display: "",
                height: "",
                overflow: "visible",
                width: ""
            }), this
        },
        measure: function() {
            this.__forceRedraw();
            var a = this.__$tooltip[0].getBoundingClientRect(),
                b = {
                    size: {
                        height: a.height || a.bottom,
                        width: a.width || a.right
                    }
                };
            if (this.constraints) {
                var c = this.__$tooltip.find(".tooltipster-content"),
                    d = this.__$tooltip.outerHeight(),
                    e = c[0].getBoundingClientRect(),
                    f = {
                        height: d <= this.constraints.height,
                        width: a.width <= this.constraints.width && e.width >= c[0].scrollWidth - 1
                    };
                b.fits = f.height && f.width
            }
            return h.IE && h.IE <= 11 && b.size.width !== h.window.document.documentElement.clientWidth && (b.size.width = Math.ceil(b.size.width) + 1), b
        }
    };
    var j = navigator.userAgent.toLowerCase(); - 1 != j.indexOf("msie") ? h.IE = parseInt(j.split("msie")[1]) : -1 !== j.toLowerCase().indexOf("trident") && -1 !== j.indexOf(" rv:11") ? h.IE = 11 : -1 != j.toLowerCase().indexOf("edge/") && (h.IE = parseInt(j.toLowerCase().split("edge/")[1]));
    var k = "tooltipster.sideTip";
    return a.tooltipster._plugin({
        name: k,
        instance: {
            __defaults: function() {
                return {
                    arrow: !0,
                    distance: 6,
                    functionPosition: null,
                    maxWidth: null,
                    minIntersection: 16,
                    minWidth: 0,
                    position: null,
                    side: "top",
                    viewportAware: !0
                }
            },
            __init: function(a) {
                var b = this;
                b.__instance = a, b.__namespace = "tooltipster-sideTip-" + Math.round(1e6 * Math.random()), b.__previousState = "closed", b.__options, b.__optionsFormat(), b.__instance._on("state." + b.__namespace, function(a) {
                    "closed" == a.state ? b.__close() : "appearing" == a.state && "closed" == b.__previousState && b.__create(), b.__previousState = a.state
                }), b.__instance._on("options." + b.__namespace, function() {
                    b.__optionsFormat()
                }), b.__instance._on("reposition." + b.__namespace, function(a) {
                    b.__reposition(a.event, a.helper)
                })
            },
            __close: function() {
                this.__instance.content() instanceof a && this.__instance.content().detach(), this.__instance._$tooltip.remove(), this.__instance._$tooltip = null
            },
            __create: function() {
                var b = a('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');
                this.__options.arrow || b.find(".tooltipster-box").css("margin", 0).end().find(".tooltipster-arrow").hide(), this.__options.minWidth && b.css("min-width", this.__options.minWidth + "px"), this.__options.maxWidth && b.css("max-width", this.__options.maxWidth + "px"), this.__instance._$tooltip = b, this.__instance._trigger("created")
            },
            __destroy: function() {
                this.__instance._off("." + self.__namespace)
            },
            __optionsFormat: function() {
                var b = this;
                if (b.__options = b.__instance._optionsExtract(k, b.__defaults()),
                    b.__options.position && (b.__options.side = b.__options.position), "object" != typeof b.__options.distance && (b.__options.distance = [b.__options.distance]), b.__options.distance.length < 4 && (void 0 === b.__options.distance[1] && (b.__options.distance[1] = b.__options.distance[0]), void 0 === b.__options.distance[2] && (b.__options.distance[2] = b.__options.distance[0]), void 0 === b.__options.distance[3] && (b.__options.distance[3] = b.__options.distance[1]), b.__options.distance = {
                        top: b.__options.distance[0],
                        right: b.__options.distance[1],
                        bottom: b.__options.distance[2],
                        left: b.__options.distance[3]
                    }), "string" == typeof b.__options.side) {
                    var c = {
                        top: "bottom",
                        right: "left",
                        bottom: "top",
                        left: "right"
                    };
                    b.__options.side = [b.__options.side, c[b.__options.side]], "left" == b.__options.side[0] || "right" == b.__options.side[0] ? b.__options.side.push("top", "bottom") : b.__options.side.push("right", "left")
                }
                6 === a.tooltipster._env.IE && b.__options.arrow !== !0 && (b.__options.arrow = !1)
            },
            __reposition: function(b, c) {
                var d, e = this,
                    f = e.__targetFind(c),
                    g = [];
                e.__instance._$tooltip.detach();
                var h = e.__instance._$tooltip.clone(),
                    i = a.tooltipster._getRuler(h),
                    j = !1,
                    k = e.__instance.option("animation");
                switch (k && h.removeClass("tooltipster-" + k), a.each(["window", "document"], function(d, k) {
                    var l = null;
                    if (e.__instance._trigger({
                            container: k,
                            helper: c,
                            satisfied: j,
                            takeTest: function(a) {
                                l = a
                            },
                            results: g,
                            type: "positionTest"
                        }), 1 == l || 0 != l && 0 == j && ("window" != k || e.__options.viewportAware))
                        for (var d = 0; d < e.__options.side.length; d++) {
                            var m = {
                                    horizontal: 0,
                                    vertical: 0
                                },
                                n = e.__options.side[d];
                            "top" == n || "bottom" == n ? m.vertical = e.__options.distance[n] : m.horizontal = e.__options.distance[n], e.__sideChange(h, n), a.each(["natural", "constrained"], function(a, d) {
                                if (l = null, e.__instance._trigger({
                                        container: k,
                                        event: b,
                                        helper: c,
                                        mode: d,
                                        results: g,
                                        satisfied: j,
                                        side: n,
                                        takeTest: function(a) {
                                            l = a
                                        },
                                        type: "positionTest"
                                    }), 1 == l || 0 != l && 0 == j) {
                                    var h = {
                                            container: k,
                                            distance: m,
                                            fits: null,
                                            mode: d,
                                            outerSize: null,
                                            side: n,
                                            size: null,
                                            target: f[n],
                                            whole: null
                                        },
                                        o = "natural" == d ? i.free() : i.constrain(c.geo.available[k][n].width - m.horizontal, c.geo.available[k][n].height - m.vertical),
                                        p = o.measure();
                                    if (h.size = p.size, h.outerSize = {
                                            height: p.size.height + m.vertical,
                                            width: p.size.width + m.horizontal
                                        }, "natural" == d ? c.geo.available[k][n].width >= h.outerSize.width && c.geo.available[k][n].height >= h.outerSize.height ? h.fits = !0 : h.fits = !1 : h.fits = p.fits, "window" == k && (h.fits ? "top" == n || "bottom" == n ? h.whole = c.geo.origin.windowOffset.right >= e.__options.minIntersection && c.geo.window.size.width - c.geo.origin.windowOffset.left >= e.__options.minIntersection : h.whole = c.geo.origin.windowOffset.bottom >= e.__options.minIntersection && c.geo.window.size.height - c.geo.origin.windowOffset.top >= e.__options.minIntersection : h.whole = !1), g.push(h), h.whole) j = !0;
                                    else if ("natural" == h.mode && (h.fits || h.size.width <= c.geo.available[k][n].width)) return !1
                                }
                            })
                        }
                }), e.__instance._trigger({
                    edit: function(a) {
                        g = a
                    },
                    event: b,
                    helper: c,
                    results: g,
                    type: "positionTested"
                }), g.sort(function(a, b) {
                    if (a.whole && !b.whole) return -1;
                    if (!a.whole && b.whole) return 1;
                    if (a.whole && b.whole) {
                        var c = e.__options.side.indexOf(a.side),
                            d = e.__options.side.indexOf(b.side);
                        return d > c ? -1 : c > d ? 1 : "natural" == a.mode ? -1 : 1
                    }
                    if (a.fits && !b.fits) return -1;
                    if (!a.fits && b.fits) return 1;
                    if (a.fits && b.fits) {
                        var c = e.__options.side.indexOf(a.side),
                            d = e.__options.side.indexOf(b.side);
                        return d > c ? -1 : c > d ? 1 : "natural" == a.mode ? -1 : 1
                    }
                    return "document" == a.container && "bottom" == a.side && "natural" == a.mode ? -1 : 1
                }), d = g[0], d.coord = {}, d.side) {
                    case "left":
                    case "right":
                        d.coord.top = Math.floor(d.target - d.size.height / 2);
                        break;
                    case "bottom":
                    case "top":
                        d.coord.left = Math.floor(d.target - d.size.width / 2)
                }
                switch (d.side) {
                    case "left":
                        d.coord.left = c.geo.origin.windowOffset.left - d.outerSize.width;
                        break;
                    case "right":
                        d.coord.left = c.geo.origin.windowOffset.right + d.distance.horizontal;
                        break;
                    case "top":
                        d.coord.top = c.geo.origin.windowOffset.top - d.outerSize.height;
                        break;
                    case "bottom":
                        d.coord.top = c.geo.origin.windowOffset.bottom + d.distance.vertical
                }
                "window" == d.container ? "top" == d.side || "bottom" == d.side ? d.coord.left < 0 ? c.geo.origin.windowOffset.right - this.__options.minIntersection >= 0 ? d.coord.left = 0 : d.coord.left = c.geo.origin.windowOffset.right - this.__options.minIntersection - 1 : d.coord.left > c.geo.window.size.width - d.size.width && (c.geo.origin.windowOffset.left + this.__options.minIntersection <= c.geo.window.size.width ? d.coord.left = c.geo.window.size.width - d.size.width : d.coord.left = c.geo.origin.windowOffset.left + this.__options.minIntersection + 1 - d.size.width) : d.coord.top < 0 ? c.geo.origin.windowOffset.bottom - this.__options.minIntersection >= 0 ? d.coord.top = 0 : d.coord.top = c.geo.origin.windowOffset.bottom - this.__options.minIntersection - 1 : d.coord.top > c.geo.window.size.height - d.size.height && (c.geo.origin.windowOffset.top + this.__options.minIntersection <= c.geo.window.size.height ? d.coord.top = c.geo.window.size.height - d.size.height : d.coord.top = c.geo.origin.windowOffset.top + this.__options.minIntersection + 1 - d.size.height) : (d.coord.left > c.geo.window.size.width - d.size.width && (d.coord.left = c.geo.window.size.width - d.size.width), d.coord.left < 0 && (d.coord.left = 0)), e.__sideChange(h, d.side), c.tooltipClone = h[0], c.tooltipParent = e.__instance.option("parent").parent[0], c.mode = d.mode, c.whole = d.whole, c.origin = e.__instance._$origin[0], c.tooltip = e.__instance._$tooltip[0], delete d.container, delete d.fits, delete d.mode, delete d.outerSize, delete d.whole, d.distance = d.distance.horizontal || d.distance.vertical;
                var l = a.extend(!0, {}, d);
                if (e.__instance._trigger({
                        edit: function(a) {
                            d = a
                        },
                        event: b,
                        helper: c,
                        position: l,
                        type: "position"
                    }), e.__options.functionPosition) {
                    var m = e.__options.functionPosition.call(e, e.__instance, c, l);
                    m && (d = m)
                }
                i.destroy();
                var n, o;
                "top" == d.side || "bottom" == d.side ? (n = {
                    prop: "left",
                    val: d.target - d.coord.left
                }, o = d.size.width - this.__options.minIntersection) : (n = {
                    prop: "top",
                    val: d.target - d.coord.top
                }, o = d.size.height - this.__options.minIntersection), n.val < this.__options.minIntersection ? n.val = this.__options.minIntersection : n.val > o && (n.val = o);
                var p;
                p = c.geo.origin.fixedLineage ? c.geo.origin.windowOffset : {
                    left: c.geo.origin.windowOffset.left + c.geo.window.scroll.left,
                    top: c.geo.origin.windowOffset.top + c.geo.window.scroll.top
                }, d.coord = {
                    left: p.left + (d.coord.left - c.geo.origin.windowOffset.left),
                    top: p.top + (d.coord.top - c.geo.origin.windowOffset.top)
                }, e.__sideChange(e.__instance._$tooltip, d.side), c.geo.origin.fixedLineage ? e.__instance._$tooltip.css("position", "fixed") : e.__instance._$tooltip.css("position", ""), e.__instance._$tooltip.css({
                    left: d.coord.left,
                    top: d.coord.top,
                    height: d.size.height,
                    width: d.size.width
                }).find(".tooltipster-arrow").css({
                    left: "",
                    top: ""
                }).css(n.prop, n.val), e.__instance._$tooltip.appendTo(e.__instance.option("parent")), e.__instance._trigger({
                    type: "repositioned",
                    event: b,
                    position: d
                })
            },
            __sideChange: function(a, b) {
                a.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-" + b)
            },
            __targetFind: function(a) {
                var b = {},
                    c = this.__instance._$origin[0].getClientRects();
                if (c.length > 1) {
                    var d = this.__instance._$origin.css("opacity");
                    1 == d && (this.__instance._$origin.css("opacity", .99), c = this.__instance._$origin[0].getClientRects(), this.__instance._$origin.css("opacity", 1))
                }
                if (c.length < 2) b.top = Math.floor(a.geo.origin.windowOffset.left + a.geo.origin.size.width / 2), b.bottom = b.top, b.left = Math.floor(a.geo.origin.windowOffset.top + a.geo.origin.size.height / 2), b.right = b.left;
                else {
                    var e = c[0];
                    b.top = Math.floor(e.left + (e.right - e.left) / 2), e = c.length > 2 ? c[Math.ceil(c.length / 2) - 1] : c[0], b.right = Math.floor(e.top + (e.bottom - e.top) / 2), e = c[c.length - 1], b.bottom = Math.floor(e.left + (e.right - e.left) / 2), e = c.length > 2 ? c[Math.ceil((c.length + 1) / 2) - 1] : c[c.length - 1], b.left = Math.floor(e.top + (e.bottom - e.top) / 2)
                }
                return b
            }
        }
    }), a
});
/* WebcamJS v1.0.25 - http://github.com/jhuckaby/webcamjs */
(function(e) {
    var t;

    function a() {
        var e = Error.apply(this, arguments);
        e.name = this.name = "FlashError";
        this.stack = e.stack;
        this.message = e.message
    }

    function i() {
        var e = Error.apply(this, arguments);
        e.name = this.name = "WebcamError";
        this.stack = e.stack;
        this.message = e.message
    }
    var s = function() {};
    s.prototype = Error.prototype;
    a.prototype = new s;
    i.prototype = new s;
    var Webcam = {
        version: "1.0.25",
        protocol: location.protocol.match(/https/i) ? "https" : "http",
        loaded: false,
        live: false,
        userMedia: true,
        iOS: /iPad|iPhone|iPod/.test(navigator.userAgent) && !e.MSStream,
        params: {
            width: 0,
            height: 0,
            dest_width: 0,
            dest_height: 0,
            image_format: "jpeg",
            jpeg_quality: 90,
            enable_flash: true,
            force_flash: false,
            flip_horiz: false,
            fps: 30,
            upload_name: "webcam",
            constraints: null,
            swfURL: "",
            flashNotDetectedText: "ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).",
            noInterfaceFoundText: "No supported webcam interface found.",
            unfreeze_snap: true,
            iosPlaceholderText: "Click here to open camera.",
            user_callback: null,
            user_canvas: null
        },
        errors: {
            FlashError: a,
            WebcamError: i
        },
        hooks: {},
        init: function() {
            var t = this;
            this.mediaDevices = navigator.mediaDevices && navigator.mediaDevices.getUserMedia ? navigator.mediaDevices : navigator.mozGetUserMedia || navigator.webkitGetUserMedia ? {
                getUserMedia: function(e) {
                    return new Promise(function(t, a) {
                        (navigator.mozGetUserMedia || navigator.webkitGetUserMedia).call(navigator, e, t, a)
                    })
                }
            } : null;
            e.URL = e.URL || e.webkitURL || e.mozURL || e.msURL;
            this.userMedia = this.userMedia && !!this.mediaDevices && !!e.URL;
            if (this.iOS) {
                this.userMedia = null
            }
            if (navigator.userAgent.match(/Firefox\D+(\d+)/)) {
                if (parseInt(RegExp.$1, 10) < 21) this.userMedia = null
            }
            if (this.userMedia) {
                e.addEventListener("beforeunload", function(e) {
                    t.reset()
                })
            }
        },
        exifOrientation: function(e) {
            var t = new DataView(e);
            if (t.getUint8(0) != 255 || t.getUint8(1) != 216) {
                console.log("Not a valid JPEG file");
                return 0
            }
            var a = 2;
            var i = null;
            while (a < e.byteLength) {
                if (t.getUint8(a) != 255) {
                    console.log("Not a valid marker at offset " + a + ", found: " + t.getUint8(a));
                    return 0
                }
                i = t.getUint8(a + 1);
                if (i == 225) {
                    a += 4;
                    var s = "";
                    for (n = 0; n < 4; n++) {
                        s += String.fromCharCode(t.getUint8(a + n))
                    }
                    if (s != "Exif") {
                        console.log("Not valid EXIF data found");
                        return 0
                    }
                    a += 6;
                    var r = null;
                    if (t.getUint16(a) == 18761) {
                        r = false
                    } else if (t.getUint16(a) == 19789) {
                        r = true
                    } else {
                        console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");
                        return 0
                    }
                    if (t.getUint16(a + 2, !r) != 42) {
                        console.log("Not valid TIFF data! (no 0x002A)");
                        return 0
                    }
                    var o = t.getUint32(a + 4, !r);
                    if (o < 8) {
                        console.log("Not valid TIFF data! (First offset less than 8)", t.getUint32(a + 4, !r));
                        return 0
                    }
                    var l = a + o;
                    var h = t.getUint16(l, !r);
                    for (var c = 0; c < h; c++) {
                        var d = l + c * 12 + 2;
                        if (t.getUint16(d, !r) == 274) {
                            var f = t.getUint16(d + 2, !r);
                            var m = t.getUint32(d + 4, !r);
                            if (f != 3 && m != 1) {
                                console.log("Invalid EXIF orientation value type (" + f + ") or count (" + m + ")");
                                return 0
                            }
                            var p = t.getUint16(d + 8, !r);
                            if (p < 1 || p > 8) {
                                console.log("Invalid EXIF orientation value (" + p + ")");
                                return 0
                            }
                            return p
                        }
                    }
                } else {
                    a += 2 + t.getUint16(a + 2)
                }
            }
            return 0
        },
        fixOrientation: function(e, t, a) {
            var i = new Image;
            i.addEventListener("load", function(e) {
                var s = document.createElement("canvas");
                var r = s.getContext("2d");
                if (t < 5) {
                    s.width = i.width;
                    s.height = i.height
                } else {
                    s.width = i.height;
                    s.height = i.width
                }
                switch (t) {
                    case 2:
                        r.transform(-1, 0, 0, 1, i.width, 0);
                        break;
                    case 3:
                        r.transform(-1, 0, 0, -1, i.width, i.height);
                        break;
                    case 4:
                        r.transform(1, 0, 0, -1, 0, i.height);
                        break;
                    case 5:
                        r.transform(0, 1, 1, 0, 0, 0);
                        break;
                    case 6:
                        r.transform(0, 1, -1, 0, i.height, 0);
                        break;
                    case 7:
                        r.transform(0, -1, -1, 0, i.height, i.width);
                        break;
                    case 8:
                        r.transform(0, -1, 1, 0, 0, i.width);
                        break
                }
                r.drawImage(i, 0, 0);
                a.src = s.toDataURL()
            }, false);
            i.src = e
        },
        attach: function(a) {
            if (typeof a == "string") {
                a = document.getElementById(a) || document.querySelector(a)
            }
            if (!a) {
                return this.dispatch("error", new i("Could not locate DOM element to attach to."))
            }
            this.container = a;
            a.innerHTML = "";
            var s = document.createElement("div");
            a.appendChild(s);
            this.peg = s;
            if (!this.params.width) this.params.width = a.offsetWidth;
            if (!this.params.height) this.params.height = a.offsetHeight;
            if (!this.params.width || !this.params.height) {
                return this.dispatch("error", new i("No width and/or height for webcam.  Please call set() first, or attach to a visible element."))
            }
            if (!this.params.dest_width) this.params.dest_width = this.params.width;
            if (!this.params.dest_height) this.params.dest_height = this.params.height;
            this.userMedia = t === undefined ? this.userMedia : t;
            if (this.params.force_flash) {
                t = this.userMedia;
                this.userMedia = null
            }
            if (typeof this.params.fps !== "number") this.params.fps = 30;
            var r = this.params.width / this.params.dest_width;
            var o = this.params.height / this.params.dest_height;
            if (this.userMedia) {
                var n = document.createElement("video");
                n.setAttribute("autoplay", "autoplay");
                n.style.width = "" + this.params.dest_width + "px";
                n.style.height = "" + this.params.dest_height + "px";
                if (r != 1 || o != 1) {
                    a.style.overflow = "hidden";
                    n.style.webkitTransformOrigin = "0px 0px";
                    n.style.mozTransformOrigin = "0px 0px";
                    n.style.msTransformOrigin = "0px 0px";
                    n.style.oTransformOrigin = "0px 0px";
                    n.style.transformOrigin = "0px 0px";
                    n.style.webkitTransform = "scaleX(" + r + ") scaleY(" + o + ")";
                    n.style.mozTransform = "scaleX(" + r + ") scaleY(" + o + ")";
                    n.style.msTransform = "scaleX(" + r + ") scaleY(" + o + ")";
                    n.style.oTransform = "scaleX(" + r + ") scaleY(" + o + ")";
                    n.style.transform = "scaleX(" + r + ") scaleY(" + o + ")"
                }
                a.appendChild(n);
                this.video = n;
                var l = this;
                this.mediaDevices.getUserMedia({
                    audio: false,
                    video: this.params.constraints || {
                        mandatory: {
                            minWidth: this.params.dest_width,
                            minHeight: this.params.dest_height
                        }
                    }
                }).then(function(t) {
                    n.onloadedmetadata = function(e) {
                        l.stream = t;
                        l.loaded = true;
                        l.live = true;
                        l.dispatch("load");
                        l.dispatch("live");
                        l.flip()
                    };
                    if ("srcObject" in n) {
                        n.srcObject = t
                    } else {
                        n.src = e.URL.createObjectURL(t)
                    }
                }).catch(function(e) {
                    if (l.params.enable_flash && l.detectFlash()) {
                        setTimeout(function() {
                            l.params.force_flash = 1;
                            l.attach(a)
                        }, 1)
                    } else {
                        l.dispatch("error", e)
                    }
                })
            } else if (this.iOS) {
                var h = document.createElement("div");
                h.id = this.container.id + "-ios_div";
                h.className = "webcamjs-ios-placeholder";
                h.style.width = "" + this.params.width + "px";
                h.style.height = "" + this.params.height + "px";
                h.style.textAlign = "center";
                h.style.display = "table-cell";
                h.style.verticalAlign = "middle";
                h.style.backgroundRepeat = "no-repeat";
                h.style.backgroundSize = "contain";
                h.style.backgroundPosition = "center";
                var c = document.createElement("span");
                c.className = "webcamjs-ios-text";
                c.innerHTML = this.params.iosPlaceholderText;
                h.appendChild(c);
                var d = document.createElement("img");
                d.id = this.container.id + "-ios_img";
                d.style.width = "" + this.params.dest_width + "px";
                d.style.height = "" + this.params.dest_height + "px";
                d.style.display = "none";
                h.appendChild(d);
                var f = document.createElement("input");
                f.id = this.container.id + "-ios_input";
                f.setAttribute("type", "file");
                f.setAttribute("accept", "image/*");
                f.setAttribute("capture", "camera");
                var l = this;
                var m = this.params;
                f.addEventListener("change", function(e) {
                    if (e.target.files.length > 0 && e.target.files[0].type.indexOf("image/") == 0) {
                        var t = URL.createObjectURL(e.target.files[0]);
                        var a = new Image;
                        a.addEventListener("load", function(e) {
                            var t = document.createElement("canvas");
                            t.width = m.dest_width;
                            t.height = m.dest_height;
                            var i = t.getContext("2d");
                            ratio = Math.min(a.width / m.dest_width, a.height / m.dest_height);
                            var s = m.dest_width * ratio;
                            var r = m.dest_height * ratio;
                            var o = (a.width - s) / 2;
                            var n = (a.height - r) / 2;
                            i.drawImage(a, o, n, s, r, 0, 0, m.dest_width, m.dest_height);
                            var l = t.toDataURL();
                            d.src = l;
                            h.style.backgroundImage = "url('" + l + "')"
                        }, false);
                        var i = new FileReader;
                        i.addEventListener("load", function(e) {
                            var i = l.exifOrientation(e.target.result);
                            if (i > 1) {
                                l.fixOrientation(t, i, a)
                            } else {
                                a.src = t
                            }
                        }, false);
                        var s = new XMLHttpRequest;
                        s.open("GET", t, true);
                        s.responseType = "blob";
                        s.onload = function(e) {
                            if (this.status == 200 || this.status === 0) {
                                i.readAsArrayBuffer(this.response)
                            }
                        };
                        s.send()
                    }
                }, false);
                f.style.display = "none";
                a.appendChild(f);
                h.addEventListener("click", function(e) {
                    if (m.user_callback) {
                        l.snap(m.user_callback, m.user_canvas)
                    } else {
                        f.style.display = "block";
                        f.focus();
                        f.click();
                        f.style.display = "none"
                    }
                }, false);
                a.appendChild(h);
                this.loaded = true;
                this.live = true
            } else if (this.params.enable_flash && this.detectFlash()) {
                e.Webcam = Webcam;
                var h = document.createElement("div");
                h.innerHTML = this.getSWFHTML();
                a.appendChild(h)
            } else {
                this.dispatch("error", new i(this.params.noInterfaceFoundText))
            }
            if (this.params.crop_width && this.params.crop_height) {
                var p = Math.floor(this.params.crop_width * r);
                var u = Math.floor(this.params.crop_height * o);
                a.style.width = "" + p + "px";
                a.style.height = "" + u + "px";
                a.style.overflow = "hidden";
                a.scrollLeft = Math.floor(this.params.width / 2 - p / 2);
                a.scrollTop = Math.floor(this.params.height / 2 - u / 2)
            } else {
                a.style.width = "" + this.params.width + "px";
                a.style.height = "" + this.params.height + "px"
            }
        },
        reset: function() {
            if (this.preview_active) this.unfreeze();
            this.unflip();
            if (this.userMedia) {
                if (this.stream) {
                    if (this.stream.getVideoTracks) {
                        var e = this.stream.getVideoTracks();
                        if (e && e[0] && e[0].stop) e[0].stop()
                    } else if (this.stream.stop) {
                        this.stream.stop()
                    }
                }
                delete this.stream;
                delete this.video
            }
            if (this.userMedia !== true && this.loaded && !this.iOS) {
                var t = this.getMovie();
                if (t && t._releaseCamera) t._releaseCamera()
            }
            if (this.container) {
                this.container.innerHTML = "";
                delete this.container
            }
            this.loaded = false;
            this.live = false
        },
        set: function() {
            if (arguments.length == 1) {
                for (var e in arguments[0]) {
                    this.params[e] = arguments[0][e]
                }
            } else {
                this.params[arguments[0]] = arguments[1]
            }
        },
        on: function(e, t) {
            e = e.replace(/^on/i, "").toLowerCase();
            if (!this.hooks[e]) this.hooks[e] = [];
            this.hooks[e].push(t)
        },
        off: function(e, t) {
            e = e.replace(/^on/i, "").toLowerCase();
            if (this.hooks[e]) {
                if (t) {
                    var a = this.hooks[e].indexOf(t);
                    if (a > -1) this.hooks[e].splice(a, 1)
                } else {
                    this.hooks[e] = []
                }
            }
        },
        dispatch: function() {
            var t = arguments[0].replace(/^on/i, "").toLowerCase();
            var s = Array.prototype.slice.call(arguments, 1);
            if (this.hooks[t] && this.hooks[t].length) {
                for (var r = 0, o = this.hooks[t].length; r < o; r++) {
                    var n = this.hooks[t][r];
                    if (typeof n == "function") {
                        n.apply(this, s)
                    } else if (typeof n == "object" && n.length == 2) {
                        n[0][n[1]].apply(n[0], s)
                    } else if (e[n]) {
                        e[n].apply(e, s)
                    }
                }
                return true
            } else if (t == "error") {
                var l;
                if (s[0] instanceof a || s[0] instanceof i) {
                    l = s[0].message
                } else {
                    l = "Could not access webcam: " + s[0].name + ": " + s[0].message + " " + s[0].toString()
                }
                alert("Webcam.js Error: " + l)
            }
            return false
        },
        setSWFLocation: function(e) {
            this.set("swfURL", e)
        },
        detectFlash: function() {
            var t = "Shockwave Flash",
                a = "ShockwaveFlash.ShockwaveFlash",
                i = "application/x-shockwave-flash",
                s = e,
                r = navigator,
                o = false;
            if (typeof r.plugins !== "undefined" && typeof r.plugins[t] === "object") {
                var n = r.plugins[t].description;
                if (n && (typeof r.mimeTypes !== "undefined" && r.mimeTypes[i] && r.mimeTypes[i].enabledPlugin)) {
                    o = true
                }
            } else if (typeof s.ActiveXObject !== "undefined") {
                try {
                    var l = new ActiveXObject(a);
                    if (l) {
                        var h = l.GetVariable("$version");
                        if (h) o = true
                    }
                } catch (e) {}
            }
            return o
        },
        getSWFHTML: function() {
            var t = "",
                i = this.params.swfURL;
            if (location.protocol.match(/file/)) {
                this.dispatch("error", new a("Flash does not work from local disk.  Please run from a web server."));
                return '<h3 style="color:red">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>'
            }
            if (!this.detectFlash()) {
                this.dispatch("error", new a("Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again."));
                return '<h3 style="color:red">' + this.params.flashNotDetectedText + "</h3>"
            }
            if (!i) {
                var s = "";
                var r = document.getElementsByTagName("script");
                for (var o = 0, n = r.length; o < n; o++) {
                    var l = r[o].getAttribute("src");
                    if (l && l.match(/\/webcam(\.min)?\.js/)) {
                        s = l.replace(/\/webcam(\.min)?\.js.*$/, "");
                        o = n
                    }
                }
                if (s) i = s + "/webcam.swf";
                else i = "webcam.swf"
            }
            if (e.localStorage && !localStorage.getItem("visited")) {
                this.params.new_user = 1;
                localStorage.setItem("visited", 1)
            }
            var h = "";
            for (var c in this.params) {
                if (h) h += "&";
                h += c + "=" + escape(this.params[c])
            }
            t += '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" type="application/x-shockwave-flash" codebase="' + this.protocol + '://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="' + this.params.width + '" height="' + this.params.height + '" id="webcam_movie_obj" align="middle"><param name="wmode" value="opaque" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="' + i + '" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="' + h + '"/><embed id="webcam_movie_embed" src="' + i + '" wmode="opaque" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="' + this.params.width + '" height="' + this.params.height + '" name="webcam_movie_embed" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="' + h + '"></embed></object>';
            return t
        },
        getMovie: function() {
            if (!this.loaded) return this.dispatch("error", new a("Flash Movie is not loaded yet"));
            var e = document.getElementById("webcam_movie_obj");
            if (!e || !e._snap) e = document.getElementById("webcam_movie_embed");
            if (!e) this.dispatch("error", new a("Cannot locate Flash movie in DOM"));
            return e
        },
        freeze: function() {
            var e = this;
            var t = this.params;
            if (this.preview_active) this.unfreeze();
            var a = this.params.width / this.params.dest_width;
            var i = this.params.height / this.params.dest_height;
            this.unflip();
            var s = t.crop_width || t.dest_width;
            var r = t.crop_height || t.dest_height;
            var o = document.createElement("canvas");
            o.width = s;
            o.height = r;
            var n = o.getContext("2d");
            this.preview_canvas = o;
            this.preview_context = n;
            if (a != 1 || i != 1) {
                o.style.webkitTransformOrigin = "0px 0px";
                o.style.mozTransformOrigin = "0px 0px";
                o.style.msTransformOrigin = "0px 0px";
                o.style.oTransformOrigin = "0px 0px";
                o.style.transformOrigin = "0px 0px";
                o.style.webkitTransform = "scaleX(" + a + ") scaleY(" + i + ")";
                o.style.mozTransform = "scaleX(" + a + ") scaleY(" + i + ")";
                o.style.msTransform = "scaleX(" + a + ") scaleY(" + i + ")";
                o.style.oTransform = "scaleX(" + a + ") scaleY(" + i + ")";
                o.style.transform = "scaleX(" + a + ") scaleY(" + i + ")"
            }
            this.snap(function() {
                o.style.position = "relative";
                o.style.left = "" + e.container.scrollLeft + "px";
                o.style.top = "" + e.container.scrollTop + "px";
                e.container.insertBefore(o, e.peg);
                e.container.style.overflow = "hidden";
                e.preview_active = true
            }, o)
        },
        unfreeze: function() {
            if (this.preview_active) {
                this.container.removeChild(this.preview_canvas);
                delete this.preview_context;
                delete this.preview_canvas;
                this.preview_active = false;
                this.flip()
            }
        },
        flip: function() {
            if (this.params.flip_horiz) {
                var e = this.container.style;
                e.webkitTransform = "scaleX(-1)";
                e.mozTransform = "scaleX(-1)";
                e.msTransform = "scaleX(-1)";
                e.oTransform = "scaleX(-1)";
                e.transform = "scaleX(-1)";
                e.filter = "FlipH";
                e.msFilter = "FlipH"
            }
        },
        unflip: function() {
            if (this.params.flip_horiz) {
                var e = this.container.style;
                e.webkitTransform = "scaleX(1)";
                e.mozTransform = "scaleX(1)";
                e.msTransform = "scaleX(1)";
                e.oTransform = "scaleX(1)";
                e.transform = "scaleX(1)";
                e.filter = "";
                e.msFilter = ""
            }
        },
        savePreview: function(e, t) {
            var a = this.params;
            var i = this.preview_canvas;
            var s = this.preview_context;
            if (t) {
                var r = t.getContext("2d");
                r.drawImage(i, 0, 0)
            }
            e(t ? null : i.toDataURL("image/" + a.image_format, a.jpeg_quality / 100), i, s);
            if (this.params.unfreeze_snap) this.unfreeze()
        },
        snap: function(e, t) {
            if (!e) e = this.params.user_callback;
            if (!t) t = this.params.user_canvas;
            var a = this;
            var s = this.params;
            if (!this.loaded) return this.dispatch("error", new i("Webcam is not loaded yet"));
            if (!e) return this.dispatch("error", new i("Please provide a callback function or canvas to snap()"));
            if (this.preview_active) {
                this.savePreview(e, t);
                return null
            }
            var r = document.createElement("canvas");
            r.width = this.params.dest_width;
            r.height = this.params.dest_height;
            var o = r.getContext("2d");
            if (this.params.flip_horiz) {
                o.translate(s.dest_width, 0);
                o.scale(-1, 1)
            }
            var n = function() {
                if (this.src && this.width && this.height) {
                    o.drawImage(this, 0, 0, s.dest_width, s.dest_height)
                }
                if (s.crop_width && s.crop_height) {
                    var a = document.createElement("canvas");
                    a.width = s.crop_width;
                    a.height = s.crop_height;
                    var i = a.getContext("2d");
                    i.drawImage(r, Math.floor(s.dest_width / 2 - s.crop_width / 2), Math.floor(s.dest_height / 2 - s.crop_height / 2), s.crop_width, s.crop_height, 0, 0, s.crop_width, s.crop_height);
                    o = i;
                    r = a
                }
                if (t) {
                    var n = t.getContext("2d");
                    n.drawImage(r, 0, 0)
                }
                e(t ? null : r.toDataURL("image/" + s.image_format, s.jpeg_quality / 100), r, o)
            };
            if (this.userMedia) {
                o.drawImage(this.video, 0, 0, this.params.dest_width, this.params.dest_height);
                n()
            } else if (this.iOS) {
                var l = document.getElementById(this.container.id + "-ios_div");
                var h = document.getElementById(this.container.id + "-ios_img");
                var c = document.getElementById(this.container.id + "-ios_input");
                iFunc = function(e) {
                    n.call(h);
                    h.removeEventListener("load", iFunc);
                    l.style.backgroundImage = "none";
                    h.removeAttribute("src");
                    c.value = null
                };
                if (!c.value) {
                    h.addEventListener("load", iFunc);
                    c.style.display = "block";
                    c.focus();
                    c.click();
                    c.style.display = "none"
                } else {
                    iFunc(null)
                }
            } else {
                var d = this.getMovie()._snap();
                var h = new Image;
                h.onload = n;
                h.src = "data:image/" + this.params.image_format + ";base64," + d
            }
            return null
        },
        configure: function(e) {
            if (!e) e = "camera";
            this.getMovie()._configure(e)
        },
        flashNotify: function(e, t) {
            switch (e) {
                case "flashLoadComplete":
                    this.loaded = true;
                    this.dispatch("load");
                    break;
                case "cameraLive":
                    this.live = true;
                    this.dispatch("live");
                    break;
                case "error":
                    this.dispatch("error", new a(t));
                    break;
                default:
                    break
            }
        },
        b64ToUint6: function(e) {
            return e > 64 && e < 91 ? e - 65 : e > 96 && e < 123 ? e - 71 : e > 47 && e < 58 ? e + 4 : e === 43 ? 62 : e === 47 ? 63 : 0
        },
        base64DecToArr: function(e, t) {
            var a = e.replace(/[^A-Za-z0-9\+\/]/g, ""),
                i = a.length,
                s = t ? Math.ceil((i * 3 + 1 >> 2) / t) * t : i * 3 + 1 >> 2,
                r = new Uint8Array(s);
            for (var o, n, l = 0, h = 0, c = 0; c < i; c++) {
                n = c & 3;
                l |= this.b64ToUint6(a.charCodeAt(c)) << 18 - 6 * n;
                if (n === 3 || i - c === 1) {
                    for (o = 0; o < 3 && h < s; o++, h++) {
                        r[h] = l >>> (16 >>> o & 24) & 255
                    }
                    l = 0
                }
            }
            return r
        },
        upload: function(e, t, a) {
            var i = this.params.upload_name || "webcam";
            var s = "";
            if (e.match(/^data\:image\/(\w+)/)) s = RegExp.$1;
            else throw "Cannot locate image format in Data URI";
            var r = e.replace(/^data\:image\/\w+\;base64\,/, "");
            var o = new XMLHttpRequest;
            o.open("POST", t, true);
            if (o.upload && o.upload.addEventListener) {
                o.upload.addEventListener("progress", function(e) {
                    if (e.lengthComputable) {
                        var t = e.loaded / e.total;
                        Webcam.dispatch("uploadProgress", t, e)
                    }
                }, false)
            }
            var n = this;
            o.onload = function() {
                if (a) a.apply(n, [o.status, o.responseText, o.statusText]);
                Webcam.dispatch("uploadComplete", o.status, o.responseText, o.statusText)
            };
            var l = new Blob([this.base64DecToArr(r)], {
                type: "image/" + s
            });
            var h = new FormData;
            h.append(i, l, i + "." + s.replace(/e/, ""));
            o.send(h)
        }
    };
    Webcam.init();
    if (typeof define === "function" && define.amd) {
        define(function() {
            return Webcam
        })
    } else if (typeof module === "object" && module.exports) {
        module.exports = Webcam
    } else {
        e.Webcam = Webcam
    }
})(window);
/* Font Face Observer v2.0.13 -  Bram Stein. License: BSD-3-Clause */
(function() {
    'use strict';
    var f, g = [];

    function l(a) {
        g.push(a);
        1 == g.length && f()
    }

    function m() {
        for (; g.length;) g[0](), g.shift()
    }
    f = function() {
        setTimeout(m)
    };

    function n(a) {
        this.a = p;
        this.b = void 0;
        this.f = [];
        var b = this;
        try {
            a(function(a) {
                q(b, a)
            }, function(a) {
                r(b, a)
            })
        } catch (c) {
            r(b, c)
        }
    }
    var p = 2;

    function t(a) {
        return new n(function(b, c) {
            c(a)
        })
    }

    function u(a) {
        return new n(function(b) {
            b(a)
        })
    }

    function q(a, b) {
        if (a.a == p) {
            if (b == a) throw new TypeError;
            var c = !1;
            try {
                var d = b && b.then;
                if (null != b && "object" == typeof b && "function" == typeof d) {
                    d.call(b, function(b) {
                        c || q(a, b);
                        c = !0
                    }, function(b) {
                        c || r(a, b);
                        c = !0
                    });
                    return
                }
            } catch (e) {
                c || r(a, e);
                return
            }
            a.a = 0;
            a.b = b;
            v(a)
        }
    }

    function r(a, b) {
        if (a.a == p) {
            if (b == a) throw new TypeError;
            a.a = 1;
            a.b = b;
            v(a)
        }
    }

    function v(a) {
        l(function() {
            if (a.a != p)
                for (; a.f.length;) {
                    var b = a.f.shift(),
                        c = b[0],
                        d = b[1],
                        e = b[2],
                        b = b[3];
                    try {
                        0 == a.a ? "function" == typeof c ? e(c.call(void 0, a.b)) : e(a.b) : 1 == a.a && ("function" == typeof d ? e(d.call(void 0, a.b)) : b(a.b))
                    } catch (h) {
                        b(h)
                    }
                }
        })
    }
    n.prototype.g = function(a) {
        return this.c(void 0, a)
    };
    n.prototype.c = function(a, b) {
        var c = this;
        return new n(function(d, e) {
            c.f.push([a, b, d, e]);
            v(c)
        })
    };

    function w(a) {
        return new n(function(b, c) {
            function d(c) {
                return function(d) {
                    h[c] = d;
                    e += 1;
                    e == a.length && b(h)
                }
            }
            var e = 0,
                h = [];
            0 == a.length && b(h);
            for (var k = 0; k < a.length; k += 1) u(a[k]).c(d(k), c)
        })
    }

    function x(a) {
        return new n(function(b, c) {
            for (var d = 0; d < a.length; d += 1) u(a[d]).c(b, c)
        })
    };
    window.Promise || (window.Promise = n, window.Promise.resolve = u, window.Promise.reject = t, window.Promise.race = x, window.Promise.all = w, window.Promise.prototype.then = n.prototype.c, window.Promise.prototype["catch"] = n.prototype.g);
}());
(function() {
    function l(a, b) {
        document.addEventListener ? a.addEventListener("scroll", b, !1) : a.attachEvent("scroll", b)
    }

    function m(a) {
        document.body ? a() : document.addEventListener ? document.addEventListener("DOMContentLoaded", function c() {
            document.removeEventListener("DOMContentLoaded", c);
            a()
        }) : document.attachEvent("onreadystatechange", function k() {
            if ("interactive" == document.readyState || "complete" == document.readyState) document.detachEvent("onreadystatechange", k), a()
        })
    };

    function r(a) {
        this.a = document.createElement("div");
        this.a.setAttribute("aria-hidden", "true");
        this.a.appendChild(document.createTextNode(a));
        this.b = document.createElement("span");
        this.c = document.createElement("span");
        this.h = document.createElement("span");
        this.f = document.createElement("span");
        this.g = -1;
        this.b.style.cssText = "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
        this.c.style.cssText = "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
        this.f.style.cssText = "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
        this.h.style.cssText = "display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";
        this.b.appendChild(this.h);
        this.c.appendChild(this.f);
        this.a.appendChild(this.b);
        this.a.appendChild(this.c)
    }

    function t(a, b) {
        a.a.style.cssText = "max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:" + b + ";"
    }

    function y(a) {
        var b = a.a.offsetWidth,
            c = b + 100;
        a.f.style.width = c + "px";
        a.c.scrollLeft = c;
        a.b.scrollLeft = a.b.scrollWidth + 100;
        return a.g !== b ? (a.g = b, !0) : !1
    }

    function z(a, b) {
        function c() {
            var a = k;
            y(a) && a.a.parentNode && b(a.g)
        }
        var k = a;
        l(a.b, c);
        l(a.c, c);
        y(a)
    };

    function A(a, b) {
        var c = b || {};
        this.family = a;
        this.style = c.style || "normal";
        this.weight = c.weight || "normal";
        this.stretch = c.stretch || "normal"
    }
    var B = null,
        C = null,
        E = null,
        F = null;

    function G() {
        if (null === C)
            if (J() && /Apple/.test(window.navigator.vendor)) {
                var a = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);
                C = !!a && 603 > parseInt(a[1], 10)
            } else C = !1;
        return C
    }

    function J() {
        null === F && (F = !!document.fonts);
        return F
    }

    function K() {
        if (null === E) {
            var a = document.createElement("div");
            try {
                a.style.font = "condensed 100px sans-serif"
            } catch (b) {}
            E = "" !== a.style.font
        }
        return E
    }

    function L(a, b) {
        return [a.style, a.weight, K() ? a.stretch : "", "100px", b].join(" ")
    }
    A.prototype.load = function(a, b) {
        var c = this,
            k = a || "BESbswy",
            q = 0,
            D = b || 3E3,
            H = (new Date).getTime();
        return new Promise(function(a, b) {
            if (J() && !G()) {
                var M = new Promise(function(a, b) {
                        function e() {
                            (new Date).getTime() - H >= D ? b() : document.fonts.load(L(c, '"' + c.family + '"'), k).then(function(c) {
                                1 <= c.length ? a() : setTimeout(e, 25)
                            }, function() {
                                b()
                            })
                        }
                        e()
                    }),
                    N = new Promise(function(a, c) {
                        q = setTimeout(c, D)
                    });
                Promise.race([N, M]).then(function() {
                    clearTimeout(q);
                    a(c)
                }, function() {
                    b(c)
                })
            } else m(function() {
                function u() {
                    var b;
                    if (b = -1 !=
                        f && -1 != g || -1 != f && -1 != h || -1 != g && -1 != h)(b = f != g && f != h && g != h) || (null === B && (b = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent), B = !!b && (536 > parseInt(b[1], 10) || 536 === parseInt(b[1], 10) && 11 >= parseInt(b[2], 10))), b = B && (f == v && g == v && h == v || f == w && g == w && h == w || f == x && g == x && h == x)), b = !b;
                    b && (d.parentNode && d.parentNode.removeChild(d), clearTimeout(q), a(c))
                }

                function I() {
                    if ((new Date).getTime() - H >= D) d.parentNode && d.parentNode.removeChild(d), b(c);
                    else {
                        var a = document.hidden;
                        if (!0 === a || void 0 === a) f = e.a.offsetWidth,
                            g = n.a.offsetWidth, h = p.a.offsetWidth, u();
                        q = setTimeout(I, 50)
                    }
                }
                var e = new r(k),
                    n = new r(k),
                    p = new r(k),
                    f = -1,
                    g = -1,
                    h = -1,
                    v = -1,
                    w = -1,
                    x = -1,
                    d = document.createElement("div");
                d.dir = "ltr";
                t(e, L(c, "sans-serif"));
                t(n, L(c, "serif"));
                t(p, L(c, "monospace"));
                d.appendChild(e.a);
                d.appendChild(n.a);
                d.appendChild(p.a);
                document.body.appendChild(d);
                v = e.a.offsetWidth;
                w = n.a.offsetWidth;
                x = p.a.offsetWidth;
                I();
                z(e, function(a) {
                    f = a;
                    u()
                });
                t(e, L(c, '"' + c.family + '",sans-serif'));
                z(n, function(a) {
                    g = a;
                    u()
                });
                t(n, L(c, '"' + c.family + '",serif'));
                z(p, function(a) {
                    h = a;
                    u()
                });
                t(p, L(c, '"' + c.family + '",monospace'))
            })
        })
    };
    "object" === typeof module ? module.exports = A : (window.FontFaceObserver = A, window.FontFaceObserver.prototype.load = A.prototype.load);
}());
/* perfect-scrollbar v0.8.1 */
! function t(e, n, r) {
    function o(i, s) {
        if (!n[i]) {
            if (!e[i]) {
                var a = "function" == typeof require && require;
                if (!s && a) return a(i, !0);
                if (l) return l(i, !0);
                var c = new Error("Cannot find module '" + i + "'");
                throw c.code = "MODULE_NOT_FOUND", c
            }
            var u = n[i] = {
                exports: {}
            };
            e[i][0].call(u.exports, function(t) {
                var n = e[i][1][t];
                return o(n ? n : t)
            }, u, u.exports, t, e, n, r)
        }
        return n[i].exports
    }
    for (var l = "function" == typeof require && require, i = 0; i < r.length; i++) o(r[i]);
    return o
}({
    1: [function(t, e, n) {
        "use strict";

        function r(t) {
            t.fn.perfectScrollbar = function(t) {
                return this.each(function() {
                    if ("object" == typeof t || "undefined" == typeof t) {
                        var e = t;
                        l.get(this) || o.initialize(this, e)
                    } else {
                        var n = t;
                        "update" === n ? o.update(this) : "destroy" === n && o.destroy(this)
                    }
                })
            }
        }
        var o = t("../main"),
            l = t("../plugin/instances");
        if ("function" == typeof define && define.amd) define(["jquery"], r);
        else {
            var i = window.jQuery ? window.jQuery : window.$;
            "undefined" != typeof i && r(i)
        }
        e.exports = r
    }, {
        "../main": 6,
        "../plugin/instances": 17
    }],
    2: [function(t, e, n) {
        "use strict";

        function r(t, e) {
            return window.getComputedStyle(t)[e]
        }

        function o(t, e, n) {
            return "number" == typeof n && (n = n.toString() + "px"), t.style[e] = n, t
        }

        function l(t, e) {
            for (var n in e) {
                var r = e[n];
                "number" == typeof r && (r = r.toString() + "px"), t.style[n] = r
            }
            return t
        }
        var i = {};
        i.create = function(t, e) {
            var n = document.createElement(t);
            return n.className = e, n
        }, i.appendTo = function(t, e) {
            return e.appendChild(t), t
        }, i.css = function(t, e, n) {
            return "object" == typeof e ? l(t, e) : "undefined" == typeof n ? r(t, e) : o(t, e, n)
        }, i.matches = function(t, e) {
            return "undefined" != typeof t.matches ? t.matches(e) : t.msMatchesSelector(e)
        }, i.remove = function(t) {
            "undefined" != typeof t.remove ? t.remove() : t.parentNode && t.parentNode.removeChild(t)
        }, i.queryChildren = function(t, e) {
            return Array.prototype.filter.call(t.childNodes, function(t) {
                return i.matches(t, e)
            })
        }, e.exports = i
    }, {}],
    3: [function(t, e, n) {
        "use strict";
        var r = function(t) {
            this.element = t, this.events = {}
        };
        r.prototype.bind = function(t, e) {
            "undefined" == typeof this.events[t] && (this.events[t] = []), this.events[t].push(e), this.element.addEventListener(t, e, !1)
        }, r.prototype.unbind = function(t, e) {
            var n = "undefined" != typeof e;
            this.events[t] = this.events[t].filter(function(r) {
                return !(!n || r === e) || (this.element.removeEventListener(t, r, !1), !1)
            }, this)
        }, r.prototype.unbindAll = function() {
            for (var t in this.events) this.unbind(t)
        };
        var o = function() {
            this.eventElements = []
        };
        o.prototype.eventElement = function(t) {
            var e = this.eventElements.filter(function(e) {
                return e.element === t
            })[0];
            return "undefined" == typeof e && (e = new r(t), this.eventElements.push(e)), e
        }, o.prototype.bind = function(t, e, n) {
            this.eventElement(t).bind(e, n)
        }, o.prototype.unbind = function(t, e, n) {
            this.eventElement(t).unbind(e, n)
        }, o.prototype.unbindAll = function() {
            for (var t = 0; t < this.eventElements.length; t++) this.eventElements[t].unbindAll()
        }, o.prototype.once = function(t, e, n) {
            var r = this.eventElement(t),
                o = function(t) {
                    r.unbind(e, o), n(t)
                };
            r.bind(e, o)
        }, e.exports = o
    }, {}],
    4: [function(t, e, n) {
        "use strict";
        e.exports = function() {
            function t() {
                return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
            }
            return function() {
                return t() + t() + "-" + t() + "-" + t() + "-" + t() + "-" + t() + t() + t()
            }
        }()
    }, {}],
    5: [function(t, e, n) {
        "use strict";

        function r(t) {
            var e, n = ["ps--in-scrolling"];
            return e = "undefined" == typeof t ? ["ps--x", "ps--y"] : ["ps--" + t], n.concat(e)
        }
        var o = t("./dom"),
            l = n.toInt = function(t) {
                return parseInt(t, 10) || 0
            };
        n.isEditable = function(t) {
            return o.matches(t, "input,[contenteditable]") || o.matches(t, "select,[contenteditable]") || o.matches(t, "textarea,[contenteditable]") || o.matches(t, "button,[contenteditable]")
        }, n.removePsClasses = function(t) {
            for (var e = 0; e < t.classList.length; e++) {
                var n = t.classList[e];
                0 === n.indexOf("ps-") && t.classList.remove(n)
            }
        }, n.outerWidth = function(t) {
            return l(o.css(t, "width")) + l(o.css(t, "paddingLeft")) + l(o.css(t, "paddingRight")) + l(o.css(t, "borderLeftWidth")) + l(o.css(t, "borderRightWidth"))
        }, n.startScrolling = function(t, e) {
            for (var n = r(e), o = 0; o < n.length; o++) t.classList.add(n[o])
        }, n.stopScrolling = function(t, e) {
            for (var n = r(e), o = 0; o < n.length; o++) t.classList.remove(n[o])
        }, n.env = {
            isWebKit: "undefined" != typeof document && "WebkitAppearance" in document.documentElement.style,
            supportsTouch: "undefined" != typeof window && ("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch),
            supportsIePointer: "undefined" != typeof window && null !== window.navigator.msMaxTouchPoints
        }
    }, {
        "./dom": 2
    }],
    6: [function(t, e, n) {
        "use strict";
        var r = t("./plugin/destroy"),
            o = t("./plugin/initialize"),
            l = t("./plugin/update");
        e.exports = {
            initialize: o,
            update: l,
            destroy: r
        }
    }, {
        "./plugin/destroy": 8,
        "./plugin/initialize": 16,
        "./plugin/update": 20
    }],
    7: [function(t, e, n) {
        "use strict";
        e.exports = function() {
            return {
                handlers: ["click-rail", "drag-scrollbar", "keyboard", "wheel", "touch"],
                maxScrollbarLength: null,
                minScrollbarLength: null,
                scrollXMarginOffset: 0,
                scrollYMarginOffset: 0,
                suppressScrollX: !1,
                suppressScrollY: !1,
                swipePropagation: !0,
                swipeEasing: !0,
                useBothWheelAxes: !1,
                wheelPropagation: !1,
                wheelSpeed: 1,
                theme: "default"
            }
        }
    }, {}],
    8: [function(t, e, n) {
        "use strict";
        var r = t("../lib/helper"),
            o = t("../lib/dom"),
            l = t("./instances");
        e.exports = function(t) {
            var e = l.get(t);
            e && (e.event.unbindAll(), o.remove(e.scrollbarX), o.remove(e.scrollbarY), o.remove(e.scrollbarXRail), o.remove(e.scrollbarYRail), r.removePsClasses(t), l.remove(t))
        }
    }, {
        "../lib/dom": 2,
        "../lib/helper": 5,
        "./instances": 17
    }],
    9: [function(t, e, n) {
        "use strict";

        function r(t, e) {
            function n(t) {
                return t.getBoundingClientRect()
            }
            var r = function(t) {
                t.stopPropagation()
            };
            e.event.bind(e.scrollbarY, "click", r), e.event.bind(e.scrollbarYRail, "click", function(r) {
                var o = r.pageY - window.pageYOffset - n(e.scrollbarYRail).top,
                    s = o > e.scrollbarYTop ? 1 : -1;
                i(t, "top", t.scrollTop + s * e.containerHeight), l(t), r.stopPropagation()
            }), e.event.bind(e.scrollbarX, "click", r), e.event.bind(e.scrollbarXRail, "click", function(r) {
                var o = r.pageX - window.pageXOffset - n(e.scrollbarXRail).left,
                    s = o > e.scrollbarXLeft ? 1 : -1;
                i(t, "left", t.scrollLeft + s * e.containerWidth), l(t), r.stopPropagation()
            })
        }
        var o = t("../instances"),
            l = t("../update-geometry"),
            i = t("../update-scroll");
        e.exports = function(t) {
            var e = o.get(t);
            r(t, e)
        }
    }, {
        "../instances": 17,
        "../update-geometry": 18,
        "../update-scroll": 19
    }],
    10: [function(t, e, n) {
        "use strict";

        function r(t, e) {
            function n(n) {
                var o = r + n * e.railXRatio,
                    i = Math.max(0, e.scrollbarXRail.getBoundingClientRect().left) + e.railXRatio * (e.railXWidth - e.scrollbarXWidth);
                o < 0 ? e.scrollbarXLeft = 0 : o > i ? e.scrollbarXLeft = i : e.scrollbarXLeft = o;
                var s = l.toInt(e.scrollbarXLeft * (e.contentWidth - e.containerWidth) / (e.containerWidth - e.railXRatio * e.scrollbarXWidth)) - e.negativeScrollAdjustment;
                c(t, "left", s)
            }
            var r = null,
                o = null,
                s = function(e) {
                    n(e.pageX - o), a(t), e.stopPropagation(), e.preventDefault()
                },
                u = function() {
                    l.stopScrolling(t, "x"), e.event.unbind(e.ownerDocument, "mousemove", s)
                };
            e.event.bind(e.scrollbarX, "mousedown", function(n) {
                o = n.pageX, r = l.toInt(i.css(e.scrollbarX, "left")) * e.railXRatio, l.startScrolling(t, "x"), e.event.bind(e.ownerDocument, "mousemove", s), e.event.once(e.ownerDocument, "mouseup", u), n.stopPropagation(), n.preventDefault()
            })
        }

        function o(t, e) {
            function n(n) {
                var o = r + n * e.railYRatio,
                    i = Math.max(0, e.scrollbarYRail.getBoundingClientRect().top) + e.railYRatio * (e.railYHeight - e.scrollbarYHeight);
                o < 0 ? e.scrollbarYTop = 0 : o > i ? e.scrollbarYTop = i : e.scrollbarYTop = o;
                var s = l.toInt(e.scrollbarYTop * (e.contentHeight - e.containerHeight) / (e.containerHeight - e.railYRatio * e.scrollbarYHeight));
                c(t, "top", s)
            }
            var r = null,
                o = null,
                s = function(e) {
                    n(e.pageY - o), a(t), e.stopPropagation(), e.preventDefault()
                },
                u = function() {
                    l.stopScrolling(t, "y"), e.event.unbind(e.ownerDocument, "mousemove", s)
                };
            e.event.bind(e.scrollbarY, "mousedown", function(n) {
                o = n.pageY, r = l.toInt(i.css(e.scrollbarY, "top")) * e.railYRatio, l.startScrolling(t, "y"), e.event.bind(e.ownerDocument, "mousemove", s), e.event.once(e.ownerDocument, "mouseup", u), n.stopPropagation(), n.preventDefault()
            })
        }
        var l = t("../../lib/helper"),
            i = t("../../lib/dom"),
            s = t("../instances"),
            a = t("../update-geometry"),
            c = t("../update-scroll");
        e.exports = function(t) {
            var e = s.get(t);
            r(t, e), o(t, e)
        }
    }, {
        "../../lib/dom": 2,
        "../../lib/helper": 5,
        "../instances": 17,
        "../update-geometry": 18,
        "../update-scroll": 19
    }],
    11: [function(t, e, n) {
        "use strict";

        function r(t, e) {
            function n(n, r) {
                var o = t.scrollTop;
                if (0 === n) {
                    if (!e.scrollbarYActive) return !1;
                    if (0 === o && r > 0 || o >= e.contentHeight - e.containerHeight && r < 0) return !e.settings.wheelPropagation
                }
                var l = t.scrollLeft;
                if (0 === r) {
                    if (!e.scrollbarXActive) return !1;
                    if (0 === l && n < 0 || l >= e.contentWidth - e.containerWidth && n > 0) return !e.settings.wheelPropagation
                }
                return !0
            }
            var r = !1;
            e.event.bind(t, "mouseenter", function() {
                r = !0
            }), e.event.bind(t, "mouseleave", function() {
                r = !1
            });
            var i = !1;
            e.event.bind(e.ownerDocument, "keydown", function(c) {
                if (!(c.isDefaultPrevented && c.isDefaultPrevented() || c.defaultPrevented)) {
                    var u = l.matches(e.scrollbarX, ":focus") || l.matches(e.scrollbarY, ":focus");
                    if (r || u) {
                        var d = document.activeElement ? document.activeElement : e.ownerDocument.activeElement;
                        if (d) {
                            if ("IFRAME" === d.tagName) d = d.contentDocument.activeElement;
                            else
                                for (; d.shadowRoot;) d = d.shadowRoot.activeElement;
                            if (o.isEditable(d)) return
                        }
                        var p = 0,
                            f = 0;
                        switch (c.which) {
                            case 37:
                                p = c.metaKey ? -e.contentWidth : c.altKey ? -e.containerWidth : -30;
                                break;
                            case 38:
                                f = c.metaKey ? e.contentHeight : c.altKey ? e.containerHeight : 30;
                                break;
                            case 39:
                                p = c.metaKey ? e.contentWidth : c.altKey ? e.containerWidth : 30;
                                break;
                            case 40:
                                f = c.metaKey ? -e.contentHeight : c.altKey ? -e.containerHeight : -30;
                                break;
                            case 33:
                                f = 90;
                                break;
                            case 32:
                                f = c.shiftKey ? 90 : -90;
                                break;
                            case 34:
                                f = -90;
                                break;
                            case 35:
                                f = c.ctrlKey ? -e.contentHeight : -e.containerHeight;
                                break;
                            case 36:
                                f = c.ctrlKey ? t.scrollTop : e.containerHeight;
                                break;
                            default:
                                return
                        }
                        a(t, "top", t.scrollTop - f), a(t, "left", t.scrollLeft + p), s(t), i = n(p, f), i && c.preventDefault()
                    }
                }
            })
        }
        var o = t("../../lib/helper"),
            l = t("../../lib/dom"),
            i = t("../instances"),
            s = t("../update-geometry"),
            a = t("../update-scroll");
        e.exports = function(t) {
            var e = i.get(t);
            r(t, e)
        }
    }, {
        "../../lib/dom": 2,
        "../../lib/helper": 5,
        "../instances": 17,
        "../update-geometry": 18,
        "../update-scroll": 19
    }],
    12: [function(t, e, n) {
        "use strict";

        function r(t, e) {
            function n(n, r) {
                var o = t.scrollTop;
                if (0 === n) {
                    if (!e.scrollbarYActive) return !1;
                    if (0 === o && r > 0 || o >= e.contentHeight - e.containerHeight && r < 0) return !e.settings.wheelPropagation
                }
                var l = t.scrollLeft;
                if (0 === r) {
                    if (!e.scrollbarXActive) return !1;
                    if (0 === l && n < 0 || l >= e.contentWidth - e.containerWidth && n > 0) return !e.settings.wheelPropagation
                }
                return !0
            }

            function r(t) {
                var e = t.deltaX,
                    n = -1 * t.deltaY;
                return "undefined" != typeof e && "undefined" != typeof n || (e = -1 * t.wheelDeltaX / 6, n = t.wheelDeltaY / 6), t.deltaMode && 1 === t.deltaMode && (e *= 10, n *= 10), e !== e && n !== n && (e = 0, n = t.wheelDelta), t.shiftKey ? [-n, -e] : [e, n]
            }

            function o(e, n) {
                var r = t.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");
                if (r) {
                    var o = window.getComputedStyle(r),
                        l = [o.overflow, o.overflowX, o.overflowY].join("");
                    if (!l.match(/(scroll|auto)/)) return !1;
                    var i = r.scrollHeight - r.clientHeight;
                    if (i > 0 && !(0 === r.scrollTop && n > 0 || r.scrollTop === i && n < 0)) return !0;
                    var s = r.scrollLeft - r.clientWidth;
                    if (s > 0 && !(0 === r.scrollLeft && e < 0 || r.scrollLeft === s && e > 0)) return !0
                }
                return !1
            }

            function s(s) {
                var c = r(s),
                    u = c[0],
                    d = c[1];
                o(u, d) || (a = !1, e.settings.useBothWheelAxes ? e.scrollbarYActive && !e.scrollbarXActive ? (d ? i(t, "top", t.scrollTop - d * e.settings.wheelSpeed) : i(t, "top", t.scrollTop + u * e.settings.wheelSpeed), a = !0) : e.scrollbarXActive && !e.scrollbarYActive && (u ? i(t, "left", t.scrollLeft + u * e.settings.wheelSpeed) : i(t, "left", t.scrollLeft - d * e.settings.wheelSpeed), a = !0) : (i(t, "top", t.scrollTop - d * e.settings.wheelSpeed), i(t, "left", t.scrollLeft + u * e.settings.wheelSpeed)), l(t), a = a || n(u, d), a && (s.stopPropagation(), s.preventDefault()))
            }
            var a = !1;
            "undefined" != typeof window.onwheel ? e.event.bind(t, "wheel", s) : "undefined" != typeof window.onmousewheel && e.event.bind(t, "mousewheel", s)
        }
        var o = t("../instances"),
            l = t("../update-geometry"),
            i = t("../update-scroll");
        e.exports = function(t) {
            var e = o.get(t);
            r(t, e)
        }
    }, {
        "../instances": 17,
        "../update-geometry": 18,
        "../update-scroll": 19
    }],
    13: [function(t, e, n) {
        "use strict";

        function r(t, e) {
            e.event.bind(t, "scroll", function() {
                l(t)
            })
        }
        var o = t("../instances"),
            l = t("../update-geometry");
        e.exports = function(t) {
            var e = o.get(t);
            r(t, e)
        }
    }, {
        "../instances": 17,
        "../update-geometry": 18
    }],
    14: [function(t, e, n) {
        "use strict";

        function r(t, e) {
            function n() {
                var t = window.getSelection ? window.getSelection() : document.getSelection ? document.getSelection() : "";
                return 0 === t.toString().length ? null : t.getRangeAt(0).commonAncestorContainer
            }

            function r() {
                c || (c = setInterval(function() {
                    return l.get(t) ? (s(t, "top", t.scrollTop + u.top), s(t, "left", t.scrollLeft + u.left), void i(t)) : void clearInterval(c)
                }, 50))
            }

            function a() {
                c && (clearInterval(c), c = null), o.stopScrolling(t)
            }
            var c = null,
                u = {
                    top: 0,
                    left: 0
                },
                d = !1;
            e.event.bind(e.ownerDocument, "selectionchange", function() {
                t.contains(n()) ? d = !0 : (d = !1, a())
            }), e.event.bind(window, "mouseup", function() {
                d && (d = !1, a())
            }), e.event.bind(window, "keyup", function() {
                d && (d = !1, a())
            }), e.event.bind(window, "mousemove", function(e) {
                if (d) {
                    var n = {
                            x: e.pageX,
                            y: e.pageY
                        },
                        l = {
                            left: t.offsetLeft,
                            right: t.offsetLeft + t.offsetWidth,
                            top: t.offsetTop,
                            bottom: t.offsetTop + t.offsetHeight
                        };
                    n.x < l.left + 3 ? (u.left = -5, o.startScrolling(t, "x")) : n.x > l.right - 3 ? (u.left = 5, o.startScrolling(t, "x")) : u.left = 0, n.y < l.top + 3 ? (l.top + 3 - n.y < 5 ? u.top = -5 : u.top = -20, o.startScrolling(t, "y")) : n.y > l.bottom - 3 ? (n.y - l.bottom + 3 < 5 ? u.top = 5 : u.top = 20, o.startScrolling(t, "y")) : u.top = 0, 0 === u.top && 0 === u.left ? a() : r()
                }
            })
        }
        var o = t("../../lib/helper"),
            l = t("../instances"),
            i = t("../update-geometry"),
            s = t("../update-scroll");
        e.exports = function(t) {
            var e = l.get(t);
            r(t, e)
        }
    }, {
        "../../lib/helper": 5,
        "../instances": 17,
        "../update-geometry": 18,
        "../update-scroll": 19
    }],
    15: [function(t, e, n) {
        "use strict";

        function r(t, e, n, r) {
            function o(n, r) {
                var o = t.scrollTop,
                    l = t.scrollLeft,
                    i = Math.abs(n),
                    s = Math.abs(r);
                if (s > i) {
                    if (r < 0 && o === e.contentHeight - e.containerHeight || r > 0 && 0 === o) return !e.settings.swipePropagation
                } else if (i > s && (n < 0 && l === e.contentWidth - e.containerWidth || n > 0 && 0 === l)) return !e.settings.swipePropagation;
                return !0
            }

            function a(e, n) {
                s(t, "top", t.scrollTop - n), s(t, "left", t.scrollLeft - e), i(t)
            }

            function c() {
                w = !0
            }

            function u() {
                w = !1
            }

            function d(t) {
                return t.targetTouches ? t.targetTouches[0] : t
            }

            function p(t) {
                return (!t.pointerType || "pen" !== t.pointerType || 0 !== t.buttons) && (!(!t.targetTouches || 1 !== t.targetTouches.length) || !(!t.pointerType || "mouse" === t.pointerType || t.pointerType === t.MSPOINTER_TYPE_MOUSE))
            }

            function f(t) {
                if (p(t)) {
                    Y = !0;
                    var e = d(t);
                    g.pageX = e.pageX, g.pageY = e.pageY, v = (new Date).getTime(), null !== y && clearInterval(y), t.stopPropagation()
                }
            }

            function h(t) {
                if (!Y && e.settings.swipePropagation && f(t), !w && Y && p(t)) {
                    var n = d(t),
                        r = {
                            pageX: n.pageX,
                            pageY: n.pageY
                        },
                        l = r.pageX - g.pageX,
                        i = r.pageY - g.pageY;
                    a(l, i), g = r;
                    var s = (new Date).getTime(),
                        c = s - v;
                    c > 0 && (m.x = l / c, m.y = i / c, v = s), o(l, i) && (t.stopPropagation(), t.preventDefault())
                }
            }

            function b() {
                !w && Y && (Y = !1, e.settings.swipeEasing && (clearInterval(y), y = setInterval(function() {
                    return l.get(t) && (m.x || m.y) ? Math.abs(m.x) < .01 && Math.abs(m.y) < .01 ? void clearInterval(y) : (a(30 * m.x, 30 * m.y), m.x *= .8, void(m.y *= .8)) : void clearInterval(y)
                }, 10)))
            }
            var g = {},
                v = 0,
                m = {},
                y = null,
                w = !1,
                Y = !1;
            n ? (e.event.bind(window, "touchstart", c), e.event.bind(window, "touchend", u), e.event.bind(t, "touchstart", f), e.event.bind(t, "touchmove", h), e.event.bind(t, "touchend", b)) : r && (window.PointerEvent ? (e.event.bind(window, "pointerdown", c), e.event.bind(window, "pointerup", u), e.event.bind(t, "pointerdown", f), e.event.bind(t, "pointermove", h), e.event.bind(t, "pointerup", b)) : window.MSPointerEvent && (e.event.bind(window, "MSPointerDown", c), e.event.bind(window, "MSPointerUp", u), e.event.bind(t, "MSPointerDown", f), e.event.bind(t, "MSPointerMove", h), e.event.bind(t, "MSPointerUp", b)))
        }
        var o = t("../../lib/helper"),
            l = t("../instances"),
            i = t("../update-geometry"),
            s = t("../update-scroll");
        e.exports = function(t) {
            if (o.env.supportsTouch || o.env.supportsIePointer) {
                var e = l.get(t);
                r(t, e, o.env.supportsTouch, o.env.supportsIePointer)
            }
        }
    }, {
        "../../lib/helper": 5,
        "../instances": 17,
        "../update-geometry": 18,
        "../update-scroll": 19
    }],
    16: [function(t, e, n) {
        "use strict";
        var r = t("./instances"),
            o = t("./update-geometry"),
            l = {
                "click-rail": t("./handler/click-rail"),
                "drag-scrollbar": t("./handler/drag-scrollbar"),
                keyboard: t("./handler/keyboard"),
                wheel: t("./handler/mouse-wheel"),
                touch: t("./handler/touch"),
                selection: t("./handler/selection")
            },
            i = t("./handler/native-scroll");
        e.exports = function(t, e) {
            t.classList.add("ps");
            var n = r.add(t, "object" == typeof e ? e : {});
            t.classList.add("ps--theme_" + n.settings.theme), n.settings.handlers.forEach(function(e) {
                l[e](t)
            }), i(t), o(t)
        }
    }, {
        "./handler/click-rail": 9,
        "./handler/drag-scrollbar": 10,
        "./handler/keyboard": 11,
        "./handler/mouse-wheel": 12,
        "./handler/native-scroll": 13,
        "./handler/selection": 14,
        "./handler/touch": 15,
        "./instances": 17,
        "./update-geometry": 18
    }],
    17: [function(t, e, n) {
        "use strict";

        function r(t, e) {
            function n() {
                t.classList.add("ps--focus")
            }

            function r() {
                t.classList.remove("ps--focus")
            }
            var o = this;
            o.settings = a();
            for (var l in e) o.settings[l] = e[l];
            o.containerWidth = null, o.containerHeight = null, o.contentWidth = null, o.contentHeight = null, o.isRtl = "rtl" === c.css(t, "direction"), o.isNegativeScroll = function() {
                var e = t.scrollLeft,
                    n = null;
                return t.scrollLeft = -1, n = t.scrollLeft < 0, t.scrollLeft = e, n
            }(), o.negativeScrollAdjustment = o.isNegativeScroll ? t.scrollWidth - t.clientWidth : 0, o.event = new u, o.ownerDocument = t.ownerDocument || document, o.scrollbarXRail = c.appendTo(c.create("div", "ps__scrollbar-x-rail"), t), o.scrollbarX = c.appendTo(c.create("div", "ps__scrollbar-x"), o.scrollbarXRail), o.scrollbarX.setAttribute("tabindex", 0), o.event.bind(o.scrollbarX, "focus", n), o.event.bind(o.scrollbarX, "blur", r), o.scrollbarXActive = null, o.scrollbarXWidth = null, o.scrollbarXLeft = null, o.scrollbarXBottom = s.toInt(c.css(o.scrollbarXRail, "bottom")), o.isScrollbarXUsingBottom = o.scrollbarXBottom === o.scrollbarXBottom, o.scrollbarXTop = o.isScrollbarXUsingBottom ? null : s.toInt(c.css(o.scrollbarXRail, "top")), o.railBorderXWidth = s.toInt(c.css(o.scrollbarXRail, "borderLeftWidth")) + s.toInt(c.css(o.scrollbarXRail, "borderRightWidth")), c.css(o.scrollbarXRail, "display", "block"), o.railXMarginWidth = s.toInt(c.css(o.scrollbarXRail, "marginLeft")) + s.toInt(c.css(o.scrollbarXRail, "marginRight")), c.css(o.scrollbarXRail, "display", ""), o.railXWidth = null, o.railXRatio = null, o.scrollbarYRail = c.appendTo(c.create("div", "ps__scrollbar-y-rail"), t), o.scrollbarY = c.appendTo(c.create("div", "ps__scrollbar-y"), o.scrollbarYRail), o.scrollbarY.setAttribute("tabindex", 0), o.event.bind(o.scrollbarY, "focus", n), o.event.bind(o.scrollbarY, "blur", r), o.scrollbarYActive = null, o.scrollbarYHeight = null, o.scrollbarYTop = null, o.scrollbarYRight = s.toInt(c.css(o.scrollbarYRail, "right")), o.isScrollbarYUsingRight = o.scrollbarYRight === o.scrollbarYRight, o.scrollbarYLeft = o.isScrollbarYUsingRight ? null : s.toInt(c.css(o.scrollbarYRail, "left")), o.scrollbarYOuterWidth = o.isRtl ? s.outerWidth(o.scrollbarY) : null, o.railBorderYWidth = s.toInt(c.css(o.scrollbarYRail, "borderTopWidth")) + s.toInt(c.css(o.scrollbarYRail, "borderBottomWidth")), c.css(o.scrollbarYRail, "display", "block"), o.railYMarginHeight = s.toInt(c.css(o.scrollbarYRail, "marginTop")) + s.toInt(c.css(o.scrollbarYRail, "marginBottom")), c.css(o.scrollbarYRail, "display", ""), o.railYHeight = null, o.railYRatio = null
        }

        function o(t) {
            return t.getAttribute("data-ps-id")
        }

        function l(t, e) {
            t.setAttribute("data-ps-id", e)
        }

        function i(t) {
            t.removeAttribute("data-ps-id")
        }
        var s = t("../lib/helper"),
            a = t("./default-setting"),
            c = t("../lib/dom"),
            u = t("../lib/event-manager"),
            d = t("../lib/guid"),
            p = {};
        n.add = function(t, e) {
            var n = d();
            return l(t, n), p[n] = new r(t, e), p[n]
        }, n.remove = function(t) {
            delete p[o(t)], i(t)
        }, n.get = function(t) {
            return p[o(t)]
        }
    }, {
        "../lib/dom": 2,
        "../lib/event-manager": 3,
        "../lib/guid": 4,
        "../lib/helper": 5,
        "./default-setting": 7
    }],
    18: [function(t, e, n) {
        "use strict";

        function r(t, e) {
            return t.settings.minScrollbarLength && (e = Math.max(e, t.settings.minScrollbarLength)), t.settings.maxScrollbarLength && (e = Math.min(e, t.settings.maxScrollbarLength)), e
        }

        function o(t, e) {
            var n = {
                width: e.railXWidth
            };
            e.isRtl ? n.left = e.negativeScrollAdjustment + t.scrollLeft + e.containerWidth - e.contentWidth : n.left = t.scrollLeft, e.isScrollbarXUsingBottom ? n.bottom = e.scrollbarXBottom - t.scrollTop : n.top = e.scrollbarXTop + t.scrollTop, i.css(e.scrollbarXRail, n);
            var r = {
                top: t.scrollTop,
                height: e.railYHeight
            };
            e.isScrollbarYUsingRight ? e.isRtl ? r.right = e.contentWidth - (e.negativeScrollAdjustment + t.scrollLeft) - e.scrollbarYRight - e.scrollbarYOuterWidth : r.right = e.scrollbarYRight - t.scrollLeft : e.isRtl ? r.left = e.negativeScrollAdjustment + t.scrollLeft + 2 * e.containerWidth - e.contentWidth - e.scrollbarYLeft - e.scrollbarYOuterWidth : r.left = e.scrollbarYLeft + t.scrollLeft, i.css(e.scrollbarYRail, r), i.css(e.scrollbarX, {
                left: e.scrollbarXLeft,
                width: e.scrollbarXWidth - e.railBorderXWidth
            }), i.css(e.scrollbarY, {
                top: e.scrollbarYTop,
                height: e.scrollbarYHeight - e.railBorderYWidth
            })
        }
        var l = t("../lib/helper"),
            i = t("../lib/dom"),
            s = t("./instances"),
            a = t("./update-scroll");
        e.exports = function(t) {
            var e = s.get(t);
            e.containerWidth = t.clientWidth, e.containerHeight = t.clientHeight, e.contentWidth = t.scrollWidth, e.contentHeight = t.scrollHeight;
            var n;
            t.contains(e.scrollbarXRail) || (n = i.queryChildren(t, ".ps__scrollbar-x-rail"), n.length > 0 && n.forEach(function(t) {
                i.remove(t)
            }), i.appendTo(e.scrollbarXRail, t)), t.contains(e.scrollbarYRail) || (n = i.queryChildren(t, ".ps__scrollbar-y-rail"), n.length > 0 && n.forEach(function(t) {
                i.remove(t)
            }), i.appendTo(e.scrollbarYRail, t)), !e.settings.suppressScrollX && e.containerWidth + e.settings.scrollXMarginOffset < e.contentWidth ? (e.scrollbarXActive = !0, e.railXWidth = e.containerWidth - e.railXMarginWidth, e.railXRatio = e.containerWidth / e.railXWidth, e.scrollbarXWidth = r(e, l.toInt(e.railXWidth * e.containerWidth / e.contentWidth)), e.scrollbarXLeft = l.toInt((e.negativeScrollAdjustment + t.scrollLeft) * (e.railXWidth - e.scrollbarXWidth) / (e.contentWidth - e.containerWidth))) : e.scrollbarXActive = !1, !e.settings.suppressScrollY && e.containerHeight + e.settings.scrollYMarginOffset < e.contentHeight ? (e.scrollbarYActive = !0, e.railYHeight = e.containerHeight - e.railYMarginHeight, e.railYRatio = e.containerHeight / e.railYHeight, e.scrollbarYHeight = r(e, l.toInt(e.railYHeight * e.containerHeight / e.contentHeight)), e.scrollbarYTop = l.toInt(t.scrollTop * (e.railYHeight - e.scrollbarYHeight) / (e.contentHeight - e.containerHeight))) : e.scrollbarYActive = !1, e.scrollbarXLeft >= e.railXWidth - e.scrollbarXWidth && (e.scrollbarXLeft = e.railXWidth - e.scrollbarXWidth), e.scrollbarYTop >= e.railYHeight - e.scrollbarYHeight && (e.scrollbarYTop = e.railYHeight - e.scrollbarYHeight), o(t, e), e.scrollbarXActive ? t.classList.add("ps--active-x") : (t.classList.remove("ps--active-x"), e.scrollbarXWidth = 0, e.scrollbarXLeft = 0, a(t, "left", 0)), e.scrollbarYActive ? t.classList.add("ps--active-y") : (t.classList.remove("ps--active-y"), e.scrollbarYHeight = 0, e.scrollbarYTop = 0, a(t, "top", 0))
        }
    }, {
        "../lib/dom": 2,
        "../lib/helper": 5,
        "./instances": 17,
        "./update-scroll": 19
    }],
    19: [function(t, e, n) {
        "use strict";
        var r = t("./instances"),
            o = function(t) {
                var e = document.createEvent("Event");
                return e.initEvent(t, !0, !0), e
            };
        e.exports = function(t, e, n) {
            if ("undefined" == typeof t) throw "You must provide an element to the update-scroll function";
            if ("undefined" == typeof e) throw "You must provide an axis to the update-scroll function";
            if ("undefined" == typeof n) throw "You must provide a value to the update-scroll function";
            "top" === e && n <= 0 && (t.scrollTop = n = 0, t.dispatchEvent(o("ps-y-reach-start"))), "left" === e && n <= 0 && (t.scrollLeft = n = 0, t.dispatchEvent(o("ps-x-reach-start")));
            var l = r.get(t);
            "top" === e && n >= l.contentHeight - l.containerHeight && (n = l.contentHeight - l.containerHeight, n - t.scrollTop <= 2 ? n = t.scrollTop : t.scrollTop = n, t.dispatchEvent(o("ps-y-reach-end"))), "left" === e && n >= l.contentWidth - l.containerWidth && (n = l.contentWidth - l.containerWidth, n - t.scrollLeft <= 2 ? n = t.scrollLeft : t.scrollLeft = n, t.dispatchEvent(o("ps-x-reach-end"))), void 0 === l.lastTop && (l.lastTop = t.scrollTop), void 0 === l.lastLeft && (l.lastLeft = t.scrollLeft), "top" === e && n < l.lastTop && t.dispatchEvent(o("ps-scroll-up")), "top" === e && n > l.lastTop && t.dispatchEvent(o("ps-scroll-down")), "left" === e && n < l.lastLeft && t.dispatchEvent(o("ps-scroll-left")), "left" === e && n > l.lastLeft && t.dispatchEvent(o("ps-scroll-right")), "top" === e && n !== l.lastTop && (t.scrollTop = l.lastTop = n, t.dispatchEvent(o("ps-scroll-y"))), "left" === e && n !== l.lastLeft && (t.scrollLeft = l.lastLeft = n, t.dispatchEvent(o("ps-scroll-x")))
        }
    }, {
        "./instances": 17
    }],
    20: [function(t, e, n) {
        "use strict";
        var r = t("../lib/helper"),
            o = t("../lib/dom"),
            l = t("./instances"),
            i = t("./update-geometry"),
            s = t("./update-scroll");
        e.exports = function(t) {
            var e = l.get(t);
            e && (e.negativeScrollAdjustment = e.isNegativeScroll ? t.scrollWidth - t.clientWidth : 0, o.css(e.scrollbarXRail, "display", "block"), o.css(e.scrollbarYRail, "display", "block"), e.railXMarginWidth = r.toInt(o.css(e.scrollbarXRail, "marginLeft")) + r.toInt(o.css(e.scrollbarXRail, "marginRight")), e.railYMarginHeight = r.toInt(o.css(e.scrollbarYRail, "marginTop")) + r.toInt(o.css(e.scrollbarYRail, "marginBottom")), o.css(e.scrollbarXRail, "display", "none"), o.css(e.scrollbarYRail, "display", "none"), i(t), s(t, "top", t.scrollTop), s(t, "left", t.scrollLeft), o.css(e.scrollbarXRail, "display", ""), o.css(e.scrollbarYRail, "display", ""))
        }
    }, {
        "../lib/dom": 2,
        "../lib/helper": 5,
        "./instances": 17,
        "./update-geometry": 18,
        "./update-scroll": 19
    }]
}, {}, [1]);
/*! angular-spectrum-colorpicker v1.4.5 */
! function(a, b) {
    "use strict";
    var c = a.module("angularSpectrumColorpicker", []);
    ! function(b) {
        c.directive("spectrumColorpicker", function() {
            return {
                restrict: "EA",
                require: "ngModel",
                scope: {
                    fallbackValue: "=",
                    disabled: "=?",
                    format: "=?",
                    options: "=?",
                    triggerId: "@?",
                    palette: "=?",
                    onChange: "&?",
                    onShow: "&?",
                    onHide: "&?",
                    onMove: "&?",
                    onBeforeShow: "&?",
                    onChangeOptions: "=?",
                    onShowOptions: "=?",
                    onHideOptions: "=?",
                    onMoveOptions: "=?"
                },
                replace: !0,
                templateUrl: "directive.html",
                link: function(b, c, d, e) {
                    function f(a) {
                        var c = a;
                        return c && (c = a.toString(b.format)), c
                    }

                    function g(c) {
                        a.isFunction(b.onChange) && b.onChange({
                            color: c
                        })
                    }

                    function h(c) {
                        var d = b.fallbackValue;
                        c ? d = f(c) : a.isUndefined(b.fallbackValue) && (d = c), e.$setViewValue(d), g(d)
                    }
                    var i = c.find("input"),
                        j = function(a) {
                            b.$evalAsync(function() {
                                h(a)
                            })
                        },
                        k = function() {
                            return i.spectrum("toggle"), !1
                        },
                        l = {
                            color: e.$viewValue
                        },
                        m = {};
                    a.forEach({
                        change: "onChange",
                        move: "onMove",
                        hide: "onHide",
                        show: "onShow"
                    }, function(c, d) {
                        var e = b[c + "Options"];
                        m[d] = function(d) {
                            return (!e || e.update) && j(d), "change" !== c && a.isFunction(b[c]) ? b[c]({
                                color: f(d)
                            }) : null
                        }
                    }), a.isFunction(b.onBeforeShow) && (m.beforeShow = function(a) {
                        return b.onBeforeShow({
                            color: f(a)
                        })
                    }), b.palette && (m.palette = b.palette);
                    var n = a.extend({}, l, b.options, m);
                    b.triggerId && a.element(document.body).on("click", "#" + b.triggerId, k), e.$render = function() {
                        i.spectrum("set", e.$viewValue || ""), g(e.$viewValue)
                    }, n.color && (i.spectrum("set", n.color || ""), h(n.color)), i.spectrum(n), b.$on("$destroy", function() {
                        b.triggerId && a.element(document.body).off("click", "#" + b.triggerId, k)
                    }), c.on("$destroy", function() {
                        i.spectrum("destroy")
                    }), a.isDefined(n.disabled) && (b.disabled = !!n.disabled), b.$watch("disabled", function(a) {
                        i.spectrum(a ? "disable" : "enable")
                    }), b.$watch("palette", function(a) {
                        i.spectrum("option", "palette", a)
                    }, !0)
                }
            }
        })
    }(), a.module("angularSpectrumColorpicker").run(["$templateCache", function(a) {
        a.put("directive.html", '<span><input class="input-small"></span>')
    }])
}(window.angular);
/*jQuery UI Touch Punch 0.2.3*/
! function(a) {
    function f(a, b) {
        if (!(a.originalEvent.touches.length > 1)) {
            a.preventDefault();
            var c = a.originalEvent.changedTouches[0],
                d = document.createEvent("MouseEvents");
            d.initMouseEvent(b, !0, !0, window, 1, c.screenX, c.screenY, c.clientX, c.clientY, !1, !1, !1, !1, 0, null), a.target.dispatchEvent(d)
        }
    }
    if (a.support.touch = "ontouchend" in document, a.support.touch) {
        var e, b = a.ui.mouse.prototype,
            c = b._mouseInit,
            d = b._mouseDestroy;
        b._touchStart = function(a) {
            var b = this;
            !e && b._mouseCapture(a.originalEvent.changedTouches[0]) && (e = !0, b._touchMoved = !1, f(a, "mouseover"), f(a, "mousemove"), f(a, "mousedown"))
        }, b._touchMove = function(a) {
            e && (this._touchMoved = !0, f(a, "mousemove"))
        }, b._touchEnd = function(a) {
            e && (f(a, "mouseup"), f(a, "mouseout"), this._touchMoved || f(a, "click"), e = !1)
        }, b._mouseInit = function() {
            var b = this;
            b.element.bind({
                touchstart: a.proxy(b, "_touchStart"),
                touchmove: a.proxy(b, "_touchMove"),
                touchend: a.proxy(b, "_touchEnd")
            }), c.call(b)
        }, b._mouseDestroy = function() {
            var b = this;
            b.element.unbind({
                touchstart: a.proxy(b, "_touchStart"),
                touchmove: a.proxy(b, "_touchMove"),
                touchend: a.proxy(b, "_touchEnd")
            }), d.call(b)
        }
    }
}(jQuery);
/*Lodash 4.17.10*/
;
(function() {
    function n(n, t, r) {
        switch (r.length) {
            case 0:
                return n.call(t);
            case 1:
                return n.call(t, r[0]);
            case 2:
                return n.call(t, r[0], r[1]);
            case 3:
                return n.call(t, r[0], r[1], r[2])
        }
        return n.apply(t, r)
    }

    function t(n, t, r, e) {
        for (var u = -1, i = null == n ? 0 : n.length; ++u < i;) {
            var o = n[u];
            t(e, o, r(o), n)
        }
        return e
    }

    function r(n, t) {
        for (var r = -1, e = null == n ? 0 : n.length; ++r < e && false !== t(n[r], r, n););
        return n
    }

    function e(n, t) {
        for (var r = null == n ? 0 : n.length; r-- && false !== t(n[r], r, n););
        return n
    }

    function u(n, t) {
        for (var r = -1, e = null == n ? 0 : n.length; ++r < e;)
            if (!t(n[r], r, n)) return false;
        return true
    }

    function i(n, t) {
        for (var r = -1, e = null == n ? 0 : n.length, u = 0, i = []; ++r < e;) {
            var o = n[r];
            t(o, r, n) && (i[u++] = o)
        }
        return i
    }

    function o(n, t) {
        return !(null == n || !n.length) && -1 < v(n, t, 0)
    }

    function f(n, t, r) {
        for (var e = -1, u = null == n ? 0 : n.length; ++e < u;)
            if (r(t, n[e])) return true;
        return false
    }

    function c(n, t) {
        for (var r = -1, e = null == n ? 0 : n.length, u = Array(e); ++r < e;) u[r] = t(n[r], r, n);
        return u
    }

    function a(n, t) {
        for (var r = -1, e = t.length, u = n.length; ++r < e;) n[u + r] = t[r];
        return n
    }

    function l(n, t, r, e) {
        var u = -1,
            i = null == n ? 0 : n.length;
        for (e && i && (r = n[++u]); ++u < i;) r = t(r, n[u], u, n);
        return r
    }

    function s(n, t, r, e) {
        var u = null == n ? 0 : n.length;
        for (e && u && (r = n[--u]); u--;) r = t(r, n[u], u, n);
        return r
    }

    function h(n, t) {
        for (var r = -1, e = null == n ? 0 : n.length; ++r < e;)
            if (t(n[r], r, n)) return true;
        return false
    }

    function p(n, t, r) {
        var e;
        return r(n, function(n, r, u) {
            if (t(n, r, u)) return e = r, false
        }), e
    }

    function _(n, t, r, e) {
        var u = n.length;
        for (r += e ? 1 : -1; e ? r-- : ++r < u;)
            if (t(n[r], r, n)) return r;
        return -1
    }

    function v(n, t, r) {
        if (t === t) n: {
            --r;
            for (var e = n.length; ++r < e;)
                if (n[r] === t) {
                    n = r;
                    break n
                } n = -1
        }
        else n = _(n, d, r);
        return n
    }

    function g(n, t, r, e) {
        --r;
        for (var u = n.length; ++r < u;)
            if (e(n[r], t)) return r;
        return -1
    }

    function d(n) {
        return n !== n
    }

    function y(n, t) {
        var r = null == n ? 0 : n.length;
        return r ? m(n, t) / r : F
    }

    function b(n) {
        return function(t) {
            return null == t ? T : t[n]
        }
    }

    function x(n) {
        return function(t) {
            return null == n ? T : n[t]
        }
    }

    function j(n, t, r, e, u) {
        return u(n, function(n, u, i) {
            r = e ? (e = false, n) : t(r, n, u, i)
        }), r
    }

    function w(n, t) {
        var r = n.length;
        for (n.sort(t); r--;) n[r] = n[r].c;
        return n
    }

    function m(n, t) {
        for (var r, e = -1, u = n.length; ++e < u;) {
            var i = t(n[e]);
            i !== T && (r = r === T ? i : r + i)
        }
        return r;
    }

    function A(n, t) {
        for (var r = -1, e = Array(n); ++r < n;) e[r] = t(r);
        return e
    }

    function E(n, t) {
        return c(t, function(t) {
            return [t, n[t]]
        })
    }

    function k(n) {
        return function(t) {
            return n(t)
        }
    }

    function S(n, t) {
        return c(t, function(t) {
            return n[t]
        })
    }

    function O(n, t) {
        return n.has(t)
    }

    function I(n, t) {
        for (var r = -1, e = n.length; ++r < e && -1 < v(t, n[r], 0););
        return r
    }

    function R(n, t) {
        for (var r = n.length; r-- && -1 < v(t, n[r], 0););
        return r
    }

    function z(n) {
        return "\\" + Un[n]
    }

    function W(n) {
        var t = -1,
            r = Array(n.size);
        return n.forEach(function(n, e) {
            r[++t] = [e, n];
        }), r
    }

    function B(n, t) {
        return function(r) {
            return n(t(r))
        }
    }

    function L(n, t) {
        for (var r = -1, e = n.length, u = 0, i = []; ++r < e;) {
            var o = n[r];
            o !== t && "__lodash_placeholder__" !== o || (n[r] = "__lodash_placeholder__", i[u++] = r)
        }
        return i
    }

    function U(n) {
        var t = -1,
            r = Array(n.size);
        return n.forEach(function(n) {
            r[++t] = n
        }), r
    }

    function C(n) {
        var t = -1,
            r = Array(n.size);
        return n.forEach(function(n) {
            r[++t] = [n, n]
        }), r
    }

    function D(n) {
        if (Rn.test(n)) {
            for (var t = On.lastIndex = 0; On.test(n);) ++t;
            n = t
        } else n = Qn(n);
        return n
    }

    function M(n) {
        return Rn.test(n) ? n.match(On) || [] : n.split("");
    }
    var T, $ = 1 / 0,
        F = NaN,
        N = [
            ["ary", 128],
            ["bind", 1],
            ["bindKey", 2],
            ["curry", 8],
            ["curryRight", 16],
            ["flip", 512],
            ["partial", 32],
            ["partialRight", 64],
            ["rearg", 256]
        ],
        P = /\b__p\+='';/g,
        Z = /\b(__p\+=)''\+/g,
        q = /(__e\(.*?\)|\b__t\))\+'';/g,
        V = /&(?:amp|lt|gt|quot|#39);/g,
        K = /[&<>"']/g,
        G = RegExp(V.source),
        H = RegExp(K.source),
        J = /<%-([\s\S]+?)%>/g,
        Y = /<%([\s\S]+?)%>/g,
        Q = /<%=([\s\S]+?)%>/g,
        X = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
        nn = /^\w*$/,
        tn = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
        rn = /[\\^$.*+?()[\]{}|]/g,
        en = RegExp(rn.source),
        un = /^\s+|\s+$/g,
        on = /^\s+/,
        fn = /\s+$/,
        cn = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
        an = /\{\n\/\* \[wrapped with (.+)\] \*/,
        ln = /,? & /,
        sn = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,
        hn = /\\(\\)?/g,
        pn = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
        _n = /\w*$/,
        vn = /^[-+]0x[0-9a-f]+$/i,
        gn = /^0b[01]+$/i,
        dn = /^\[object .+?Constructor\]$/,
        yn = /^0o[0-7]+$/i,
        bn = /^(?:0|[1-9]\d*)$/,
        xn = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,
        jn = /($^)/,
        wn = /['\n\r\u2028\u2029\\]/g,
        mn = "[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",
        An = "(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])" + mn,
        En = "(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",
        kn = RegExp("['\u2019]", "g"),
        Sn = RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]", "g"),
        On = RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|" + En + mn, "g"),
        In = RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+", An].join("|"), "g"),
        Rn = RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),
        zn = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,
        Wn = "Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),
        Bn = {};
    Bn["[object Float32Array]"] = Bn["[object Float64Array]"] = Bn["[object Int8Array]"] = Bn["[object Int16Array]"] = Bn["[object Int32Array]"] = Bn["[object Uint8Array]"] = Bn["[object Uint8ClampedArray]"] = Bn["[object Uint16Array]"] = Bn["[object Uint32Array]"] = true, Bn["[object Arguments]"] = Bn["[object Array]"] = Bn["[object ArrayBuffer]"] = Bn["[object Boolean]"] = Bn["[object DataView]"] = Bn["[object Date]"] = Bn["[object Error]"] = Bn["[object Function]"] = Bn["[object Map]"] = Bn["[object Number]"] = Bn["[object Object]"] = Bn["[object RegExp]"] = Bn["[object Set]"] = Bn["[object String]"] = Bn["[object WeakMap]"] = false;
    var Ln = {};
    Ln["[object Arguments]"] = Ln["[object Array]"] = Ln["[object ArrayBuffer]"] = Ln["[object DataView]"] = Ln["[object Boolean]"] = Ln["[object Date]"] = Ln["[object Float32Array]"] = Ln["[object Float64Array]"] = Ln["[object Int8Array]"] = Ln["[object Int16Array]"] = Ln["[object Int32Array]"] = Ln["[object Map]"] = Ln["[object Number]"] = Ln["[object Object]"] = Ln["[object RegExp]"] = Ln["[object Set]"] = Ln["[object String]"] = Ln["[object Symbol]"] = Ln["[object Uint8Array]"] = Ln["[object Uint8ClampedArray]"] = Ln["[object Uint16Array]"] = Ln["[object Uint32Array]"] = true,
        Ln["[object Error]"] = Ln["[object Function]"] = Ln["[object WeakMap]"] = false;
    var Un = {
            "\\": "\\",
            "'": "'",
            "\n": "n",
            "\r": "r",
            "\u2028": "u2028",
            "\u2029": "u2029"
        },
        Cn = parseFloat,
        Dn = parseInt,
        Mn = typeof global == "object" && global && global.Object === Object && global,
        Tn = typeof self == "object" && self && self.Object === Object && self,
        $n = Mn || Tn || Function("return this")(),
        Fn = typeof exports == "object" && exports && !exports.nodeType && exports,
        Nn = Fn && typeof module == "object" && module && !module.nodeType && module,
        Pn = Nn && Nn.exports === Fn,
        Zn = Pn && Mn.process,
        qn = function() {
            try {
                var n = Nn && Nn.f && Nn.f("util").types;
                return n ? n : Zn && Zn.binding && Zn.binding("util")
            } catch (n) {}
        }(),
        Vn = qn && qn.isArrayBuffer,
        Kn = qn && qn.isDate,
        Gn = qn && qn.isMap,
        Hn = qn && qn.isRegExp,
        Jn = qn && qn.isSet,
        Yn = qn && qn.isTypedArray,
        Qn = b("length"),
        Xn = x({
            "\xc0": "A",
            "\xc1": "A",
            "\xc2": "A",
            "\xc3": "A",
            "\xc4": "A",
            "\xc5": "A",
            "\xe0": "a",
            "\xe1": "a",
            "\xe2": "a",
            "\xe3": "a",
            "\xe4": "a",
            "\xe5": "a",
            "\xc7": "C",
            "\xe7": "c",
            "\xd0": "D",
            "\xf0": "d",
            "\xc8": "E",
            "\xc9": "E",
            "\xca": "E",
            "\xcb": "E",
            "\xe8": "e",
            "\xe9": "e",
            "\xea": "e",
            "\xeb": "e",
            "\xcc": "I",
            "\xcd": "I",
            "\xce": "I",
            "\xcf": "I",
            "\xec": "i",
            "\xed": "i",
            "\xee": "i",
            "\xef": "i",
            "\xd1": "N",
            "\xf1": "n",
            "\xd2": "O",
            "\xd3": "O",
            "\xd4": "O",
            "\xd5": "O",
            "\xd6": "O",
            "\xd8": "O",
            "\xf2": "o",
            "\xf3": "o",
            "\xf4": "o",
            "\xf5": "o",
            "\xf6": "o",
            "\xf8": "o",
            "\xd9": "U",
            "\xda": "U",
            "\xdb": "U",
            "\xdc": "U",
            "\xf9": "u",
            "\xfa": "u",
            "\xfb": "u",
            "\xfc": "u",
            "\xdd": "Y",
            "\xfd": "y",
            "\xff": "y",
            "\xc6": "Ae",
            "\xe6": "ae",
            "\xde": "Th",
            "\xfe": "th",
            "\xdf": "ss",
            "\u0100": "A",
            "\u0102": "A",
            "\u0104": "A",
            "\u0101": "a",
            "\u0103": "a",
            "\u0105": "a",
            "\u0106": "C",
            "\u0108": "C",
            "\u010a": "C",
            "\u010c": "C",
            "\u0107": "c",
            "\u0109": "c",
            "\u010b": "c",
            "\u010d": "c",
            "\u010e": "D",
            "\u0110": "D",
            "\u010f": "d",
            "\u0111": "d",
            "\u0112": "E",
            "\u0114": "E",
            "\u0116": "E",
            "\u0118": "E",
            "\u011a": "E",
            "\u0113": "e",
            "\u0115": "e",
            "\u0117": "e",
            "\u0119": "e",
            "\u011b": "e",
            "\u011c": "G",
            "\u011e": "G",
            "\u0120": "G",
            "\u0122": "G",
            "\u011d": "g",
            "\u011f": "g",
            "\u0121": "g",
            "\u0123": "g",
            "\u0124": "H",
            "\u0126": "H",
            "\u0125": "h",
            "\u0127": "h",
            "\u0128": "I",
            "\u012a": "I",
            "\u012c": "I",
            "\u012e": "I",
            "\u0130": "I",
            "\u0129": "i",
            "\u012b": "i",
            "\u012d": "i",
            "\u012f": "i",
            "\u0131": "i",
            "\u0134": "J",
            "\u0135": "j",
            "\u0136": "K",
            "\u0137": "k",
            "\u0138": "k",
            "\u0139": "L",
            "\u013b": "L",
            "\u013d": "L",
            "\u013f": "L",
            "\u0141": "L",
            "\u013a": "l",
            "\u013c": "l",
            "\u013e": "l",
            "\u0140": "l",
            "\u0142": "l",
            "\u0143": "N",
            "\u0145": "N",
            "\u0147": "N",
            "\u014a": "N",
            "\u0144": "n",
            "\u0146": "n",
            "\u0148": "n",
            "\u014b": "n",
            "\u014c": "O",
            "\u014e": "O",
            "\u0150": "O",
            "\u014d": "o",
            "\u014f": "o",
            "\u0151": "o",
            "\u0154": "R",
            "\u0156": "R",
            "\u0158": "R",
            "\u0155": "r",
            "\u0157": "r",
            "\u0159": "r",
            "\u015a": "S",
            "\u015c": "S",
            "\u015e": "S",
            "\u0160": "S",
            "\u015b": "s",
            "\u015d": "s",
            "\u015f": "s",
            "\u0161": "s",
            "\u0162": "T",
            "\u0164": "T",
            "\u0166": "T",
            "\u0163": "t",
            "\u0165": "t",
            "\u0167": "t",
            "\u0168": "U",
            "\u016a": "U",
            "\u016c": "U",
            "\u016e": "U",
            "\u0170": "U",
            "\u0172": "U",
            "\u0169": "u",
            "\u016b": "u",
            "\u016d": "u",
            "\u016f": "u",
            "\u0171": "u",
            "\u0173": "u",
            "\u0174": "W",
            "\u0175": "w",
            "\u0176": "Y",
            "\u0177": "y",
            "\u0178": "Y",
            "\u0179": "Z",
            "\u017b": "Z",
            "\u017d": "Z",
            "\u017a": "z",
            "\u017c": "z",
            "\u017e": "z",
            "\u0132": "IJ",
            "\u0133": "ij",
            "\u0152": "Oe",
            "\u0153": "oe",
            "\u0149": "'n",
            "\u017f": "s"
        }),
        nt = x({
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;"
        }),
        tt = x({
            "&amp;": "&",
            "&lt;": "<",
            "&gt;": ">",
            "&quot;": '"',
            "&#39;": "'"
        }),
        rt = function x(mn) {
            function An(n) {
                if (du(n) && ! of (n) && !(n instanceof Un)) {
                    if (n instanceof On) return n;
                    if (ii.call(n, "__wrapped__")) return $e(n)
                }
                return new On(n)
            }

            function En() {}

            function On(n, t) {
                this.__wrapped__ = n, this.__actions__ = [], this.__chain__ = !!t, this.__index__ = 0, this.__values__ = T
            }

            function Un(n) {
                this.__wrapped__ = n,
                    this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = false, this.__iteratees__ = [], this.__takeCount__ = 4294967295, this.__views__ = []
            }

            function Mn(n) {
                var t = -1,
                    r = null == n ? 0 : n.length;
                for (this.clear(); ++t < r;) {
                    var e = n[t];
                    this.set(e[0], e[1])
                }
            }

            function Tn(n) {
                var t = -1,
                    r = null == n ? 0 : n.length;
                for (this.clear(); ++t < r;) {
                    var e = n[t];
                    this.set(e[0], e[1])
                }
            }

            function Fn(n) {
                var t = -1,
                    r = null == n ? 0 : n.length;
                for (this.clear(); ++t < r;) {
                    var e = n[t];
                    this.set(e[0], e[1])
                }
            }

            function Nn(n) {
                var t = -1,
                    r = null == n ? 0 : n.length;
                for (this.__data__ = new Fn; ++t < r;) this.add(n[t]);
            }

            function Zn(n) {
                this.size = (this.__data__ = new Tn(n)).size
            }

            function qn(n, t) {
                var r, e = of (n),
                    u = !e && uf(n),
                    i = !e && !u && cf(n),
                    o = !e && !u && !i && pf(n),
                    u = (e = e || u || i || o) ? A(n.length, Xu) : [],
                    f = u.length;
                for (r in n) !t && !ii.call(n, r) || e && ("length" == r || i && ("offset" == r || "parent" == r) || o && ("buffer" == r || "byteLength" == r || "byteOffset" == r) || Se(r, f)) || u.push(r);
                return u
            }

            function Qn(n) {
                var t = n.length;
                return t ? n[ir(0, t - 1)] : T
            }

            function et(n, t) {
                return Ce(Ur(n), pt(t, 0, n.length))
            }

            function ut(n) {
                return Ce(Ur(n))
            }

            function it(n, t, r) {
                (r === T || au(n[t], r)) && (r !== T || t in n) || st(n, t, r);
            }

            function ot(n, t, r) {
                var e = n[t];
                ii.call(n, t) && au(e, r) && (r !== T || t in n) || st(n, t, r)
            }

            function ft(n, t) {
                for (var r = n.length; r--;)
                    if (au(n[r][0], t)) return r;
                return -1
            }

            function ct(n, t, r, e) {
                return eo(n, function(n, u, i) {
                    t(e, n, r(n), i)
                }), e
            }

            function at(n, t) {
                return n && Cr(t, zu(t), n)
            }

            function lt(n, t) {
                return n && Cr(t, Wu(t), n)
            }

            function st(n, t, r) {
                "__proto__" == t && mi ? mi(n, t, {
                    configurable: true,
                    enumerable: true,
                    value: r,
                    writable: true
                }) : n[t] = r
            }

            function ht(n, t) {
                for (var r = -1, e = t.length, u = Vu(e), i = null == n; ++r < e;) u[r] = i ? T : Iu(n, t[r]);
                return u;
            }

            function pt(n, t, r) {
                return n === n && (r !== T && (n = n <= r ? n : r), t !== T && (n = n >= t ? n : t)), n
            }

            function _t(n, t, e, u, i, o) {
                var f, c = 1 & t,
                    a = 2 & t,
                    l = 4 & t;
                if (e && (f = i ? e(n, u, i, o) : e(n)), f !== T) return f;
                if (!gu(n)) return n;
                if (u = of (n)) {
                    if (f = me(n), !c) return Ur(n, f)
                } else {
                    var s = _o(n),
                        h = "[object Function]" == s || "[object GeneratorFunction]" == s;
                    if (cf(n)) return Ir(n, c);
                    if ("[object Object]" == s || "[object Arguments]" == s || h && !i) {
                        if (f = a || h ? {} : Ae(n), !c) return a ? Mr(n, lt(f, n)) : Dr(n, at(f, n))
                    } else {
                        if (!Ln[s]) return i ? n : {};
                        f = Ee(n, s, c)
                    }
                }
                if (o || (o = new Zn),
                    i = o.get(n)) return i;
                if (o.set(n, f), hf(n)) return n.forEach(function(r) {
                    f.add(_t(r, t, e, r, n, o))
                }), f;
                if (lf(n)) return n.forEach(function(r, u) {
                    f.set(u, _t(r, t, e, u, n, o))
                }), f;
                var a = l ? a ? ve : _e : a ? Wu : zu,
                    p = u ? T : a(n);
                return r(p || n, function(r, u) {
                    p && (u = r, r = n[u]), ot(f, u, _t(r, t, e, u, n, o))
                }), f
            }

            function vt(n) {
                var t = zu(n);
                return function(r) {
                    return gt(r, n, t)
                }
            }

            function gt(n, t, r) {
                var e = r.length;
                if (null == n) return !e;
                for (n = Yu(n); e--;) {
                    var u = r[e],
                        i = t[u],
                        o = n[u];
                    if (o === T && !(u in n) || !i(o)) return false
                }
                return true
            }

            function dt(n, t, r) {
                if (typeof n != "function") throw new ni("Expected a function");
                return yo(function() {
                    n.apply(T, r)
                }, t)
            }

            function yt(n, t, r, e) {
                var u = -1,
                    i = o,
                    a = true,
                    l = n.length,
                    s = [],
                    h = t.length;
                if (!l) return s;
                r && (t = c(t, k(r))), e ? (i = f, a = false) : 200 <= t.length && (i = O, a = false, t = new Nn(t));
                n: for (; ++u < l;) {
                    var p = n[u],
                        _ = null == r ? p : r(p),
                        p = e || 0 !== p ? p : 0;
                    if (a && _ === _) {
                        for (var v = h; v--;)
                            if (t[v] === _) continue n;
                        s.push(p)
                    } else i(t, _, e) || s.push(p)
                }
                return s
            }

            function bt(n, t) {
                var r = true;
                return eo(n, function(n, e, u) {
                    return r = !!t(n, e, u)
                }), r
            }

            function xt(n, t, r) {
                for (var e = -1, u = n.length; ++e < u;) {
                    var i = n[e],
                        o = t(i);
                    if (null != o && (f === T ? o === o && !ju(o) : r(o, f))) var f = o,
                        c = i;
                }
                return c
            }

            function jt(n, t) {
                var r = [];
                return eo(n, function(n, e, u) {
                    t(n, e, u) && r.push(n)
                }), r
            }

            function wt(n, t, r, e, u) {
                var i = -1,
                    o = n.length;
                for (r || (r = ke), u || (u = []); ++i < o;) {
                    var f = n[i];
                    0 < t && r(f) ? 1 < t ? wt(f, t - 1, r, e, u) : a(u, f) : e || (u[u.length] = f)
                }
                return u
            }

            function mt(n, t) {
                return n && io(n, t, zu)
            }

            function At(n, t) {
                return n && oo(n, t, zu)
            }

            function Et(n, t) {
                return i(t, function(t) {
                    return pu(n[t])
                })
            }

            function kt(n, t) {
                t = Sr(t, n);
                for (var r = 0, e = t.length; null != n && r < e;) n = n[De(t[r++])];
                return r && r == e ? n : T
            }

            function St(n, t, r) {
                return t = t(n), of (n) ? t : a(t, r(n))
            }

            function Ot(n) {
                if (null == n) n = n === T ? "[object Undefined]" : "[object Null]";
                else if (wi && wi in Yu(n)) {
                    var t = ii.call(n, wi),
                        r = n[wi];
                    try {
                        n[wi] = T;
                        var e = true
                    } catch (n) {}
                    var u = ci.call(n);
                    e && (t ? n[wi] = r : delete n[wi]), n = u
                } else n = ci.call(n);
                return n
            }

            function It(n, t) {
                return n > t
            }

            function Rt(n, t) {
                return null != n && ii.call(n, t)
            }

            function zt(n, t) {
                return null != n && t in Yu(n)
            }

            function Wt(n, t, r) {
                for (var e = r ? f : o, u = n[0].length, i = n.length, a = i, l = Vu(i), s = 1 / 0, h = []; a--;) {
                    var p = n[a];
                    a && t && (p = c(p, k(t))), s = Ui(p.length, s),
                        l[a] = !r && (t || 120 <= u && 120 <= p.length) ? new Nn(a && p) : T
                }
                var p = n[0],
                    _ = -1,
                    v = l[0];
                n: for (; ++_ < u && h.length < s;) {
                    var g = p[_],
                        d = t ? t(g) : g,
                        g = r || 0 !== g ? g : 0;
                    if (v ? !O(v, d) : !e(h, d, r)) {
                        for (a = i; --a;) {
                            var y = l[a];
                            if (y ? !O(y, d) : !e(n[a], d, r)) continue n
                        }
                        v && v.push(d), h.push(g)
                    }
                }
                return h
            }

            function Bt(n, t, r) {
                var e = {};
                return mt(n, function(n, u, i) {
                    t(e, r(n), u, i)
                }), e
            }

            function Lt(t, r, e) {
                return r = Sr(r, t), t = 2 > r.length ? t : kt(t, hr(r, 0, -1)), r = null == t ? t : t[De(qe(r))], null == r ? T : n(r, t, e)
            }

            function Ut(n) {
                return du(n) && "[object Arguments]" == Ot(n)
            }

            function Ct(n) {
                return du(n) && "[object ArrayBuffer]" == Ot(n)
            }

            function Dt(n) {
                return du(n) && "[object Date]" == Ot(n)
            }

            function Mt(n, t, r, e, u) {
                if (n === t) t = true;
                else if (null == n || null == t || !du(n) && !du(t)) t = n !== n && t !== t;
                else n: {
                    var i = of (n),
                        o = of (t),
                        f = i ? "[object Array]" : _o(n),
                        c = o ? "[object Array]" : _o(t),
                        f = "[object Arguments]" == f ? "[object Object]" : f,
                        c = "[object Arguments]" == c ? "[object Object]" : c,
                        a = "[object Object]" == f,
                        o = "[object Object]" == c;
                    if ((c = f == c) && cf(n)) {
                        if (!cf(t)) {
                            t = false;
                            break n
                        }
                        i = true, a = false
                    }
                    if (c && !a) u || (u = new Zn),
                    t = i || pf(n) ? se(n, t, r, e, Mt, u) : he(n, t, f, r, e, Mt, u);
                    else {
                        if (!(1 & r) && (i = a && ii.call(n, "__wrapped__"), f = o && ii.call(t, "__wrapped__"), i || f)) {
                            n = i ? n.value() : n, t = f ? t.value() : t, u || (u = new Zn), t = Mt(n, t, r, e, u);
                            break n
                        }
                        if (c) t: if (u || (u = new Zn), i = 1 & r, f = _e(n), o = f.length, c = _e(t).length, o == c || i) {
                            for (a = o; a--;) {
                                var l = f[a];
                                if (!(i ? l in t : ii.call(t, l))) {
                                    t = false;
                                    break t
                                }
                            }
                            if ((c = u.get(n)) && u.get(t)) t = c == t;
                            else {
                                c = true, u.set(n, t), u.set(t, n);
                                for (var s = i; ++a < o;) {
                                    var l = f[a],
                                        h = n[l],
                                        p = t[l];
                                    if (e) var _ = i ? e(p, h, l, t, n, u) : e(h, p, l, n, t, u);
                                    if (_ === T ? h !== p && !Mt(h, p, r, e, u) : !_) {
                                        c = false;
                                        break
                                    }
                                    s || (s = "constructor" == l);
                                }
                                c && !s && (r = n.constructor, e = t.constructor, r != e && "constructor" in n && "constructor" in t && !(typeof r == "function" && r instanceof r && typeof e == "function" && e instanceof e) && (c = false)), u.delete(n), u.delete(t), t = c
                            }
                        } else t = false;
                        else t = false
                    }
                }
                return t
            }

            function Tt(n) {
                return du(n) && "[object Map]" == _o(n)
            }

            function $t(n, t, r, e) {
                var u = r.length,
                    i = u,
                    o = !e;
                if (null == n) return !i;
                for (n = Yu(n); u--;) {
                    var f = r[u];
                    if (o && f[2] ? f[1] !== n[f[0]] : !(f[0] in n)) return false
                }
                for (; ++u < i;) {
                    var f = r[u],
                        c = f[0],
                        a = n[c],
                        l = f[1];
                    if (o && f[2]) {
                        if (a === T && !(c in n)) return false;
                    } else {
                        if (f = new Zn, e) var s = e(a, l, c, n, t, f);
                        if (s === T ? !Mt(l, a, 3, e, f) : !s) return false
                    }
                }
                return true
            }

            function Ft(n) {
                return !(!gu(n) || fi && fi in n) && (pu(n) ? si : dn).test(Me(n))
            }

            function Nt(n) {
                return du(n) && "[object RegExp]" == Ot(n)
            }

            function Pt(n) {
                return du(n) && "[object Set]" == _o(n)
            }

            function Zt(n) {
                return du(n) && vu(n.length) && !!Bn[Ot(n)]
            }

            function qt(n) {
                return typeof n == "function" ? n : null == n ? Tu : typeof n == "object" ? of (n) ? Jt(n[0], n[1]) : Ht(n) : Pu(n)
            }

            function Vt(n) {
                if (!ze(n)) return Bi(n);
                var t, r = [];
                for (t in Yu(n)) ii.call(n, t) && "constructor" != t && r.push(t);
                return r
            }

            function Kt(n, t) {
                return n < t
            }

            function Gt(n, t) {
                var r = -1,
                    e = lu(n) ? Vu(n.length) : [];
                return eo(n, function(n, u, i) {
                    e[++r] = t(n, u, i)
                }), e
            }

            function Ht(n) {
                var t = xe(n);
                return 1 == t.length && t[0][2] ? We(t[0][0], t[0][1]) : function(r) {
                    return r === n || $t(r, n, t)
                }
            }

            function Jt(n, t) {
                return Ie(n) && t === t && !gu(t) ? We(De(n), t) : function(r) {
                    var e = Iu(r, n);
                    return e === T && e === t ? Ru(r, n) : Mt(t, e, 3)
                }
            }

            function Yt(n, t, r, e, u) {
                n !== t && io(t, function(i, o) {
                    if (gu(i)) {
                        u || (u = new Zn);
                        var f = u,
                            c = "__proto__" == o ? T : n[o],
                            a = "__proto__" == o ? T : t[o],
                            l = f.get(a);
                        if (l) it(n, o, l);
                        else {
                            var l = e ? e(c, a, o + "", n, t, f) : T,
                                s = l === T;
                            if (s) {
                                var h = of (a),
                                    p = !h && cf(a),
                                    _ = !h && !p && pf(a),
                                    l = a;
                                h || p || _ ? of (c) ? l = c : su(c) ? l = Ur(c) : p ? (s = false, l = Ir(a, true)) : _ ? (s = false, l = zr(a, true)) : l = [] : bu(a) || uf(a) ? (l = c, uf(c) ? l = Su(c) : (!gu(c) || r && pu(c)) && (l = Ae(a))) : s = false
                            }
                            s && (f.set(a, l), Yt(l, a, r, e, f), f.delete(a)), it(n, o, l)
                        }
                    } else f = e ? e("__proto__" == o ? T : n[o], i, o + "", n, t, u) : T, f === T && (f = i), it(n, o, f)
                }, Wu)
            }

            function Qt(n, t) {
                var r = n.length;
                if (r) return t += 0 > t ? r : 0, Se(t, r) ? n[t] : T
            }

            function Xt(n, t, r) {
                var e = -1;
                return t = c(t.length ? t : [Tu], k(ye())),
                    n = Gt(n, function(n) {
                        return {
                            a: c(t, function(t) {
                                return t(n)
                            }),
                            b: ++e,
                            c: n
                        }
                    }), w(n, function(n, t) {
                        var e;
                        n: {
                            e = -1;
                            for (var u = n.a, i = t.a, o = u.length, f = r.length; ++e < o;) {
                                var c = Wr(u[e], i[e]);
                                if (c) {
                                    e = e >= f ? c : c * ("desc" == r[e] ? -1 : 1);
                                    break n
                                }
                            }
                            e = n.b - t.b
                        }
                        return e
                    })
            }

            function nr(n, t) {
                return tr(n, t, function(t, r) {
                    return Ru(n, r)
                })
            }

            function tr(n, t, r) {
                for (var e = -1, u = t.length, i = {}; ++e < u;) {
                    var o = t[e],
                        f = kt(n, o);
                    r(f, o) && lr(i, Sr(o, n), f)
                }
                return i
            }

            function rr(n) {
                return function(t) {
                    return kt(t, n)
                }
            }

            function er(n, t, r, e) {
                var u = e ? g : v,
                    i = -1,
                    o = t.length,
                    f = n;
                for (n === t && (t = Ur(t)), r && (f = c(n, k(r))); ++i < o;)
                    for (var a = 0, l = t[i], l = r ? r(l) : l; - 1 < (a = u(f, l, a, e));) f !== n && bi.call(f, a, 1), bi.call(n, a, 1);
                return n
            }

            function ur(n, t) {
                for (var r = n ? t.length : 0, e = r - 1; r--;) {
                    var u = t[r];
                    if (r == e || u !== i) {
                        var i = u;
                        Se(u) ? bi.call(n, u, 1) : xr(n, u)
                    }
                }
            }

            function ir(n, t) {
                return n + Oi(Mi() * (t - n + 1))
            }

            function or(n, t) {
                var r = "";
                if (!n || 1 > t || 9007199254740991 < t) return r;
                do t % 2 && (r += n), (t = Oi(t / 2)) && (n += n); while (t);
                return r
            }

            function fr(n, t) {
                return bo(Be(n, t, Tu), n + "")
            }

            function cr(n) {
                return Qn(Lu(n))
            }

            function ar(n, t) {
                var r = Lu(n);
                return Ce(r, pt(t, 0, r.length))
            }

            function lr(n, t, r, e) {
                if (!gu(n)) return n;
                t = Sr(t, n);
                for (var u = -1, i = t.length, o = i - 1, f = n; null != f && ++u < i;) {
                    var c = De(t[u]),
                        a = r;
                    if (u != o) {
                        var l = f[c],
                            a = e ? e(l, c, f) : T;
                        a === T && (a = gu(l) ? l : Se(t[u + 1]) ? [] : {})
                    }
                    ot(f, c, a), f = f[c]
                }
                return n
            }

            function sr(n) {
                return Ce(Lu(n))
            }

            function hr(n, t, r) {
                var e = -1,
                    u = n.length;
                for (0 > t && (t = -t > u ? 0 : u + t), r = r > u ? u : r, 0 > r && (r += u), u = t > r ? 0 : r - t >>> 0, t >>>= 0, r = Vu(u); ++e < u;) r[e] = n[e + t];
                return r
            }

            function pr(n, t) {
                var r;
                return eo(n, function(n, e, u) {
                    return r = t(n, e, u),
                        !r
                }), !!r
            }

            function _r(n, t, r) {
                var e = 0,
                    u = null == n ? e : n.length;
                if (typeof t == "number" && t === t && 2147483647 >= u) {
                    for (; e < u;) {
                        var i = e + u >>> 1,
                            o = n[i];
                        null !== o && !ju(o) && (r ? o <= t : o < t) ? e = i + 1 : u = i
                    }
                    return u
                }
                return vr(n, t, Tu, r)
            }

            function vr(n, t, r, e) {
                t = r(t);
                for (var u = 0, i = null == n ? 0 : n.length, o = t !== t, f = null === t, c = ju(t), a = t === T; u < i;) {
                    var l = Oi((u + i) / 2),
                        s = r(n[l]),
                        h = s !== T,
                        p = null === s,
                        _ = s === s,
                        v = ju(s);
                    (o ? e || _ : a ? _ && (e || h) : f ? _ && h && (e || !p) : c ? _ && h && !p && (e || !v) : p || v ? 0 : e ? s <= t : s < t) ? u = l + 1: i = l
                }
                return Ui(i, 4294967294)
            }

            function gr(n, t) {
                for (var r = -1, e = n.length, u = 0, i = []; ++r < e;) {
                    var o = n[r],
                        f = t ? t(o) : o;
                    if (!r || !au(f, c)) {
                        var c = f;
                        i[u++] = 0 === o ? 0 : o
                    }
                }
                return i
            }

            function dr(n) {
                return typeof n == "number" ? n : ju(n) ? F : +n
            }

            function yr(n) {
                if (typeof n == "string") return n;
                if ( of (n)) return c(n, yr) + "";
                if (ju(n)) return to ? to.call(n) : "";
                var t = n + "";
                return "0" == t && 1 / n == -$ ? "-0" : t
            }

            function br(n, t, r) {
                var e = -1,
                    u = o,
                    i = n.length,
                    c = true,
                    a = [],
                    l = a;
                if (r) c = false, u = f;
                else if (200 <= i) {
                    if (u = t ? null : lo(n)) return U(u);
                    c = false, u = O, l = new Nn
                } else l = t ? [] : a;
                n: for (; ++e < i;) {
                    var s = n[e],
                        h = t ? t(s) : s,
                        s = r || 0 !== s ? s : 0;
                    if (c && h === h) {
                        for (var p = l.length; p--;)
                            if (l[p] === h) continue n;
                        t && l.push(h), a.push(s)
                    } else u(l, h, r) || (l !== a && l.push(h), a.push(s))
                }
                return a
            }

            function xr(n, t) {
                return t = Sr(t, n), n = 2 > t.length ? n : kt(n, hr(t, 0, -1)), null == n || delete n[De(qe(t))]
            }

            function jr(n, t, r, e) {
                for (var u = n.length, i = e ? u : -1;
                    (e ? i-- : ++i < u) && t(n[i], i, n););
                return r ? hr(n, e ? 0 : i, e ? i + 1 : u) : hr(n, e ? i + 1 : 0, e ? u : i)
            }

            function wr(n, t) {
                var r = n;
                return r instanceof Un && (r = r.value()), l(t, function(n, t) {
                    return t.func.apply(t.thisArg, a([n], t.args))
                }, r)
            }

            function mr(n, t, r) {
                var e = n.length;
                if (2 > e) return e ? br(n[0]) : [];
                for (var u = -1, i = Vu(e); ++u < e;)
                    for (var o = n[u], f = -1; ++f < e;) f != u && (i[u] = yt(i[u] || o, n[f], t, r));
                return br(wt(i, 1), t, r)
            }

            function Ar(n, t, r) {
                for (var e = -1, u = n.length, i = t.length, o = {}; ++e < u;) r(o, n[e], e < i ? t[e] : T);
                return o
            }

            function Er(n) {
                return su(n) ? n : []
            }

            function kr(n) {
                return typeof n == "function" ? n : Tu
            }

            function Sr(n, t) {
                return of(n) ? n : Ie(n, t) ? [n] : xo(Ou(n))
            }

            function Or(n, t, r) {
                var e = n.length;
                return r = r === T ? e : r, !t && r >= e ? n : hr(n, t, r)
            }

            function Ir(n, t) {
                if (t) return n.slice();
                var r = n.length,
                    r = vi ? vi(r) : new n.constructor(r);
                return n.copy(r), r
            }

            function Rr(n) {
                var t = new n.constructor(n.byteLength);
                return new _i(t).set(new _i(n)),
                    t
            }

            function zr(n, t) {
                return new n.constructor(t ? Rr(n.buffer) : n.buffer, n.byteOffset, n.length)
            }

            function Wr(n, t) {
                if (n !== t) {
                    var r = n !== T,
                        e = null === n,
                        u = n === n,
                        i = ju(n),
                        o = t !== T,
                        f = null === t,
                        c = t === t,
                        a = ju(t);
                    if (!f && !a && !i && n > t || i && o && c && !f && !a || e && o && c || !r && c || !u) return 1;
                    if (!e && !i && !a && n < t || a && r && u && !e && !i || f && r && u || !o && u || !c) return -1
                }
                return 0
            }

            function Br(n, t, r, e) {
                var u = -1,
                    i = n.length,
                    o = r.length,
                    f = -1,
                    c = t.length,
                    a = Li(i - o, 0),
                    l = Vu(c + a);
                for (e = !e; ++f < c;) l[f] = t[f];
                for (; ++u < o;)(e || u < i) && (l[r[u]] = n[u]);
                for (; a--;) l[f++] = n[u++];
                return l
            }

            function Lr(n, t, r, e) {
                var u = -1,
                    i = n.length,
                    o = -1,
                    f = r.length,
                    c = -1,
                    a = t.length,
                    l = Li(i - f, 0),
                    s = Vu(l + a);
                for (e = !e; ++u < l;) s[u] = n[u];
                for (l = u; ++c < a;) s[l + c] = t[c];
                for (; ++o < f;)(e || u < i) && (s[l + r[o]] = n[u++]);
                return s
            }

            function Ur(n, t) {
                var r = -1,
                    e = n.length;
                for (t || (t = Vu(e)); ++r < e;) t[r] = n[r];
                return t
            }

            function Cr(n, t, r, e) {
                var u = !r;
                r || (r = {});
                for (var i = -1, o = t.length; ++i < o;) {
                    var f = t[i],
                        c = e ? e(r[f], n[f], f, r, n) : T;
                    c === T && (c = n[f]), u ? st(r, f, c) : ot(r, f, c)
                }
                return r
            }

            function Dr(n, t) {
                return Cr(n, ho(n), t)
            }

            function Mr(n, t) {
                return Cr(n, po(n), t);
            }

            function Tr(n, r) {
                return function(e, u) {
                    var i = of (e) ? t : ct,
                        o = r ? r() : {};
                    return i(e, n, ye(u, 2), o)
                }
            }

            function $r(n) {
                return fr(function(t, r) {
                    var e = -1,
                        u = r.length,
                        i = 1 < u ? r[u - 1] : T,
                        o = 2 < u ? r[2] : T,
                        i = 3 < n.length && typeof i == "function" ? (u--, i) : T;
                    for (o && Oe(r[0], r[1], o) && (i = 3 > u ? T : i, u = 1), t = Yu(t); ++e < u;)(o = r[e]) && n(t, o, e, i);
                    return t
                })
            }

            function Fr(n, t) {
                return function(r, e) {
                    if (null == r) return r;
                    if (!lu(r)) return n(r, e);
                    for (var u = r.length, i = t ? u : -1, o = Yu(r);
                        (t ? i-- : ++i < u) && false !== e(o[i], i, o););
                    return r
                }
            }

            function Nr(n) {
                return function(t, r, e) {
                    var u = -1,
                        i = Yu(t);
                    e = e(t);
                    for (var o = e.length; o--;) {
                        var f = e[n ? o : ++u];
                        if (false === r(i[f], f, i)) break
                    }
                    return t
                }
            }

            function Pr(n, t, r) {
                function e() {
                    return (this && this !== $n && this instanceof e ? i : n).apply(u ? r : this, arguments)
                }
                var u = 1 & t,
                    i = Vr(n);
                return e
            }

            function Zr(n) {
                return function(t) {
                    t = Ou(t);
                    var r = Rn.test(t) ? M(t) : T,
                        e = r ? r[0] : t.charAt(0);
                    return t = r ? Or(r, 1).join("") : t.slice(1), e[n]() + t
                }
            }

            function qr(n) {
                return function(t) {
                    return l(Du(Cu(t).replace(kn, "")), n, "")
                }
            }

            function Vr(n) {
                return function() {
                    var t = arguments;
                    switch (t.length) {
                        case 0:
                            return new n;
                        case 1:
                            return new n(t[0]);
                        case 2:
                            return new n(t[0], t[1]);
                        case 3:
                            return new n(t[0], t[1], t[2]);
                        case 4:
                            return new n(t[0], t[1], t[2], t[3]);
                        case 5:
                            return new n(t[0], t[1], t[2], t[3], t[4]);
                        case 6:
                            return new n(t[0], t[1], t[2], t[3], t[4], t[5]);
                        case 7:
                            return new n(t[0], t[1], t[2], t[3], t[4], t[5], t[6])
                    }
                    var r = ro(n.prototype),
                        t = n.apply(r, t);
                    return gu(t) ? t : r
                }
            }

            function Kr(t, r, e) {
                function u() {
                    for (var o = arguments.length, f = Vu(o), c = o, a = de(u); c--;) f[c] = arguments[c];
                    return c = 3 > o && f[0] !== a && f[o - 1] !== a ? [] : L(f, a),
                        o -= c.length, o < e ? ue(t, r, Jr, u.placeholder, T, f, c, T, T, e - o) : n(this && this !== $n && this instanceof u ? i : t, this, f)
                }
                var i = Vr(t);
                return u
            }

            function Gr(n) {
                return function(t, r, e) {
                    var u = Yu(t);
                    if (!lu(t)) {
                        var i = ye(r, 3);
                        t = zu(t), r = function(n) {
                            return i(u[n], n, u)
                        }
                    }
                    return r = n(t, r, e), -1 < r ? u[i ? t[r] : r] : T
                }
            }

            function Hr(n) {
                return pe(function(t) {
                    var r = t.length,
                        e = r,
                        u = On.prototype.thru;
                    for (n && t.reverse(); e--;) {
                        var i = t[e];
                        if (typeof i != "function") throw new ni("Expected a function");
                        if (u && !o && "wrapper" == ge(i)) var o = new On([], true)
                    }
                    for (e = o ? e : r; ++e < r;) var i = t[e],
                        u = ge(i),
                        f = "wrapper" == u ? so(i) : T,
                        o = f && Re(f[0]) && 424 == f[1] && !f[4].length && 1 == f[9] ? o[ge(f[0])].apply(o, f[3]) : 1 == i.length && Re(i) ? o[u]() : o.thru(i);
                    return function() {
                        var n = arguments,
                            e = n[0];
                        if (o && 1 == n.length && of (e)) return o.plant(e).value();
                        for (var u = 0, n = r ? t[u].apply(this, n) : e; ++u < r;) n = t[u].call(this, n);
                        return n
                    }
                })
            }

            function Jr(n, t, r, e, u, i, o, f, c, a) {
                function l() {
                    for (var d = arguments.length, y = Vu(d), b = d; b--;) y[b] = arguments[b];
                    if (_) {
                        var x, j = de(l),
                            b = y.length;
                        for (x = 0; b--;) y[b] === j && ++x
                    }
                    if (e && (y = Br(y, e, u, _)), i && (y = Lr(y, i, o, _)), d -= x, _ && d < a) return j = L(y, j), ue(n, t, Jr, l.placeholder, r, y, j, f, c, a - d);
                    if (j = h ? r : this, b = p ? j[n] : n, d = y.length, f) {
                        x = y.length;
                        for (var w = Ui(f.length, x), m = Ur(y); w--;) {
                            var A = f[w];
                            y[w] = Se(A, x) ? m[A] : T
                        }
                    } else v && 1 < d && y.reverse();
                    return s && c < d && (y.length = c), this && this !== $n && this instanceof l && (b = g || Vr(b)), b.apply(j, y)
                }
                var s = 128 & t,
                    h = 1 & t,
                    p = 2 & t,
                    _ = 24 & t,
                    v = 512 & t,
                    g = p ? T : Vr(n);
                return l
            }

            function Yr(n, t) {
                return function(r, e) {
                    return Bt(r, n, t(e))
                }
            }

            function Qr(n, t) {
                return function(r, e) {
                    var u;
                    if (r === T && e === T) return t;
                    if (r !== T && (u = r), e !== T) {
                        if (u === T) return e;
                        typeof r == "string" || typeof e == "string" ? (r = yr(r), e = yr(e)) : (r = dr(r), e = dr(e)), u = n(r, e)
                    }
                    return u
                }
            }

            function Xr(t) {
                return pe(function(r) {
                    return r = c(r, k(ye())), fr(function(e) {
                        var u = this;
                        return t(r, function(t) {
                            return n(t, u, e)
                        })
                    })
                })
            }

            function ne(n, t) {
                t = t === T ? " " : yr(t);
                var r = t.length;
                return 2 > r ? r ? or(t, n) : t : (r = or(t, Si(n / D(t))), Rn.test(t) ? Or(M(r), 0, n).join("") : r.slice(0, n))
            }

            function te(t, r, e, u) {
                function i() {
                    for (var r = -1, c = arguments.length, a = -1, l = u.length, s = Vu(l + c), h = this && this !== $n && this instanceof i ? f : t; ++a < l;) s[a] = u[a];
                    for (; c--;) s[a++] = arguments[++r];
                    return n(h, o ? e : this, s)
                }
                var o = 1 & r,
                    f = Vr(t);
                return i
            }

            function re(n) {
                return function(t, r, e) {
                    e && typeof e != "number" && Oe(t, r, e) && (r = e = T), t = mu(t), r === T ? (r = t, t = 0) : r = mu(r), e = e === T ? t < r ? 1 : -1 : mu(e);
                    var u = -1;
                    r = Li(Si((r - t) / (e || 1)), 0);
                    for (var i = Vu(r); r--;) i[n ? r : ++u] = t, t += e;
                    return i
                }
            }

            function ee(n) {
                return function(t, r) {
                    return typeof t == "string" && typeof r == "string" || (t = ku(t), r = ku(r)), n(t, r)
                }
            }

            function ue(n, t, r, e, u, i, o, f, c, a) {
                var l = 8 & t,
                    s = l ? o : T;
                o = l ? T : o;
                var h = l ? i : T;
                return i = l ? T : i, t = (t | (l ? 32 : 64)) & ~(l ? 64 : 32), 4 & t || (t &= -4), u = [n, t, u, h, s, i, o, f, c, a], r = r.apply(T, u), Re(n) && go(r, u), r.placeholder = e, Le(r, n, t)
            }

            function ie(n) {
                var t = Ju[n];
                return function(n, r) {
                    if (n = ku(n), r = null == r ? 0 : Ui(Au(r), 292)) {
                        var e = (Ou(n) + "e").split("e"),
                            e = t(e[0] + "e" + (+e[1] + r)),
                            e = (Ou(e) + "e").split("e");
                        return +(e[0] + "e" + (+e[1] - r))
                    }
                    return t(n)
                }
            }

            function oe(n) {
                return function(t) {
                    var r = _o(t);
                    return "[object Map]" == r ? W(t) : "[object Set]" == r ? C(t) : E(t, n(t))
                }
            }

            function fe(n, t, r, e, u, i, o, f) {
                var c = 2 & t;
                if (!c && typeof n != "function") throw new ni("Expected a function");
                var a = e ? e.length : 0;
                if (a || (t &= -97, e = u = T), o = o === T ? o : Li(Au(o), 0), f = f === T ? f : Au(f), a -= u ? u.length : 0, 64 & t) {
                    var l = e,
                        s = u;
                    e = u = T
                }
                var h = c ? T : so(n);
                return i = [n, t, r, e, u, l, s, i, o, f], h && (r = i[1], n = h[1], t = r | n, e = 128 == n && 8 == r || 128 == n && 256 == r && i[7].length <= h[8] || 384 == n && h[7].length <= h[8] && 8 == r, 131 > t || e) && (1 & n && (i[2] = h[2], t |= 1 & r ? 0 : 4), (r = h[3]) && (e = i[3], i[3] = e ? Br(e, r, h[4]) : r, i[4] = e ? L(i[3], "__lodash_placeholder__") : h[4]), (r = h[5]) && (e = i[5], i[5] = e ? Lr(e, r, h[6]) : r, i[6] = e ? L(i[5], "__lodash_placeholder__") : h[6]), (r = h[7]) && (i[7] = r), 128 & n && (i[8] = null == i[8] ? h[8] : Ui(i[8], h[8])), null == i[9] && (i[9] = h[9]), i[0] = h[0], i[1] = t), n = i[0], t = i[1],
                    r = i[2], e = i[3], u = i[4], f = i[9] = i[9] === T ? c ? 0 : n.length : Li(i[9] - a, 0), !f && 24 & t && (t &= -25), Le((h ? fo : go)(t && 1 != t ? 8 == t || 16 == t ? Kr(n, t, f) : 32 != t && 33 != t || u.length ? Jr.apply(T, i) : te(n, t, r, e) : Pr(n, t, r), i), n, t)
            }

            function ce(n, t, r, e) {
                return n === T || au(n, ri[r]) && !ii.call(e, r) ? t : n
            }

            function ae(n, t, r, e, u, i) {
                return gu(n) && gu(t) && (i.set(t, n), Yt(n, t, T, ae, i), i.delete(t)), n
            }

            function le(n) {
                return bu(n) ? T : n
            }

            function se(n, t, r, e, u, i) {
                var o = 1 & r,
                    f = n.length,
                    c = t.length;
                if (f != c && !(o && c > f)) return false;
                if ((c = i.get(n)) && i.get(t)) return c == t;
                var c = -1,
                    a = true,
                    l = 2 & r ? new Nn : T;
                for (i.set(n, t), i.set(t, n); ++c < f;) {
                    var s = n[c],
                        p = t[c];
                    if (e) var _ = o ? e(p, s, c, t, n, i) : e(s, p, c, n, t, i);
                    if (_ !== T) {
                        if (_) continue;
                        a = false;
                        break
                    }
                    if (l) {
                        if (!h(t, function(n, t) {
                                if (!O(l, t) && (s === n || u(s, n, r, e, i))) return l.push(t)
                            })) {
                            a = false;
                            break
                        }
                    } else if (s !== p && !u(s, p, r, e, i)) {
                        a = false;
                        break
                    }
                }
                return i.delete(n), i.delete(t), a
            }

            function he(n, t, r, e, u, i, o) {
                switch (r) {
                    case "[object DataView]":
                        if (n.byteLength != t.byteLength || n.byteOffset != t.byteOffset) break;
                        n = n.buffer, t = t.buffer;
                    case "[object ArrayBuffer]":
                        if (n.byteLength != t.byteLength || !i(new _i(n), new _i(t))) break;
                        return true;
                    case "[object Boolean]":
                    case "[object Date]":
                    case "[object Number]":
                        return au(+n, +t);
                    case "[object Error]":
                        return n.name == t.name && n.message == t.message;
                    case "[object RegExp]":
                    case "[object String]":
                        return n == t + "";
                    case "[object Map]":
                        var f = W;
                    case "[object Set]":
                        if (f || (f = U), n.size != t.size && !(1 & e)) break;
                        return (r = o.get(n)) ? r == t : (e |= 2, o.set(n, t), t = se(f(n), f(t), e, u, i, o), o.delete(n), t);
                    case "[object Symbol]":
                        if (no) return no.call(n) == no.call(t)
                }
                return false
            }

            function pe(n) {
                return bo(Be(n, T, Pe), n + "")
            }

            function _e(n) {
                return St(n, zu, ho)
            }

            function ve(n) {
                return St(n, Wu, po)
            }

            function ge(n) {
                for (var t = n.name + "", r = Ki[t], e = ii.call(Ki, t) ? r.length : 0; e--;) {
                    var u = r[e],
                        i = u.func;
                    if (null == i || i == n) return u.name
                }
                return t
            }

            function de(n) {
                return (ii.call(An, "placeholder") ? An : n).placeholder
            }

            function ye() {
                var n = An.iteratee || $u,
                    n = n === $u ? qt : n;
                return arguments.length ? n(arguments[0], arguments[1]) : n
            }

            function be(n, t) {
                var r = n.__data__,
                    e = typeof t;
                return ("string" == e || "number" == e || "symbol" == e || "boolean" == e ? "__proto__" !== t : null === t) ? r[typeof t == "string" ? "string" : "hash"] : r.map;
            }

            function xe(n) {
                for (var t = zu(n), r = t.length; r--;) {
                    var e = t[r],
                        u = n[e];
                    t[r] = [e, u, u === u && !gu(u)]
                }
                return t
            }

            function je(n, t) {
                var r = null == n ? T : n[t];
                return Ft(r) ? r : T
            }

            function we(n, t, r) {
                t = Sr(t, n);
                for (var e = -1, u = t.length, i = false; ++e < u;) {
                    var o = De(t[e]);
                    if (!(i = null != n && r(n, o))) break;
                    n = n[o]
                }
                return i || ++e != u ? i : (u = null == n ? 0 : n.length, !!u && vu(u) && Se(o, u) && ( of (n) || uf(n)))
            }

            function me(n) {
                var t = n.length,
                    r = new n.constructor(t);
                return t && "string" == typeof n[0] && ii.call(n, "index") && (r.index = n.index, r.input = n.input), r
            }

            function Ae(n) {
                return typeof n.constructor != "function" || ze(n) ? {} : ro(gi(n))
            }

            function Ee(n, t, r) {
                var e = n.constructor;
                switch (t) {
                    case "[object ArrayBuffer]":
                        return Rr(n);
                    case "[object Boolean]":
                    case "[object Date]":
                        return new e(+n);
                    case "[object DataView]":
                        return t = r ? Rr(n.buffer) : n.buffer, new n.constructor(t, n.byteOffset, n.byteLength);
                    case "[object Float32Array]":
                    case "[object Float64Array]":
                    case "[object Int8Array]":
                    case "[object Int16Array]":
                    case "[object Int32Array]":
                    case "[object Uint8Array]":
                    case "[object Uint8ClampedArray]":
                    case "[object Uint16Array]":
                    case "[object Uint32Array]":
                        return zr(n, r);
                    case "[object Map]":
                        return new e;
                    case "[object Number]":
                    case "[object String]":
                        return new e(n);
                    case "[object RegExp]":
                        return t = new n.constructor(n.source, _n.exec(n)), t.lastIndex = n.lastIndex, t;
                    case "[object Set]":
                        return new e;
                    case "[object Symbol]":
                        return no ? Yu(no.call(n)) : {}
                }
            }

            function ke(n) {
                return of(n) || uf(n) || !!(xi && n && n[xi])
            }

            function Se(n, t) {
                var r = typeof n;
                return t = null == t ? 9007199254740991 : t, !!t && ("number" == r || "symbol" != r && bn.test(n)) && -1 < n && 0 == n % 1 && n < t;
            }

            function Oe(n, t, r) {
                if (!gu(r)) return false;
                var e = typeof t;
                return !!("number" == e ? lu(r) && Se(t, r.length) : "string" == e && t in r) && au(r[t], n)
            }

            function Ie(n, t) {
                if ( of (n)) return false;
                var r = typeof n;
                return !("number" != r && "symbol" != r && "boolean" != r && null != n && !ju(n)) || (nn.test(n) || !X.test(n) || null != t && n in Yu(t))
            }

            function Re(n) {
                var t = ge(n),
                    r = An[t];
                return typeof r == "function" && t in Un.prototype && (n === r || (t = so(r), !!t && n === t[0]))
            }

            function ze(n) {
                var t = n && n.constructor;
                return n === (typeof t == "function" && t.prototype || ri)
            }

            function We(n, t) {
                return function(r) {
                    return null != r && (r[n] === t && (t !== T || n in Yu(r)))
                }
            }

            function Be(t, r, e) {
                return r = Li(r === T ? t.length - 1 : r, 0),
                    function() {
                        for (var u = arguments, i = -1, o = Li(u.length - r, 0), f = Vu(o); ++i < o;) f[i] = u[r + i];
                        for (i = -1, o = Vu(r + 1); ++i < r;) o[i] = u[i];
                        return o[r] = e(f), n(t, this, o)
                    }
            }

            function Le(n, t, r) {
                var e = t + "";
                t = bo;
                var u, i = Te;
                return u = (u = e.match(an)) ? u[1].split(ln) : [], r = i(u, r), (i = r.length) && (u = i - 1, r[u] = (1 < i ? "& " : "") + r[u], r = r.join(2 < i ? ", " : " "), e = e.replace(cn, "{\n/* [wrapped with " + r + "] */\n")), t(n, e)
            }

            function Ue(n) {
                var t = 0,
                    r = 0;
                return function() {
                    var e = Ci(),
                        u = 16 - (e - r);
                    if (r = e, 0 < u) {
                        if (800 <= ++t) return arguments[0]
                    } else t = 0;
                    return n.apply(T, arguments)
                }
            }

            function Ce(n, t) {
                var r = -1,
                    e = n.length,
                    u = e - 1;
                for (t = t === T ? e : t; ++r < t;) {
                    var e = ir(r, u),
                        i = n[e];
                    n[e] = n[r], n[r] = i
                }
                return n.length = t, n
            }

            function De(n) {
                if (typeof n == "string" || ju(n)) return n;
                var t = n + "";
                return "0" == t && 1 / n == -$ ? "-0" : t
            }

            function Me(n) {
                if (null != n) {
                    try {
                        return ui.call(n)
                    } catch (n) {}
                    return n + ""
                }
                return ""
            }

            function Te(n, t) {
                return r(N, function(r) {
                    var e = "_." + r[0];
                    t & r[1] && !o(n, e) && n.push(e);
                }), n.sort()
            }

            function $e(n) {
                if (n instanceof Un) return n.clone();
                var t = new On(n.__wrapped__, n.__chain__);
                return t.__actions__ = Ur(n.__actions__), t.__index__ = n.__index__, t.__values__ = n.__values__, t
            }

            function Fe(n, t, r) {
                var e = null == n ? 0 : n.length;
                return e ? (r = null == r ? 0 : Au(r), 0 > r && (r = Li(e + r, 0)), _(n, ye(t, 3), r)) : -1
            }

            function Ne(n, t, r) {
                var e = null == n ? 0 : n.length;
                if (!e) return -1;
                var u = e - 1;
                return r !== T && (u = Au(r), u = 0 > r ? Li(e + u, 0) : Ui(u, e - 1)), _(n, ye(t, 3), u, true)
            }

            function Pe(n) {
                return (null == n ? 0 : n.length) ? wt(n, 1) : []
            }

            function Ze(n) {
                return n && n.length ? n[0] : T
            }

            function qe(n) {
                var t = null == n ? 0 : n.length;
                return t ? n[t - 1] : T
            }

            function Ve(n, t) {
                return n && n.length && t && t.length ? er(n, t) : n
            }

            function Ke(n) {
                return null == n ? n : Ti.call(n)
            }

            function Ge(n) {
                if (!n || !n.length) return [];
                var t = 0;
                return n = i(n, function(n) {
                    if (su(n)) return t = Li(n.length, t), true
                }), A(t, function(t) {
                    return c(n, b(t))
                })
            }

            function He(t, r) {
                if (!t || !t.length) return [];
                var e = Ge(t);
                return null == r ? e : c(e, function(t) {
                    return n(r, T, t)
                })
            }

            function Je(n) {
                return n = An(n), n.__chain__ = true, n
            }

            function Ye(n, t) {
                return t(n)
            }

            function Qe() {
                return this
            }

            function Xe(n, t) {
                return ( of (n) ? r : eo)(n, ye(t, 3))
            }

            function nu(n, t) {
                return ( of (n) ? e : uo)(n, ye(t, 3))
            }

            function tu(n, t) {
                return ( of (n) ? c : Gt)(n, ye(t, 3))
            }

            function ru(n, t, r) {
                return t = r ? T : t, t = n && null == t ? n.length : t, fe(n, 128, T, T, T, T, t)
            }

            function eu(n, t) {
                var r;
                if (typeof t != "function") throw new ni("Expected a function");
                return n = Au(n),
                    function() {
                        return 0 < --n && (r = t.apply(this, arguments)), 1 >= n && (t = T), r
                    }
            }

            function uu(n, t, r) {
                return t = r ? T : t, n = fe(n, 8, T, T, T, T, T, t), n.placeholder = uu.placeholder,
                    n
            }

            function iu(n, t, r) {
                return t = r ? T : t, n = fe(n, 16, T, T, T, T, T, t), n.placeholder = iu.placeholder, n
            }

            function ou(n, t, r) {
                function e(t) {
                    var r = c,
                        e = a;
                    return c = a = T, _ = t, s = n.apply(e, r)
                }

                function u(n) {
                    var r = n - p;
                    return n -= _, p === T || r >= t || 0 > r || g && n >= l
                }

                function i() {
                    var n = Ko();
                    if (u(n)) return o(n);
                    var r, e = yo;
                    r = n - _, n = t - (n - p), r = g ? Ui(n, l - r) : n, h = e(i, r)
                }

                function o(n) {
                    return h = T, d && c ? e(n) : (c = a = T, s)
                }

                function f() {
                    var n = Ko(),
                        r = u(n);
                    if (c = arguments, a = this, p = n, r) {
                        if (h === T) return _ = n = p, h = yo(i, t), v ? e(n) : s;
                        if (g) return h = yo(i, t), e(p)
                    }
                    return h === T && (h = yo(i, t)),
                        s
                }
                var c, a, l, s, h, p, _ = 0,
                    v = false,
                    g = false,
                    d = true;
                if (typeof n != "function") throw new ni("Expected a function");
                return t = ku(t) || 0, gu(r) && (v = !!r.leading, l = (g = "maxWait" in r) ? Li(ku(r.maxWait) || 0, t) : l, d = "trailing" in r ? !!r.trailing : d), f.cancel = function() {
                    h !== T && ao(h), _ = 0, c = p = a = h = T
                }, f.flush = function() {
                    return h === T ? s : o(Ko())
                }, f
            }

            function fu(n, t) {
                function r() {
                    var e = arguments,
                        u = t ? t.apply(this, e) : e[0],
                        i = r.cache;
                    return i.has(u) ? i.get(u) : (e = n.apply(this, e), r.cache = i.set(u, e) || i, e)
                }
                if (typeof n != "function" || null != t && typeof t != "function") throw new ni("Expected a function");
                return r.cache = new(fu.Cache || Fn), r
            }

            function cu(n) {
                if (typeof n != "function") throw new ni("Expected a function");
                return function() {
                    var t = arguments;
                    switch (t.length) {
                        case 0:
                            return !n.call(this);
                        case 1:
                            return !n.call(this, t[0]);
                        case 2:
                            return !n.call(this, t[0], t[1]);
                        case 3:
                            return !n.call(this, t[0], t[1], t[2])
                    }
                    return !n.apply(this, t)
                }
            }

            function au(n, t) {
                return n === t || n !== n && t !== t
            }

            function lu(n) {
                return null != n && vu(n.length) && !pu(n)
            }

            function su(n) {
                return du(n) && lu(n)
            }

            function hu(n) {
                if (!du(n)) return false;
                var t = Ot(n);
                return "[object Error]" == t || "[object DOMException]" == t || typeof n.message == "string" && typeof n.name == "string" && !bu(n);
            }

            function pu(n) {
                return !!gu(n) && (n = Ot(n), "[object Function]" == n || "[object GeneratorFunction]" == n || "[object AsyncFunction]" == n || "[object Proxy]" == n)
            }

            function _u(n) {
                return typeof n == "number" && n == Au(n)
            }

            function vu(n) {
                return typeof n == "number" && -1 < n && 0 == n % 1 && 9007199254740991 >= n
            }

            function gu(n) {
                var t = typeof n;
                return null != n && ("object" == t || "function" == t)
            }

            function du(n) {
                return null != n && typeof n == "object"
            }

            function yu(n) {
                return typeof n == "number" || du(n) && "[object Number]" == Ot(n)
            }

            function bu(n) {
                return !(!du(n) || "[object Object]" != Ot(n)) && (n = gi(n),
                    null === n || (n = ii.call(n, "constructor") && n.constructor, typeof n == "function" && n instanceof n && ui.call(n) == ai))
            }

            function xu(n) {
                return typeof n == "string" || ! of (n) && du(n) && "[object String]" == Ot(n)
            }

            function ju(n) {
                return typeof n == "symbol" || du(n) && "[object Symbol]" == Ot(n)
            }

            function wu(n) {
                if (!n) return [];
                if (lu(n)) return xu(n) ? M(n) : Ur(n);
                if (ji && n[ji]) {
                    n = n[ji]();
                    for (var t, r = []; !(t = n.next()).done;) r.push(t.value);
                    return r
                }
                return t = _o(n), ("[object Map]" == t ? W : "[object Set]" == t ? U : Lu)(n)
            }

            function mu(n) {
                return n ? (n = ku(n),
                    n === $ || n === -$ ? 1.7976931348623157e308 * (0 > n ? -1 : 1) : n === n ? n : 0) : 0 === n ? n : 0
            }

            function Au(n) {
                n = mu(n);
                var t = n % 1;
                return n === n ? t ? n - t : n : 0
            }

            function Eu(n) {
                return n ? pt(Au(n), 0, 4294967295) : 0
            }

            function ku(n) {
                if (typeof n == "number") return n;
                if (ju(n)) return F;
                if (gu(n) && (n = typeof n.valueOf == "function" ? n.valueOf() : n, n = gu(n) ? n + "" : n), typeof n != "string") return 0 === n ? n : +n;
                n = n.replace(un, "");
                var t = gn.test(n);
                return t || yn.test(n) ? Dn(n.slice(2), t ? 2 : 8) : vn.test(n) ? F : +n
            }

            function Su(n) {
                return Cr(n, Wu(n))
            }

            function Ou(n) {
                return null == n ? "" : yr(n);
            }

            function Iu(n, t, r) {
                return n = null == n ? T : kt(n, t), n === T ? r : n
            }

            function Ru(n, t) {
                return null != n && we(n, t, zt)
            }

            function zu(n) {
                return lu(n) ? qn(n) : Vt(n)
            }

            function Wu(n) {
                if (lu(n)) n = qn(n, true);
                else if (gu(n)) {
                    var t, r = ze(n),
                        e = [];
                    for (t in n)("constructor" != t || !r && ii.call(n, t)) && e.push(t);
                    n = e
                } else {
                    if (t = [], null != n)
                        for (r in Yu(n)) t.push(r);
                    n = t
                }
                return n
            }

            function Bu(n, t) {
                if (null == n) return {};
                var r = c(ve(n), function(n) {
                    return [n]
                });
                return t = ye(t), tr(n, r, function(n, r) {
                    return t(n, r[0])
                })
            }

            function Lu(n) {
                return null == n ? [] : S(n, zu(n));
            }

            function Uu(n) {
                return Tf(Ou(n).toLowerCase())
            }

            function Cu(n) {
                return (n = Ou(n)) && n.replace(xn, Xn).replace(Sn, "")
            }

            function Du(n, t, r) {
                return n = Ou(n), t = r ? T : t, t === T ? zn.test(n) ? n.match(In) || [] : n.match(sn) || [] : n.match(t) || []
            }

            function Mu(n) {
                return function() {
                    return n
                }
            }

            function Tu(n) {
                return n
            }

            function $u(n) {
                return qt(typeof n == "function" ? n : _t(n, 1))
            }

            function Fu(n, t, e) {
                var u = zu(t),
                    i = Et(t, u);
                null != e || gu(t) && (i.length || !u.length) || (e = t, t = n, n = this, i = Et(t, zu(t)));
                var o = !(gu(e) && "chain" in e && !e.chain),
                    f = pu(n);
                return r(i, function(r) {
                    var e = t[r];
                    n[r] = e, f && (n.prototype[r] = function() {
                        var t = this.__chain__;
                        if (o || t) {
                            var r = n(this.__wrapped__);
                            return (r.__actions__ = Ur(this.__actions__)).push({
                                func: e,
                                args: arguments,
                                thisArg: n
                            }), r.__chain__ = t, r
                        }
                        return e.apply(n, a([this.value()], arguments))
                    })
                }), n
            }

            function Nu() {}

            function Pu(n) {
                return Ie(n) ? b(De(n)) : rr(n)
            }

            function Zu() {
                return []
            }

            function qu() {
                return false
            }
            mn = null == mn ? $n : rt.defaults($n.Object(), mn, rt.pick($n, Wn));
            var Vu = mn.Array,
                Ku = mn.Date,
                Gu = mn.Error,
                Hu = mn.Function,
                Ju = mn.Math,
                Yu = mn.Object,
                Qu = mn.RegExp,
                Xu = mn.String,
                ni = mn.TypeError,
                ti = Vu.prototype,
                ri = Yu.prototype,
                ei = mn["__core-js_shared__"],
                ui = Hu.prototype.toString,
                ii = ri.hasOwnProperty,
                oi = 0,
                fi = function() {
                    var n = /[^.]+$/.exec(ei && ei.keys && ei.keys.IE_PROTO || "");
                    return n ? "Symbol(src)_1." + n : ""
                }(),
                ci = ri.toString,
                ai = ui.call(Yu),
                li = $n._,
                si = Qu("^" + ui.call(ii).replace(rn, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
                hi = Pn ? mn.Buffer : T,
                pi = mn.Symbol,
                _i = mn.Uint8Array,
                vi = hi ? hi.g : T,
                gi = B(Yu.getPrototypeOf, Yu),
                di = Yu.create,
                yi = ri.propertyIsEnumerable,
                bi = ti.splice,
                xi = pi ? pi.isConcatSpreadable : T,
                ji = pi ? pi.iterator : T,
                wi = pi ? pi.toStringTag : T,
                mi = function() {
                    try {
                        var n = je(Yu, "defineProperty");
                        return n({}, "", {}), n
                    } catch (n) {}
                }(),
                Ai = mn.clearTimeout !== $n.clearTimeout && mn.clearTimeout,
                Ei = Ku && Ku.now !== $n.Date.now && Ku.now,
                ki = mn.setTimeout !== $n.setTimeout && mn.setTimeout,
                Si = Ju.ceil,
                Oi = Ju.floor,
                Ii = Yu.getOwnPropertySymbols,
                Ri = hi ? hi.isBuffer : T,
                zi = mn.isFinite,
                Wi = ti.join,
                Bi = B(Yu.keys, Yu),
                Li = Ju.max,
                Ui = Ju.min,
                Ci = Ku.now,
                Di = mn.parseInt,
                Mi = Ju.random,
                Ti = ti.reverse,
                $i = je(mn, "DataView"),
                Fi = je(mn, "Map"),
                Ni = je(mn, "Promise"),
                Pi = je(mn, "Set"),
                Zi = je(mn, "WeakMap"),
                qi = je(Yu, "create"),
                Vi = Zi && new Zi,
                Ki = {},
                Gi = Me($i),
                Hi = Me(Fi),
                Ji = Me(Ni),
                Yi = Me(Pi),
                Qi = Me(Zi),
                Xi = pi ? pi.prototype : T,
                no = Xi ? Xi.valueOf : T,
                to = Xi ? Xi.toString : T,
                ro = function() {
                    function n() {}
                    return function(t) {
                        return gu(t) ? di ? di(t) : (n.prototype = t, t = new n, n.prototype = T, t) : {}
                    }
                }();
            An.templateSettings = {
                escape: J,
                evaluate: Y,
                interpolate: Q,
                variable: "",
                imports: {
                    _: An
                }
            }, An.prototype = En.prototype, An.prototype.constructor = An, On.prototype = ro(En.prototype), On.prototype.constructor = On, Un.prototype = ro(En.prototype), Un.prototype.constructor = Un, Mn.prototype.clear = function() {
                this.__data__ = qi ? qi(null) : {}, this.size = 0
            }, Mn.prototype.delete = function(n) {
                return n = this.has(n) && delete this.__data__[n],
                    this.size -= n ? 1 : 0, n
            }, Mn.prototype.get = function(n) {
                var t = this.__data__;
                return qi ? (n = t[n], "__lodash_hash_undefined__" === n ? T : n) : ii.call(t, n) ? t[n] : T
            }, Mn.prototype.has = function(n) {
                var t = this.__data__;
                return qi ? t[n] !== T : ii.call(t, n)
            }, Mn.prototype.set = function(n, t) {
                var r = this.__data__;
                return this.size += this.has(n) ? 0 : 1, r[n] = qi && t === T ? "__lodash_hash_undefined__" : t, this
            }, Tn.prototype.clear = function() {
                this.__data__ = [], this.size = 0
            }, Tn.prototype.delete = function(n) {
                var t = this.__data__;
                return n = ft(t, n), !(0 > n) && (n == t.length - 1 ? t.pop() : bi.call(t, n, 1),
                    --this.size, true)
            }, Tn.prototype.get = function(n) {
                var t = this.__data__;
                return n = ft(t, n), 0 > n ? T : t[n][1]
            }, Tn.prototype.has = function(n) {
                return -1 < ft(this.__data__, n)
            }, Tn.prototype.set = function(n, t) {
                var r = this.__data__,
                    e = ft(r, n);
                return 0 > e ? (++this.size, r.push([n, t])) : r[e][1] = t, this
            }, Fn.prototype.clear = function() {
                this.size = 0, this.__data__ = {
                    hash: new Mn,
                    map: new(Fi || Tn),
                    string: new Mn
                }
            }, Fn.prototype.delete = function(n) {
                return n = be(this, n).delete(n), this.size -= n ? 1 : 0, n
            }, Fn.prototype.get = function(n) {
                return be(this, n).get(n);
            }, Fn.prototype.has = function(n) {
                return be(this, n).has(n)
            }, Fn.prototype.set = function(n, t) {
                var r = be(this, n),
                    e = r.size;
                return r.set(n, t), this.size += r.size == e ? 0 : 1, this
            }, Nn.prototype.add = Nn.prototype.push = function(n) {
                return this.__data__.set(n, "__lodash_hash_undefined__"), this
            }, Nn.prototype.has = function(n) {
                return this.__data__.has(n)
            }, Zn.prototype.clear = function() {
                this.__data__ = new Tn, this.size = 0
            }, Zn.prototype.delete = function(n) {
                var t = this.__data__;
                return n = t.delete(n), this.size = t.size, n
            }, Zn.prototype.get = function(n) {
                return this.__data__.get(n)
            }, Zn.prototype.has = function(n) {
                return this.__data__.has(n)
            }, Zn.prototype.set = function(n, t) {
                var r = this.__data__;
                if (r instanceof Tn) {
                    var e = r.__data__;
                    if (!Fi || 199 > e.length) return e.push([n, t]), this.size = ++r.size, this;
                    r = this.__data__ = new Fn(e)
                }
                return r.set(n, t), this.size = r.size, this
            };
            var eo = Fr(mt),
                uo = Fr(At, true),
                io = Nr(),
                oo = Nr(true),
                fo = Vi ? function(n, t) {
                    return Vi.set(n, t), n
                } : Tu,
                co = mi ? function(n, t) {
                    return mi(n, "toString", {
                        configurable: true,
                        enumerable: false,
                        value: Mu(t),
                        writable: true
                    })
                } : Tu,
                ao = Ai || function(n) {
                    return $n.clearTimeout(n)
                },
                lo = Pi && 1 / U(new Pi([, -0]))[1] == $ ? function(n) {
                    return new Pi(n)
                } : Nu,
                so = Vi ? function(n) {
                    return Vi.get(n)
                } : Nu,
                ho = Ii ? function(n) {
                    return null == n ? [] : (n = Yu(n), i(Ii(n), function(t) {
                        return yi.call(n, t)
                    }))
                } : Zu,
                po = Ii ? function(n) {
                    for (var t = []; n;) a(t, ho(n)), n = gi(n);
                    return t
                } : Zu,
                _o = Ot;
            ($i && "[object DataView]" != _o(new $i(new ArrayBuffer(1))) || Fi && "[object Map]" != _o(new Fi) || Ni && "[object Promise]" != _o(Ni.resolve()) || Pi && "[object Set]" != _o(new Pi) || Zi && "[object WeakMap]" != _o(new Zi)) && (_o = function(n) {
                var t = Ot(n);
                if (n = (n = "[object Object]" == t ? n.constructor : T) ? Me(n) : "") switch (n) {
                    case Gi:
                        return "[object DataView]";
                    case Hi:
                        return "[object Map]";
                    case Ji:
                        return "[object Promise]";
                    case Yi:
                        return "[object Set]";
                    case Qi:
                        return "[object WeakMap]"
                }
                return t
            });
            var vo = ei ? pu : qu,
                go = Ue(fo),
                yo = ki || function(n, t) {
                    return $n.setTimeout(n, t)
                },
                bo = Ue(co),
                xo = function(n) {
                    n = fu(n, function(n) {
                        return 500 === t.size && t.clear(), n
                    });
                    var t = n.cache;
                    return n
                }(function(n) {
                    var t = [];
                    return 46 === n.charCodeAt(0) && t.push(""), n.replace(tn, function(n, r, e, u) {
                        t.push(e ? u.replace(hn, "$1") : r || n)
                    }), t
                }),
                jo = fr(function(n, t) {
                    return su(n) ? yt(n, wt(t, 1, su, true)) : []
                }),
                wo = fr(function(n, t) {
                    var r = qe(t);
                    return su(r) && (r = T), su(n) ? yt(n, wt(t, 1, su, true), ye(r, 2)) : []
                }),
                mo = fr(function(n, t) {
                    var r = qe(t);
                    return su(r) && (r = T), su(n) ? yt(n, wt(t, 1, su, true), T, r) : []
                }),
                Ao = fr(function(n) {
                    var t = c(n, Er);
                    return t.length && t[0] === n[0] ? Wt(t) : []
                }),
                Eo = fr(function(n) {
                    var t = qe(n),
                        r = c(n, Er);
                    return t === qe(r) ? t = T : r.pop(), r.length && r[0] === n[0] ? Wt(r, ye(t, 2)) : []
                }),
                ko = fr(function(n) {
                    var t = qe(n),
                        r = c(n, Er);
                    return (t = typeof t == "function" ? t : T) && r.pop(),
                        r.length && r[0] === n[0] ? Wt(r, T, t) : []
                }),
                So = fr(Ve),
                Oo = pe(function(n, t) {
                    var r = null == n ? 0 : n.length,
                        e = ht(n, t);
                    return ur(n, c(t, function(n) {
                        return Se(n, r) ? +n : n
                    }).sort(Wr)), e
                }),
                Io = fr(function(n) {
                    return br(wt(n, 1, su, true))
                }),
                Ro = fr(function(n) {
                    var t = qe(n);
                    return su(t) && (t = T), br(wt(n, 1, su, true), ye(t, 2))
                }),
                zo = fr(function(n) {
                    var t = qe(n),
                        t = typeof t == "function" ? t : T;
                    return br(wt(n, 1, su, true), T, t)
                }),
                Wo = fr(function(n, t) {
                    return su(n) ? yt(n, t) : []
                }),
                Bo = fr(function(n) {
                    return mr(i(n, su))
                }),
                Lo = fr(function(n) {
                    var t = qe(n);
                    return su(t) && (t = T),
                        mr(i(n, su), ye(t, 2))
                }),
                Uo = fr(function(n) {
                    var t = qe(n),
                        t = typeof t == "function" ? t : T;
                    return mr(i(n, su), T, t)
                }),
                Co = fr(Ge),
                Do = fr(function(n) {
                    var t = n.length,
                        t = 1 < t ? n[t - 1] : T,
                        t = typeof t == "function" ? (n.pop(), t) : T;
                    return He(n, t)
                }),
                Mo = pe(function(n) {
                    function t(t) {
                        return ht(t, n)
                    }
                    var r = n.length,
                        e = r ? n[0] : 0,
                        u = this.__wrapped__;
                    return !(1 < r || this.__actions__.length) && u instanceof Un && Se(e) ? (u = u.slice(e, +e + (r ? 1 : 0)), u.__actions__.push({
                        func: Ye,
                        args: [t],
                        thisArg: T
                    }), new On(u, this.__chain__).thru(function(n) {
                        return r && !n.length && n.push(T),
                            n
                    })) : this.thru(t)
                }),
                To = Tr(function(n, t, r) {
                    ii.call(n, r) ? ++n[r] : st(n, r, 1)
                }),
                $o = Gr(Fe),
                Fo = Gr(Ne),
                No = Tr(function(n, t, r) {
                    ii.call(n, r) ? n[r].push(t) : st(n, r, [t])
                }),
                Po = fr(function(t, r, e) {
                    var u = -1,
                        i = typeof r == "function",
                        o = lu(t) ? Vu(t.length) : [];
                    return eo(t, function(t) {
                        o[++u] = i ? n(r, t, e) : Lt(t, r, e)
                    }), o
                }),
                Zo = Tr(function(n, t, r) {
                    st(n, r, t)
                }),
                qo = Tr(function(n, t, r) {
                    n[r ? 0 : 1].push(t)
                }, function() {
                    return [
                        [],
                        []
                    ]
                }),
                Vo = fr(function(n, t) {
                    if (null == n) return [];
                    var r = t.length;
                    return 1 < r && Oe(n, t[0], t[1]) ? t = [] : 2 < r && Oe(t[0], t[1], t[2]) && (t = [t[0]]),
                        Xt(n, wt(t, 1), [])
                }),
                Ko = Ei || function() {
                    return $n.Date.now()
                },
                Go = fr(function(n, t, r) {
                    var e = 1;
                    if (r.length) var u = L(r, de(Go)),
                        e = 32 | e;
                    return fe(n, e, t, r, u)
                }),
                Ho = fr(function(n, t, r) {
                    var e = 3;
                    if (r.length) var u = L(r, de(Ho)),
                        e = 32 | e;
                    return fe(t, e, n, r, u)
                }),
                Jo = fr(function(n, t) {
                    return dt(n, 1, t)
                }),
                Yo = fr(function(n, t, r) {
                    return dt(n, ku(t) || 0, r)
                });
            fu.Cache = Fn;
            var Qo = fr(function(t, r) {
                    r = 1 == r.length && of (r[0]) ? c(r[0], k(ye())) : c(wt(r, 1), k(ye()));
                    var e = r.length;
                    return fr(function(u) {
                        for (var i = -1, o = Ui(u.length, e); ++i < o;) u[i] = r[i].call(this, u[i]);
                        return n(t, this, u)
                    })
                }),
                Xo = fr(function(n, t) {
                    return fe(n, 32, T, t, L(t, de(Xo)))
                }),
                nf = fr(function(n, t) {
                    return fe(n, 64, T, t, L(t, de(nf)))
                }),
                tf = pe(function(n, t) {
                    return fe(n, 256, T, T, T, t)
                }),
                rf = ee(It),
                ef = ee(function(n, t) {
                    return n >= t
                }),
                uf = Ut(function() {
                    return arguments
                }()) ? Ut : function(n) {
                    return du(n) && ii.call(n, "callee") && !yi.call(n, "callee")
                },
                of = Vu.isArray,
                ff = Vn ? k(Vn) : Ct,
                cf = Ri || qu,
                af = Kn ? k(Kn) : Dt,
                lf = Gn ? k(Gn) : Tt,
                sf = Hn ? k(Hn) : Nt,
                hf = Jn ? k(Jn) : Pt,
                pf = Yn ? k(Yn) : Zt,
                _f = ee(Kt),
                vf = ee(function(n, t) {
                    return n <= t
                }),
                gf = $r(function(n, t) {
                    if (ze(t) || lu(t)) Cr(t, zu(t), n);
                    else
                        for (var r in t) ii.call(t, r) && ot(n, r, t[r])
                }),
                df = $r(function(n, t) {
                    Cr(t, Wu(t), n)
                }),
                yf = $r(function(n, t, r, e) {
                    Cr(t, Wu(t), n, e)
                }),
                bf = $r(function(n, t, r, e) {
                    Cr(t, zu(t), n, e)
                }),
                xf = pe(ht),
                jf = fr(function(n, t) {
                    n = Yu(n);
                    var r = -1,
                        e = t.length,
                        u = 2 < e ? t[2] : T;
                    for (u && Oe(t[0], t[1], u) && (e = 1); ++r < e;)
                        for (var u = t[r], i = Wu(u), o = -1, f = i.length; ++o < f;) {
                            var c = i[o],
                                a = n[c];
                            (a === T || au(a, ri[c]) && !ii.call(n, c)) && (n[c] = u[c])
                        }
                    return n
                }),
                wf = fr(function(t) {
                    return t.push(T, ae), n(Sf, T, t)
                }),
                mf = Yr(function(n, t, r) {
                    null != t && typeof t.toString != "function" && (t = ci.call(t)), n[t] = r
                }, Mu(Tu)),
                Af = Yr(function(n, t, r) {
                    null != t && typeof t.toString != "function" && (t = ci.call(t)), ii.call(n, t) ? n[t].push(r) : n[t] = [r]
                }, ye),
                Ef = fr(Lt),
                kf = $r(function(n, t, r) {
                    Yt(n, t, r)
                }),
                Sf = $r(function(n, t, r, e) {
                    Yt(n, t, r, e)
                }),
                Of = pe(function(n, t) {
                    var r = {};
                    if (null == n) return r;
                    var e = false;
                    t = c(t, function(t) {
                        return t = Sr(t, n), e || (e = 1 < t.length), t
                    }), Cr(n, ve(n), r), e && (r = _t(r, 7, le));
                    for (var u = t.length; u--;) xr(r, t[u]);
                    return r
                }),
                If = pe(function(n, t) {
                    return null == n ? {} : nr(n, t);
                }),
                Rf = oe(zu),
                zf = oe(Wu),
                Wf = qr(function(n, t, r) {
                    return t = t.toLowerCase(), n + (r ? Uu(t) : t)
                }),
                Bf = qr(function(n, t, r) {
                    return n + (r ? "-" : "") + t.toLowerCase()
                }),
                Lf = qr(function(n, t, r) {
                    return n + (r ? " " : "") + t.toLowerCase()
                }),
                Uf = Zr("toLowerCase"),
                Cf = qr(function(n, t, r) {
                    return n + (r ? "_" : "") + t.toLowerCase()
                }),
                Df = qr(function(n, t, r) {
                    return n + (r ? " " : "") + Tf(t)
                }),
                Mf = qr(function(n, t, r) {
                    return n + (r ? " " : "") + t.toUpperCase()
                }),
                Tf = Zr("toUpperCase"),
                $f = fr(function(t, r) {
                    try {
                        return n(t, T, r)
                    } catch (n) {
                        return hu(n) ? n : new Gu(n)
                    }
                }),
                Ff = pe(function(n, t) {
                    return r(t, function(t) {
                        t = De(t), st(n, t, Go(n[t], n))
                    }), n
                }),
                Nf = Hr(),
                Pf = Hr(true),
                Zf = fr(function(n, t) {
                    return function(r) {
                        return Lt(r, n, t)
                    }
                }),
                qf = fr(function(n, t) {
                    return function(r) {
                        return Lt(n, r, t)
                    }
                }),
                Vf = Xr(c),
                Kf = Xr(u),
                Gf = Xr(h),
                Hf = re(),
                Jf = re(true),
                Yf = Qr(function(n, t) {
                    return n + t
                }, 0),
                Qf = ie("ceil"),
                Xf = Qr(function(n, t) {
                    return n / t
                }, 1),
                nc = ie("floor"),
                tc = Qr(function(n, t) {
                    return n * t
                }, 1),
                rc = ie("round"),
                ec = Qr(function(n, t) {
                    return n - t
                }, 0);
            return An.after = function(n, t) {
                    if (typeof t != "function") throw new ni("Expected a function");
                    return n = Au(n),
                        function() {
                            if (1 > --n) return t.apply(this, arguments)
                        }
                }, An.ary = ru, An.assign = gf, An.assignIn = df, An.assignInWith = yf, An.assignWith = bf, An.at = xf, An.before = eu, An.bind = Go, An.bindAll = Ff, An.bindKey = Ho, An.castArray = function() {
                    if (!arguments.length) return [];
                    var n = arguments[0];
                    return of(n) ? n : [n]
                }, An.chain = Je, An.chunk = function(n, t, r) {
                    if (t = (r ? Oe(n, t, r) : t === T) ? 1 : Li(Au(t), 0), r = null == n ? 0 : n.length, !r || 1 > t) return [];
                    for (var e = 0, u = 0, i = Vu(Si(r / t)); e < r;) i[u++] = hr(n, e, e += t);
                    return i
                }, An.compact = function(n) {
                    for (var t = -1, r = null == n ? 0 : n.length, e = 0, u = []; ++t < r;) {
                        var i = n[t];
                        i && (u[e++] = i)
                    }
                    return u
                }, An.concat = function() {
                    var n = arguments.length;
                    if (!n) return [];
                    for (var t = Vu(n - 1), r = arguments[0]; n--;) t[n - 1] = arguments[n];
                    return a( of (r) ? Ur(r) : [r], wt(t, 1))
                }, An.cond = function(t) {
                    var r = null == t ? 0 : t.length,
                        e = ye();
                    return t = r ? c(t, function(n) {
                        if ("function" != typeof n[1]) throw new ni("Expected a function");
                        return [e(n[0]), n[1]]
                    }) : [], fr(function(e) {
                        for (var u = -1; ++u < r;) {
                            var i = t[u];
                            if (n(i[0], this, e)) return n(i[1], this, e)
                        }
                    })
                }, An.conforms = function(n) {
                    return vt(_t(n, 1))
                }, An.constant = Mu,
                An.countBy = To, An.create = function(n, t) {
                    var r = ro(n);
                    return null == t ? r : at(r, t)
                }, An.curry = uu, An.curryRight = iu, An.debounce = ou, An.defaults = jf, An.defaultsDeep = wf, An.defer = Jo, An.delay = Yo, An.difference = jo, An.differenceBy = wo, An.differenceWith = mo, An.drop = function(n, t, r) {
                    var e = null == n ? 0 : n.length;
                    return e ? (t = r || t === T ? 1 : Au(t), hr(n, 0 > t ? 0 : t, e)) : []
                }, An.dropRight = function(n, t, r) {
                    var e = null == n ? 0 : n.length;
                    return e ? (t = r || t === T ? 1 : Au(t), t = e - t, hr(n, 0, 0 > t ? 0 : t)) : []
                }, An.dropRightWhile = function(n, t) {
                    return n && n.length ? jr(n, ye(t, 3), true, true) : [];
                }, An.dropWhile = function(n, t) {
                    return n && n.length ? jr(n, ye(t, 3), true) : []
                }, An.fill = function(n, t, r, e) {
                    var u = null == n ? 0 : n.length;
                    if (!u) return [];
                    for (r && typeof r != "number" && Oe(n, t, r) && (r = 0, e = u), u = n.length, r = Au(r), 0 > r && (r = -r > u ? 0 : u + r), e = e === T || e > u ? u : Au(e), 0 > e && (e += u), e = r > e ? 0 : Eu(e); r < e;) n[r++] = t;
                    return n
                }, An.filter = function(n, t) {
                    return ( of (n) ? i : jt)(n, ye(t, 3))
                }, An.flatMap = function(n, t) {
                    return wt(tu(n, t), 1)
                }, An.flatMapDeep = function(n, t) {
                    return wt(tu(n, t), $)
                }, An.flatMapDepth = function(n, t, r) {
                    return r = r === T ? 1 : Au(r),
                        wt(tu(n, t), r)
                }, An.flatten = Pe, An.flattenDeep = function(n) {
                    return (null == n ? 0 : n.length) ? wt(n, $) : []
                }, An.flattenDepth = function(n, t) {
                    return null != n && n.length ? (t = t === T ? 1 : Au(t), wt(n, t)) : []
                }, An.flip = function(n) {
                    return fe(n, 512)
                }, An.flow = Nf, An.flowRight = Pf, An.fromPairs = function(n) {
                    for (var t = -1, r = null == n ? 0 : n.length, e = {}; ++t < r;) {
                        var u = n[t];
                        e[u[0]] = u[1]
                    }
                    return e
                }, An.functions = function(n) {
                    return null == n ? [] : Et(n, zu(n))
                }, An.functionsIn = function(n) {
                    return null == n ? [] : Et(n, Wu(n))
                }, An.groupBy = No, An.initial = function(n) {
                    return (null == n ? 0 : n.length) ? hr(n, 0, -1) : []
                }, An.intersection = Ao, An.intersectionBy = Eo, An.intersectionWith = ko, An.invert = mf, An.invertBy = Af, An.invokeMap = Po, An.iteratee = $u, An.keyBy = Zo, An.keys = zu, An.keysIn = Wu, An.map = tu, An.mapKeys = function(n, t) {
                    var r = {};
                    return t = ye(t, 3), mt(n, function(n, e, u) {
                        st(r, t(n, e, u), n)
                    }), r
                }, An.mapValues = function(n, t) {
                    var r = {};
                    return t = ye(t, 3), mt(n, function(n, e, u) {
                        st(r, e, t(n, e, u))
                    }), r
                }, An.matches = function(n) {
                    return Ht(_t(n, 1))
                }, An.matchesProperty = function(n, t) {
                    return Jt(n, _t(t, 1))
                }, An.memoize = fu,
                An.merge = kf, An.mergeWith = Sf, An.method = Zf, An.methodOf = qf, An.mixin = Fu, An.negate = cu, An.nthArg = function(n) {
                    return n = Au(n), fr(function(t) {
                        return Qt(t, n)
                    })
                }, An.omit = Of, An.omitBy = function(n, t) {
                    return Bu(n, cu(ye(t)))
                }, An.once = function(n) {
                    return eu(2, n)
                }, An.orderBy = function(n, t, r, e) {
                    return null == n ? [] : ( of (t) || (t = null == t ? [] : [t]), r = e ? T : r, of (r) || (r = null == r ? [] : [r]), Xt(n, t, r))
                }, An.over = Vf, An.overArgs = Qo, An.overEvery = Kf, An.overSome = Gf, An.partial = Xo, An.partialRight = nf, An.partition = qo, An.pick = If, An.pickBy = Bu, An.property = Pu,
                An.propertyOf = function(n) {
                    return function(t) {
                        return null == n ? T : kt(n, t)
                    }
                }, An.pull = So, An.pullAll = Ve, An.pullAllBy = function(n, t, r) {
                    return n && n.length && t && t.length ? er(n, t, ye(r, 2)) : n
                }, An.pullAllWith = function(n, t, r) {
                    return n && n.length && t && t.length ? er(n, t, T, r) : n
                }, An.pullAt = Oo, An.range = Hf, An.rangeRight = Jf, An.rearg = tf, An.reject = function(n, t) {
                    return ( of (n) ? i : jt)(n, cu(ye(t, 3)))
                }, An.remove = function(n, t) {
                    var r = [];
                    if (!n || !n.length) return r;
                    var e = -1,
                        u = [],
                        i = n.length;
                    for (t = ye(t, 3); ++e < i;) {
                        var o = n[e];
                        t(o, e, n) && (r.push(o),
                            u.push(e))
                    }
                    return ur(n, u), r
                }, An.rest = function(n, t) {
                    if (typeof n != "function") throw new ni("Expected a function");
                    return t = t === T ? t : Au(t), fr(n, t)
                }, An.reverse = Ke, An.sampleSize = function(n, t, r) {
                    return t = (r ? Oe(n, t, r) : t === T) ? 1 : Au(t), ( of (n) ? et : ar)(n, t)
                }, An.set = function(n, t, r) {
                    return null == n ? n : lr(n, t, r)
                }, An.setWith = function(n, t, r, e) {
                    return e = typeof e == "function" ? e : T, null == n ? n : lr(n, t, r, e)
                }, An.shuffle = function(n) {
                    return ( of (n) ? ut : sr)(n)
                }, An.slice = function(n, t, r) {
                    var e = null == n ? 0 : n.length;
                    return e ? (r && typeof r != "number" && Oe(n, t, r) ? (t = 0,
                        r = e) : (t = null == t ? 0 : Au(t), r = r === T ? e : Au(r)), hr(n, t, r)) : []
                }, An.sortBy = Vo, An.sortedUniq = function(n) {
                    return n && n.length ? gr(n) : []
                }, An.sortedUniqBy = function(n, t) {
                    return n && n.length ? gr(n, ye(t, 2)) : []
                }, An.split = function(n, t, r) {
                    return r && typeof r != "number" && Oe(n, t, r) && (t = r = T), r = r === T ? 4294967295 : r >>> 0, r ? (n = Ou(n)) && (typeof t == "string" || null != t && !sf(t)) && (t = yr(t), !t && Rn.test(n)) ? Or(M(n), 0, r) : n.split(t, r) : []
                }, An.spread = function(t, r) {
                    if (typeof t != "function") throw new ni("Expected a function");
                    return r = null == r ? 0 : Li(Au(r), 0),
                        fr(function(e) {
                            var u = e[r];
                            return e = Or(e, 0, r), u && a(e, u), n(t, this, e)
                        })
                }, An.tail = function(n) {
                    var t = null == n ? 0 : n.length;
                    return t ? hr(n, 1, t) : []
                }, An.take = function(n, t, r) {
                    return n && n.length ? (t = r || t === T ? 1 : Au(t), hr(n, 0, 0 > t ? 0 : t)) : []
                }, An.takeRight = function(n, t, r) {
                    var e = null == n ? 0 : n.length;
                    return e ? (t = r || t === T ? 1 : Au(t), t = e - t, hr(n, 0 > t ? 0 : t, e)) : []
                }, An.takeRightWhile = function(n, t) {
                    return n && n.length ? jr(n, ye(t, 3), false, true) : []
                }, An.takeWhile = function(n, t) {
                    return n && n.length ? jr(n, ye(t, 3)) : []
                }, An.tap = function(n, t) {
                    return t(n),
                        n
                }, An.throttle = function(n, t, r) {
                    var e = true,
                        u = true;
                    if (typeof n != "function") throw new ni("Expected a function");
                    return gu(r) && (e = "leading" in r ? !!r.leading : e, u = "trailing" in r ? !!r.trailing : u), ou(n, t, {
                        leading: e,
                        maxWait: t,
                        trailing: u
                    })
                }, An.thru = Ye, An.toArray = wu, An.toPairs = Rf, An.toPairsIn = zf, An.toPath = function(n) {
                    return of(n) ? c(n, De) : ju(n) ? [n] : Ur(xo(Ou(n)))
                }, An.toPlainObject = Su, An.transform = function(n, t, e) {
                    var u = of (n),
                        i = u || cf(n) || pf(n);
                    if (t = ye(t, 4), null == e) {
                        var o = n && n.constructor;
                        e = i ? u ? new o : [] : gu(n) && pu(o) ? ro(gi(n)) : {};
                    }
                    return (i ? r : mt)(n, function(n, r, u) {
                        return t(e, n, r, u)
                    }), e
                }, An.unary = function(n) {
                    return ru(n, 1)
                }, An.union = Io, An.unionBy = Ro, An.unionWith = zo, An.uniq = function(n) {
                    return n && n.length ? br(n) : []
                }, An.uniqBy = function(n, t) {
                    return n && n.length ? br(n, ye(t, 2)) : []
                }, An.uniqWith = function(n, t) {
                    return t = typeof t == "function" ? t : T, n && n.length ? br(n, T, t) : []
                }, An.unset = function(n, t) {
                    return null == n || xr(n, t)
                }, An.unzip = Ge, An.unzipWith = He, An.update = function(n, t, r) {
                    return null == n ? n : lr(n, t, kr(r)(kt(n, t)), void 0)
                }, An.updateWith = function(n, t, r, e) {
                    return e = typeof e == "function" ? e : T, null != n && (n = lr(n, t, kr(r)(kt(n, t)), e)), n
                }, An.values = Lu, An.valuesIn = function(n) {
                    return null == n ? [] : S(n, Wu(n))
                }, An.without = Wo, An.words = Du, An.wrap = function(n, t) {
                    return Xo(kr(t), n)
                }, An.xor = Bo, An.xorBy = Lo, An.xorWith = Uo, An.zip = Co, An.zipObject = function(n, t) {
                    return Ar(n || [], t || [], ot)
                }, An.zipObjectDeep = function(n, t) {
                    return Ar(n || [], t || [], lr)
                }, An.zipWith = Do, An.entries = Rf, An.entriesIn = zf, An.extend = df, An.extendWith = yf, Fu(An, An), An.add = Yf, An.attempt = $f, An.camelCase = Wf, An.capitalize = Uu,
                An.ceil = Qf, An.clamp = function(n, t, r) {
                    return r === T && (r = t, t = T), r !== T && (r = ku(r), r = r === r ? r : 0), t !== T && (t = ku(t), t = t === t ? t : 0), pt(ku(n), t, r)
                }, An.clone = function(n) {
                    return _t(n, 4)
                }, An.cloneDeep = function(n) {
                    return _t(n, 5)
                }, An.cloneDeepWith = function(n, t) {
                    return t = typeof t == "function" ? t : T, _t(n, 5, t)
                }, An.cloneWith = function(n, t) {
                    return t = typeof t == "function" ? t : T, _t(n, 4, t)
                }, An.conformsTo = function(n, t) {
                    return null == t || gt(n, t, zu(t))
                }, An.deburr = Cu, An.defaultTo = function(n, t) {
                    return null == n || n !== n ? t : n
                }, An.divide = Xf, An.endsWith = function(n, t, r) {
                    n = Ou(n), t = yr(t);
                    var e = n.length,
                        e = r = r === T ? e : pt(Au(r), 0, e);
                    return r -= t.length, 0 <= r && n.slice(r, e) == t
                }, An.eq = au, An.escape = function(n) {
                    return (n = Ou(n)) && H.test(n) ? n.replace(K, nt) : n
                }, An.escapeRegExp = function(n) {
                    return (n = Ou(n)) && en.test(n) ? n.replace(rn, "\\$&") : n
                }, An.every = function(n, t, r) {
                    var e = of (n) ? u : bt;
                    return r && Oe(n, t, r) && (t = T), e(n, ye(t, 3))
                }, An.find = $o, An.findIndex = Fe, An.findKey = function(n, t) {
                    return p(n, ye(t, 3), mt)
                }, An.findLast = Fo, An.findLastIndex = Ne, An.findLastKey = function(n, t) {
                    return p(n, ye(t, 3), At);
                }, An.floor = nc, An.forEach = Xe, An.forEachRight = nu, An.forIn = function(n, t) {
                    return null == n ? n : io(n, ye(t, 3), Wu)
                }, An.forInRight = function(n, t) {
                    return null == n ? n : oo(n, ye(t, 3), Wu)
                }, An.forOwn = function(n, t) {
                    return n && mt(n, ye(t, 3))
                }, An.forOwnRight = function(n, t) {
                    return n && At(n, ye(t, 3))
                }, An.get = Iu, An.gt = rf, An.gte = ef, An.has = function(n, t) {
                    return null != n && we(n, t, Rt)
                }, An.hasIn = Ru, An.head = Ze, An.identity = Tu, An.includes = function(n, t, r, e) {
                    return n = lu(n) ? n : Lu(n), r = r && !e ? Au(r) : 0, e = n.length, 0 > r && (r = Li(e + r, 0)), xu(n) ? r <= e && -1 < n.indexOf(t, r) : !!e && -1 < v(n, t, r);
                }, An.indexOf = function(n, t, r) {
                    var e = null == n ? 0 : n.length;
                    return e ? (r = null == r ? 0 : Au(r), 0 > r && (r = Li(e + r, 0)), v(n, t, r)) : -1
                }, An.inRange = function(n, t, r) {
                    return t = mu(t), r === T ? (r = t, t = 0) : r = mu(r), n = ku(n), n >= Ui(t, r) && n < Li(t, r)
                }, An.invoke = Ef, An.isArguments = uf, An.isArray = of , An.isArrayBuffer = ff, An.isArrayLike = lu, An.isArrayLikeObject = su, An.isBoolean = function(n) {
                    return true === n || false === n || du(n) && "[object Boolean]" == Ot(n)
                }, An.isBuffer = cf, An.isDate = af, An.isElement = function(n) {
                    return du(n) && 1 === n.nodeType && !bu(n)
                }, An.isEmpty = function(n) {
                    if (null == n) return true;
                    if (lu(n) && ( of (n) || typeof n == "string" || typeof n.splice == "function" || cf(n) || pf(n) || uf(n))) return !n.length;
                    var t = _o(n);
                    if ("[object Map]" == t || "[object Set]" == t) return !n.size;
                    if (ze(n)) return !Vt(n).length;
                    for (var r in n)
                        if (ii.call(n, r)) return false;
                    return true
                }, An.isEqual = function(n, t) {
                    return Mt(n, t)
                }, An.isEqualWith = function(n, t, r) {
                    var e = (r = typeof r == "function" ? r : T) ? r(n, t) : T;
                    return e === T ? Mt(n, t, T, r) : !!e
                }, An.isError = hu, An.isFinite = function(n) {
                    return typeof n == "number" && zi(n)
                }, An.isFunction = pu,
                An.isInteger = _u, An.isLength = vu, An.isMap = lf, An.isMatch = function(n, t) {
                    return n === t || $t(n, t, xe(t))
                }, An.isMatchWith = function(n, t, r) {
                    return r = typeof r == "function" ? r : T, $t(n, t, xe(t), r)
                }, An.isNaN = function(n) {
                    return yu(n) && n != +n
                }, An.isNative = function(n) {
                    if (vo(n)) throw new Gu("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");
                    return Ft(n)
                }, An.isNil = function(n) {
                    return null == n
                }, An.isNull = function(n) {
                    return null === n
                }, An.isNumber = yu, An.isObject = gu, An.isObjectLike = du, An.isPlainObject = bu, An.isRegExp = sf,
                An.isSafeInteger = function(n) {
                    return _u(n) && -9007199254740991 <= n && 9007199254740991 >= n
                }, An.isSet = hf, An.isString = xu, An.isSymbol = ju, An.isTypedArray = pf, An.isUndefined = function(n) {
                    return n === T
                }, An.isWeakMap = function(n) {
                    return du(n) && "[object WeakMap]" == _o(n)
                }, An.isWeakSet = function(n) {
                    return du(n) && "[object WeakSet]" == Ot(n)
                }, An.join = function(n, t) {
                    return null == n ? "" : Wi.call(n, t)
                }, An.kebabCase = Bf, An.last = qe, An.lastIndexOf = function(n, t, r) {
                    var e = null == n ? 0 : n.length;
                    if (!e) return -1;
                    var u = e;
                    if (r !== T && (u = Au(r), u = 0 > u ? Li(e + u, 0) : Ui(u, e - 1)),
                        t === t) {
                        for (r = u + 1; r-- && n[r] !== t;);
                        n = r
                    } else n = _(n, d, u, true);
                    return n
                }, An.lowerCase = Lf, An.lowerFirst = Uf, An.lt = _f, An.lte = vf, An.max = function(n) {
                    return n && n.length ? xt(n, Tu, It) : T
                }, An.maxBy = function(n, t) {
                    return n && n.length ? xt(n, ye(t, 2), It) : T
                }, An.mean = function(n) {
                    return y(n, Tu)
                }, An.meanBy = function(n, t) {
                    return y(n, ye(t, 2))
                }, An.min = function(n) {
                    return n && n.length ? xt(n, Tu, Kt) : T
                }, An.minBy = function(n, t) {
                    return n && n.length ? xt(n, ye(t, 2), Kt) : T
                }, An.stubArray = Zu, An.stubFalse = qu, An.stubObject = function() {
                    return {}
                }, An.stubString = function() {
                    return ""
                }, An.stubTrue = function() {
                    return true
                }, An.multiply = tc, An.nth = function(n, t) {
                    return n && n.length ? Qt(n, Au(t)) : T
                }, An.noConflict = function() {
                    return $n._ === this && ($n._ = li), this
                }, An.noop = Nu, An.now = Ko, An.pad = function(n, t, r) {
                    n = Ou(n);
                    var e = (t = Au(t)) ? D(n) : 0;
                    return !t || e >= t ? n : (t = (t - e) / 2, ne(Oi(t), r) + n + ne(Si(t), r))
                }, An.padEnd = function(n, t, r) {
                    n = Ou(n);
                    var e = (t = Au(t)) ? D(n) : 0;
                    return t && e < t ? n + ne(t - e, r) : n
                }, An.padStart = function(n, t, r) {
                    n = Ou(n);
                    var e = (t = Au(t)) ? D(n) : 0;
                    return t && e < t ? ne(t - e, r) + n : n
                }, An.parseInt = function(n, t, r) {
                    return r || null == t ? t = 0 : t && (t = +t), Di(Ou(n).replace(on, ""), t || 0)
                }, An.random = function(n, t, r) {
                    if (r && typeof r != "boolean" && Oe(n, t, r) && (t = r = T), r === T && (typeof t == "boolean" ? (r = t, t = T) : typeof n == "boolean" && (r = n, n = T)), n === T && t === T ? (n = 0, t = 1) : (n = mu(n), t === T ? (t = n, n = 0) : t = mu(t)), n > t) {
                        var e = n;
                        n = t, t = e
                    }
                    return r || n % 1 || t % 1 ? (r = Mi(), Ui(n + r * (t - n + Cn("1e-" + ((r + "").length - 1))), t)) : ir(n, t)
                }, An.reduce = function(n, t, r) {
                    var e = of (n) ? l : j,
                        u = 3 > arguments.length;
                    return e(n, ye(t, 4), r, u, eo)
                }, An.reduceRight = function(n, t, r) {
                    var e = of (n) ? s : j,
                        u = 3 > arguments.length;
                    return e(n, ye(t, 4), r, u, uo)
                }, An.repeat = function(n, t, r) {
                    return t = (r ? Oe(n, t, r) : t === T) ? 1 : Au(t), or(Ou(n), t)
                }, An.replace = function() {
                    var n = arguments,
                        t = Ou(n[0]);
                    return 3 > n.length ? t : t.replace(n[1], n[2])
                }, An.result = function(n, t, r) {
                    t = Sr(t, n);
                    var e = -1,
                        u = t.length;
                    for (u || (u = 1, n = T); ++e < u;) {
                        var i = null == n ? T : n[De(t[e])];
                        i === T && (e = u, i = r), n = pu(i) ? i.call(n) : i
                    }
                    return n
                }, An.round = rc, An.runInContext = x, An.sample = function(n) {
                    return ( of (n) ? Qn : cr)(n)
                }, An.size = function(n) {
                    if (null == n) return 0;
                    if (lu(n)) return xu(n) ? D(n) : n.length;
                    var t = _o(n);
                    return "[object Map]" == t || "[object Set]" == t ? n.size : Vt(n).length
                }, An.snakeCase = Cf, An.some = function(n, t, r) {
                    var e = of (n) ? h : pr;
                    return r && Oe(n, t, r) && (t = T), e(n, ye(t, 3))
                }, An.sortedIndex = function(n, t) {
                    return _r(n, t)
                }, An.sortedIndexBy = function(n, t, r) {
                    return vr(n, t, ye(r, 2))
                }, An.sortedIndexOf = function(n, t) {
                    var r = null == n ? 0 : n.length;
                    if (r) {
                        var e = _r(n, t);
                        if (e < r && au(n[e], t)) return e
                    }
                    return -1
                }, An.sortedLastIndex = function(n, t) {
                    return _r(n, t, true)
                }, An.sortedLastIndexBy = function(n, t, r) {
                    return vr(n, t, ye(r, 2), true);
                }, An.sortedLastIndexOf = function(n, t) {
                    if (null == n ? 0 : n.length) {
                        var r = _r(n, t, true) - 1;
                        if (au(n[r], t)) return r
                    }
                    return -1
                }, An.startCase = Df, An.startsWith = function(n, t, r) {
                    return n = Ou(n), r = null == r ? 0 : pt(Au(r), 0, n.length), t = yr(t), n.slice(r, r + t.length) == t
                }, An.subtract = ec, An.sum = function(n) {
                    return n && n.length ? m(n, Tu) : 0
                }, An.sumBy = function(n, t) {
                    return n && n.length ? m(n, ye(t, 2)) : 0
                }, An.template = function(n, t, r) {
                    var e = An.templateSettings;
                    r && Oe(n, t, r) && (t = T), n = Ou(n), t = yf({}, t, e, ce), r = yf({}, t.imports, e.imports, ce);
                    var u, i, o = zu(r),
                        f = S(r, o),
                        c = 0;
                    r = t.interpolate || jn;
                    var a = "__p+='";
                    r = Qu((t.escape || jn).source + "|" + r.source + "|" + (r === Q ? pn : jn).source + "|" + (t.evaluate || jn).source + "|$", "g");
                    var l = "sourceURL" in t ? "//# sourceURL=" + t.sourceURL + "\n" : "";
                    if (n.replace(r, function(t, r, e, o, f, l) {
                            return e || (e = o), a += n.slice(c, l).replace(wn, z), r && (u = true, a += "'+__e(" + r + ")+'"), f && (i = true, a += "';" + f + ";\n__p+='"), e && (a += "'+((__t=(" + e + "))==null?'':__t)+'"), c = l + t.length, t
                        }), a += "';", (t = t.variable) || (a = "with(obj){" + a + "}"), a = (i ? a.replace(P, "") : a).replace(Z, "$1").replace(q, "$1;"),
                        a = "function(" + (t || "obj") + "){" + (t ? "" : "obj||(obj={});") + "var __t,__p=''" + (u ? ",__e=_.escape" : "") + (i ? ",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}" : ";") + a + "return __p}", t = $f(function() {
                            return Hu(o, l + "return " + a).apply(T, f)
                        }), t.source = a, hu(t)) throw t;
                    return t
                }, An.times = function(n, t) {
                    if (n = Au(n), 1 > n || 9007199254740991 < n) return [];
                    var r = 4294967295,
                        e = Ui(n, 4294967295);
                    for (t = ye(t), n -= 4294967295, e = A(e, t); ++r < n;) t(r);
                    return e
                }, An.toFinite = mu, An.toInteger = Au, An.toLength = Eu, An.toLower = function(n) {
                    return Ou(n).toLowerCase()
                }, An.toNumber = ku, An.toSafeInteger = function(n) {
                    return n ? pt(Au(n), -9007199254740991, 9007199254740991) : 0 === n ? n : 0
                }, An.toString = Ou, An.toUpper = function(n) {
                    return Ou(n).toUpperCase()
                }, An.trim = function(n, t, r) {
                    return (n = Ou(n)) && (r || t === T) ? n.replace(un, "") : n && (t = yr(t)) ? (n = M(n), r = M(t), t = I(n, r), r = R(n, r) + 1, Or(n, t, r).join("")) : n
                }, An.trimEnd = function(n, t, r) {
                    return (n = Ou(n)) && (r || t === T) ? n.replace(fn, "") : n && (t = yr(t)) ? (n = M(n), t = R(n, M(t)) + 1, Or(n, 0, t).join("")) : n
                }, An.trimStart = function(n, t, r) {
                    return (n = Ou(n)) && (r || t === T) ? n.replace(on, "") : n && (t = yr(t)) ? (n = M(n), t = I(n, M(t)), Or(n, t).join("")) : n
                }, An.truncate = function(n, t) {
                    var r = 30,
                        e = "...";
                    if (gu(t)) var u = "separator" in t ? t.separator : u,
                        r = "length" in t ? Au(t.length) : r,
                        e = "omission" in t ? yr(t.omission) : e;
                    n = Ou(n);
                    var i = n.length;
                    if (Rn.test(n)) var o = M(n),
                        i = o.length;
                    if (r >= i) return n;
                    if (i = r - D(e), 1 > i) return e;
                    if (r = o ? Or(o, 0, i).join("") : n.slice(0, i), u === T) return r + e;
                    if (o && (i += r.length - i), sf(u)) {
                        if (n.slice(i).search(u)) {
                            var f = r;
                            for (u.global || (u = Qu(u.source, Ou(_n.exec(u)) + "g")),
                                u.lastIndex = 0; o = u.exec(f);) var c = o.index;
                            r = r.slice(0, c === T ? i : c)
                        }
                    } else n.indexOf(yr(u), i) != i && (u = r.lastIndexOf(u), -1 < u && (r = r.slice(0, u)));
                    return r + e
                }, An.unescape = function(n) {
                    return (n = Ou(n)) && G.test(n) ? n.replace(V, tt) : n
                }, An.uniqueId = function(n) {
                    var t = ++oi;
                    return Ou(n) + t
                }, An.upperCase = Mf, An.upperFirst = Tf, An.each = Xe, An.eachRight = nu, An.first = Ze, Fu(An, function() {
                    var n = {};
                    return mt(An, function(t, r) {
                        ii.call(An.prototype, r) || (n[r] = t)
                    }), n
                }(), {
                    chain: false
                }), An.VERSION = "4.17.10", r("bind bindKey curry curryRight partial partialRight".split(" "), function(n) {
                    An[n].placeholder = An
                }), r(["drop", "take"], function(n, t) {
                    Un.prototype[n] = function(r) {
                        r = r === T ? 1 : Li(Au(r), 0);
                        var e = this.__filtered__ && !t ? new Un(this) : this.clone();
                        return e.__filtered__ ? e.__takeCount__ = Ui(r, e.__takeCount__) : e.__views__.push({
                            size: Ui(r, 4294967295),
                            type: n + (0 > e.__dir__ ? "Right" : "")
                        }), e
                    }, Un.prototype[n + "Right"] = function(t) {
                        return this.reverse()[n](t).reverse()
                    }
                }), r(["filter", "map", "takeWhile"], function(n, t) {
                    var r = t + 1,
                        e = 1 == r || 3 == r;
                    Un.prototype[n] = function(n) {
                        var t = this.clone();
                        return t.__iteratees__.push({
                            iteratee: ye(n, 3),
                            type: r
                        }), t.__filtered__ = t.__filtered__ || e, t
                    }
                }), r(["head", "last"], function(n, t) {
                    var r = "take" + (t ? "Right" : "");
                    Un.prototype[n] = function() {
                        return this[r](1).value()[0]
                    }
                }), r(["initial", "tail"], function(n, t) {
                    var r = "drop" + (t ? "" : "Right");
                    Un.prototype[n] = function() {
                        return this.__filtered__ ? new Un(this) : this[r](1)
                    }
                }), Un.prototype.compact = function() {
                    return this.filter(Tu)
                }, Un.prototype.find = function(n) {
                    return this.filter(n).head()
                }, Un.prototype.findLast = function(n) {
                    return this.reverse().find(n);
                }, Un.prototype.invokeMap = fr(function(n, t) {
                    return typeof n == "function" ? new Un(this) : this.map(function(r) {
                        return Lt(r, n, t)
                    })
                }), Un.prototype.reject = function(n) {
                    return this.filter(cu(ye(n)))
                }, Un.prototype.slice = function(n, t) {
                    n = Au(n);
                    var r = this;
                    return r.__filtered__ && (0 < n || 0 > t) ? new Un(r) : (0 > n ? r = r.takeRight(-n) : n && (r = r.drop(n)), t !== T && (t = Au(t), r = 0 > t ? r.dropRight(-t) : r.take(t - n)), r)
                }, Un.prototype.takeRightWhile = function(n) {
                    return this.reverse().takeWhile(n).reverse()
                }, Un.prototype.toArray = function() {
                    return this.take(4294967295);
                }, mt(Un.prototype, function(n, t) {
                    var r = /^(?:filter|find|map|reject)|While$/.test(t),
                        e = /^(?:head|last)$/.test(t),
                        u = An[e ? "take" + ("last" == t ? "Right" : "") : t],
                        i = e || /^find/.test(t);
                    u && (An.prototype[t] = function() {
                        function t(n) {
                            return n = u.apply(An, a([n], f)), e && h ? n[0] : n
                        }
                        var o = this.__wrapped__,
                            f = e ? [1] : arguments,
                            c = o instanceof Un,
                            l = f[0],
                            s = c || of (o);
                        s && r && typeof l == "function" && 1 != l.length && (c = s = false);
                        var h = this.__chain__,
                            p = !!this.__actions__.length,
                            l = i && !h,
                            c = c && !p;
                        return !i && s ? (o = c ? o : new Un(this), o = n.apply(o, f), o.__actions__.push({
                            func: Ye,
                            args: [t],
                            thisArg: T
                        }), new On(o, h)) : l && c ? n.apply(this, f) : (o = this.thru(t), l ? e ? o.value()[0] : o.value() : o)
                    })
                }), r("pop push shift sort splice unshift".split(" "), function(n) {
                    var t = ti[n],
                        r = /^(?:push|sort|unshift)$/.test(n) ? "tap" : "thru",
                        e = /^(?:pop|shift)$/.test(n);
                    An.prototype[n] = function() {
                        var n = arguments;
                        if (e && !this.__chain__) {
                            var u = this.value();
                            return t.apply( of (u) ? u : [], n)
                        }
                        return this[r](function(r) {
                            return t.apply( of (r) ? r : [], n)
                        })
                    }
                }), mt(Un.prototype, function(n, t) {
                    var r = An[t];
                    if (r) {
                        var e = r.name + "";
                        (Ki[e] || (Ki[e] = [])).push({
                            name: t,
                            func: r
                        })
                    }
                }), Ki[Jr(T, 2).name] = [{
                    name: "wrapper",
                    func: T
                }], Un.prototype.clone = function() {
                    var n = new Un(this.__wrapped__);
                    return n.__actions__ = Ur(this.__actions__), n.__dir__ = this.__dir__, n.__filtered__ = this.__filtered__, n.__iteratees__ = Ur(this.__iteratees__), n.__takeCount__ = this.__takeCount__, n.__views__ = Ur(this.__views__), n
                }, Un.prototype.reverse = function() {
                    if (this.__filtered__) {
                        var n = new Un(this);
                        n.__dir__ = -1, n.__filtered__ = true
                    } else n = this.clone(), n.__dir__ *= -1;
                    return n;
                }, Un.prototype.value = function() {
                    var n, t = this.__wrapped__.value(),
                        r = this.__dir__,
                        e = of (t),
                        u = 0 > r,
                        i = e ? t.length : 0;
                    n = i;
                    for (var o = this.__views__, f = 0, c = -1, a = o.length; ++c < a;) {
                        var l = o[c],
                            s = l.size;
                        switch (l.type) {
                            case "drop":
                                f += s;
                                break;
                            case "dropRight":
                                n -= s;
                                break;
                            case "take":
                                n = Ui(n, f + s);
                                break;
                            case "takeRight":
                                f = Li(f, n - s)
                        }
                    }
                    if (n = {
                            start: f,
                            end: n
                        }, o = n.start, f = n.end, n = f - o, o = u ? f : o - 1, f = this.__iteratees__, c = f.length, a = 0, l = Ui(n, this.__takeCount__), !e || !u && i == n && l == n) return wr(t, this.__actions__);
                    e = [];
                    n: for (; n-- && a < l;) {
                        for (o += r,
                            u = -1, i = t[o]; ++u < c;) {
                            var h = f[u],
                                s = h.type,
                                h = (0, h.iteratee)(i);
                            if (2 == s) i = h;
                            else if (!h) {
                                if (1 == s) continue n;
                                break n
                            }
                        }
                        e[a++] = i
                    }
                    return e
                }, An.prototype.at = Mo, An.prototype.chain = function() {
                    return Je(this)
                }, An.prototype.commit = function() {
                    return new On(this.value(), this.__chain__)
                }, An.prototype.next = function() {
                    this.__values__ === T && (this.__values__ = wu(this.value()));
                    var n = this.__index__ >= this.__values__.length;
                    return {
                        done: n,
                        value: n ? T : this.__values__[this.__index__++]
                    }
                }, An.prototype.plant = function(n) {
                    for (var t, r = this; r instanceof En;) {
                        var e = $e(r);
                        e.__index__ = 0, e.__values__ = T, t ? u.__wrapped__ = e : t = e;
                        var u = e,
                            r = r.__wrapped__
                    }
                    return u.__wrapped__ = n, t
                }, An.prototype.reverse = function() {
                    var n = this.__wrapped__;
                    return n instanceof Un ? (this.__actions__.length && (n = new Un(this)), n = n.reverse(), n.__actions__.push({
                        func: Ye,
                        args: [Ke],
                        thisArg: T
                    }), new On(n, this.__chain__)) : this.thru(Ke)
                }, An.prototype.toJSON = An.prototype.valueOf = An.prototype.value = function() {
                    return wr(this.__wrapped__, this.__actions__)
                }, An.prototype.first = An.prototype.head, ji && (An.prototype[ji] = Qe),
                An
        }();
    typeof define == "function" && typeof define.amd == "object" && define.amd ? ($n._ = rt, define(function() {
        return rt
    })) : Nn ? ((Nn.exports = rt)._ = rt, Fn._ = rt) : $n._ = rt
}).call(this);
/* Curved text */
(function(global) {
    var fabric = global.fabric || (global.fabric = {}),
        extend = fabric.util.object.extend,
        clone = fabric.util.object.clone;
    if (fabric.CurvedText) {
        fabric.warn("fabric.CurvedText is already defined");
        return
    }
    var stateProperties = fabric.Text.prototype.stateProperties.concat();
    stateProperties.push("radius", "spacing", "reverse", "effect", "range", "largeFont", "smallFont");
    var _dimensionAffectingProps = fabric.Text.prototype._dimensionAffectingProps.concat(["radius", "spacing", "reverse", "fill", "effect", "width",
        "height", "range", "fontSize", "shadow", "largeFont", "smallFont"
    ]);
    var letterProperties = ["backgroundColor", "textBackgroundColor", "textDecoration", "stroke", "strokeWidth", "shadow", "fontWeight", "fontStyle", "strokeWidth", "textAlign"];
    fabric.CurvedText = fabric.util.createClass(fabric.Text, fabric.Collection, {
        type: "curvedText",
        radius: 50,
        range: 5,
        smallFont: 10,
        largeFont: 30,
        effect: "curved",
        spacing: 20,
        reverse: false,
        stateProperties: stateProperties,
        _dimensionAffectingProps: _dimensionAffectingProps,
        _isRendering: 0,
        complexity: function() {
            this.callSuper("complexity")
        },
        initialize: function(text, options) {
            options || (options = {});
            this.__skipDimension = true;
            delete options.text;
            this.setOptions(options);
            this.__skipDimension = false;
            this.callSuper("initialize", text, options);
            this.letters = new fabric.Group([], {
                selectable: false,
                padding: 0
            });
            this.setText(text)
        },
        setText: function(text) {
            if (this.letters) {
                while (this.letters.size()) this.letters.remove(this.letters.item(0));
                for (var i = 0; i < text.length; i++)
                    if (this.letters.item(i) === undefined) this.letters.add(new fabric.IText(text[i]));
                    else this.letters.item(i).text =
                        text[i]
            }
            this.text = text;
            var i = this.letters.size();
            while (i--) {
                var letter = this.letters.item(i);
                letter.set({
                    objectCaching: false,
                    fill: this.fill,
                    stroke: this.stroke,
                    strokeWidth: this.strokeWidth,
                    fontFamily: this.fontFamily,
                    fontSize: this.fontSize,
                    fontStyle: this.fontStyle,
                    fontWeight: this.fontWeight,
                    underline: this.underline,
                    overline: this.overline,
                    linethrough: this.linethrough,
                    lineHeight: this.lineHeight
                })
            }
            this._updateLetters();
            this.canvas && this.canvas.renderAll()
        },
        _initDimensions: function(ctx) {
            if (this.__skipDimension) return;
            if (!ctx) {
                ctx = fabric.util.createCanvasElement().getContext("2d");
                this._setTextStyles(ctx)
            }
            this._textLines = this.text.split(this._reNewline);
            this._clearCache();
            var currentTextAlign = this.textAlign;
            this.textAlign = "left";
            this.width = this.get("width");
            this.textAlign = currentTextAlign;
            this.height = this.get("height");
            this._updateLetters()
        },
        _updateLetters: function() {
            var renderingCode = fabric.util.getRandomInt(100, 999);
            this._isRendering = renderingCode;
            if (this.letters && this.text) {
                var curAngle = 0,
                    curAngleRotation = 0,
                    angleRadians = 0,
                    align = 0,
                    textWidth = 0,
                    space = parseInt(this.spacing),
                    fixedLetterAngle = 0;
                if (this.effect === "curved") {
                    for (var i = 0, len = this.text.length; i < len; i++) textWidth += this.letters.item(i).width + space;
                    textWidth -= space
                } else if (this.effect === "arc") {
                    fixedLetterAngle = (this.letters.item(0).fontSize + space) / this.radius / (Math.PI / 180);
                    textWidth = (this.text.length + 1) * (this.letters.item(0).fontSize + space)
                }
                curAngle = -(textWidth / 2 / this.radius / (Math.PI / 180));
                if (this.reverse) curAngle = -curAngle;
                var width = 0,
                    multiplier =
                    this.reverse ? -1 : 1,
                    thisLetterAngle = 0,
                    lastLetterAngle = 0;
                for (var i = 0, len = this.text.length; i < len; i++) {
                    if (renderingCode !== this._isRendering) return;
                    for (var key in letterProperties) this.letters.item(i).set(key, this.get(key));
                    this.letters.item(i).set("left", width);
                    this.letters.item(i).set("top", 0);
                    this.letters.item(i).set("angle", 0);
                    this.letters.item(i).set("padding", 0);
                    if (this.effect === "curved") {
                        thisLetterAngle = (this.letters.item(i).width + space) / this.radius / (Math.PI / 180);
                        curAngle = multiplier * (multiplier *
                            curAngle + lastLetterAngle);
                        angleRadians = curAngle * (Math.PI / 180);
                        lastLetterAngle = thisLetterAngle;
                        this.letters.item(i).set("angle", curAngle);
                        this.letters.item(i).set("top", multiplier * -1 * (Math.cos(angleRadians) * this.radius));
                        this.letters.item(i).set("left", multiplier * (Math.sin(angleRadians) * this.radius));
                        this.letters.item(i).set("padding", 0);
                        this.letters.item(i).set("selectable", false)
                    } else if (this.effect === "arc") {
                        curAngle = multiplier * (multiplier * curAngle + fixedLetterAngle);
                        angleRadians = curAngle * (Math.PI /
                            180);
                        this.letters.item(i).set("top", multiplier * -1 * (Math.cos(angleRadians) * this.radius));
                        this.letters.item(i).set("left", multiplier * (Math.sin(angleRadians) * this.radius));
                        this.letters.item(i).set("padding", 0);
                        this.letters.item(i).set("selectable", false)
                    } else if (this.effect === "STRAIGHT") {
                        this.letters.item(i).set("left", width);
                        this.letters.item(i).set("top", 0);
                        this.letters.item(i).set("angle", 0);
                        width += this.letters.item(i).get("width");
                        this.letters.item(i).set("padding", 0);
                        this.letters.item(i).set({
                            borderColor: "red",
                            cornerColor: "green",
                            cornerSize: 6,
                            transparentCorners: false
                        });
                        this.letters.item(i).set("selectable", false)
                    } else if (this.effect === "smallToLarge") {
                        var small = parseInt(this.smallFont);
                        var large = parseInt(this.largeFont);
                        var difference = large - small;
                        var center = Math.ceil(this.text.length / 2);
                        var step = difference / this.text.length;
                        var newfont = small + i * step;
                        this.letters.item(i).set("fontSize", newfont);
                        this.letters.item(i).set("left", width);
                        width += this.letters.item(i).get("width");
                        this.letters.item(i).set("padding",
                            0);
                        this.letters.item(i).set("selectable", false);
                        this.letters.item(i).set("top", -1 * this.letters.item(i).get("fontSize") + i)
                    } else if (this.effect === "largeToSmallTop") {
                        var small = parseInt(this.largeFont);
                        var large = parseInt(this.smallFont);
                        var difference = large - small;
                        var center = Math.ceil(this.text.length / 2);
                        var step = difference / this.text.length;
                        var newfont = small + i * step;
                        this.letters.item(i).set("fontSize", newfont);
                        this.letters.item(i).set("left", width);
                        width += this.letters.item(i).get("width");
                        this.letters.item(i).set("padding",
                            0);
                        this.letters.item(i).set({
                            borderColor: "red",
                            cornerColor: "green",
                            cornerSize: 6,
                            transparentCorners: false
                        });
                        this.letters.item(i).set("padding", 0);
                        this.letters.item(i).set("selectable", false);
                        this.letters.item(i).top = -1 * this.letters.item(i).get("fontSize") + i / this.text.length
                    } else if (this.effect === "largeToSmallBottom") {
                        var small = parseInt(this.largeFont);
                        var large = parseInt(this.smallFont);
                        var difference = large - small;
                        var center = Math.ceil(this.text.length / 2);
                        var step = difference / this.text.length;
                        var newfont =
                            small + i * step;
                        this.letters.item(i).set("fontSize", newfont);
                        this.letters.item(i).set("left", width);
                        width += this.letters.item(i).get("width");
                        this.letters.item(i).set("padding", 0);
                        this.letters.item(i).set({
                            borderColor: "red",
                            cornerColor: "green",
                            cornerSize: 6,
                            transparentCorners: false
                        });
                        this.letters.item(i).set("padding", 0);
                        this.letters.item(i).set("selectable", false);
                        this.letters.item(i).top = -1 * this.letters.item(i).get("fontSize") - i
                    } else if (this.effect === "bulge") {
                        var small = parseInt(this.smallFont);
                        var large =
                            parseInt(this.largeFont);
                        var difference = large - small;
                        var center = Math.ceil(this.text.length / 2);
                        var step = difference / (this.text.length - center);
                        if (i < center) var newfont = small + i * step;
                        else var newfont = large - (i - center + 1) * step;
                        this.letters.item(i).set("fontSize", newfont);
                        this.letters.item(i).set("left", width);
                        width += this.letters.item(i).get("width");
                        this.letters.item(i).set("padding", 0);
                        this.letters.item(i).set("selectable", false);
                        this.letters.item(i).set("top", -1 * this.letters.item(i).get("height") / 2)
                    }
                }
                var scaleX =
                    this.letters.get("scaleX");
                var scaleY = this.letters.get("scaleY");
                var angle = this.letters.get("angle");
                this.letters.set("scaleX", 1);
                this.letters.set("scaleY", 1);
                this.letters.set("angle", 0);
                this.letters._calcBounds();
                this.letters._updateObjectsCoords();
                this.letters.set("scaleX", scaleX);
                this.letters.set("scaleY", scaleY);
                this.letters.set("angle", angle);
                this.width = this.letters.width;
                this.height = this.letters.height;
                this.letters.left = -(this.letters.width / 2);
                this.letters.top = -(this.letters.height / 2)
            }
        },
        render: function(ctx) {
            if (!this.visible) return;
            if (!this.letters) return;
            ctx.save();
            this.transform(ctx);
            var groupScaleFactor = Math.max(this.scaleX, this.scaleY);
            this.clipTo && fabric.util.clipContext(this, ctx);
            for (var i = 0, len = this.letters.size(); i < len; i++) {
                var object = this.letters.item(i),
                    originalScaleFactor = object.borderScaleFactor,
                    originalHasRotatingPoint = object.hasRotatingPoint;
                if (!object.visible) continue;
                object.render(ctx)
            }
            this.clipTo && ctx.restore();
            ctx.restore();
            this.setCoords()
        },
        _set: function(key, value) {
            if (key === "text") {
                this.setText(value);
                return
            }
            this.callSuper("_set",
                key, value);
            if (this.text && this.letters) {
                if (["angle", "left", "top", "scaleX", "scaleY", "width", "height"].indexOf(key) === -1) {
                    var i = this.letters.size();
                    while (i--) this.letters.item(i).set(key, value)
                }
                if (this._dimensionAffectingProps.indexOf(key) !== -1) {
                    this._updateLetters();
                    this.setCoords()
                }
            }
        },
        initDimensions: function() {},
        toObject: function(propertiesToInclude) {
            var object = extend(this.callSuper("toObject", propertiesToInclude), {
                radius: this.radius,
                spacing: this.spacing,
                reverse: this.reverse,
                effect: this.effect,
                range: this.range,
                smallFont: this.smallFont,
                largeFont: this.largeFont,
                rtl: this.rtl
            });
            if (!this.includeDefaultValues) this._removeDefaultValues(object);
            return object
        },
        toString: function() {
            return "#<fabric.CurvedText (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '", "radius": "' + this.radius + '", "spacing": "' + this.spacing + '", "reverse": "' + this.reverse + '" }>'
        },
        toSVG: function(reviver) {
            var markup = ["<g ", 'transform="', this.getSvgTransform(), '">'];
            if (this.letters)
                for (var i = 0, len = this.letters.size(); i <
                    len; i++) markup.push(this.letters.item(i).toSVG(reviver));
            markup.push("</g>");
            return reviver ? reviver(markup.join("")) : markup.join("")
        }
    });
    fabric.CurvedText.fromObject = function(object, callback) {
        return fabric.Object._fromObject("CurvedText", object, callback, "text")
    };
    fabric.CurvedText.async = false
})(typeof exports !== "undefined" ? exports : this);
/*jQuery Mobile Events*/
"use strict";
! function(e) {
    e.attrFn = e.attrFn || {};
    var t = "ontouchstart" in window,
        a = {
            tap_pixel_range: 5,
            swipe_h_threshold: 50,
            swipe_v_threshold: 50,
            taphold_threshold: 750,
            doubletap_int: 500,
            shake_threshold: 15,
            touch_capable: t,
            orientation_support: "orientation" in window && "onorientationchange" in window,
            startevent: t ? "touchstart" : "mousedown",
            endevent: t ? "touchend" : "mouseup",
            moveevent: t ? "touchmove" : "mousemove",
            tapevent: t ? "tap" : "click",
            scrollevent: t ? "touchmove" : "scroll",
            hold_timer: null,
            tap_timer: null
        };
    e.touch = {}, e.isTouchCapable = function() {
        return a.touch_capable
    }, e.getStartEvent = function() {
        return a.startevent
    }, e.getEndEvent = function() {
        return a.endevent
    }, e.getMoveEvent = function() {
        return a.moveevent
    }, e.getTapEvent = function() {
        return a.tapevent
    }, e.getScrollEvent = function() {
        return a.scrollevent
    }, e.touch.setSwipeThresholdX = function(e) {
        if ("number" != typeof e) throw new Error("Threshold parameter must be a type of number");
        a.swipe_h_threshold = e
    }, e.touch.setSwipeThresholdY = function(e) {
        if ("number" != typeof e) throw new Error("Threshold parameter must be a type of number");
        a.swipe_v_threshold = e
    }, e.touch.setDoubleTapInt = function(e) {
        if ("number" != typeof e) throw new Error("Interval parameter must be a type of number");
        a.doubletap_int = e
    }, e.touch.setTapHoldThreshold = function(e) {
        if ("number" != typeof e) throw new Error("Threshold parameter must be a type of number");
        a.taphold_threshold = e
    }, e.touch.setTapRange = function(e) {
        if ("number" != typeof e) throw new Error("Ranger parameter must be a type of number");
        a.tap_pixel_range = threshold
    }, e.each(["tapstart", "tapend", "tapmove", "tap", "singletap", "doubletap", "taphold", "swipe", "swipeup", "swiperight", "swipedown", "swipeleft", "swipeend", "scrollstart", "scrollend", "orientationchange", "tap2", "taphold2"], function(t, a) {
        e.fn[a] = function(e) {
            return e ? this.on(a, e) : this.trigger(a)
        }, e.attrFn[a] = !0
    }), e.event.special.tapstart = {
        setup: function() {
            var t = this,
                o = e(t);
            o.on(a.startevent, function e(n) {
                if (o.data("callee", e), n.which && 1 !== n.which) return !1;
                var i = n.originalEvent,
                    r = {
                        position: {
                            x: a.touch_capable ? i.touches[0].pageX : n.pageX,
                            y: a.touch_capable ? i.touches[0].pageY : n.pageY
                        },
                        offset: {
                            x: a.touch_capable ? Math.round(i.changedTouches[0].pageX - (o.offset() ? o.offset().left : 0)) : Math.round(n.pageX - (o.offset() ? o.offset().left : 0)),
                            y: a.touch_capable ? Math.round(i.changedTouches[0].pageY - (o.offset() ? o.offset().top : 0)) : Math.round(n.pageY - (o.offset() ? o.offset().top : 0))
                        },
                        time: Date.now(),
                        target: n.target
                    };
                return w(t, "tapstart", n, r), !0
            })
        },
        remove: function() {
            e(this).off(a.startevent, e(this).data.callee)
        }
    }, e.event.special.tapmove = {
        setup: function() {
            var t = this,
                o = e(t);
            o.on(a.moveevent, function e(n) {
                o.data("callee", e);
                var i = n.originalEvent,
                    r = {
                        position: {
                            x: a.touch_capable ? i.touches[0].pageX : n.pageX,
                            y: a.touch_capable ? i.touches[0].pageY : n.pageY
                        },
                        offset: {
                            x: a.touch_capable ? Math.round(i.changedTouches[0].pageX - (o.offset() ? o.offset().left : 0)) : Math.round(n.pageX - (o.offset() ? o.offset().left : 0)),
                            y: a.touch_capable ? Math.round(i.changedTouches[0].pageY - (o.offset() ? o.offset().top : 0)) : Math.round(n.pageY - (o.offset() ? o.offset().top : 0))
                        },
                        time: Date.now(),
                        target: n.target
                    };
                return w(t, "tapmove", n, r), !0
            })
        },
        remove: function() {
            e(this).off(a.moveevent, e(this).data.callee)
        }
    }, e.event.special.tapend = {
        setup: function() {
            var t = this,
                o = e(t);
            o.on(a.endevent, function e(n) {
                o.data("callee", e);
                var i = n.originalEvent,
                    r = {
                        position: {
                            x: a.touch_capable ? i.changedTouches[0].pageX : n.pageX,
                            y: a.touch_capable ? i.changedTouches[0].pageY : n.pageY
                        },
                        offset: {
                            x: a.touch_capable ? Math.round(i.changedTouches[0].pageX - (o.offset() ? o.offset().left : 0)) : Math.round(n.pageX - (o.offset() ? o.offset().left : 0)),
                            y: a.touch_capable ? Math.round(i.changedTouches[0].pageY - (o.offset() ? o.offset().top : 0)) : Math.round(n.pageY - (o.offset() ? o.offset().top : 0))
                        },
                        time: Date.now(),
                        target: n.target
                    };
                return w(t, "tapend", n, r), !0
            })
        },
        remove: function() {
            e(this).off(a.endevent, e(this).data.callee)
        }
    }, e.event.special.taphold = {
        setup: function() {
            var t, o = this,
                n = e(o),
                i = {
                    x: 0,
                    y: 0
                },
                r = 0,
                s = 0;
            n.on(a.startevent, function e(p) {
                if (p.which && 1 !== p.which) return !1;
                n.data("tapheld", !1), t = p.target;
                var h = p.originalEvent,
                    c = Date.now();
                a.touch_capable ? h.touches[0].pageX : p.pageX, a.touch_capable ? h.touches[0].pageY : p.pageY, a.touch_capable ? (h.touches[0].pageX, h.touches[0].target.offsetLeft) : p.offsetX, a.touch_capable ? (h.touches[0].pageY, h.touches[0].target.offsetTop) : p.offsetY;
                i.x = p.originalEvent.targetTouches ? p.originalEvent.targetTouches[0].pageX : p.pageX, i.y = p.originalEvent.targetTouches ? p.originalEvent.targetTouches[0].pageY : p.pageY, r = i.x, s = i.y;
                var u = n.parent().data("threshold") ? n.parent().data("threshold") : n.data("threshold"),
                    f = void 0 !== u && !1 !== u && parseInt(u) ? parseInt(u) : a.taphold_threshold;
                return a.hold_timer = window.setTimeout(function() {
                    var u = i.x - r,
                        f = i.y - s;
                    if (p.target == t && (i.x == r && i.y == s || u >= -a.tap_pixel_range && u <= a.tap_pixel_range && f >= -a.tap_pixel_range && f <= a.tap_pixel_range)) {
                        n.data("tapheld", !0);
                        for (var l = Date.now() - c, g = p.originalEvent.targetTouches ? p.originalEvent.targetTouches : [p], d = [], v = 0; v < g.length; v++) {
                            var _ = {
                                position: {
                                    x: a.touch_capable ? h.changedTouches[v].pageX : p.pageX,
                                    y: a.touch_capable ? h.changedTouches[v].pageY : p.pageY
                                },
                                offset: {
                                    x: a.touch_capable ? Math.round(h.changedTouches[v].pageX - (n.offset() ? n.offset().left : 0)) : Math.round(p.pageX - (n.offset() ? n.offset().left : 0)),
                                    y: a.touch_capable ? Math.round(h.changedTouches[v].pageY - (n.offset() ? n.offset().top : 0)) : Math.round(p.pageY - (n.offset() ? n.offset().top : 0))
                                },
                                time: Date.now(),
                                target: p.target,
                                duration: l
                            };
                            d.push(_)
                        }
                        var T = 2 == g.length ? "taphold2" : "taphold";
                        n.data("callee1", e), w(o, T, p, d)
                    }
                }, f), !0
            }).on(a.endevent, function e() {
                n.data("callee2", e), n.data("tapheld", !1), window.clearTimeout(a.hold_timer)
            }).on(a.moveevent, function e(t) {
                n.data("callee3", e), r = t.originalEvent.targetTouches ? t.originalEvent.targetTouches[0].pageX : t.pageX, s = t.originalEvent.targetTouches ? t.originalEvent.targetTouches[0].pageY : t.pageY
            })
        },
        remove: function() {
            e(this).off(a.startevent, e(this).data.callee1).off(a.endevent, e(this).data.callee2).off(a.moveevent, e(this).data.callee3)
        }
    }, e.event.special.doubletap = {
        setup: function() {
            var t, o, n = this,
                i = e(n),
                r = null,
                s = !1;
            i.on(a.startevent, function t(n) {
                return (!n.which || 1 === n.which) && (i.data("doubletapped", !1), n.target, i.data("callee1", t), o = n.originalEvent, r || (r = {
                    position: {
                        x: a.touch_capable ? o.touches[0].pageX : n.pageX,
                        y: a.touch_capable ? o.touches[0].pageY : n.pageY
                    },
                    offset: {
                        x: a.touch_capable ? Math.round(o.changedTouches[0].pageX - (i.offset() ? i.offset().left : 0)) : Math.round(n.pageX - (i.offset() ? i.offset().left : 0)),
                        y: a.touch_capable ? Math.round(o.changedTouches[0].pageY - (i.offset() ? i.offset().top : 0)) : Math.round(n.pageY - (i.offset() ? i.offset().top : 0))
                    },
                    time: Date.now(),
                    target: n.target,
                    element: n.originalEvent.srcElement,
                    index: e(n.target).index()
                }), !0)
            }).on(a.endevent, function p(h) {
                var c = Date.now(),
                    u = c - (i.data("lastTouch") || c + 1);
                if (window.clearTimeout(t), i.data("callee2", p), u < a.doubletap_int && e(h.target).index() == r.index && u > 100) {
                    i.data("doubletapped", !0), window.clearTimeout(a.tap_timer);
                    var f = {
                            position: {
                                x: a.touch_capable ? h.originalEvent.changedTouches[0].pageX : h.pageX,
                                y: a.touch_capable ? h.originalEvent.changedTouches[0].pageY : h.pageY
                            },
                            offset: {
                                x: a.touch_capable ? Math.round(o.changedTouches[0].pageX - (i.offset() ? i.offset().left : 0)) : Math.round(h.pageX - (i.offset() ? i.offset().left : 0)),
                                y: a.touch_capable ? Math.round(o.changedTouches[0].pageY - (i.offset() ? i.offset().top : 0)) : Math.round(h.pageY - (i.offset() ? i.offset().top : 0))
                            },
                            time: Date.now(),
                            target: h.target,
                            element: h.originalEvent.srcElement,
                            index: e(h.target).index()
                        },
                        l = {
                            firstTap: r,
                            secondTap: f,
                            interval: f.time - r.time
                        };
                    s || (w(n, "doubletap", h, l), r = null), s = !0, window.setTimeout(function() {
                        s = !1
                    }, a.doubletap_int)
                } else i.data("lastTouch", c), t = window.setTimeout(function() {
                    r = null, window.clearTimeout(t)
                }, a.doubletap_int, [h]);
                i.data("lastTouch", c)
            })
        },
        remove: function() {
            e(this).off(a.startevent, e(this).data.callee1).off(a.endevent, e(this).data.callee2)
        }
    }, e.event.special.singletap = {
        setup: function() {
            var t = this,
                o = e(t),
                n = null,
                i = null,
                r = {
                    x: 0,
                    y: 0
                };
            o.on(a.startevent, function e(t) {
                return (!t.which || 1 === t.which) && (i = Date.now(), n = t.target, o.data("callee1", e), r.x = t.originalEvent.targetTouches ? t.originalEvent.targetTouches[0].pageX : t.pageX, r.y = t.originalEvent.targetTouches ? t.originalEvent.targetTouches[0].pageY : t.pageY, !0)
            }).on(a.endevent, function e(s) {
                if (o.data("callee2", e), s.target == n) {
                    var p = s.originalEvent.changedTouches ? s.originalEvent.changedTouches[0].pageX : s.pageX,
                        h = s.originalEvent.changedTouches ? s.originalEvent.changedTouches[0].pageY : s.pageY;
                    a.tap_timer = window.setTimeout(function() {
                        var e = r.x - p,
                            n = r.y - h;
                        if (!o.data("doubletapped") && !o.data("tapheld") && (r.x == p && r.y == h || e >= -a.tap_pixel_range && e <= a.tap_pixel_range && n >= -a.tap_pixel_range && n <= a.tap_pixel_range)) {
                            var c = s.originalEvent,
                                u = {
                                    position: {
                                        x: a.touch_capable ? c.changedTouches[0].pageX : s.pageX,
                                        y: a.touch_capable ? c.changedTouches[0].pageY : s.pageY
                                    },
                                    offset: {
                                        x: a.touch_capable ? Math.round(c.changedTouches[0].pageX - (o.offset() ? o.offset().left : 0)) : Math.round(s.pageX - (o.offset() ? o.offset().left : 0)),
                                        y: a.touch_capable ? Math.round(c.changedTouches[0].pageY - (o.offset() ? o.offset().top : 0)) : Math.round(s.pageY - (o.offset() ? o.offset().top : 0))
                                    },
                                    time: Date.now(),
                                    target: s.target
                                };
                            u.time - i < a.taphold_threshold && w(t, "singletap", s, u)
                        }
                    }, a.doubletap_int)
                }
            })
        },
        remove: function() {
            e(this).off(a.startevent, e(this).data.callee1).off(a.endevent, e(this).data.callee2)
        }
    }, e.event.special.tap = {
        setup: function() {
            var t, o, n = this,
                i = e(n),
                r = !1,
                s = null,
                p = {
                    x: 0,
                    y: 0
                };
            i.on(a.startevent, function e(a) {
                return i.data("callee1", e), (!a.which || 1 === a.which) && (r = !0, p.x = a.originalEvent.targetTouches ? a.originalEvent.targetTouches[0].pageX : a.pageX, p.y = a.originalEvent.targetTouches ? a.originalEvent.targetTouches[0].pageY : a.pageY, t = Date.now(), s = a.target, o = a.originalEvent.targetTouches ? a.originalEvent.targetTouches : [a], !0)
            }).on(a.endevent, function e(h) {
                i.data("callee2", e);
                var c = h.originalEvent.targetTouches ? h.originalEvent.changedTouches[0].pageX : h.pageX,
                    u = h.originalEvent.targetTouches ? h.originalEvent.changedTouches[0].pageY : h.pageY,
                    f = p.x - c,
                    l = p.y - u;
                if (s == h.target && r && Date.now() - t < a.taphold_threshold && (p.x == c && p.y == u || f >= -a.tap_pixel_range && f <= a.tap_pixel_range && l >= -a.tap_pixel_range && l <= a.tap_pixel_range)) {
                    for (var g = h.originalEvent, d = [], v = 0; v < o.length; v++) {
                        var _ = {
                            position: {
                                x: a.touch_capable ? g.changedTouches[v].pageX : h.pageX,
                                y: a.touch_capable ? g.changedTouches[v].pageY : h.pageY
                            },
                            offset: {
                                x: a.touch_capable ? Math.round(g.changedTouches[v].pageX - (i.offset() ? i.offset().left : 0)) : Math.round(h.pageX - (i.offset() ? i.offset().left : 0)),
                                y: a.touch_capable ? Math.round(g.changedTouches[v].pageY - (i.offset() ? i.offset().top : 0)) : Math.round(h.pageY - (i.offset() ? i.offset().top : 0))
                            },
                            time: Date.now(),
                            target: h.target
                        };
                        d.push(_)
                    }
                    var T = 2 == o.length ? "tap2" : "tap";
                    w(n, T, h, d)
                }
            })
        },
        remove: function() {
            e(this).off(a.startevent, e(this).data.callee1).off(a.endevent, e(this).data.callee2)
        }
    }, e.event.special.swipe = {
        setup: function() {
            var t, o = e(this),
                n = !1,
                i = !1,
                r = {
                    x: 0,
                    y: 0
                },
                s = {
                    x: 0,
                    y: 0
                };
            o.on(a.startevent, function i(p) {
                (o = e(p.currentTarget)).data("callee1", i), r.x = p.originalEvent.targetTouches ? p.originalEvent.targetTouches[0].pageX : p.pageX, r.y = p.originalEvent.targetTouches ? p.originalEvent.targetTouches[0].pageY : p.pageY, s.x = r.x, s.y = r.y, n = !0;
                var h = p.originalEvent;
                t = {
                    position: {
                        x: a.touch_capable ? h.touches[0].pageX : p.pageX,
                        y: a.touch_capable ? h.touches[0].pageY : p.pageY
                    },
                    offset: {
                        x: a.touch_capable ? Math.round(h.changedTouches[0].pageX - (o.offset() ? o.offset().left : 0)) : Math.round(p.pageX - (o.offset() ? o.offset().left : 0)),
                        y: a.touch_capable ? Math.round(h.changedTouches[0].pageY - (o.offset() ? o.offset().top : 0)) : Math.round(p.pageY - (o.offset() ? o.offset().top : 0))
                    },
                    time: Date.now(),
                    target: p.target
                }
            }), o.on(a.moveevent, function p(h) {
                var c;
                (o = e(h.currentTarget)).data("callee2", p), s.x = h.originalEvent.targetTouches ? h.originalEvent.targetTouches[0].pageX : h.pageX, s.y = h.originalEvent.targetTouches ? h.originalEvent.targetTouches[0].pageY : h.pageY;
                var u = o.parent().data("xthreshold") ? o.parent().data("xthreshold") : o.data("xthreshold"),
                    f = o.parent().data("ythreshold") ? o.parent().data("ythreshold") : o.data("ythreshold"),
                    l = void 0 !== u && !1 !== u && parseInt(u) ? parseInt(u) : a.swipe_h_threshold,
                    g = void 0 !== f && !1 !== f && parseInt(f) ? parseInt(f) : a.swipe_v_threshold;
                if (r.y > s.y && r.y - s.y > g && (c = "swipeup"), r.x < s.x && s.x - r.x > l && (c = "swiperight"), r.y < s.y && s.y - r.y > g && (c = "swipedown"), r.x > s.x && r.x - s.x > l && (c = "swipeleft"), void 0 != c && n) {
                    r.x = 0, r.y = 0, s.x = 0, s.y = 0, n = !1;
                    var d = h.originalEvent,
                        v = {
                            position: {
                                x: a.touch_capable ? d.touches[0].pageX : h.pageX,
                                y: a.touch_capable ? d.touches[0].pageY : h.pageY
                            },
                            offset: {
                                x: a.touch_capable ? Math.round(d.changedTouches[0].pageX - (o.offset() ? o.offset().left : 0)) : Math.round(h.pageX - (o.offset() ? o.offset().left : 0)),
                                y: a.touch_capable ? Math.round(d.changedTouches[0].pageY - (o.offset() ? o.offset().top : 0)) : Math.round(h.pageY - (o.offset() ? o.offset().top : 0))
                            },
                            time: Date.now(),
                            target: h.target
                        },
                        w = Math.abs(t.position.x - v.position.x),
                        _ = Math.abs(t.position.y - v.position.y),
                        T = {
                            startEvnt: t,
                            endEvnt: v,
                            direction: c.replace("swipe", ""),
                            xAmount: w,
                            yAmount: _,
                            duration: v.time - t.time
                        };
                    i = !0, o.trigger("swipe", T).trigger(c, T)
                }
            }), o.on(a.endevent, function r(s) {
                var p = "";
                if ((o = e(s.currentTarget)).data("callee3", r), i) {
                    var h = o.data("xthreshold"),
                        c = o.data("ythreshold"),
                        u = void 0 !== h && !1 !== h && parseInt(h) ? parseInt(h) : a.swipe_h_threshold,
                        f = void 0 !== c && !1 !== c && parseInt(c) ? parseInt(c) : a.swipe_v_threshold,
                        l = s.originalEvent,
                        g = {
                            position: {
                                x: a.touch_capable ? l.changedTouches[0].pageX : s.pageX,
                                y: a.touch_capable ? l.changedTouches[0].pageY : s.pageY
                            },
                            offset: {
                                x: a.touch_capable ? Math.round(l.changedTouches[0].pageX - (o.offset() ? o.offset().left : 0)) : Math.round(s.pageX - (o.offset() ? o.offset().left : 0)),
                                y: a.touch_capable ? Math.round(l.changedTouches[0].pageY - (o.offset() ? o.offset().top : 0)) : Math.round(s.pageY - (o.offset() ? o.offset().top : 0))
                            },
                            time: Date.now(),
                            target: s.target
                        };
                    t.position.y > g.position.y && t.position.y - g.position.y > f && (p = "swipeup"), t.position.x < g.position.x && g.position.x - t.position.x > u && (p = "swiperight"), t.position.y < g.position.y && g.position.y - t.position.y > f && (p = "swipedown"), t.position.x > g.position.x && t.position.x - g.position.x > u && (p = "swipeleft");
                    var d = Math.abs(t.position.x - g.position.x),
                        v = Math.abs(t.position.y - g.position.y),
                        w = {
                            startEvnt: t,
                            endEvnt: g,
                            direction: p.replace("swipe", ""),
                            xAmount: d,
                            yAmount: v,
                            duration: g.time - t.time
                        };
                    o.trigger("swipeend", w)
                }
                n = !1, i = !1
            })
        },
        remove: function() {
            e(this).off(a.startevent, e(this).data.callee1).off(a.moveevent, e(this).data.callee2).off(a.endevent, e(this).data.callee3)
        }
    }, e.event.special.scrollstart = {
        setup: function() {
            var t, o, n = this,
                i = e(n);

            function r(e, a) {
                w(n, (t = a) ? "scrollstart" : "scrollend", e)
            }
            i.on(a.scrollevent, function e(a) {
                i.data("callee", e), t || r(a, !0), clearTimeout(o), o = setTimeout(function() {
                    r(a, !1)
                }, 50)
            })
        },
        remove: function() {
            e(this).off(a.scrollevent, e(this).data.callee)
        }
    };
    var o, n, i, r, s = e(window),
        p = {
            0: !0,
            180: !0
        };
    if (a.orientation_support) {
        var h = window.innerWidth || s.width(),
            c = window.innerHeight || s.height();
        i = h > c && h - c > 50, r = p[window.orientation], (i && r || !i && !r) && (p = {
            "-90": !0,
            90: !0
        })
    }

    function u() {
        var e = o();
        e !== n && (n = e, s.trigger("orientationchange"))
    }
    e.event.special.orientationchange = {
        setup: function() {
            return !a.orientation_support && (n = o(), s.on("throttledresize", u), !0)
        },
        teardown: function() {
            return !a.orientation_support && (s.off("throttledresize", u), !0)
        },
        add: function(e) {
            var t = e.handler;
            e.handler = function(e) {
                return e.orientation = o(), t.apply(this, arguments)
            }
        }
    }, e.event.special.orientationchange.orientation = o = function() {
        var e = document.documentElement;
        return (a.orientation_support ? p[window.orientation] : e && e.clientWidth / e.clientHeight < 1.1) ? "portrait" : "landscape"
    }, e.event.special.throttledresize = {
        setup: function() {
            e(this).on("resize", d)
        },
        teardown: function() {
            e(this).off("resize", d)
        }
    };
    var f, l, g, d = function() {
            l = Date.now(), (g = l - v) >= 250 ? (v = l, e(this).trigger("throttledresize")) : (f && window.clearTimeout(f), f = window.setTimeout(u, 250 - g))
        },
        v = 0;

    function w(t, a, o, n) {
        var i = o.type;
        o.type = a, e.event.dispatch.call(t, o, n), o.type = i
    }
    e.each({
        scrollend: "scrollstart",
        swipeup: "swipe",
        swiperight: "swipe",
        swipedown: "swipe",
        swipeleft: "swipe",
        swipeend: "swipe",
        tap2: "tap",
        taphold2: "taphold"
    }, function(t, a) {
        e.event.special[t] = {
            setup: function() {
                e(this).on(a, e.noop)
            }
        }
    })
}(jQuery);
/* ImagesLoaded v4.1.4 */
! function(e, t) {
    "function" == typeof define && define.amd ? define("ev-emitter/ev-emitter", t) : "object" == typeof module && module.exports ? module.exports = t() : e.EvEmitter = t()
}("undefined" != typeof window ? window : this, function() {
    function e() {}
    var t = e.prototype;
    return t.on = function(e, t) {
        if (e && t) {
            var i = this._events = this._events || {},
                n = i[e] = i[e] || [];
            return n.indexOf(t) == -1 && n.push(t), this
        }
    }, t.once = function(e, t) {
        if (e && t) {
            this.on(e, t);
            var i = this._onceEvents = this._onceEvents || {},
                n = i[e] = i[e] || {};
            return n[t] = !0, this
        }
    }, t.off = function(e, t) {
        var i = this._events && this._events[e];
        if (i && i.length) {
            var n = i.indexOf(t);
            return n != -1 && i.splice(n, 1), this
        }
    }, t.emitEvent = function(e, t) {
        var i = this._events && this._events[e];
        if (i && i.length) {
            i = i.slice(0), t = t || [];
            for (var n = this._onceEvents && this._onceEvents[e], o = 0; o < i.length; o++) {
                var r = i[o],
                    s = n && n[r];
                s && (this.off(e, r), delete n[r]), r.apply(this, t)
            }
            return this
        }
    }, t.allOff = function() {
        delete this._events, delete this._onceEvents
    }, e
}),
function(e, t) {
    "use strict";
    "function" == typeof define && define.amd ? define(["ev-emitter/ev-emitter"], function(i) {
        return t(e, i)
    }) : "object" == typeof module && module.exports ? module.exports = t(e, require("ev-emitter")) : e.imagesLoaded = t(e, e.EvEmitter)
}("undefined" != typeof window ? window : this, function(e, t) {
    function i(e, t) {
        for (var i in t) e[i] = t[i];
        return e
    }

    function n(e) {
        if (Array.isArray(e)) return e;
        var t = "object" == typeof e && "number" == typeof e.length;
        return t ? d.call(e) : [e]
    }

    function o(e, t, r) {
        if (!(this instanceof o)) return new o(e, t, r);
        var s = e;
        return "string" == typeof e && (s = document.querySelectorAll(e)), s ? (this.elements = n(s), this.options = i({}, this.options), "function" == typeof t ? r = t : i(this.options, t), r && this.on("always", r), this.getImages(), h && (this.jqDeferred = new h.Deferred), void setTimeout(this.check.bind(this))) : void a.error("Bad element for imagesLoaded " + (s || e))
    }

    function r(e) {
        this.img = e
    }

    function s(e, t) {
        this.url = e, this.element = t, this.img = new Image
    }
    var h = e.jQuery,
        a = e.console,
        d = Array.prototype.slice;
    o.prototype = Object.create(t.prototype), o.prototype.options = {}, o.prototype.getImages = function() {
        this.images = [], this.elements.forEach(this.addElementImages, this)
    }, o.prototype.addElementImages = function(e) {
        "IMG" == e.nodeName && this.addImage(e), this.options.background === !0 && this.addElementBackgroundImages(e);
        var t = e.nodeType;
        if (t && u[t]) {
            for (var i = e.querySelectorAll("img"), n = 0; n < i.length; n++) {
                var o = i[n];
                this.addImage(o)
            }
            if ("string" == typeof this.options.background) {
                var r = e.querySelectorAll(this.options.background);
                for (n = 0; n < r.length; n++) {
                    var s = r[n];
                    this.addElementBackgroundImages(s)
                }
            }
        }
    };
    var u = {
        1: !0,
        9: !0,
        11: !0
    };
    return o.prototype.addElementBackgroundImages = function(e) {
        var t = getComputedStyle(e);
        if (t)
            for (var i = /url\((['"])?(.*?)\1\)/gi, n = i.exec(t.backgroundImage); null !== n;) {
                var o = n && n[2];
                o && this.addBackground(o, e), n = i.exec(t.backgroundImage)
            }
    }, o.prototype.addImage = function(e) {
        var t = new r(e);
        this.images.push(t)
    }, o.prototype.addBackground = function(e, t) {
        var i = new s(e, t);
        this.images.push(i)
    }, o.prototype.check = function() {
        function e(e, i, n) {
            setTimeout(function() {
                t.progress(e, i, n)
            })
        }
        var t = this;
        return this.progressedCount = 0, this.hasAnyBroken = !1, this.images.length ? void this.images.forEach(function(t) {
            t.once("progress", e), t.check()
        }) : void this.complete()
    }, o.prototype.progress = function(e, t, i) {
        this.progressedCount++, this.hasAnyBroken = this.hasAnyBroken || !e.isLoaded, this.emitEvent("progress", [this, e, t]), this.jqDeferred && this.jqDeferred.notify && this.jqDeferred.notify(this, e), this.progressedCount == this.images.length && this.complete(), this.options.debug && a && a.log("progress: " + i, e, t)
    }, o.prototype.complete = function() {
        var e = this.hasAnyBroken ? "fail" : "done";
        if (this.isComplete = !0, this.emitEvent(e, [this]), this.emitEvent("always", [this]), this.jqDeferred) {
            var t = this.hasAnyBroken ? "reject" : "resolve";
            this.jqDeferred[t](this)
        }
    }, r.prototype = Object.create(t.prototype), r.prototype.check = function() {
        var e = this.getIsImageComplete();
        return e ? void this.confirm(0 !== this.img.naturalWidth, "naturalWidth") : (this.proxyImage = new Image, this.proxyImage.addEventListener("load", this), this.proxyImage.addEventListener("error", this), this.img.addEventListener("load", this), this.img.addEventListener("error", this), void(this.proxyImage.src = this.img.src))
    }, r.prototype.getIsImageComplete = function() {
        return this.img.complete && this.img.naturalWidth
    }, r.prototype.confirm = function(e, t) {
        this.isLoaded = e, this.emitEvent("progress", [this, this.img, t])
    }, r.prototype.handleEvent = function(e) {
        var t = "on" + e.type;
        this[t] && this[t](e)
    }, r.prototype.onload = function() {
        this.confirm(!0, "onload"), this.unbindEvents()
    }, r.prototype.onerror = function() {
        this.confirm(!1, "onerror"), this.unbindEvents()
    }, r.prototype.unbindEvents = function() {
        this.proxyImage.removeEventListener("load", this), this.proxyImage.removeEventListener("error", this), this.img.removeEventListener("load", this), this.img.removeEventListener("error", this)
    }, s.prototype = Object.create(r.prototype), s.prototype.check = function() {
        this.img.addEventListener("load", this), this.img.addEventListener("error", this), this.img.src = this.url;
        var e = this.getIsImageComplete();
        e && (this.confirm(0 !== this.img.naturalWidth, "naturalWidth"), this.unbindEvents())
    }, s.prototype.unbindEvents = function() {
        this.img.removeEventListener("load", this), this.img.removeEventListener("error", this)
    }, s.prototype.confirm = function(e, t) {
        this.isLoaded = e, this.emitEvent("progress", [this, this.element, t])
    }, o.makeJQueryPlugin = function(t) {
        t = t || e.jQuery, t && (h = t, h.fn.imagesLoaded = function(e, t) {
            var i = new o(this, e, t);
            return i.jqDeferred.promise(h(this))
        })
    }, o.makeJQueryPlugin(), o
});
/* Masonry  */
! function(t, e) {
    "function" == typeof define && define.amd ? define("jquery-bridget/jquery-bridget", ["jquery"], function(i) {
        return e(t, i)
    }) : "object" == typeof module && module.exports ? module.exports = e(t, require("jquery")) : t.jQueryBridget = e(t, t.jQuery)
}(window, function(t, e) {
    "use strict";

    function i(i, r, a) {
        function h(t, e, n) {
            var o, r = "$()." + i + '("' + e + '")';
            return t.each(function(t, h) {
                var u = a.data(h, i);
                if (!u) return void s(i + " not initialized. Cannot call methods, i.e. " + r);
                var d = u[e];
                if (!d || "_" == e.charAt(0)) return void s(r + " is not a valid method");
                var l = d.apply(u, n);
                o = void 0 === o ? l : o
            }), void 0 !== o ? o : t
        }

        function u(t, e) {
            t.each(function(t, n) {
                var o = a.data(n, i);
                o ? (o.option(e), o._init()) : (o = new r(n, e), a.data(n, i, o))
            })
        }
        a = a || e || t.jQuery, a && (r.prototype.option || (r.prototype.option = function(t) {
            a.isPlainObject(t) && (this.options = a.extend(!0, this.options, t))
        }), a.fn[i] = function(t) {
            if ("string" == typeof t) {
                var e = o.call(arguments, 1);
                return h(this, t, e)
            }
            return u(this, t), this
        }, n(a))
    }

    function n(t) {
        !t || t && t.bridget || (t.bridget = i)
    }
    var o = Array.prototype.slice,
        r = t.console,
        s = "undefined" == typeof r ? function() {} : function(t) {
            r.error(t)
        };
    return n(e || t.jQuery), i
}),
function(t, e) {
    "function" == typeof define && define.amd ? define("ev-emitter/ev-emitter", e) : "object" == typeof module && module.exports ? module.exports = e() : t.EvEmitter = e()
}("undefined" != typeof window ? window : this, function() {
    function t() {}
    var e = t.prototype;
    return e.on = function(t, e) {
        if (t && e) {
            var i = this._events = this._events || {},
                n = i[t] = i[t] || [];
            return -1 == n.indexOf(e) && n.push(e), this
        }
    }, e.once = function(t, e) {
        if (t && e) {
            this.on(t, e);
            var i = this._onceEvents = this._onceEvents || {},
                n = i[t] = i[t] || {};
            return n[e] = !0, this
        }
    }, e.off = function(t, e) {
        var i = this._events && this._events[t];
        if (i && i.length) {
            var n = i.indexOf(e);
            return -1 != n && i.splice(n, 1), this
        }
    }, e.emitEvent = function(t, e) {
        var i = this._events && this._events[t];
        if (i && i.length) {
            i = i.slice(0), e = e || [];
            for (var n = this._onceEvents && this._onceEvents[t], o = 0; o < i.length; o++) {
                var r = i[o],
                    s = n && n[r];
                s && (this.off(t, r), delete n[r]), r.apply(this, e)
            }
            return this
        }
    }, e.allOff = function() {
        delete this._events, delete this._onceEvents
    }, t
}),
function(t, e) {
    "use strict";
    "function" == typeof define && define.amd ? define("get-size/get-size", [], function() {
        return e()
    }) : "object" == typeof module && module.exports ? module.exports = e() : t.getSize = e()
}(window, function() {
    "use strict";

    function t(t) {
        var e = parseFloat(t),
            i = -1 == t.indexOf("%") && !isNaN(e);
        return i && e
    }

    function e() {}

    function i() {
        for (var t = {
                width: 0,
                height: 0,
                innerWidth: 0,
                innerHeight: 0,
                outerWidth: 0,
                outerHeight: 0
            }, e = 0; u > e; e++) {
            var i = h[e];
            t[i] = 0
        }
        return t
    }

    function n(t) {
        var e = getComputedStyle(t);
        return e || a("Style returned " + e + ". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"), e
    }

    function o() {
        if (!d) {
            d = !0;
            var e = document.createElement("div");
            e.style.width = "200px", e.style.padding = "1px 2px 3px 4px", e.style.borderStyle = "solid", e.style.borderWidth = "1px 2px 3px 4px", e.style.boxSizing = "border-box";
            var i = document.body || document.documentElement;
            i.appendChild(e);
            var o = n(e);
            r.isBoxSizeOuter = s = 200 == t(o.width), i.removeChild(e)
        }
    }

    function r(e) {
        if (o(), "string" == typeof e && (e = document.querySelector(e)), e && "object" == typeof e && e.nodeType) {
            var r = n(e);
            if ("none" == r.display) return i();
            var a = {};
            a.width = e.offsetWidth, a.height = e.offsetHeight;
            for (var d = a.isBorderBox = "border-box" == r.boxSizing, l = 0; u > l; l++) {
                var c = h[l],
                    f = r[c],
                    m = parseFloat(f);
                a[c] = isNaN(m) ? 0 : m
            }
            var p = a.paddingLeft + a.paddingRight,
                g = a.paddingTop + a.paddingBottom,
                y = a.marginLeft + a.marginRight,
                v = a.marginTop + a.marginBottom,
                _ = a.borderLeftWidth + a.borderRightWidth,
                z = a.borderTopWidth + a.borderBottomWidth,
                E = d && s,
                b = t(r.width);
            b !== !1 && (a.width = b + (E ? 0 : p + _));
            var x = t(r.height);
            return x !== !1 && (a.height = x + (E ? 0 : g + z)), a.innerWidth = a.width - (p + _), a.innerHeight = a.height - (g + z), a.outerWidth = a.width + y, a.outerHeight = a.height + v, a
        }
    }
    var s, a = "undefined" == typeof console ? e : function(t) {
            console.error(t)
        },
        h = ["paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "marginLeft", "marginRight", "marginTop", "marginBottom", "borderLeftWidth", "borderRightWidth", "borderTopWidth", "borderBottomWidth"],
        u = h.length,
        d = !1;
    return r
}),
function(t, e) {
    "use strict";
    "function" == typeof define && define.amd ? define("desandro-matches-selector/matches-selector", e) : "object" == typeof module && module.exports ? module.exports = e() : t.matchesSelector = e()
}(window, function() {
    "use strict";
    var t = function() {
        var t = window.Element.prototype;
        if (t.matches) return "matches";
        if (t.matchesSelector) return "matchesSelector";
        for (var e = ["webkit", "moz", "ms", "o"], i = 0; i < e.length; i++) {
            var n = e[i],
                o = n + "MatchesSelector";
            if (t[o]) return o
        }
    }();
    return function(e, i) {
        return e[t](i)
    }
}),
function(t, e) {
    "function" == typeof define && define.amd ? define("fizzy-ui-utils/utils", ["desandro-matches-selector/matches-selector"], function(i) {
        return e(t, i)
    }) : "object" == typeof module && module.exports ? module.exports = e(t, require("desandro-matches-selector")) : t.fizzyUIUtils = e(t, t.matchesSelector)
}(window, function(t, e) {
    var i = {};
    i.extend = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t
    }, i.modulo = function(t, e) {
        return (t % e + e) % e
    }, i.makeArray = function(t) {
        var e = [];
        if (Array.isArray(t)) e = t;
        else if (t && "object" == typeof t && "number" == typeof t.length)
            for (var i = 0; i < t.length; i++) e.push(t[i]);
        else e.push(t);
        return e
    }, i.removeFrom = function(t, e) {
        var i = t.indexOf(e); - 1 != i && t.splice(i, 1)
    }, i.getParent = function(t, i) {
        for (; t.parentNode && t != document.body;)
            if (t = t.parentNode, e(t, i)) return t
    }, i.getQueryElement = function(t) {
        return "string" == typeof t ? document.querySelector(t) : t
    }, i.handleEvent = function(t) {
        var e = "on" + t.type;
        this[e] && this[e](t)
    }, i.filterFindElements = function(t, n) {
        t = i.makeArray(t);
        var o = [];
        return t.forEach(function(t) {
            if (t instanceof HTMLElement) {
                if (!n) return void o.push(t);
                e(t, n) && o.push(t);
                for (var i = t.querySelectorAll(n), r = 0; r < i.length; r++) o.push(i[r])
            }
        }), o
    }, i.debounceMethod = function(t, e, i) {
        var n = t.prototype[e],
            o = e + "Timeout";
        t.prototype[e] = function() {
            var t = this[o];
            t && clearTimeout(t);
            var e = arguments,
                r = this;
            this[o] = setTimeout(function() {
                n.apply(r, e), delete r[o]
            }, i || 100)
        }
    }, i.docReady = function(t) {
        var e = document.readyState;
        "complete" == e || "interactive" == e ? setTimeout(t) : document.addEventListener("DOMContentLoaded", t)
    }, i.toDashed = function(t) {
        return t.replace(/(.)([A-Z])/g, function(t, e, i) {
            return e + "-" + i
        }).toLowerCase()
    };
    var n = t.console;
    return i.htmlInit = function(e, o) {
        i.docReady(function() {
            var r = i.toDashed(o),
                s = "data-" + r,
                a = document.querySelectorAll("[" + s + "]"),
                h = document.querySelectorAll(".js-" + r),
                u = i.makeArray(a).concat(i.makeArray(h)),
                d = s + "-options",
                l = t.jQuery;
            u.forEach(function(t) {
                var i, r = t.getAttribute(s) || t.getAttribute(d);
                try {
                    i = r && JSON.parse(r)
                } catch (a) {
                    return void(n && n.error("Error parsing " + s + " on " + t.className + ": " + a))
                }
                var h = new e(t, i);
                l && l.data(t, o, h)
            })
        })
    }, i
}),
function(t, e) {
    "function" == typeof define && define.amd ? define("outlayer/item", ["ev-emitter/ev-emitter", "get-size/get-size"], e) : "object" == typeof module && module.exports ? module.exports = e(require("ev-emitter"), require("get-size")) : (t.Outlayer = {}, t.Outlayer.Item = e(t.EvEmitter, t.getSize))
}(window, function(t, e) {
    "use strict";

    function i(t) {
        for (var e in t) return !1;
        return e = null, !0
    }

    function n(t, e) {
        t && (this.element = t, this.layout = e, this.position = {
            x: 0,
            y: 0
        }, this._create())
    }

    function o(t) {
        return t.replace(/([A-Z])/g, function(t) {
            return "-" + t.toLowerCase()
        })
    }
    var r = document.documentElement.style,
        s = "string" == typeof r.transition ? "transition" : "WebkitTransition",
        a = "string" == typeof r.transform ? "transform" : "WebkitTransform",
        h = {
            WebkitTransition: "webkitTransitionEnd",
            transition: "transitionend"
        } [s],
        u = {
            transform: a,
            transition: s,
            transitionDuration: s + "Duration",
            transitionProperty: s + "Property",
            transitionDelay: s + "Delay"
        },
        d = n.prototype = Object.create(t.prototype);
    d.constructor = n, d._create = function() {
        this._transn = {
            ingProperties: {},
            clean: {},
            onEnd: {}
        }, this.css({
            position: "absolute"
        })
    }, d.handleEvent = function(t) {
        var e = "on" + t.type;
        this[e] && this[e](t)
    }, d.getSize = function() {
        this.size = e(this.element)
    }, d.css = function(t) {
        var e = this.element.style;
        for (var i in t) {
            var n = u[i] || i;
            e[n] = t[i]
        }
    }, d.getPosition = function() {
        var t = getComputedStyle(this.element),
            e = this.layout._getOption("originLeft"),
            i = this.layout._getOption("originTop"),
            n = t[e ? "left" : "right"],
            o = t[i ? "top" : "bottom"],
            r = this.layout.size,
            s = -1 != n.indexOf("%") ? parseFloat(n) / 100 * r.width : parseInt(n, 10),
            a = -1 != o.indexOf("%") ? parseFloat(o) / 100 * r.height : parseInt(o, 10);
        s = isNaN(s) ? 0 : s, a = isNaN(a) ? 0 : a, s -= e ? r.paddingLeft : r.paddingRight, a -= i ? r.paddingTop : r.paddingBottom, this.position.x = s, this.position.y = a
    }, d.layoutPosition = function() {
        var t = this.layout.size,
            e = {},
            i = this.layout._getOption("originLeft"),
            n = this.layout._getOption("originTop"),
            o = i ? "paddingLeft" : "paddingRight",
            r = i ? "left" : "right",
            s = i ? "right" : "left",
            a = this.position.x + t[o];
        e[r] = this.getXValue(a), e[s] = "";
        var h = n ? "paddingTop" : "paddingBottom",
            u = n ? "top" : "bottom",
            d = n ? "bottom" : "top",
            l = this.position.y + t[h];
        e[u] = this.getYValue(l), e[d] = "", this.css(e), this.emitEvent("layout", [this])
    }, d.getXValue = function(t) {
        var e = this.layout._getOption("horizontal");
        return this.layout.options.percentPosition && !e ? t / this.layout.size.width * 100 + "%" : t + "px"
    }, d.getYValue = function(t) {
        var e = this.layout._getOption("horizontal");
        return this.layout.options.percentPosition && e ? t / this.layout.size.height * 100 + "%" : t + "px"
    }, d._transitionTo = function(t, e) {
        this.getPosition();
        var i = this.position.x,
            n = this.position.y,
            o = parseInt(t, 10),
            r = parseInt(e, 10),
            s = o === this.position.x && r === this.position.y;
        if (this.setPosition(t, e), s && !this.isTransitioning) return void this.layoutPosition();
        var a = t - i,
            h = e - n,
            u = {};
        u.transform = this.getTranslate(a, h), this.transition({
            to: u,
            onTransitionEnd: {
                transform: this.layoutPosition
            },
            isCleaning: !0
        })
    }, d.getTranslate = function(t, e) {
        var i = this.layout._getOption("originLeft"),
            n = this.layout._getOption("originTop");
        return t = i ? t : -t, e = n ? e : -e, "translate3d(" + t + "px, " + e + "px, 0)"
    }, d.goTo = function(t, e) {
        this.setPosition(t, e), this.layoutPosition()
    }, d.moveTo = d._transitionTo, d.setPosition = function(t, e) {
        this.position.x = parseInt(t, 10), this.position.y = parseInt(e, 10)
    }, d._nonTransition = function(t) {
        this.css(t.to), t.isCleaning && this._removeStyles(t.to);
        for (var e in t.onTransitionEnd) t.onTransitionEnd[e].call(this)
    }, d.transition = function(t) {
        if (!parseFloat(this.layout.options.transitionDuration)) return void this._nonTransition(t);
        var e = this._transn;
        for (var i in t.onTransitionEnd) e.onEnd[i] = t.onTransitionEnd[i];
        for (i in t.to) e.ingProperties[i] = !0, t.isCleaning && (e.clean[i] = !0);
        if (t.from) {
            this.css(t.from);
            var n = this.element.offsetHeight;
            n = null
        }
        this.enableTransition(t.to), this.css(t.to), this.isTransitioning = !0
    };
    var l = "opacity," + o(a);
    d.enableTransition = function() {
        if (!this.isTransitioning) {
            var t = this.layout.options.transitionDuration;
            t = "number" == typeof t ? t + "ms" : t, this.css({
                transitionProperty: l,
                transitionDuration: t,
                transitionDelay: this.staggerDelay || 0
            }), this.element.addEventListener(h, this, !1)
        }
    }, d.onwebkitTransitionEnd = function(t) {
        this.ontransitionend(t)
    }, d.onotransitionend = function(t) {
        this.ontransitionend(t)
    };
    var c = {
        "-webkit-transform": "transform"
    };
    d.ontransitionend = function(t) {
        if (t.target === this.element) {
            var e = this._transn,
                n = c[t.propertyName] || t.propertyName;
            if (delete e.ingProperties[n], i(e.ingProperties) && this.disableTransition(), n in e.clean && (this.element.style[t.propertyName] = "", delete e.clean[n]), n in e.onEnd) {
                var o = e.onEnd[n];
                o.call(this), delete e.onEnd[n]
            }
            this.emitEvent("transitionEnd", [this])
        }
    }, d.disableTransition = function() {
        this.removeTransitionStyles(), this.element.removeEventListener(h, this, !1), this.isTransitioning = !1
    }, d._removeStyles = function(t) {
        var e = {};
        for (var i in t) e[i] = "";
        this.css(e)
    };
    var f = {
        transitionProperty: "",
        transitionDuration: "",
        transitionDelay: ""
    };
    return d.removeTransitionStyles = function() {
        this.css(f)
    }, d.stagger = function(t) {
        t = isNaN(t) ? 0 : t, this.staggerDelay = t + "ms"
    }, d.removeElem = function() {
        this.element.parentNode.removeChild(this.element), this.css({
            display: ""
        }), this.emitEvent("remove", [this])
    }, d.remove = function() {
        return s && parseFloat(this.layout.options.transitionDuration) ? (this.once("transitionEnd", function() {
            this.removeElem()
        }), void this.hide()) : void this.removeElem()
    }, d.reveal = function() {
        delete this.isHidden, this.css({
            display: ""
        });
        var t = this.layout.options,
            e = {},
            i = this.getHideRevealTransitionEndProperty("visibleStyle");
        e[i] = this.onRevealTransitionEnd, this.transition({
            from: t.hiddenStyle,
            to: t.visibleStyle,
            isCleaning: !0,
            onTransitionEnd: e
        })
    }, d.onRevealTransitionEnd = function() {
        this.isHidden || this.emitEvent("reveal")
    }, d.getHideRevealTransitionEndProperty = function(t) {
        var e = this.layout.options[t];
        if (e.opacity) return "opacity";
        for (var i in e) return i
    }, d.hide = function() {
        this.isHidden = !0, this.css({
            display: ""
        });
        var t = this.layout.options,
            e = {},
            i = this.getHideRevealTransitionEndProperty("hiddenStyle");
        e[i] = this.onHideTransitionEnd, this.transition({
            from: t.visibleStyle,
            to: t.hiddenStyle,
            isCleaning: !0,
            onTransitionEnd: e
        })
    }, d.onHideTransitionEnd = function() {
        this.isHidden && (this.css({
            display: "none"
        }), this.emitEvent("hide"))
    }, d.destroy = function() {
        this.css({
            position: "",
            left: "",
            right: "",
            top: "",
            bottom: "",
            transition: "",
            transform: ""
        })
    }, n
}),
function(t, e) {
    "use strict";
    "function" == typeof define && define.amd ? define("outlayer/outlayer", ["ev-emitter/ev-emitter", "get-size/get-size", "fizzy-ui-utils/utils", "./item"], function(i, n, o, r) {
        return e(t, i, n, o, r)
    }) : "object" == typeof module && module.exports ? module.exports = e(t, require("ev-emitter"), require("get-size"), require("fizzy-ui-utils"), require("./item")) : t.Outlayer = e(t, t.EvEmitter, t.getSize, t.fizzyUIUtils, t.Outlayer.Item)
}(window, function(t, e, i, n, o) {
    "use strict";

    function r(t, e) {
        var i = n.getQueryElement(t);
        if (!i) return void(h && h.error("Bad element for " + this.constructor.namespace + ": " + (i || t)));
        this.element = i, u && (this.$element = u(this.element)), this.options = n.extend({}, this.constructor.defaults), this.option(e);
        var o = ++l;
        this.element.outlayerGUID = o, c[o] = this, this._create();
        var r = this._getOption("initLayout");
        r && this.layout()
    }

    function s(t) {
        function e() {
            t.apply(this, arguments)
        }
        return e.prototype = Object.create(t.prototype), e.prototype.constructor = e, e
    }

    function a(t) {
        if ("number" == typeof t) return t;
        var e = t.match(/(^\d*\.?\d*)(\w*)/),
            i = e && e[1],
            n = e && e[2];
        if (!i.length) return 0;
        i = parseFloat(i);
        var o = m[n] || 1;
        return i * o
    }
    var h = t.console,
        u = t.jQuery,
        d = function() {},
        l = 0,
        c = {};
    r.namespace = "outlayer", r.Item = o, r.defaults = {
        containerStyle: {
            position: "relative"
        },
        initLayout: !0,
        originLeft: !0,
        originTop: !0,
        resize: !0,
        resizeContainer: !0,
        transitionDuration: "0.4s",
        hiddenStyle: {
            opacity: 0,
            transform: "scale(0.001)"
        },
        visibleStyle: {
            opacity: 1,
            transform: "scale(1)"
        }
    };
    var f = r.prototype;
    n.extend(f, e.prototype), f.option = function(t) {
        n.extend(this.options, t)
    }, f._getOption = function(t) {
        var e = this.constructor.compatOptions[t];
        return e && void 0 !== this.options[e] ? this.options[e] : this.options[t]
    }, r.compatOptions = {
        initLayout: "isInitLayout",
        horizontal: "isHorizontal",
        layoutInstant: "isLayoutInstant",
        originLeft: "isOriginLeft",
        originTop: "isOriginTop",
        resize: "isResizeBound",
        resizeContainer: "isResizingContainer"
    }, f._create = function() {
        this.reloadItems(), this.stamps = [], this.stamp(this.options.stamp), n.extend(this.element.style, this.options.containerStyle);
        var t = this._getOption("resize");
        t && this.bindResize()
    }, f.reloadItems = function() {
        this.items = this._itemize(this.element.children)
    }, f._itemize = function(t) {
        for (var e = this._filterFindItemElements(t), i = this.constructor.Item, n = [], o = 0; o < e.length; o++) {
            var r = e[o],
                s = new i(r, this);
            n.push(s)
        }
        return n
    }, f._filterFindItemElements = function(t) {
        return n.filterFindElements(t, this.options.itemSelector)
    }, f.getItemElements = function() {
        return this.items.map(function(t) {
            return t.element
        })
    }, f.layout = function() {
        this._resetLayout(), this._manageStamps();
        var t = this._getOption("layoutInstant"),
            e = void 0 !== t ? t : !this._isLayoutInited;
        this.layoutItems(this.items, e), this._isLayoutInited = !0
    }, f._init = f.layout, f._resetLayout = function() {
        this.getSize()
    }, f.getSize = function() {
        this.size = i(this.element)
    }, f._getMeasurement = function(t, e) {
        var n, o = this.options[t];
        o ? ("string" == typeof o ? n = this.element.querySelector(o) : o instanceof HTMLElement && (n = o), this[t] = n ? i(n)[e] : o) : this[t] = 0
    }, f.layoutItems = function(t, e) {
        t = this._getItemsForLayout(t), this._layoutItems(t, e), this._postLayout()
    }, f._getItemsForLayout = function(t) {
        return t.filter(function(t) {
            return !t.isIgnored
        })
    }, f._layoutItems = function(t, e) {
        if (this._emitCompleteOnItems("layout", t), t && t.length) {
            var i = [];
            t.forEach(function(t) {
                var n = this._getItemLayoutPosition(t);
                n.item = t, n.isInstant = e || t.isLayoutInstant, i.push(n)
            }, this), this._processLayoutQueue(i)
        }
    }, f._getItemLayoutPosition = function() {
        return {
            x: 0,
            y: 0
        }
    }, f._processLayoutQueue = function(t) {
        this.updateStagger(), t.forEach(function(t, e) {
            this._positionItem(t.item, t.x, t.y, t.isInstant, e)
        }, this)
    }, f.updateStagger = function() {
        var t = this.options.stagger;
        return null === t || void 0 === t ? void(this.stagger = 0) : (this.stagger = a(t), this.stagger)
    }, f._positionItem = function(t, e, i, n, o) {
        n ? t.goTo(e, i) : (t.stagger(o * this.stagger), t.moveTo(e, i))
    }, f._postLayout = function() {
        this.resizeContainer()
    }, f.resizeContainer = function() {
        var t = this._getOption("resizeContainer");
        if (t) {
            var e = this._getContainerSize();
            e && (this._setContainerMeasure(e.width, !0), this._setContainerMeasure(e.height, !1))
        }
    }, f._getContainerSize = d, f._setContainerMeasure = function(t, e) {
        if (void 0 !== t) {
            var i = this.size;
            i.isBorderBox && (t += e ? i.paddingLeft + i.paddingRight + i.borderLeftWidth + i.borderRightWidth : i.paddingBottom + i.paddingTop + i.borderTopWidth + i.borderBottomWidth), t = Math.max(t, 0), this.element.style[e ? "width" : "height"] = t + "px"
        }
    }, f._emitCompleteOnItems = function(t, e) {
        function i() {
            o.dispatchEvent(t + "Complete", null, [e])
        }

        function n() {
            s++, s == r && i()
        }
        var o = this,
            r = e.length;
        if (!e || !r) return void i();
        var s = 0;
        e.forEach(function(e) {
            e.once(t, n)
        })
    }, f.dispatchEvent = function(t, e, i) {
        var n = e ? [e].concat(i) : i;
        if (this.emitEvent(t, n), u)
            if (this.$element = this.$element || u(this.element), e) {
                var o = u.Event(e);
                o.type = t, this.$element.trigger(o, i)
            } else this.$element.trigger(t, i)
    }, f.ignore = function(t) {
        var e = this.getItem(t);
        e && (e.isIgnored = !0)
    }, f.unignore = function(t) {
        var e = this.getItem(t);
        e && delete e.isIgnored
    }, f.stamp = function(t) {
        t = this._find(t), t && (this.stamps = this.stamps.concat(t), t.forEach(this.ignore, this))
    }, f.unstamp = function(t) {
        t = this._find(t), t && t.forEach(function(t) {
            n.removeFrom(this.stamps, t), this.unignore(t)
        }, this)
    }, f._find = function(t) {
        return t ? ("string" == typeof t && (t = this.element.querySelectorAll(t)), t = n.makeArray(t)) : void 0
    }, f._manageStamps = function() {
        this.stamps && this.stamps.length && (this._getBoundingRect(), this.stamps.forEach(this._manageStamp, this))
    }, f._getBoundingRect = function() {
        var t = this.element.getBoundingClientRect(),
            e = this.size;
        this._boundingRect = {
            left: t.left + e.paddingLeft + e.borderLeftWidth,
            top: t.top + e.paddingTop + e.borderTopWidth,
            right: t.right - (e.paddingRight + e.borderRightWidth),
            bottom: t.bottom - (e.paddingBottom + e.borderBottomWidth)
        }
    }, f._manageStamp = d, f._getElementOffset = function(t) {
        var e = t.getBoundingClientRect(),
            n = this._boundingRect,
            o = i(t),
            r = {
                left: e.left - n.left - o.marginLeft,
                top: e.top - n.top - o.marginTop,
                right: n.right - e.right - o.marginRight,
                bottom: n.bottom - e.bottom - o.marginBottom
            };
        return r
    }, f.handleEvent = n.handleEvent, f.bindResize = function() {
        t.addEventListener("resize", this), this.isResizeBound = !0
    }, f.unbindResize = function() {
        t.removeEventListener("resize", this), this.isResizeBound = !1
    }, f.onresize = function() {
        this.resize()
    }, n.debounceMethod(r, "onresize", 100), f.resize = function() {
        this.isResizeBound && this.needsResizeLayout() && this.layout()
    }, f.needsResizeLayout = function() {
        var t = i(this.element),
            e = this.size && t;
        return e && t.innerWidth !== this.size.innerWidth
    }, f.addItems = function(t) {
        var e = this._itemize(t);
        return e.length && (this.items = this.items.concat(e)), e
    }, f.appended = function(t) {
        var e = this.addItems(t);
        e.length && (this.layoutItems(e, !0), this.reveal(e))
    }, f.prepended = function(t) {
        var e = this._itemize(t);
        if (e.length) {
            var i = this.items.slice(0);
            this.items = e.concat(i), this._resetLayout(), this._manageStamps(), this.layoutItems(e, !0), this.reveal(e), this.layoutItems(i)
        }
    }, f.reveal = function(t) {
        if (this._emitCompleteOnItems("reveal", t), t && t.length) {
            var e = this.updateStagger();
            t.forEach(function(t, i) {
                t.stagger(i * e), t.reveal()
            })
        }
    }, f.hide = function(t) {
        if (this._emitCompleteOnItems("hide", t), t && t.length) {
            var e = this.updateStagger();
            t.forEach(function(t, i) {
                t.stagger(i * e), t.hide()
            })
        }
    }, f.revealItemElements = function(t) {
        var e = this.getItems(t);
        this.reveal(e)
    }, f.hideItemElements = function(t) {
        var e = this.getItems(t);
        this.hide(e)
    }, f.getItem = function(t) {
        for (var e = 0; e < this.items.length; e++) {
            var i = this.items[e];
            if (i.element == t) return i
        }
    }, f.getItems = function(t) {
        t = n.makeArray(t);
        var e = [];
        return t.forEach(function(t) {
            var i = this.getItem(t);
            i && e.push(i)
        }, this), e
    }, f.remove = function(t) {
        var e = this.getItems(t);
        this._emitCompleteOnItems("remove", e), e && e.length && e.forEach(function(t) {
            t.remove(), n.removeFrom(this.items, t)
        }, this)
    }, f.destroy = function() {
        var t = this.element.style;
        t.height = "", t.position = "", t.width = "", this.items.forEach(function(t) {
            t.destroy()
        }), this.unbindResize();
        var e = this.element.outlayerGUID;
        delete c[e], delete this.element.outlayerGUID, u && u.removeData(this.element, this.constructor.namespace)
    }, r.data = function(t) {
        t = n.getQueryElement(t);
        var e = t && t.outlayerGUID;
        return e && c[e]
    }, r.create = function(t, e) {
        var i = s(r);
        return i.defaults = n.extend({}, r.defaults), n.extend(i.defaults, e), i.compatOptions = n.extend({}, r.compatOptions), i.namespace = t, i.data = r.data, i.Item = s(o), n.htmlInit(i, t), u && u.bridget && u.bridget(t, i), i
    };
    var m = {
        ms: 1,
        s: 1e3
    };
    return r.Item = o, r
}),
function(t, e) {
    "function" == typeof define && define.amd ? define(["outlayer/outlayer", "get-size/get-size"], e) : "object" == typeof module && module.exports ? module.exports = e(require("outlayer"), require("get-size")) : t.Masonry = e(t.Outlayer, t.getSize)
}(window, function(t, e) {
    var i = t.create("masonry");
    i.compatOptions.fitWidth = "isFitWidth";
    var n = i.prototype;
    return n._resetLayout = function() {
        this.getSize(), this._getMeasurement("columnWidth", "outerWidth"), this._getMeasurement("gutter", "outerWidth"), this.measureColumns(), this.colYs = [];
        for (var t = 0; t < this.cols; t++) this.colYs.push(0);
        this.maxY = 0, this.horizontalColIndex = 0
    }, n.measureColumns = function() {
        if (this.getContainerWidth(), !this.columnWidth) {
            var t = this.items[0],
                i = t && t.element;
            this.columnWidth = i && e(i).outerWidth || this.containerWidth
        }
        var n = this.columnWidth += this.gutter,
            o = this.containerWidth + this.gutter,
            r = o / n,
            s = n - o % n,
            a = s && 1 > s ? "round" : "floor";
        r = Math[a](r), this.cols = Math.max(r, 1)
    }, n.getContainerWidth = function() {
        var t = this._getOption("fitWidth"),
            i = t ? this.element.parentNode : this.element,
            n = e(i);
        this.containerWidth = n && n.innerWidth
    }, n._getItemLayoutPosition = function(t) {
        t.getSize();
        var e = t.size.outerWidth % this.columnWidth,
            i = e && 1 > e ? "round" : "ceil",
            n = Math[i](t.size.outerWidth / this.columnWidth);
        n = Math.min(n, this.cols);
        for (var o = this.options.horizontalOrder ? "_getHorizontalColPosition" : "_getTopColPosition", r = this[o](n, t), s = {
                x: this.columnWidth * r.col,
                y: r.y
            }, a = r.y + t.size.outerHeight, h = n + r.col, u = r.col; h > u; u++) this.colYs[u] = a;
        return s
    }, n._getTopColPosition = function(t) {
        var e = this._getTopColGroup(t),
            i = Math.min.apply(Math, e);
        return {
            col: e.indexOf(i),
            y: i
        }
    }, n._getTopColGroup = function(t) {
        if (2 > t) return this.colYs;
        for (var e = [], i = this.cols + 1 - t, n = 0; i > n; n++) e[n] = this._getColGroupY(n, t);
        return e
    }, n._getColGroupY = function(t, e) {
        if (2 > e) return this.colYs[t];
        var i = this.colYs.slice(t, t + e);
        return Math.max.apply(Math, i)
    }, n._getHorizontalColPosition = function(t, e) {
        var i = this.horizontalColIndex % this.cols,
            n = t > 1 && i + t > this.cols;
        i = n ? 0 : i;
        var o = e.size.outerWidth && e.size.outerHeight;
        return this.horizontalColIndex = o ? i + t : this.horizontalColIndex, {
            col: i,
            y: this._getColGroupY(i, t)
        }
    }, n._manageStamp = function(t) {
        var i = e(t),
            n = this._getElementOffset(t),
            o = this._getOption("originLeft"),
            r = o ? n.left : n.right,
            s = r + i.outerWidth,
            a = Math.floor(r / this.columnWidth);
        a = Math.max(0, a);
        var h = Math.floor(s / this.columnWidth);
        h -= s % this.columnWidth ? 0 : 1, h = Math.min(this.cols - 1, h);
        for (var u = this._getOption("originTop"), d = (u ? n.top : n.bottom) + i.outerHeight, l = a; h >= l; l++) this.colYs[l] = Math.max(d, this.colYs[l])
    }, n._getContainerSize = function() {
        this.maxY = Math.max.apply(Math, this.colYs);
        var t = {
            height: this.maxY
        };
        return this._getOption("fitWidth") && (t.width = this._getContainerFitWidth()), t
    }, n._getContainerFitWidth = function() {
        for (var t = 0, e = this.cols; --e && 0 === this.colYs[e];) t++;
        return (this.cols - t) * this.columnWidth - this.gutter
    }, n.needsResizeLayout = function() {
        var t = this.containerWidth;
        return this.getContainerWidth(), t != this.containerWidth
    }, i
});
/* QR Code Generator */
var qrcode = function() {
    var i = function(r, t) {
        var a = r,
            u = p[t],
            c = null,
            h = 0,
            n = null,
            f = [],
            g = {},
            s = function(r, t) {
                c = function(r) {
                    for (var t = new Array(r), e = 0; e < r; e += 1) {
                        t[e] = new Array(r);
                        for (var n = 0; n < r; n += 1) t[e][n] = null
                    }
                    return t
                }(h = 4 * a + 17), e(0, 0), e(h - 7, 0), e(0, h - 7), i(), o(), v(r, t), 7 <= a && l(r), null == n && (n = w(a, u, f)), d(n, t)
            },
            e = function(r, t) {
                for (var e = -1; e <= 7; e += 1)
                    if (!(r + e <= -1 || h <= r + e))
                        for (var n = -1; n <= 7; n += 1) t + n <= -1 || h <= t + n || (c[r + e][t + n] = 0 <= e && e <= 6 && (0 == n || 6 == n) || 0 <= n && n <= 6 && (0 == e || 6 == e) || 2 <= e && e <= 4 && 2 <= n && n <= 4)
            },
            o = function() {
                for (var r = 8; r < h - 8; r += 1) null == c[r][6] && (c[r][6] = r % 2 == 0);
                for (var t = 8; t < h - 8; t += 1) null == c[6][t] && (c[6][t] = t % 2 == 0)
            },
            i = function() {
                for (var r = y.getPatternPosition(a), t = 0; t < r.length; t += 1)
                    for (var e = 0; e < r.length; e += 1) {
                        var n = r[t],
                            o = r[e];
                        if (null == c[n][o])
                            for (var i = -2; i <= 2; i += 1)
                                for (var u = -2; u <= 2; u += 1) c[n + i][o + u] = -2 == i || 2 == i || -2 == u || 2 == u || 0 == i && 0 == u
                    }
            },
            l = function(r) {
                for (var t = y.getBCHTypeNumber(a), e = 0; e < 18; e += 1) {
                    var n = !r && 1 == (t >> e & 1);
                    c[Math.floor(e / 3)][e % 3 + h - 8 - 3] = n
                }
                for (e = 0; e < 18; e += 1) {
                    n = !r && 1 == (t >> e & 1);
                    c[e % 3 + h - 8 - 3][Math.floor(e / 3)] = n
                }
            },
            v = function(r, t) {
                for (var e = u << 3 | t, n = y.getBCHTypeInfo(e), o = 0; o < 15; o += 1) {
                    var i = !r && 1 == (n >> o & 1);
                    o < 6 ? c[o][8] = i : o < 8 ? c[o + 1][8] = i : c[h - 15 + o][8] = i
                }
                for (o = 0; o < 15; o += 1) {
                    i = !r && 1 == (n >> o & 1);
                    o < 8 ? c[8][h - o - 1] = i : o < 9 ? c[8][15 - o - 1 + 1] = i : c[8][15 - o - 1] = i
                }
                c[h - 8][8] = !r
            },
            d = function(r, t) {
                for (var e = -1, n = h - 1, o = 7, i = 0, u = y.getMaskFunction(t), a = h - 1; 0 < a; a -= 2)
                    for (6 == a && (a -= 1);;) {
                        for (var f = 0; f < 2; f += 1)
                            if (null == c[n][a - f]) {
                                var g = !1;
                                i < r.length && (g = 1 == (r[i] >>> o & 1)), u(n, a - f) && (g = !g), c[n][a - f] = g, -1 == (o -= 1) && (i += 1, o = 7)
                            } if ((n += e) < 0 || h <= n) {
                            n -= e, e = -e;
                            break
                        }
                    }
            },
            w = function(r, t, e) {
                for (var n = k.getRSBlocks(r, t), o = m(), i = 0; i < e.length; i += 1) {
                    var u = e[i];
                    o.put(u.getMode(), 4), o.put(u.getLength(), y.getLengthInBits(u.getMode(), r)), u.write(o)
                }
                var a = 0;
                for (i = 0; i < n.length; i += 1) a += n[i].dataCount;
                if (o.getLengthInBits() > 8 * a) throw "code length overflow. (" + o.getLengthInBits() + ">" + 8 * a + ")";
                for (o.getLengthInBits() + 4 <= 8 * a && o.put(0, 4); o.getLengthInBits() % 8 != 0;) o.putBit(!1);
                for (; !(o.getLengthInBits() >= 8 * a || (o.put(236, 8), o.getLengthInBits() >= 8 * a));) o.put(17, 8);
                return function(r, t) {
                    for (var e = 0, n = 0, o = 0, i = new Array(t.length), u = new Array(t.length), a = 0; a < t.length; a += 1) {
                        var f = t[a].dataCount,
                            g = t[a].totalCount - f;
                        n = Math.max(n, f), o = Math.max(o, g), i[a] = new Array(f);
                        for (var c = 0; c < i[a].length; c += 1) i[a][c] = 255 & r.getBuffer()[c + e];
                        e += f;
                        var h = y.getErrorCorrectPolynomial(g),
                            s = B(i[a], h.getLength() - 1).mod(h);
                        for (u[a] = new Array(h.getLength() - 1), c = 0; c < u[a].length; c += 1) {
                            var l = c + s.getLength() - u[a].length;
                            u[a][c] = 0 <= l ? s.getAt(l) : 0
                        }
                    }
                    var v = 0;
                    for (c = 0; c < t.length; c += 1) v += t[c].totalCount;
                    var d = new Array(v),
                        w = 0;
                    for (c = 0; c < n; c += 1)
                        for (a = 0; a < t.length; a += 1) c < i[a].length && (d[w] = i[a][c], w += 1);
                    for (c = 0; c < o; c += 1)
                        for (a = 0; a < t.length; a += 1) c < u[a].length && (d[w] = u[a][c], w += 1);
                    return d
                }(o, n)
            };
        return g.addData = function(r, t) {
            var e = null;
            switch (t = t || "Byte") {
                case "Numeric":
                    e = L(r);
                    break;
                case "Alphanumeric":
                    e = M(r);
                    break;
                case "Byte":
                    e = b(r);
                    break;
                case "Kanji":
                    e = x(r);
                    break;
                default:
                    throw "mode:" + t
            }
            f.push(e), n = null
        }, g.isDark = function(r, t) {
            if (r < 0 || h <= r || t < 0 || h <= t) throw r + "," + t;
            return c[r][t]
        }, g.getModuleCount = function() {
            return h
        }, g.make = function() {
            if (a < 1) {
                for (var r = 1; r < 40; r++) {
                    for (var t = k.getRSBlocks(r, u), e = m(), n = 0; n < f.length; n++) {
                        var o = f[n];
                        e.put(o.getMode(), 4), e.put(o.getLength(), y.getLengthInBits(o.getMode(), r)), o.write(e)
                    }
                    var i = 0;
                    for (n = 0; n < t.length; n++) i += t[n].dataCount;
                    if (e.getLengthInBits() <= 8 * i) break
                }
                a = r
            }
            s(!1, function() {
                for (var r = 0, t = 0, e = 0; e < 8; e += 1) {
                    s(!0, e);
                    var n = y.getLostPoint(g);
                    (0 == e || n < r) && (r = n, t = e)
                }
                return t
            }())
        }, g.createTableTag = function(r, t) {
            r = r || 2;
            var e = "";
            e += '<table style="', e += " border-width: 0px; border-style: none;", e += " border-collapse: collapse;", e += " padding: 0px; margin: " + (t = void 0 === t ? 4 * r : t) + "px;", e += '">', e += "<tbody>";
            for (var n = 0; n < g.getModuleCount(); n += 1) {
                e += "<tr>";
                for (var o = 0; o < g.getModuleCount(); o += 1) e += '<td style="', e += " border-width: 0px; border-style: none;", e += " border-collapse: collapse;", e += " padding: 0px; margin: 0px;", e += " width: " + r + "px;", e += " height: " + r + "px;", e += " background-color: ", e += g.isDark(n, o) ? "#000000" : "#ffffff", e += ";", e += '"/>';
                e += "</tr>"
            }
            return e += "</tbody>", e += "</table>"
        }, g.createSvgTag = function(r, t) {
            r = r || 4, t = void 0 === t ? 4 * r : t, t = 0;
            var e, n, o, i, u = g.getModuleCount() * r + 2 * t,
                a = "";
            for (i = "l" + r + ",0 0," + r + " -" + r + ",0 0,-" + r + "z ", a += '<svg version="1.1" xmlns="http://www.w3.org/2000/svg"', a += ' width="' + u + 'px"', a += ' height="' + u + 'px"', a += ' viewBox="0 0 ' + u + " " + u + '" ', a += ' preserveAspectRatio="xMinYMin meet">', a += '<path d="', n = 0; n < g.getModuleCount(); n += 1)
                for (o = n * r + t, e = 0; e < g.getModuleCount(); e += 1) g.isDark(n, e) && (a += "M" + (e * r + t) + "," + o + i);
            return a += '" stroke="transparent" fill="black"/>', a += "</svg>"
        }, g.createImgTag = function(o, r) {
            o = o || 2, r = void 0 === r ? 4 * o : r;
            var t = g.getModuleCount() * o + 2 * r,
                i = r,
                u = t - r;
            return I(t, t, function(r, t) {
                if (i <= r && r < u && i <= t && t < u) {
                    var e = Math.floor((r - i) / o),
                        n = Math.floor((t - i) / o);
                    return g.isDark(n, e) ? 0 : 1
                }
                return 1
            })
        }, g
    };
    i.stringToBytes = (i.stringToBytesFuncs = {
        default: function(r) {
            for (var t = [], e = 0; e < r.length; e += 1) {
                var n = r.charCodeAt(e);
                t.push(255 & n)
            }
            return t
        }
    }).default, i.createStringToBytes = function(a, f) {
        var i = function() {
                for (var t = D(a), r = function() {
                        var r = t.read();
                        if (-1 == r) throw "eof";
                        return r
                    }, e = 0, n = {};;) {
                    var o = t.read();
                    if (-1 == o) break;
                    var i = r(),
                        u = r() << 8 | r();
                    n[String.fromCharCode(o << 8 | i)] = u, e += 1
                }
                if (e != f) throw e + " != " + f;
                return n
            }(),
            u = "?".charCodeAt(0);
        return function(r) {
            for (var t = [], e = 0; e < r.length; e += 1) {
                var n = r.charCodeAt(e);
                if (n < 128) t.push(n);
                else {
                    var o = i[r.charAt(e)];
                    "number" == typeof o ? (255 & o) == o ? t.push(o) : (t.push(o >>> 8), t.push(255 & o)) : t.push(u)
                }
            }
            return t
        }
    };
    var t, r, e, u = 1,
        a = 2,
        o = 4,
        f = 8,
        p = {
            L: 1,
            M: 0,
            Q: 3,
            H: 2
        },
        n = 0,
        g = 1,
        c = 2,
        h = 3,
        s = 4,
        l = 5,
        v = 6,
        d = 7,
        y = (t = [
            [],
            [6, 18],
            [6, 22],
            [6, 26],
            [6, 30],
            [6, 34],
            [6, 22, 38],
            [6, 24, 42],
            [6, 26, 46],
            [6, 28, 50],
            [6, 30, 54],
            [6, 32, 58],
            [6, 34, 62],
            [6, 26, 46, 66],
            [6, 26, 48, 70],
            [6, 26, 50, 74],
            [6, 30, 54, 78],
            [6, 30, 56, 82],
            [6, 30, 58, 86],
            [6, 34, 62, 90],
            [6, 28, 50, 72, 94],
            [6, 26, 50, 74, 98],
            [6, 30, 54, 78, 102],
            [6, 28, 54, 80, 106],
            [6, 32, 58, 84, 110],
            [6, 30, 58, 86, 114],
            [6, 34, 62, 90, 118],
            [6, 26, 50, 74, 98, 122],
            [6, 30, 54, 78, 102, 126],
            [6, 26, 52, 78, 104, 130],
            [6, 30, 56, 82, 108, 134],
            [6, 34, 60, 86, 112, 138],
            [6, 30, 58, 86, 114, 142],
            [6, 34, 62, 90, 118, 146],
            [6, 30, 54, 78, 102, 126, 150],
            [6, 24, 50, 76, 102, 128, 154],
            [6, 28, 54, 80, 106, 132, 158],
            [6, 32, 58, 84, 110, 136, 162],
            [6, 26, 54, 82, 110, 138, 166],
            [6, 30, 58, 86, 114, 142, 170]
        ], e = function(r) {
            for (var t = 0; 0 != r;) t += 1, r >>>= 1;
            return t
        }, (r = {}).getBCHTypeInfo = function(r) {
            for (var t = r << 10; 0 <= e(t) - e(1335);) t ^= 1335 << e(t) - e(1335);
            return 21522 ^ (r << 10 | t)
        }, r.getBCHTypeNumber = function(r) {
            for (var t = r << 12; 0 <= e(t) - e(7973);) t ^= 7973 << e(t) - e(7973);
            return r << 12 | t
        }, r.getPatternPosition = function(r) {
            return t[r - 1]
        }, r.getMaskFunction = function(r) {
            switch (r) {
                case n:
                    return function(r, t) {
                        return (r + t) % 2 == 0
                    };
                case g:
                    return function(r, t) {
                        return r % 2 == 0
                    };
                case c:
                    return function(r, t) {
                        return t % 3 == 0
                    };
                case h:
                    return function(r, t) {
                        return (r + t) % 3 == 0
                    };
                case s:
                    return function(r, t) {
                        return (Math.floor(r / 2) + Math.floor(t / 3)) % 2 == 0
                    };
                case l:
                    return function(r, t) {
                        return r * t % 2 + r * t % 3 == 0
                    };
                case v:
                    return function(r, t) {
                        return (r * t % 2 + r * t % 3) % 2 == 0
                    };
                case d:
                    return function(r, t) {
                        return (r * t % 3 + (r + t) % 2) % 2 == 0
                    };
                default:
                    throw "bad maskPattern:" + r
            }
        }, r.getErrorCorrectPolynomial = function(r) {
            for (var t = B([1], 0), e = 0; e < r; e += 1) t = t.multiply(B([1, w.gexp(e)], 0));
            return t
        }, r.getLengthInBits = function(r, t) {
            if (1 <= t && t < 10) switch (r) {
                case u:
                    return 10;
                case a:
                    return 9;
                case o:
                case f:
                    return 8;
                default:
                    throw "mode:" + r
            } else if (t < 27) switch (r) {
                case u:
                    return 12;
                case a:
                    return 11;
                case o:
                    return 16;
                case f:
                    return 10;
                default:
                    throw "mode:" + r
            } else {
                if (!(t < 41)) throw "type:" + t;
                switch (r) {
                    case u:
                        return 14;
                    case a:
                        return 13;
                    case o:
                        return 16;
                    case f:
                        return 12;
                    default:
                        throw "mode:" + r
                }
            }
        }, r.getLostPoint = function(r) {
            for (var t = r.getModuleCount(), e = 0, n = 0; n < t; n += 1)
                for (var o = 0; o < t; o += 1) {
                    for (var i = 0, u = r.isDark(n, o), a = -1; a <= 1; a += 1)
                        if (!(n + a < 0 || t <= n + a))
                            for (var f = -1; f <= 1; f += 1) o + f < 0 || t <= o + f || 0 == a && 0 == f || u == r.isDark(n + a, o + f) && (i += 1);
                    5 < i && (e += 3 + i - 5)
                }
            for (n = 0; n < t - 1; n += 1)
                for (o = 0; o < t - 1; o += 1) {
                    var g = 0;
                    r.isDark(n, o) && (g += 1), r.isDark(n + 1, o) && (g += 1), r.isDark(n, o + 1) && (g += 1), r.isDark(n + 1, o + 1) && (g += 1), 0 != g && 4 != g || (e += 3)
                }
            for (n = 0; n < t; n += 1)
                for (o = 0; o < t - 6; o += 1) r.isDark(n, o) && !r.isDark(n, o + 1) && r.isDark(n, o + 2) && r.isDark(n, o + 3) && r.isDark(n, o + 4) && !r.isDark(n, o + 5) && r.isDark(n, o + 6) && (e += 40);
            for (o = 0; o < t; o += 1)
                for (n = 0; n < t - 6; n += 1) r.isDark(n, o) && !r.isDark(n + 1, o) && r.isDark(n + 2, o) && r.isDark(n + 3, o) && r.isDark(n + 4, o) && !r.isDark(n + 5, o) && r.isDark(n + 6, o) && (e += 40);
            var c = 0;
            for (o = 0; o < t; o += 1)
                for (n = 0; n < t; n += 1) r.isDark(n, o) && (c += 1);
            return e += Math.abs(100 * c / t / t - 50) / 5 * 10
        }, r),
        w = function() {
            for (var t = new Array(256), e = new Array(256), r = 0; r < 8; r += 1) t[r] = 1 << r;
            for (r = 8; r < 256; r += 1) t[r] = t[r - 4] ^ t[r - 5] ^ t[r - 6] ^ t[r - 8];
            for (r = 0; r < 255; r += 1) e[t[r]] = r;
            var n = {
                glog: function(r) {
                    if (r < 1) throw "glog(" + r + ")";
                    return e[r]
                },
                gexp: function(r) {
                    for (; r < 0;) r += 255;
                    for (; 256 <= r;) r -= 255;
                    return t[r]
                }
            };
            return n
        }();

    function B(n, o) {
        if (void 0 === n.length) throw n.length + "/" + o;
        var t = function() {
                for (var r = 0; r < n.length && 0 == n[r];) r += 1;
                for (var t = new Array(n.length - r + o), e = 0; e < n.length - r; e += 1) t[e] = n[e + r];
                return t
            }(),
            i = {
                getAt: function(r) {
                    return t[r]
                },
                getLength: function() {
                    return t.length
                },
                multiply: function(r) {
                    for (var t = new Array(i.getLength() + r.getLength() - 1), e = 0; e < i.getLength(); e += 1)
                        for (var n = 0; n < r.getLength(); n += 1) t[e + n] ^= w.gexp(w.glog(i.getAt(e)) + w.glog(r.getAt(n)));
                    return B(t, 0)
                },
                mod: function(r) {
                    if (i.getLength() - r.getLength() < 0) return i;
                    for (var t = w.glog(i.getAt(0)) - w.glog(r.getAt(0)), e = new Array(i.getLength()), n = 0; n < i.getLength(); n += 1) e[n] = i.getAt(n);
                    for (n = 0; n < r.getLength(); n += 1) e[n] ^= w.gexp(w.glog(r.getAt(n)) + t);
                    return B(e, 0).mod(r)
                }
            };
        return i
    }
    var C, A, k = (C = [
            [1, 26, 19],
            [1, 26, 16],
            [1, 26, 13],
            [1, 26, 9],
            [1, 44, 34],
            [1, 44, 28],
            [1, 44, 22],
            [1, 44, 16],
            [1, 70, 55],
            [1, 70, 44],
            [2, 35, 17],
            [2, 35, 13],
            [1, 100, 80],
            [2, 50, 32],
            [2, 50, 24],
            [4, 25, 9],
            [1, 134, 108],
            [2, 67, 43],
            [2, 33, 15, 2, 34, 16],
            [2, 33, 11, 2, 34, 12],
            [2, 86, 68],
            [4, 43, 27],
            [4, 43, 19],
            [4, 43, 15],
            [2, 98, 78],
            [4, 49, 31],
            [2, 32, 14, 4, 33, 15],
            [4, 39, 13, 1, 40, 14],
            [2, 121, 97],
            [2, 60, 38, 2, 61, 39],
            [4, 40, 18, 2, 41, 19],
            [4, 40, 14, 2, 41, 15],
            [2, 146, 116],
            [3, 58, 36, 2, 59, 37],
            [4, 36, 16, 4, 37, 17],
            [4, 36, 12, 4, 37, 13],
            [2, 86, 68, 2, 87, 69],
            [4, 69, 43, 1, 70, 44],
            [6, 43, 19, 2, 44, 20],
            [6, 43, 15, 2, 44, 16],
            [4, 101, 81],
            [1, 80, 50, 4, 81, 51],
            [4, 50, 22, 4, 51, 23],
            [3, 36, 12, 8, 37, 13],
            [2, 116, 92, 2, 117, 93],
            [6, 58, 36, 2, 59, 37],
            [4, 46, 20, 6, 47, 21],
            [7, 42, 14, 4, 43, 15],
            [4, 133, 107],
            [8, 59, 37, 1, 60, 38],
            [8, 44, 20, 4, 45, 21],
            [12, 33, 11, 4, 34, 12],
            [3, 145, 115, 1, 146, 116],
            [4, 64, 40, 5, 65, 41],
            [11, 36, 16, 5, 37, 17],
            [11, 36, 12, 5, 37, 13],
            [5, 109, 87, 1, 110, 88],
            [5, 65, 41, 5, 66, 42],
            [5, 54, 24, 7, 55, 25],
            [11, 36, 12, 7, 37, 13],
            [5, 122, 98, 1, 123, 99],
            [7, 73, 45, 3, 74, 46],
            [15, 43, 19, 2, 44, 20],
            [3, 45, 15, 13, 46, 16],
            [1, 135, 107, 5, 136, 108],
            [10, 74, 46, 1, 75, 47],
            [1, 50, 22, 15, 51, 23],
            [2, 42, 14, 17, 43, 15],
            [5, 150, 120, 1, 151, 121],
            [9, 69, 43, 4, 70, 44],
            [17, 50, 22, 1, 51, 23],
            [2, 42, 14, 19, 43, 15],
            [3, 141, 113, 4, 142, 114],
            [3, 70, 44, 11, 71, 45],
            [17, 47, 21, 4, 48, 22],
            [9, 39, 13, 16, 40, 14],
            [3, 135, 107, 5, 136, 108],
            [3, 67, 41, 13, 68, 42],
            [15, 54, 24, 5, 55, 25],
            [15, 43, 15, 10, 44, 16],
            [4, 144, 116, 4, 145, 117],
            [17, 68, 42],
            [17, 50, 22, 6, 51, 23],
            [19, 46, 16, 6, 47, 17],
            [2, 139, 111, 7, 140, 112],
            [17, 74, 46],
            [7, 54, 24, 16, 55, 25],
            [34, 37, 13],
            [4, 151, 121, 5, 152, 122],
            [4, 75, 47, 14, 76, 48],
            [11, 54, 24, 14, 55, 25],
            [16, 45, 15, 14, 46, 16],
            [6, 147, 117, 4, 148, 118],
            [6, 73, 45, 14, 74, 46],
            [11, 54, 24, 16, 55, 25],
            [30, 46, 16, 2, 47, 17],
            [8, 132, 106, 4, 133, 107],
            [8, 75, 47, 13, 76, 48],
            [7, 54, 24, 22, 55, 25],
            [22, 45, 15, 13, 46, 16],
            [10, 142, 114, 2, 143, 115],
            [19, 74, 46, 4, 75, 47],
            [28, 50, 22, 6, 51, 23],
            [33, 46, 16, 4, 47, 17],
            [8, 152, 122, 4, 153, 123],
            [22, 73, 45, 3, 74, 46],
            [8, 53, 23, 26, 54, 24],
            [12, 45, 15, 28, 46, 16],
            [3, 147, 117, 10, 148, 118],
            [3, 73, 45, 23, 74, 46],
            [4, 54, 24, 31, 55, 25],
            [11, 45, 15, 31, 46, 16],
            [7, 146, 116, 7, 147, 117],
            [21, 73, 45, 7, 74, 46],
            [1, 53, 23, 37, 54, 24],
            [19, 45, 15, 26, 46, 16],
            [5, 145, 115, 10, 146, 116],
            [19, 75, 47, 10, 76, 48],
            [15, 54, 24, 25, 55, 25],
            [23, 45, 15, 25, 46, 16],
            [13, 145, 115, 3, 146, 116],
            [2, 74, 46, 29, 75, 47],
            [42, 54, 24, 1, 55, 25],
            [23, 45, 15, 28, 46, 16],
            [17, 145, 115],
            [10, 74, 46, 23, 75, 47],
            [10, 54, 24, 35, 55, 25],
            [19, 45, 15, 35, 46, 16],
            [17, 145, 115, 1, 146, 116],
            [14, 74, 46, 21, 75, 47],
            [29, 54, 24, 19, 55, 25],
            [11, 45, 15, 46, 46, 16],
            [13, 145, 115, 6, 146, 116],
            [14, 74, 46, 23, 75, 47],
            [44, 54, 24, 7, 55, 25],
            [59, 46, 16, 1, 47, 17],
            [12, 151, 121, 7, 152, 122],
            [12, 75, 47, 26, 76, 48],
            [39, 54, 24, 14, 55, 25],
            [22, 45, 15, 41, 46, 16],
            [6, 151, 121, 14, 152, 122],
            [6, 75, 47, 34, 76, 48],
            [46, 54, 24, 10, 55, 25],
            [2, 45, 15, 64, 46, 16],
            [17, 152, 122, 4, 153, 123],
            [29, 74, 46, 14, 75, 47],
            [49, 54, 24, 10, 55, 25],
            [24, 45, 15, 46, 46, 16],
            [4, 152, 122, 18, 153, 123],
            [13, 74, 46, 32, 75, 47],
            [48, 54, 24, 14, 55, 25],
            [42, 45, 15, 32, 46, 16],
            [20, 147, 117, 4, 148, 118],
            [40, 75, 47, 7, 76, 48],
            [43, 54, 24, 22, 55, 25],
            [10, 45, 15, 67, 46, 16],
            [19, 148, 118, 6, 149, 119],
            [18, 75, 47, 31, 76, 48],
            [34, 54, 24, 34, 55, 25],
            [20, 45, 15, 61, 46, 16]
        ], (A = {}).getRSBlocks = function(r, t) {
            var e = function(r, t) {
                switch (t) {
                    case p.L:
                        return C[4 * (r - 1) + 0];
                    case p.M:
                        return C[4 * (r - 1) + 1];
                    case p.Q:
                        return C[4 * (r - 1) + 2];
                    case p.H:
                        return C[4 * (r - 1) + 3];
                    default:
                        return
                }
            }(r, t);
            if (void 0 === e) throw "bad rs block @ typeNumber:" + r + "/errorCorrectionLevel:" + t;
            for (var n, o, i = e.length / 3, u = [], a = 0; a < i; a += 1)
                for (var f = e[3 * a + 0], g = e[3 * a + 1], c = e[3 * a + 2], h = 0; h < f; h += 1) u.push((n = c, o = void 0, (o = {}).totalCount = g, o.dataCount = n, o));
            return u
        }, A),
        m = function() {
            var e = [],
                n = 0,
                o = {
                    getBuffer: function() {
                        return e
                    },
                    getAt: function(r) {
                        var t = Math.floor(r / 8);
                        return 1 == (e[t] >>> 7 - r % 8 & 1)
                    },
                    put: function(r, t) {
                        for (var e = 0; e < t; e += 1) o.putBit(1 == (r >>> t - e - 1 & 1))
                    },
                    getLengthInBits: function() {
                        return n
                    },
                    putBit: function(r) {
                        var t = Math.floor(n / 8);
                        e.length <= t && e.push(0), r && (e[t] |= 128 >>> n % 8), n += 1
                    }
                };
            return o
        },
        L = function(r) {
            var t = u,
                n = r,
                e = {
                    getMode: function() {
                        return t
                    },
                    getLength: function(r) {
                        return n.length
                    },
                    write: function(r) {
                        for (var t = n, e = 0; e + 2 < t.length;) r.put(o(t.substring(e, e + 3)), 10), e += 3;
                        e < t.length && (t.length - e == 1 ? r.put(o(t.substring(e, e + 1)), 4) : t.length - e == 2 && r.put(o(t.substring(e, e + 2)), 7))
                    }
                },
                o = function(r) {
                    for (var t = 0, e = 0; e < r.length; e += 1) t = 10 * t + i(r.charAt(e));
                    return t
                },
                i = function(r) {
                    if ("0" <= r && r <= "9") return r.charCodeAt(0) - "0".charCodeAt(0);
                    throw "illegal char :" + r
                };
            return e
        },
        M = function(r) {
            var t = a,
                n = r,
                e = {
                    getMode: function() {
                        return t
                    },
                    getLength: function(r) {
                        return n.length
                    },
                    write: function(r) {
                        for (var t = n, e = 0; e + 1 < t.length;) r.put(45 * o(t.charAt(e)) + o(t.charAt(e + 1)), 11), e += 2;
                        e < t.length && r.put(o(t.charAt(e)), 6)
                    }
                },
                o = function(r) {
                    if ("0" <= r && r <= "9") return r.charCodeAt(0) - "0".charCodeAt(0);
                    if ("A" <= r && r <= "Z") return r.charCodeAt(0) - "A".charCodeAt(0) + 10;
                    switch (r) {
                        case " ":
                            return 36;
                        case "$":
                            return 37;
                        case "%":
                            return 38;
                        case "*":
                            return 39;
                        case "+":
                            return 40;
                        case "-":
                            return 41;
                        case ".":
                            return 42;
                        case "/":
                            return 43;
                        case ":":
                            return 44;
                        default:
                            throw "illegal char :" + r
                    }
                };
            return e
        },
        b = function(r) {
            var t = o,
                e = i.stringToBytes(r),
                n = {
                    getMode: function() {
                        return t
                    },
                    getLength: function(r) {
                        return e.length
                    },
                    write: function(r) {
                        for (var t = 0; t < e.length; t += 1) r.put(e[t], 8)
                    }
                };
            return n
        },
        x = function(r) {
            var t = f,
                n = i.stringToBytesFuncs.SJIS;
            if (!n) throw "sjis not supported.";
            ! function(r, t) {
                var e = n("");
                if (2 != e.length || 38726 != (e[0] << 8 | e[1])) throw "sjis not supported."
            }();
            var o = n(r),
                e = {
                    getMode: function() {
                        return t
                    },
                    getLength: function(r) {
                        return ~~(o.length / 2)
                    },
                    write: function(r) {
                        for (var t = o, e = 0; e + 1 < t.length;) {
                            var n = (255 & t[e]) << 8 | 255 & t[e + 1];
                            if (33088 <= n && n <= 40956) n -= 33088;
                            else {
                                if (!(57408 <= n && n <= 60351)) throw "illegal char at " + (e + 1) + "/" + n;
                                n -= 49472
                            }
                            n = 192 * (n >>> 8 & 255) + (255 & n), r.put(n, 13), e += 2
                        }
                        if (e < t.length) throw "illegal char at " + (e + 1)
                    }
                };
            return e
        },
        S = function() {
            var e = [],
                o = {
                    writeByte: function(r) {
                        e.push(255 & r)
                    },
                    writeShort: function(r) {
                        o.writeByte(r), o.writeByte(r >>> 8)
                    },
                    writeBytes: function(r, t, e) {
                        t = t || 0, e = e || r.length;
                        for (var n = 0; n < e; n += 1) o.writeByte(r[n + t])
                    },
                    writeString: function(r) {
                        for (var t = 0; t < r.length; t += 1) o.writeByte(r.charCodeAt(t))
                    },
                    toByteArray: function() {
                        return e
                    },
                    toString: function() {
                        var r = "";
                        r += "[";
                        for (var t = 0; t < e.length; t += 1) 0 < t && (r += ","), r += e[t];
                        return r += "]"
                    }
                };
            return o
        },
        D = function(r) {
            var e = r,
                n = 0,
                o = 0,
                i = 0,
                t = {
                    read: function() {
                        for (; i < 8;) {
                            if (n >= e.length) {
                                if (0 == i) return -1;
                                throw "unexpected end of file./" + i
                            }
                            var r = e.charAt(n);
                            if (n += 1, "=" == r) return i = 0, -1;
                            r.match(/^\s$/) || (o = o << 6 | u(r.charCodeAt(0)), i += 6)
                        }
                        var t = o >>> i - 8 & 255;
                        return i -= 8, t
                    }
                },
                u = function(r) {
                    if (65 <= r && r <= 90) return r - 65;
                    if (97 <= r && r <= 122) return r - 97 + 26;
                    if (48 <= r && r <= 57) return r - 48 + 52;
                    if (43 == r) return 62;
                    if (47 == r) return 63;
                    throw "c:" + r
                };
            return t
        },
        I = function(r, t, e, n) {
            for (var o, i, u, a, v, f, g, d, c = (u = o = r, a = i = t, v = new Array(o * i), f = {
                    setPixel: function(r, t, e) {
                        v[t * u + r] = e
                    },
                    write: function(r) {
                        r.writeString("GIF87a"), r.writeShort(u), r.writeShort(a), r.writeByte(128), r.writeByte(0), r.writeByte(0), r.writeByte(0), r.writeByte(0), r.writeByte(0), r.writeByte(255), r.writeByte(255), r.writeByte(255), r.writeString(","), r.writeShort(0), r.writeShort(0), r.writeShort(u), r.writeShort(a), r.writeByte(0);
                        var t = g(2);
                        r.writeByte(2);
                        for (var e = 0; 255 < t.length - e;) r.writeByte(255), r.writeBytes(t, e, 255), e += 255;
                        r.writeByte(t.length - e), r.writeBytes(t, e, t.length - e), r.writeByte(0), r.writeString(";")
                    }
                }, g = function(r) {
                    for (var t = 1 << r, e = 1 + (1 << r), n = r + 1, o = d(), i = 0; i < t; i += 1) o.add(String.fromCharCode(i));
                    o.add(String.fromCharCode(t)), o.add(String.fromCharCode(e));
                    var u, a, f, g = S(),
                        c = (u = g, f = a = 0, {
                            write: function(r, t) {
                                if (r >>> t != 0) throw "length over";
                                for (; 8 <= a + t;) u.writeByte(255 & (r << a | f)), t -= 8 - a, r >>>= 8 - a, a = f = 0;
                                f |= r << a, a += t
                            },
                            flush: function() {
                                0 < a && u.writeByte(f)
                            }
                        });
                    c.write(t, n);
                    var h = 0,
                        s = String.fromCharCode(v[h]);
                    for (h += 1; h < v.length;) {
                        var l = String.fromCharCode(v[h]);
                        h += 1, o.contains(s + l) ? s += l : (c.write(o.indexOf(s), n), o.size() < 4095 && (o.size() == 1 << n && (n += 1), o.add(s + l)), s = l)
                    }
                    return c.write(o.indexOf(s), n), c.write(e, n), c.flush(), g.toByteArray()
                }, d = function() {
                    var t = {},
                        e = 0,
                        n = {
                            add: function(r) {
                                if (n.contains(r)) throw "dup key:" + r;
                                t[r] = e, e += 1
                            },
                            size: function() {
                                return e
                            },
                            indexOf: function(r) {
                                return t[r]
                            },
                            contains: function(r) {
                                return void 0 !== t[r]
                            }
                        };
                    return n
                }, f), h = 0; h < t; h += 1)
                for (var s = 0; s < r; s += 1) c.setPixel(s, h, e(s, h));
            var l = S();
            c.write(l);
            for (var w, p, y, B, C, A, k, m = (y = p = w = 0, B = "", A = function(r) {
                    B += String.fromCharCode(k(63 & r))
                }, k = function(r) {
                    if (r < 0);
                    else {
                        if (r < 26) return 65 + r;
                        if (r < 52) return r - 26 + 97;
                        if (r < 62) return r - 52 + 48;
                        if (62 == r) return 43;
                        if (63 == r) return 47
                    }
                    throw "n:" + r
                }, (C = {}).writeByte = function(r) {
                    for (w = w << 8 | 255 & r, p += 8, y += 1; 6 <= p;) A(w >>> p - 6), p -= 6
                }, C.flush = function() {
                    if (0 < p && (A(w << 6 - p), p = w = 0), y % 3 != 0)
                        for (var r = 3 - y % 3, t = 0; t < r; t += 1) B += "="
                }, C.toString = function() {
                    return B
                }, C), L = l.toByteArray(), M = 0; M < L.length; M += 1) m.writeByte(L[M]);
            m.flush();
            var b = "";
            return b += "<img", b += ' src="', b += "data:image/gif;base64,", b += m, b += '"', b += ' width="', b += r, b += '"', b += ' height="', b += t, b += '"', n && (b += ' alt="', b += n, b += '"'), b += "/>"
        };
    return i
}();
qrcode.stringToBytesFuncs["UTF-8"] = function(r) {
        return function(r) {
            for (var t = [], e = 0; e < r.length; e++) {
                var n = r.charCodeAt(e);
                n < 128 ? t.push(n) : n < 2048 ? t.push(192 | n >> 6, 128 | 63 & n) : n < 55296 || 57344 <= n ? t.push(224 | n >> 12, 128 | n >> 6 & 63, 128 | 63 & n) : (e++, n = 65536 + ((1023 & n) << 10 | 1023 & r.charCodeAt(e)), t.push(240 | n >> 18, 128 | n >> 12 & 63, 128 | n >> 6 & 63, 128 | 63 & n))
            }
            return t
        }(r)
    },
    function(r) {
        "function" == typeof define && define.amd ? define([], r) : "object" == typeof exports && (module.exports = r())
    }(function() {
        return qrcode
    });
/* Spectrum Colorpicker v1.8.0 */
(function(factory) {
    if (typeof define === "function" && define.amd) define(["jquery"], factory);
    else if (typeof exports == "object" && typeof module == "object") module.exports = factory(require("jquery"));
    else factory(jQuery)
})(function($, undefined) {
    var defaultOpts = {
            beforeShow: noop,
            move: noop,
            change: noop,
            show: noop,
            hide: noop,
            color: false,
            flat: false,
            showInput: false,
            allowEmpty: false,
            showButtons: true,
            clickoutFiresChange: true,
            showInitial: false,
            showPalette: false,
            showPaletteOnly: false,
            hideAfterPaletteSelect: false,
            togglePaletteOnly: false,
            showSelectionPalette: true,
            localStorageKey: false,
            appendTo: "body",
            maxSelectionSize: 7,
            cancelText: "cancel",
            chooseText: "choose",
            togglePaletteMoreText: "more",
            togglePaletteLessText: "less",
            clearText: "Clear Color Selection",
            noColorSelectedText: "No Color Selected",
            preferredFormat: false,
            className: "",
            containerClassName: "",
            replacerClassName: "",
            showAlpha: false,
            theme: "sp-light",
            palette: [
                ["#ffffff", "#000000", "#ff0000", "#ff8000", "#ffff00", "#008000", "#0000ff", "#4b0082", "#9400d3"]
            ],
            selectionPalette: [],
            disabled: false,
            offset: null
        },
        spectrums = [],
        IE = !!/msie/i.exec(window.navigator.userAgent),
        rgbaSupport = function() {
            function contains(str, substr) {
                return !!~("" + str).indexOf(substr)
            }
            var elem = document.createElement("div");
            var style = elem.style;
            style.cssText = "background-color:rgba(0,0,0,.5)";
            return contains(style.backgroundColor, "rgba") || contains(style.backgroundColor, "hsla")
        }(),
        replaceInput = ["<div class='sp-replacer'>", "<div class='sp-preview'><div class='sp-preview-inner'></div></div>", "<div class='sp-dd'>&#9660;</div>",
            "</div>"
        ].join(""),
        markup = function() {
            var gradientFix = "";
            if (IE)
                for (var i = 1; i <= 6; i++) gradientFix += "<div class='sp-" + i + "'></div>";
            return ["<div class='sp-container sp-hidden'>", "<div class='sp-palette-container'>", "<div class='sp-palette sp-thumb sp-cf'></div>", "<div class='sp-palette-button-container sp-cf'>", "<button type='button' class='sp-palette-toggle'></button>", "</div>", "</div>", "<div class='sp-picker-container'>", "<div class='sp-top sp-cf'>", "<div class='sp-fill'></div>", "<div class='sp-top-inner'>",
                "<div class='sp-color'>", "<div class='sp-sat'>", "<div class='sp-val'>", "<div class='sp-dragger'></div>", "</div>", "</div>", "</div>", "<div class='sp-clear sp-clear-display'>", "</div>", "<div class='sp-hue'>", "<div class='sp-slider'></div>", gradientFix, "</div>", "</div>", "<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>", "</div>", "<div class='sp-input-container sp-cf'>", "<input class='sp-input' type='text' spellcheck='false'  />", "</div>", "<div class='sp-initial sp-thumb sp-cf'></div>",
                "<div class='sp-button-container sp-cf'>", "<a class='sp-cancel' href='#'></a>", "<button type='button' class='sp-choose'></button>", "</div>", "</div>", "</div>"
            ].join("")
        }();

    function paletteTemplate(p, color, className, opts) {
        var html = [];
        for (var i = 0; i < p.length; i++) {
            var current = p[i];
            if (current) {
                var tiny = tinycolor(current);
                var c = tiny.toHsl().l < .5 ? "sp-thumb-el sp-thumb-dark" : "sp-thumb-el sp-thumb-light";
                c += tinycolor.equals(color, current) ? " sp-thumb-active" : "";
                var formattedString = tiny.toString(opts.preferredFormat ||
                    "rgb");
                var swatchStyle = rgbaSupport ? "background-color:" + tiny.toRgbString() : "filter:" + tiny.toFilter();
                html.push('<span title="' + formattedString + '" data-color="' + tiny.toRgbString() + '" class="' + c + '"><span class="sp-thumb-inner" style="' + swatchStyle + ';" /></span>')
            } else {
                var cls = "sp-clear-display";
                html.push($("<div />").append($('<span data-color="" style="background-color:transparent;" class="' + cls + '"></span>').attr("title", opts.noColorSelectedText)).html())
            }
        }
        return "<div class='sp-cf " + className + "'>" +
            html.join("") + "</div>"
    }

    function hideAll() {
        for (var i = 0; i < spectrums.length; i++)
            if (spectrums[i]) spectrums[i].hide()
    }

    function instanceOptions(o, callbackContext) {
        var opts = $.extend({}, defaultOpts, o);
        opts.callbacks = {
            "move": bind(opts.move, callbackContext),
            "change": bind(opts.change, callbackContext),
            "show": bind(opts.show, callbackContext),
            "hide": bind(opts.hide, callbackContext),
            "beforeShow": bind(opts.beforeShow, callbackContext)
        };
        return opts
    }

    function spectrum(element, o) {
        var opts = instanceOptions(o, element),
            flat =
            opts.flat,
            showSelectionPalette = opts.showSelectionPalette,
            localStorageKey = opts.localStorageKey,
            theme = opts.theme,
            callbacks = opts.callbacks,
            resize = throttle(reflow, 10),
            visible = false,
            isDragging = false,
            dragWidth = 0,
            dragHeight = 0,
            dragHelperHeight = 0,
            slideHeight = 0,
            slideWidth = 0,
            alphaWidth = 0,
            alphaSlideHelperWidth = 0,
            slideHelperHeight = 0,
            currentHue = 0,
            currentSaturation = 0,
            currentValue = 0,
            currentAlpha = 1,
            palette = [],
            paletteArray = [],
            paletteLookup = {},
            selectionPalette = opts.selectionPalette.slice(0),
            maxSelectionSize = opts.maxSelectionSize,
            draggingClass = "sp-dragging",
            shiftMovementDirection = null;
        var doc = element.ownerDocument,
            body = doc.body,
            boundElement = $(element),
            disabled = false,
            container = $(markup, doc).addClass(theme),
            pickerContainer = container.find(".sp-picker-container"),
            dragger = container.find(".sp-color"),
            dragHelper = container.find(".sp-dragger"),
            slider = container.find(".sp-hue"),
            slideHelper = container.find(".sp-slider"),
            alphaSliderInner = container.find(".sp-alpha-inner"),
            alphaSlider = container.find(".sp-alpha"),
            alphaSlideHelper = container.find(".sp-alpha-handle"),
            textInput = container.find(".sp-input"),
            paletteContainer = container.find(".sp-palette"),
            initialColorContainer = container.find(".sp-initial"),
            cancelButton = container.find(".sp-cancel"),
            clearButton = container.find(".sp-clear"),
            chooseButton = container.find(".sp-choose"),
            toggleButton = container.find(".sp-palette-toggle"),
            isInput = boundElement.is("input"),
            isInputTypeColor = isInput && boundElement.attr("type") === "color" && inputTypeColorSupport(),
            shouldReplace = isInput && !flat,
            replacer = shouldReplace ? $(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName) :
            $([]),
            offsetElement = shouldReplace ? replacer : boundElement,
            previewElement = replacer.find(".sp-preview-inner"),
            initialColor = opts.color || isInput && boundElement.val(),
            colorOnShow = false,
            currentPreferredFormat = opts.preferredFormat,
            clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,
            isEmpty = !initialColor,
            allowEmpty = opts.allowEmpty && !isInputTypeColor;

        function applyOptions() {
            if (opts.showPaletteOnly) opts.showPalette = true;
            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);
            if (opts.palette) {
                palette = opts.palette.slice(0);
                paletteArray = $.isArray(palette[0]) ? palette : [palette];
                paletteLookup = {};
                for (var i = 0; i < paletteArray.length; i++)
                    for (var j = 0; j < paletteArray[i].length; j++) {
                        var rgb = tinycolor(paletteArray[i][j]).toRgbString();
                        paletteLookup[rgb] = true
                    }
            }
            container.toggleClass("sp-flat", flat);
            container.toggleClass("sp-input-disabled", !opts.showInput);
            container.toggleClass("sp-alpha-enabled", opts.showAlpha);
            container.toggleClass("sp-clear-enabled", allowEmpty);
            container.toggleClass("sp-buttons-disabled",
                !opts.showButtons);
            container.toggleClass("sp-palette-buttons-disabled", !opts.togglePaletteOnly);
            container.toggleClass("sp-palette-disabled", !opts.showPalette);
            container.toggleClass("sp-palette-only", opts.showPaletteOnly);
            container.toggleClass("sp-initial-disabled", !opts.showInitial);
            container.addClass(opts.className).addClass(opts.containerClassName);
            reflow()
        }

        function initialize() {
            if (IE) container.find("*:not(input)").attr("unselectable", "on");
            applyOptions();
            if (shouldReplace) boundElement.after(replacer).hide();
            if (!allowEmpty) clearButton.hide();
            if (flat) boundElement.after(container).hide();
            else {
                var appendTo = opts.appendTo === "parent" ? boundElement.parent() : $(opts.appendTo);
                if (appendTo.length !== 1) appendTo = $("body");
                appendTo.append(container)
            }
            updateSelectionPaletteFromStorage();
            offsetElement.bind("click.spectrum touchstart.spectrum", function(e) {
                if (!disabled) toggle();
                e.stopPropagation();
                if (!$(e.target).is("input")) e.preventDefault()
            });
            if (boundElement.is(":disabled") || opts.disabled === true) disable();
            container.click(stopPropagation);
            textInput.change(setFromTextInput);
            textInput.bind("paste", function() {
                setTimeout(setFromTextInput, 1)
            });
            textInput.keydown(function(e) {
                if (e.keyCode == 13) setFromTextInput()
            });
            cancelButton.text(opts.cancelText);
            cancelButton.bind("click.spectrum", function(e) {
                e.stopPropagation();
                e.preventDefault();
                revert();
                hide()
            });
            clearButton.attr("title", opts.clearText);
            clearButton.bind("click.spectrum", function(e) {
                e.stopPropagation();
                e.preventDefault();
                isEmpty = true;
                move();
                if (flat) updateOriginalInput(true)
            });
            chooseButton.text(opts.chooseText);
            chooseButton.bind("click.spectrum", function(e) {
                e.stopPropagation();
                e.preventDefault();
                if (IE && textInput.is(":focus")) textInput.trigger("change");
                if (isValid()) {
                    updateOriginalInput(true);
                    hide()
                }
            });
            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);
            toggleButton.bind("click.spectrum", function(e) {
                e.stopPropagation();
                e.preventDefault();
                opts.showPaletteOnly = !opts.showPaletteOnly;
                if (!opts.showPaletteOnly && !flat) container.css("left", "-=" + (pickerContainer.outerWidth(true) +
                    5));
                applyOptions()
            });
            draggable(alphaSlider, function(dragX, dragY, e) {
                currentAlpha = dragX / alphaWidth;
                isEmpty = false;
                if (e.shiftKey) currentAlpha = Math.round(currentAlpha * 10) / 10;
                move()
            }, dragStart, dragStop);
            draggable(slider, function(dragX, dragY) {
                currentHue = parseFloat(dragY / slideHeight);
                isEmpty = false;
                if (!opts.showAlpha) currentAlpha = 1;
                move()
            }, dragStart, dragStop);
            draggable(dragger, function(dragX, dragY, e) {
                    if (!e.shiftKey) shiftMovementDirection = null;
                    else if (!shiftMovementDirection) {
                        var oldDragX = currentSaturation *
                            dragWidth;
                        var oldDragY = dragHeight - currentValue * dragHeight;
                        var furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);
                        shiftMovementDirection = furtherFromX ? "x" : "y"
                    }
                    var setSaturation = !shiftMovementDirection || shiftMovementDirection === "x";
                    var setValue = !shiftMovementDirection || shiftMovementDirection === "y";
                    if (setSaturation) currentSaturation = parseFloat(dragX / dragWidth);
                    if (setValue) currentValue = parseFloat((dragHeight - dragY) / dragHeight);
                    isEmpty = false;
                    if (!opts.showAlpha) currentAlpha = 1;
                    move()
                }, dragStart,
                dragStop);
            if (!!initialColor) {
                set(initialColor);
                updateUI();
                currentPreferredFormat = opts.preferredFormat || tinycolor(initialColor).format;
                addColorToSelectionPalette(initialColor)
            } else updateUI();
            if (flat) show();

            function paletteElementClick(e) {
                if (e.data && e.data.ignore) {
                    set($(e.target).closest(".sp-thumb-el").data("color"));
                    move()
                } else {
                    set($(e.target).closest(".sp-thumb-el").data("color"));
                    move();
                    updateOriginalInput(true);
                    if (opts.hideAfterPaletteSelect) hide()
                }
                return false
            }
            var paletteEvent = IE ? "mousedown.spectrum" :
                "click.spectrum touchstart.spectrum";
            paletteContainer.delegate(".sp-thumb-el", paletteEvent, paletteElementClick);
            initialColorContainer.delegate(".sp-thumb-el:nth-child(1)", paletteEvent, {
                ignore: true
            }, paletteElementClick)
        }

        function updateSelectionPaletteFromStorage() {
            if (localStorageKey && window.localStorage) {
                try {
                    var oldPalette = window.localStorage[localStorageKey].split(",#");
                    if (oldPalette.length > 1) {
                        delete window.localStorage[localStorageKey];
                        $.each(oldPalette, function(i, c) {
                            addColorToSelectionPalette(c)
                        })
                    }
                } catch (e) {}
                try {
                    selectionPalette =
                        window.localStorage[localStorageKey].split(";")
                } catch (e$0) {}
            }
        }

        function addColorToSelectionPalette(color) {
            if (showSelectionPalette) {
                var rgb = tinycolor(color).toRgbString();
                if (!paletteLookup[rgb] && $.inArray(rgb, selectionPalette) === -1) {
                    selectionPalette.push(rgb);
                    while (selectionPalette.length > maxSelectionSize) selectionPalette.shift()
                }
                if (localStorageKey && window.localStorage) try {
                    window.localStorage[localStorageKey] = selectionPalette.join(";")
                } catch (e) {}
            }
        }

        function getUniqueSelectionPalette() {
            var unique = [];
            if (opts.showPalette)
                for (var i = 0; i < selectionPalette.length; i++) {
                    var rgb = tinycolor(selectionPalette[i]).toRgbString();
                    if (!paletteLookup[rgb]) unique.push(selectionPalette[i])
                }
            return unique.reverse().slice(0, opts.maxSelectionSize)
        }

        function drawPalette() {
            var currentColor = get();
            var html = $.map(paletteArray, function(palette, i) {
                return paletteTemplate(palette, currentColor, "sp-palette-row sp-palette-row-" + i, opts)
            });
            updateSelectionPaletteFromStorage();
            if (selectionPalette) html.push(paletteTemplate(getUniqueSelectionPalette(),
                currentColor, "sp-palette-row sp-palette-row-selection", opts));
            paletteContainer.html(html.join(""))
        }

        function drawInitial() {
            if (opts.showInitial) {
                var initial = colorOnShow;
                var current = get();
                initialColorContainer.html(paletteTemplate([initial, current], current, "sp-palette-row-initial", opts))
            }
        }

        function dragStart() {
            if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) reflow();
            isDragging = true;
            container.addClass(draggingClass);
            shiftMovementDirection = null;
            boundElement.trigger("dragstart.spectrum", [get()])
        }

        function dragStop() {
            isDragging =
                false;
            container.removeClass(draggingClass);
            boundElement.trigger("dragstop.spectrum", [get()])
        }

        function setFromTextInput() {
            var value = textInput.val();
            if ((value === null || value === "") && allowEmpty) {
                set(null);
                updateOriginalInput(true)
            } else {
                var tiny = tinycolor(value);
                if (tiny.isValid()) {
                    set(tiny);
                    updateOriginalInput(true)
                } else textInput.addClass("sp-validation-error")
            }
        }

        function toggle() {
            if (visible) hide();
            else show()
        }

        function show() {
            var event = $.Event("beforeShow.spectrum");
            if (visible) {
                reflow();
                return
            }
            boundElement.trigger(event,
                [get()]);
            if (callbacks.beforeShow(get()) === false || event.isDefaultPrevented()) return;
            hideAll();
            visible = true;
            $(doc).bind("keydown.spectrum", onkeydown);
            $(doc).bind("click.spectrum", clickout);
            $(window).bind("resize.spectrum", resize);
            replacer.addClass("sp-active");
            container.removeClass("sp-hidden");
            reflow();
            updateUI();
            colorOnShow = get();
            drawInitial();
            callbacks.show(colorOnShow);
            boundElement.trigger("show.spectrum", [colorOnShow])
        }

        function onkeydown(e) {
            if (e.keyCode === 27) hide()
        }

        function clickout(e) {
            if (e.button ==
                2) return;
            if (isDragging) return;
            if (clickoutFiresChange) updateOriginalInput(true);
            else revert();
            hide()
        }

        function hide() {
            if (!visible || flat) return;
            visible = false;
            $(doc).unbind("keydown.spectrum", onkeydown);
            $(doc).unbind("click.spectrum", clickout);
            $(window).unbind("resize.spectrum", resize);
            replacer.removeClass("sp-active");
            container.addClass("sp-hidden");
            callbacks.hide(get());
            boundElement.trigger("hide.spectrum", [get()])
        }

        function revert() {
            set(colorOnShow, true)
        }

        function set(color, ignoreFormatChange) {
            if (tinycolor.equals(color,
                    get())) {
                updateUI();
                return
            }
            var newColor, newHsv;
            if (!color && allowEmpty) isEmpty = true;
            else {
                isEmpty = false;
                newColor = tinycolor(color);
                newHsv = newColor.toHsv();
                currentHue = newHsv.h % 360 / 360;
                currentSaturation = newHsv.s;
                currentValue = newHsv.v;
                currentAlpha = newHsv.a
            }
            updateUI();
            if (newColor && newColor.isValid() && !ignoreFormatChange) currentPreferredFormat = opts.preferredFormat || newColor.getFormat()
        }

        function get(opts) {
            opts = opts || {};
            if (allowEmpty && isEmpty) return null;
            return tinycolor.fromRatio({
                h: currentHue,
                s: currentSaturation,
                v: currentValue,
                a: Math.round(currentAlpha * 100) / 100
            }, {
                format: opts.format || currentPreferredFormat
            })
        }

        function isValid() {
            return !textInput.hasClass("sp-validation-error")
        }

        function move() {
            updateUI();
            callbacks.move(get());
            boundElement.trigger("move.spectrum", [get()])
        }

        function updateUI() {
            textInput.removeClass("sp-validation-error");
            updateHelperLocations();
            var flatColor = tinycolor.fromRatio({
                h: currentHue,
                s: 1,
                v: 1
            });
            dragger.css("background-color", flatColor.toHexString());
            var format = currentPreferredFormat;
            if (currentAlpha <
                1 && !(currentAlpha === 0 && format === "name"))
                if (format === "hex" || format === "hex3" || format === "hex6" || format === "name") format = "rgb";
            var realColor = get({
                    format: format
                }),
                displayColor = "";
            previewElement.removeClass("sp-clear-display");
            previewElement.css("background-color", "transparent");
            if (!realColor && allowEmpty) previewElement.addClass("sp-clear-display");
            else {
                var realHex = realColor.toHexString(),
                    realRgb = realColor.toRgbString();
                if (rgbaSupport || realColor.alpha === 1) previewElement.css("background-color", realRgb);
                else {
                    previewElement.css("background-color",
                        "transparent");
                    previewElement.css("filter", realColor.toFilter())
                }
                if (opts.showAlpha) {
                    var rgb = realColor.toRgb();
                    rgb.a = 0;
                    var realAlpha = tinycolor(rgb).toRgbString();
                    var gradient = "linear-gradient(left, " + realAlpha + ", " + realHex + ")";
                    if (IE) alphaSliderInner.css("filter", tinycolor(realAlpha).toFilter({
                        gradientType: 1
                    }, realHex));
                    else {
                        alphaSliderInner.css("background", "-webkit-" + gradient);
                        alphaSliderInner.css("background", "-moz-" + gradient);
                        alphaSliderInner.css("background", "-ms-" + gradient);
                        alphaSliderInner.css("background",
                            "linear-gradient(to right, " + realAlpha + ", " + realHex + ")")
                    }
                }
                displayColor = realColor.toString(format)
            }
            if (opts.showInput) textInput.val(displayColor);
            if (opts.showPalette) drawPalette();
            drawInitial()
        }

        function updateHelperLocations() {
            var s = currentSaturation;
            var v = currentValue;
            if (allowEmpty && isEmpty) {
                alphaSlideHelper.hide();
                slideHelper.hide();
                dragHelper.hide()
            } else {
                alphaSlideHelper.show();
                slideHelper.show();
                dragHelper.show();
                var dragX = s * dragWidth;
                var dragY = dragHeight - v * dragHeight;
                dragX = Math.max(-dragHelperHeight,
                    Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight));
                dragY = Math.max(-dragHelperHeight, Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight));
                dragHelper.css({
                    "top": dragY + "px",
                    "left": dragX + "px"
                });
                var alphaX = currentAlpha * alphaWidth;
                alphaSlideHelper.css({
                    "left": alphaX - alphaSlideHelperWidth / 2 + "px"
                });
                var slideY = currentHue * slideHeight;
                slideHelper.css({
                    "top": slideY - slideHelperHeight + "px"
                })
            }
        }

        function updateOriginalInput(fireCallback) {
            var color = get(),
                displayColor = "",
                hasChanged = !tinycolor.equals(color,
                    colorOnShow);
            if (color) {
                displayColor = color.toString(currentPreferredFormat);
                addColorToSelectionPalette(color)
            }
            if (isInput) boundElement.val(displayColor);
            if (fireCallback && hasChanged) {
                callbacks.change(color);
                boundElement.trigger("change", [color])
            }
        }

        function reflow() {
            if (!visible) return;
            dragWidth = dragger.width();
            dragHeight = dragger.height();
            dragHelperHeight = dragHelper.height();
            slideWidth = slider.width();
            slideHeight = slider.height();
            slideHelperHeight = slideHelper.height();
            alphaWidth = alphaSlider.width();
            alphaSlideHelperWidth =
                alphaSlideHelper.width();
            if (!flat) {
                container.css("position", "absolute");
                if (opts.offset) container.offset(opts.offset);
                else container.offset(getOffset(container, offsetElement))
            }
            updateHelperLocations();
            if (opts.showPalette) drawPalette();
            boundElement.trigger("reflow.spectrum")
        }

        function destroy() {
            boundElement.show();
            offsetElement.unbind("click.spectrum touchstart.spectrum");
            container.remove();
            replacer.remove();
            spectrums[spect.id] = null
        }

        function option(optionName, optionValue) {
            if (optionName === undefined) return $.extend({},
                opts);
            if (optionValue === undefined) return opts[optionName];
            opts[optionName] = optionValue;
            if (optionName === "preferredFormat") currentPreferredFormat = opts.preferredFormat;
            applyOptions()
        }

        function enable() {
            disabled = false;
            boundElement.attr("disabled", false);
            offsetElement.removeClass("sp-disabled")
        }

        function disable() {
            hide();
            disabled = true;
            boundElement.attr("disabled", true);
            offsetElement.addClass("sp-disabled")
        }

        function setOffset(coord) {
            opts.offset = coord;
            reflow()
        }
        initialize();
        var spect = {
            show: show,
            hide: hide,
            toggle: toggle,
            reflow: reflow,
            option: option,
            enable: enable,
            disable: disable,
            offset: setOffset,
            set: function(c) {
                set(c);
                updateOriginalInput()
            },
            get: get,
            destroy: destroy,
            container: container
        };
        spect.id = spectrums.push(spect) - 1;
        return spect
    }

    function getOffset(picker, input) {
        var extraY = 0;
        var dpWidth = picker.outerWidth();
        var dpHeight = picker.outerHeight();
        var inputHeight = input.outerHeight();
        var doc = picker[0].ownerDocument;
        var docElem = doc.documentElement;
        var viewWidth = docElem.clientWidth + $(doc).scrollLeft();
        var viewHeight = docElem.clientHeight +
            $(doc).scrollTop();
        var offset = input.offset();
        offset.top += inputHeight;
        offset.left -= Math.min(offset.left, offset.left + dpWidth > viewWidth && viewWidth > dpWidth ? Math.abs(offset.left + dpWidth - viewWidth) : 0);
        offset.top -= Math.min(offset.top, offset.top + dpHeight > viewHeight && viewHeight > dpHeight ? Math.abs(dpHeight + inputHeight - extraY) : extraY);
        return offset
    }

    function noop() {}

    function stopPropagation(e) {
        e.stopPropagation()
    }

    function bind(func, obj) {
        var slice = Array.prototype.slice;
        var args = slice.call(arguments, 2);
        return function() {
            return func.apply(obj,
                args.concat(slice.call(arguments)))
        }
    }

    function draggable(element, onmove, onstart, onstop) {
        onmove = onmove || function() {};
        onstart = onstart || function() {};
        onstop = onstop || function() {};
        var doc = document;
        var dragging = false;
        var offset = {};
        var maxHeight = 0;
        var maxWidth = 0;
        var hasTouch = "ontouchstart" in window;
        var duringDragEvents = {};
        duringDragEvents["selectstart"] = prevent;
        duringDragEvents["dragstart"] = prevent;
        duringDragEvents["touchmove mousemove"] = move;
        duringDragEvents["touchend mouseup"] = stop;

        function prevent(e) {
            if (e.stopPropagation) e.stopPropagation();
            if (e.preventDefault) e.preventDefault();
            e.returnValue = false
        }

        function move(e) {
            if (dragging) {
                if (IE && doc.documentMode < 9 && !e.button) return stop();
                var t0 = e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0];
                var pageX = t0 && t0.pageX || e.pageX;
                var pageY = t0 && t0.pageY || e.pageY;
                var dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));
                var dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));
                if (hasTouch) prevent(e);
                onmove.apply(element, [dragX, dragY, e])
            }
        }

        function start(e) {
            var rightclick = e.which ?
                e.which == 3 : e.button == 2;
            if (!rightclick && !dragging)
                if (onstart.apply(element, arguments) !== false) {
                    dragging = true;
                    maxHeight = $(element).height();
                    maxWidth = $(element).width();
                    offset = $(element).offset();
                    $(doc).bind(duringDragEvents);
                    $(doc.body).addClass("sp-dragging");
                    move(e);
                    prevent(e)
                }
        }

        function stop() {
            if (dragging) {
                $(doc).unbind(duringDragEvents);
                $(doc.body).removeClass("sp-dragging");
                setTimeout(function() {
                    onstop.apply(element, arguments)
                }, 0)
            }
            dragging = false
        }
        $(element).bind("touchstart mousedown", start)
    }

    function throttle(func,
        wait, debounce) {
        var timeout;
        return function() {
            var context = this,
                args = arguments;
            var throttler = function() {
                timeout = null;
                func.apply(context, args)
            };
            if (debounce) clearTimeout(timeout);
            if (debounce || !timeout) timeout = setTimeout(throttler, wait)
        }
    }

    function inputTypeColorSupport() {
        return $.fn.spectrum.inputTypeColorSupport()
    }
    var dataID = "spectrum.id";
    $.fn.spectrum = function(opts, extra) {
        if (typeof opts == "string") {
            var returnValue = this;
            var args = Array.prototype.slice.call(arguments, 1);
            this.each(function() {
                var spect = spectrums[$(this).data(dataID)];
                if (spect) {
                    var method = spect[opts];
                    if (!method) throw new Error("Spectrum: no such method: '" + opts + "'");
                    if (opts == "get") returnValue = spect.get();
                    else if (opts == "container") returnValue = spect.container;
                    else if (opts == "option") returnValue = spect.option.apply(spect, args);
                    else if (opts == "destroy") {
                        spect.destroy();
                        $(this).removeData(dataID)
                    } else method.apply(spect, args)
                }
            });
            return returnValue
        }
        return this.spectrum("destroy").each(function() {
            var options = $.extend({}, opts, $(this).data());
            var spect = spectrum(this, options);
            $(this).data(dataID, spect.id)
        })
    };
    $.fn.spectrum.load = true;
    $.fn.spectrum.loadOpts = {};
    $.fn.spectrum.draggable = draggable;
    $.fn.spectrum.defaults = defaultOpts;
    $.fn.spectrum.inputTypeColorSupport = function inputTypeColorSupport() {
        if (typeof inputTypeColorSupport._cachedResult === "undefined") {
            var colorInput = $("<input type='color'/>")[0];
            inputTypeColorSupport._cachedResult = colorInput.type === "color" && colorInput.value !== ""
        }
        return inputTypeColorSupport._cachedResult
    };
    $.spectrum = {};
    $.spectrum.localization = {};
    $.spectrum.palettes = {};
    $.fn.spectrum.processNativeColorInputs = function() {
        var colorInputs = $("input[type=color]");
        if (colorInputs.length && !inputTypeColorSupport()) colorInputs.spectrum({
            preferredFormat: "hex6"
        })
    };
    (function() {
        var trimLeft = /^[\s,#]+/,
            trimRight = /\s+$/,
            tinyCounter = 0,
            math = Math,
            mathRound = math.round,
            mathMin = math.min,
            mathMax = math.max,
            mathRandom = math.random;
        var tinycolor = function(color, opts) {
            color = color ? color : "";
            opts = opts || {};
            if (color instanceof tinycolor) return color;
            if (!(this instanceof tinycolor)) return new tinycolor(color,
                opts);
            var rgb = inputToRGB(color);
            this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, this._a = rgb.a, this._roundA = mathRound(100 * this._a) / 100, this._format = opts.format || rgb.format;
            this._gradientType = opts.gradientType;
            if (this._r < 1) this._r = mathRound(this._r);
            if (this._g < 1) this._g = mathRound(this._g);
            if (this._b < 1) this._b = mathRound(this._b);
            this._ok = rgb.ok;
            this._tc_id = tinyCounter++
        };
        tinycolor.prototype = {
            isDark: function() {
                return this.getBrightness() < 128
            },
            isLight: function() {
                return !this.isDark()
            },
            isValid: function() {
                return this._ok
            },
            getOriginalInput: function() {
                return this._originalInput
            },
            getFormat: function() {
                return this._format
            },
            getAlpha: function() {
                return this._a
            },
            getBrightness: function() {
                var rgb = this.toRgb();
                return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1E3
            },
            setAlpha: function(value) {
                this._a = boundAlpha(value);
                this._roundA = mathRound(100 * this._a) / 100;
                return this
            },
            toHsv: function() {
                var hsv = rgbToHsv(this._r, this._g, this._b);
                return {
                    h: hsv.h * 360,
                    s: hsv.s,
                    v: hsv.v,
                    a: this._a
                }
            },
            toHsvString: function() {
                var hsv = rgbToHsv(this._r,
                    this._g, this._b);
                var h = mathRound(hsv.h * 360),
                    s = mathRound(hsv.s * 100),
                    v = mathRound(hsv.v * 100);
                return this._a == 1 ? "hsv(" + h + ", " + s + "%, " + v + "%)" : "hsva(" + h + ", " + s + "%, " + v + "%, " + this._roundA + ")"
            },
            toHsl: function() {
                var hsl = rgbToHsl(this._r, this._g, this._b);
                return {
                    h: hsl.h * 360,
                    s: hsl.s,
                    l: hsl.l,
                    a: this._a
                }
            },
            toHslString: function() {
                var hsl = rgbToHsl(this._r, this._g, this._b);
                var h = mathRound(hsl.h * 360),
                    s = mathRound(hsl.s * 100),
                    l = mathRound(hsl.l * 100);
                return this._a == 1 ? "hsl(" + h + ", " + s + "%, " + l + "%)" : "hsla(" + h + ", " + s + "%, " + l +
                    "%, " + this._roundA + ")"
            },
            toHex: function(allow3Char) {
                return rgbToHex(this._r, this._g, this._b, allow3Char)
            },
            toHexString: function(allow3Char) {
                return "#" + this.toHex(allow3Char)
            },
            toHex8: function() {
                return rgbaToHex(this._r, this._g, this._b, this._a)
            },
            toHex8String: function() {
                return "#" + this.toHex8()
            },
            toRgb: function() {
                return {
                    r: mathRound(this._r),
                    g: mathRound(this._g),
                    b: mathRound(this._b),
                    a: this._a
                }
            },
            toRgbString: function() {
                return this._a == 1 ? "rgb(" + mathRound(this._r) + ", " + mathRound(this._g) + ", " + mathRound(this._b) +
                    ")" : "rgba(" + mathRound(this._r) + ", " + mathRound(this._g) + ", " + mathRound(this._b) + ", " + this._roundA + ")"
            },
            toPercentageRgb: function() {
                return {
                    r: mathRound(bound01(this._r, 255) * 100) + "%",
                    g: mathRound(bound01(this._g, 255) * 100) + "%",
                    b: mathRound(bound01(this._b, 255) * 100) + "%",
                    a: this._a
                }
            },
            toPercentageRgbString: function() {
                return this._a == 1 ? "rgb(" + mathRound(bound01(this._r, 255) * 100) + "%, " + mathRound(bound01(this._g, 255) * 100) + "%, " + mathRound(bound01(this._b, 255) * 100) + "%)" : "rgba(" + mathRound(bound01(this._r, 255) * 100) +
                    "%, " + mathRound(bound01(this._g, 255) * 100) + "%, " + mathRound(bound01(this._b, 255) * 100) + "%, " + this._roundA + ")"
            },
            toName: function() {
                if (this._a === 0) return "transparent";
                if (this._a < 1) return false;
                return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false
            },
            toFilter: function(secondColor) {
                var hex8String = "#" + rgbaToHex(this._r, this._g, this._b, this._a);
                var secondHex8String = hex8String;
                var gradientType = this._gradientType ? "GradientType = 1, " : "";
                if (secondColor) {
                    var s = tinycolor(secondColor);
                    secondHex8String = s.toHex8String()
                }
                return "progid:DXImageTransform.Microsoft.gradient(" +
                    gradientType + "startColorstr=" + hex8String + ",endColorstr=" + secondHex8String + ")"
            },
            toString: function(format) {
                var formatSet = !!format;
                format = format || this._format;
                var formattedString = false;
                var hasAlpha = this._a < 1 && this._a >= 0;
                var needsAlphaFormat = !formatSet && hasAlpha && (format === "hex" || format === "hex6" || format === "hex3" || format === "name");
                if (needsAlphaFormat) {
                    if (format === "name" && this._a === 0) return this.toName();
                    return this.toRgbString()
                }
                if (format === "rgb") formattedString = this.toRgbString();
                if (format === "prgb") formattedString =
                    this.toPercentageRgbString();
                if (format === "hex" || format === "hex6") formattedString = this.toHexString();
                if (format === "hex3") formattedString = this.toHexString(true);
                if (format === "hex8") formattedString = this.toHex8String();
                if (format === "name") formattedString = this.toName();
                if (format === "hsl") formattedString = this.toHslString();
                if (format === "hsv") formattedString = this.toHsvString();
                return formattedString || this.toHexString()
            },
            _applyModification: function(fn, args) {
                var color = fn.apply(null, [this].concat([].slice.call(args)));
                this._r = color._r;
                this._g = color._g;
                this._b = color._b;
                this.setAlpha(color._a);
                return this
            },
            lighten: function() {
                return this._applyModification(lighten, arguments)
            },
            brighten: function() {
                return this._applyModification(brighten, arguments)
            },
            darken: function() {
                return this._applyModification(darken, arguments)
            },
            desaturate: function() {
                return this._applyModification(desaturate, arguments)
            },
            saturate: function() {
                return this._applyModification(saturate, arguments)
            },
            greyscale: function() {
                return this._applyModification(greyscale,
                    arguments)
            },
            spin: function() {
                return this._applyModification(spin, arguments)
            },
            _applyCombination: function(fn, args) {
                return fn.apply(null, [this].concat([].slice.call(args)))
            },
            analogous: function() {
                return this._applyCombination(analogous, arguments)
            },
            complement: function() {
                return this._applyCombination(complement, arguments)
            },
            monochromatic: function() {
                return this._applyCombination(monochromatic, arguments)
            },
            splitcomplement: function() {
                return this._applyCombination(splitcomplement, arguments)
            },
            triad: function() {
                return this._applyCombination(triad,
                    arguments)
            },
            tetrad: function() {
                return this._applyCombination(tetrad, arguments)
            }
        };
        tinycolor.fromRatio = function(color, opts) {
            if (typeof color == "object") {
                var newColor = {};
                for (var i in color)
                    if (color.hasOwnProperty(i))
                        if (i === "a") newColor[i] = color[i];
                        else newColor[i] = convertToPercentage(color[i]);
                color = newColor
            }
            return tinycolor(color, opts)
        };

        function inputToRGB(color) {
            var rgb = {
                r: 0,
                g: 0,
                b: 0
            };
            var a = 1;
            var ok = false;
            var format = false;
            if (typeof color == "string") color = stringInputToObject(color);
            if (typeof color == "object") {
                if (color.hasOwnProperty("r") &&
                    color.hasOwnProperty("g") && color.hasOwnProperty("b")) {
                    rgb = rgbToRgb(color.r, color.g, color.b);
                    ok = true;
                    format = String(color.r).substr(-1) === "%" ? "prgb" : "rgb"
                } else if (color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("v")) {
                    color.s = convertToPercentage(color.s);
                    color.v = convertToPercentage(color.v);
                    rgb = hsvToRgb(color.h, color.s, color.v);
                    ok = true;
                    format = "hsv"
                } else if (color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("l")) {
                    color.s = convertToPercentage(color.s);
                    color.l = convertToPercentage(color.l);
                    rgb = hslToRgb(color.h, color.s, color.l);
                    ok = true;
                    format = "hsl"
                }
                if (color.hasOwnProperty("a")) a = color.a
            }
            a = boundAlpha(a);
            return {
                ok: ok,
                format: color.format || format,
                r: mathMin(255, mathMax(rgb.r, 0)),
                g: mathMin(255, mathMax(rgb.g, 0)),
                b: mathMin(255, mathMax(rgb.b, 0)),
                a: a
            }
        }

        function rgbToRgb(r, g, b) {
            return {
                r: bound01(r, 255) * 255,
                g: bound01(g, 255) * 255,
                b: bound01(b, 255) * 255
            }
        }

        function rgbToHsl(r, g, b) {
            r = bound01(r, 255);
            g = bound01(g, 255);
            b = bound01(b, 255);
            var max = mathMax(r, g, b),
                min = mathMin(r,
                    g, b);
            var h, s, l = (max + min) / 2;
            if (max == min) h = s = 0;
            else {
                var d = max - min;
                s = l > .5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r:
                        h = (g - b) / d + (g < b ? 6 : 0);
                        break;
                    case g:
                        h = (b - r) / d + 2;
                        break;
                    case b:
                        h = (r - g) / d + 4;
                        break
                }
                h /= 6
            }
            return {
                h: h,
                s: s,
                l: l
            }
        }

        function hslToRgb(h, s, l) {
            var r, g, b;
            h = bound01(h, 360);
            s = bound01(s, 100);
            l = bound01(l, 100);

            function hue2rgb(p, q, t) {
                if (t < 0) t += 1;
                if (t > 1) t -= 1;
                if (t < 1 / 6) return p + (q - p) * 6 * t;
                if (t < 1 / 2) return q;
                if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                return p
            }
            if (s === 0) r = g = b = l;
            else {
                var q = l < .5 ? l * (1 + s) : l + s - l * s;
                var p = 2 * l - q;
                r = hue2rgb(p, q, h + 1 / 3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1 / 3)
            }
            return {
                r: r * 255,
                g: g * 255,
                b: b * 255
            }
        }

        function rgbToHsv(r, g, b) {
            r = bound01(r, 255);
            g = bound01(g, 255);
            b = bound01(b, 255);
            var max = mathMax(r, g, b),
                min = mathMin(r, g, b);
            var h, s, v = max;
            var d = max - min;
            s = max === 0 ? 0 : d / max;
            if (max == min) h = 0;
            else {
                switch (max) {
                    case r:
                        h = (g - b) / d + (g < b ? 6 : 0);
                        break;
                    case g:
                        h = (b - r) / d + 2;
                        break;
                    case b:
                        h = (r - g) / d + 4;
                        break
                }
                h /= 6
            }
            return {
                h: h,
                s: s,
                v: v
            }
        }

        function hsvToRgb(h, s, v) {
            h = bound01(h, 360) * 6;
            s = bound01(s, 100);
            v = bound01(v, 100);
            var i = math.floor(h),
                f = h - i,
                p =
                v * (1 - s),
                q = v * (1 - f * s),
                t = v * (1 - (1 - f) * s),
                mod = i % 6,
                r = [v, q, p, p, t, v][mod],
                g = [t, v, v, q, p, p][mod],
                b = [p, p, t, v, v, q][mod];
            return {
                r: r * 255,
                g: g * 255,
                b: b * 255
            }
        }

        function rgbToHex(r, g, b, allow3Char) {
            var hex = [pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16))];
            if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);
            return hex.join("")
        }

        function rgbaToHex(r,
            g, b, a) {
            var hex = [pad2(convertDecimalToHex(a)), pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16))];
            return hex.join("")
        }
        tinycolor.equals = function(color1, color2) {
            if (!color1 || !color2) return false;
            return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString()
        };
        tinycolor.random = function() {
            return tinycolor.fromRatio({
                r: mathRandom(),
                g: mathRandom(),
                b: mathRandom()
            })
        };

        function desaturate(color, amount) {
            amount = amount === 0 ? 0 : amount || 10;
            var hsl = tinycolor(color).toHsl();
            hsl.s -= amount / 100;
            hsl.s = clamp01(hsl.s);
            return tinycolor(hsl)
        }

        function saturate(color, amount) {
            amount = amount === 0 ? 0 : amount || 10;
            var hsl = tinycolor(color).toHsl();
            hsl.s += amount / 100;
            hsl.s = clamp01(hsl.s);
            return tinycolor(hsl)
        }

        function greyscale(color) {
            return tinycolor(color).desaturate(100)
        }

        function lighten(color, amount) {
            amount = amount === 0 ? 0 : amount || 10;
            var hsl = tinycolor(color).toHsl();
            hsl.l += amount / 100;
            hsl.l = clamp01(hsl.l);
            return tinycolor(hsl)
        }

        function brighten(color, amount) {
            amount = amount === 0 ? 0 : amount || 10;
            var rgb = tinycolor(color).toRgb();
            rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * -(amount / 100))));
            rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * -(amount / 100))));
            rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * -(amount / 100))));
            return tinycolor(rgb)
        }

        function darken(color, amount) {
            amount = amount === 0 ? 0 : amount || 10;
            var hsl = tinycolor(color).toHsl();
            hsl.l -= amount / 100;
            hsl.l = clamp01(hsl.l);
            return tinycolor(hsl)
        }

        function spin(color, amount) {
            var hsl = tinycolor(color).toHsl();
            var hue = (mathRound(hsl.h) + amount) % 360;
            hsl.h = hue < 0 ? 360 + hue : hue;
            return tinycolor(hsl)
        }

        function complement(color) {
            var hsl = tinycolor(color).toHsl();
            hsl.h = (hsl.h + 180) % 360;
            return tinycolor(hsl)
        }

        function triad(color) {
            var hsl = tinycolor(color).toHsl();
            var h = hsl.h;
            return [tinycolor(color), tinycolor({
                h: (h + 120) % 360,
                s: hsl.s,
                l: hsl.l
            }), tinycolor({
                h: (h + 240) % 360,
                s: hsl.s,
                l: hsl.l
            })]
        }

        function tetrad(color) {
            var hsl = tinycolor(color).toHsl();
            var h = hsl.h;
            return [tinycolor(color), tinycolor({
                    h: (h + 90) % 360,
                    s: hsl.s,
                    l: hsl.l
                }), tinycolor({
                    h: (h + 180) % 360,
                    s: hsl.s,
                    l: hsl.l
                }),
                tinycolor({
                    h: (h + 270) % 360,
                    s: hsl.s,
                    l: hsl.l
                })
            ]
        }

        function splitcomplement(color) {
            var hsl = tinycolor(color).toHsl();
            var h = hsl.h;
            return [tinycolor(color), tinycolor({
                h: (h + 72) % 360,
                s: hsl.s,
                l: hsl.l
            }), tinycolor({
                h: (h + 216) % 360,
                s: hsl.s,
                l: hsl.l
            })]
        }

        function analogous(color, results, slices) {
            results = results || 6;
            slices = slices || 30;
            var hsl = tinycolor(color).toHsl();
            var part = 360 / slices;
            var ret = [tinycolor(color)];
            for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results;) {
                hsl.h = (hsl.h + part) % 360;
                ret.push(tinycolor(hsl))
            }
            return ret
        }

        function monochromatic(color, results) {
            results = results || 6;
            var hsv = tinycolor(color).toHsv();
            var h = hsv.h,
                s = hsv.s,
                v = hsv.v;
            var ret = [];
            var modification = 1 / results;
            while (results--) {
                ret.push(tinycolor({
                    h: h,
                    s: s,
                    v: v
                }));
                v = (v + modification) % 1
            }
            return ret
        }
        tinycolor.mix = function(color1, color2, amount) {
            amount = amount === 0 ? 0 : amount || 50;
            var rgb1 = tinycolor(color1).toRgb();
            var rgb2 = tinycolor(color2).toRgb();
            var p = amount / 100;
            var w = p * 2 - 1;
            var a = rgb2.a - rgb1.a;
            var w1;
            if (w * a == -1) w1 = w;
            else w1 = (w + a) / (1 + w * a);
            w1 = (w1 + 1) / 2;
            var w2 = 1 -
                w1;
            var rgba = {
                r: rgb2.r * w1 + rgb1.r * w2,
                g: rgb2.g * w1 + rgb1.g * w2,
                b: rgb2.b * w1 + rgb1.b * w2,
                a: rgb2.a * p + rgb1.a * (1 - p)
            };
            return tinycolor(rgba)
        };
        tinycolor.readability = function(color1, color2) {
            var c1 = tinycolor(color1);
            var c2 = tinycolor(color2);
            var rgb1 = c1.toRgb();
            var rgb2 = c2.toRgb();
            var brightnessA = c1.getBrightness();
            var brightnessB = c2.getBrightness();
            var colorDiff = Math.max(rgb1.r, rgb2.r) - Math.min(rgb1.r, rgb2.r) + Math.max(rgb1.g, rgb2.g) - Math.min(rgb1.g, rgb2.g) + Math.max(rgb1.b, rgb2.b) - Math.min(rgb1.b, rgb2.b);
            return {
                brightness: Math.abs(brightnessA -
                    brightnessB),
                color: colorDiff
            }
        };
        tinycolor.isReadable = function(color1, color2) {
            var readability = tinycolor.readability(color1, color2);
            return readability.brightness > 125 && readability.color > 500
        };
        tinycolor.mostReadable = function(baseColor, colorList) {
            var bestColor = null;
            var bestScore = 0;
            var bestIsReadable = false;
            for (var i = 0; i < colorList.length; i++) {
                var readability = tinycolor.readability(baseColor, colorList[i]);
                var readable = readability.brightness > 125 && readability.color > 500;
                var score = 3 * (readability.brightness / 125) +
                    readability.color / 500;
                if (readable && !bestIsReadable || readable && bestIsReadable && score > bestScore || !readable && !bestIsReadable && score > bestScore) {
                    bestIsReadable = readable;
                    bestScore = score;
                    bestColor = tinycolor(colorList[i])
                }
            }
            return bestColor
        };
        var names = tinycolor.names = {
            aliceblue: "f0f8ff",
            antiquewhite: "faebd7",
            aqua: "0ff",
            aquamarine: "7fffd4",
            azure: "f0ffff",
            beige: "f5f5dc",
            bisque: "ffe4c4",
            black: "000",
            blanchedalmond: "ffebcd",
            blue: "00f",
            blueviolet: "8a2be2",
            brown: "a52a2a",
            burlywood: "deb887",
            burntsienna: "ea7e5d",
            cadetblue: "5f9ea0",
            chartreuse: "7fff00",
            chocolate: "d2691e",
            coral: "ff7f50",
            cornflowerblue: "6495ed",
            cornsilk: "fff8dc",
            crimson: "dc143c",
            cyan: "0ff",
            darkblue: "00008b",
            darkcyan: "008b8b",
            darkgoldenrod: "b8860b",
            darkgray: "a9a9a9",
            darkgreen: "006400",
            darkgrey: "a9a9a9",
            darkkhaki: "bdb76b",
            darkmagenta: "8b008b",
            darkolivegreen: "556b2f",
            darkorange: "ff8c00",
            darkorchid: "9932cc",
            darkred: "8b0000",
            darksalmon: "e9967a",
            darkseagreen: "8fbc8f",
            darkslateblue: "483d8b",
            darkslategray: "2f4f4f",
            darkslategrey: "2f4f4f",
            darkturquoise: "00ced1",
            darkviolet: "9400d3",
            deeppink: "ff1493",
            deepskyblue: "00bfff",
            dimgray: "696969",
            dimgrey: "696969",
            dodgerblue: "1e90ff",
            firebrick: "b22222",
            floralwhite: "fffaf0",
            forestgreen: "228b22",
            fuchsia: "f0f",
            gainsboro: "dcdcdc",
            ghostwhite: "f8f8ff",
            gold: "ffd700",
            goldenrod: "daa520",
            gray: "808080",
            green: "008000",
            greenyellow: "adff2f",
            grey: "808080",
            honeydew: "f0fff0",
            hotpink: "ff69b4",
            indianred: "cd5c5c",
            indigo: "4b0082",
            ivory: "fffff0",
            khaki: "f0e68c",
            lavender: "e6e6fa",
            lavenderblush: "fff0f5",
            lawngreen: "7cfc00",
            lemonchiffon: "fffacd",
            lightblue: "add8e6",
            lightcoral: "f08080",
            lightcyan: "e0ffff",
            lightgoldenrodyellow: "fafad2",
            lightgray: "d3d3d3",
            lightgreen: "90ee90",
            lightgrey: "d3d3d3",
            lightpink: "ffb6c1",
            lightsalmon: "ffa07a",
            lightseagreen: "20b2aa",
            lightskyblue: "87cefa",
            lightslategray: "789",
            lightslategrey: "789",
            lightsteelblue: "b0c4de",
            lightyellow: "ffffe0",
            lime: "0f0",
            limegreen: "32cd32",
            linen: "faf0e6",
            magenta: "f0f",
            maroon: "800000",
            mediumaquamarine: "66cdaa",
            mediumblue: "0000cd",
            mediumorchid: "ba55d3",
            mediumpurple: "9370db",
            mediumseagreen: "3cb371",
            mediumslateblue: "7b68ee",
            mediumspringgreen: "00fa9a",
            mediumturquoise: "48d1cc",
            mediumvioletred: "c71585",
            midnightblue: "191970",
            mintcream: "f5fffa",
            mistyrose: "ffe4e1",
            moccasin: "ffe4b5",
            navajowhite: "ffdead",
            navy: "000080",
            oldlace: "fdf5e6",
            olive: "808000",
            olivedrab: "6b8e23",
            orange: "ffa500",
            orangered: "ff4500",
            orchid: "da70d6",
            palegoldenrod: "eee8aa",
            palegreen: "98fb98",
            paleturquoise: "afeeee",
            palevioletred: "db7093",
            papayawhip: "ffefd5",
            peachpuff: "ffdab9",
            peru: "cd853f",
            pink: "ffc0cb",
            plum: "dda0dd",
            powderblue: "b0e0e6",
            purple: "800080",
            rebeccapurple: "663399",
            red: "f00",
            rosybrown: "bc8f8f",
            royalblue: "4169e1",
            saddlebrown: "8b4513",
            salmon: "fa8072",
            sandybrown: "f4a460",
            seagreen: "2e8b57",
            seashell: "fff5ee",
            sienna: "a0522d",
            silver: "c0c0c0",
            skyblue: "87ceeb",
            slateblue: "6a5acd",
            slategray: "708090",
            slategrey: "708090",
            snow: "fffafa",
            springgreen: "00ff7f",
            steelblue: "4682b4",
            tan: "d2b48c",
            teal: "008080",
            thistle: "d8bfd8",
            tomato: "ff6347",
            turquoise: "40e0d0",
            violet: "ee82ee",
            wheat: "f5deb3",
            white: "fff",
            whitesmoke: "f5f5f5",
            yellow: "ff0",
            yellowgreen: "9acd32"
        };
        var hexNames = tinycolor.hexNames =
            flip(names);

        function flip(o) {
            var flipped = {};
            for (var i in o)
                if (o.hasOwnProperty(i)) flipped[o[i]] = i;
            return flipped
        }

        function boundAlpha(a) {
            a = parseFloat(a);
            if (isNaN(a) || a < 0 || a > 1) a = 1;
            return a
        }

        function bound01(n, max) {
            if (isOnePointZero(n)) n = "100%";
            var processPercent = isPercentage(n);
            n = mathMin(max, mathMax(0, parseFloat(n)));
            if (processPercent) n = parseInt(n * max, 10) / 100;
            if (math.abs(n - max) < 1E-6) return 1;
            return n % max / parseFloat(max)
        }

        function clamp01(val) {
            return mathMin(1, mathMax(0, val))
        }

        function parseIntFromHex(val) {
            return parseInt(val,
                16)
        }

        function isOnePointZero(n) {
            return typeof n == "string" && n.indexOf(".") != -1 && parseFloat(n) === 1
        }

        function isPercentage(n) {
            return typeof n === "string" && n.indexOf("%") != -1
        }

        function pad2(c) {
            return c.length == 1 ? "0" + c : "" + c
        }

        function convertToPercentage(n) {
            if (n <= 1) n = n * 100 + "%";
            return n
        }

        function convertDecimalToHex(d) {
            return Math.round(parseFloat(d) * 255).toString(16)
        }

        function convertHexToDecimal(h) {
            return parseIntFromHex(h) / 255
        }
        var matchers = function() {
            var CSS_INTEGER = "[-\\+]?\\d+%?";
            var CSS_NUMBER = "[-\\+]?\\d*\\.\\d+%?";
            var CSS_UNIT = "(?:" + CSS_NUMBER + ")|(?:" + CSS_INTEGER + ")";
            var PERMISSIVE_MATCH3 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?";
            var PERMISSIVE_MATCH4 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?";
            return {
                rgb: new RegExp("rgb" + PERMISSIVE_MATCH3),
                rgba: new RegExp("rgba" + PERMISSIVE_MATCH4),
                hsl: new RegExp("hsl" + PERMISSIVE_MATCH3),
                hsla: new RegExp("hsla" + PERMISSIVE_MATCH4),
                hsv: new RegExp("hsv" + PERMISSIVE_MATCH3),
                hsva: new RegExp("hsva" +
                    PERMISSIVE_MATCH4),
                hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
                hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
                hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
            }
        }();

        function stringInputToObject(color) {
            color = color.replace(trimLeft, "").replace(trimRight, "").toLowerCase();
            var named = false;
            if (names[color]) {
                color = names[color];
                named = true
            } else if (color == "transparent") return {
                r: 0,
                g: 0,
                b: 0,
                a: 0,
                format: "name"
            };
            var match;
            if (match = matchers.rgb.exec(color)) return {
                r: match[1],
                g: match[2],
                b: match[3]
            };
            if (match = matchers.rgba.exec(color)) return {
                r: match[1],
                g: match[2],
                b: match[3],
                a: match[4]
            };
            if (match = matchers.hsl.exec(color)) return {
                h: match[1],
                s: match[2],
                l: match[3]
            };
            if (match = matchers.hsla.exec(color)) return {
                h: match[1],
                s: match[2],
                l: match[3],
                a: match[4]
            };
            if (match = matchers.hsv.exec(color)) return {
                h: match[1],
                s: match[2],
                v: match[3]
            };
            if (match = matchers.hsva.exec(color)) return {
                h: match[1],
                s: match[2],
                v: match[3],
                a: match[4]
            };
            if (match = matchers.hex8.exec(color)) return {
                a: convertHexToDecimal(match[1]),
                r: parseIntFromHex(match[2]),
                g: parseIntFromHex(match[3]),
                b: parseIntFromHex(match[4]),
                format: named ? "name" : "hex8"
            };
            if (match = matchers.hex6.exec(color)) return {
                r: parseIntFromHex(match[1]),
                g: parseIntFromHex(match[2]),
                b: parseIntFromHex(match[3]),
                format: named ? "name" : "hex"
            };
            if (match = matchers.hex3.exec(color)) return {
                r: parseIntFromHex(match[1] + "" + match[1]),
                g: parseIntFromHex(match[2] + "" + match[2]),
                b: parseIntFromHex(match[3] + "" + match[3]),
                format: named ? "name" : "hex"
            };
            return false
        }
        window.tinycolor = tinycolor
    })();
    $(function() {
        if ($.fn.spectrum.load) $.fn.spectrum.processNativeColorInputs()
    })
});
/*! JsBarcode v3.6.0 | (c) Johan Lindell | MIT license */
! function(t) {
    function e(r) {
        if (n[r]) return n[r].exports;
        var o = n[r] = {
            i: r,
            l: !1,
            exports: {}
        };
        return t[r].call(o.exports, o, o.exports, e), o.l = !0, o.exports
    }
    var n = {};
    return e.m = t, e.c = n, e.i = function(t) {
        return t
    }, e.d = function(t, e, n) {
        Object.defineProperty(t, e, {
            configurable: !1,
            enumerable: !0,
            get: n
        })
    }, e.n = function(t) {
        var n = t && t.__esModule ? function() {
            return t["default"]
        } : function() {
            return t
        };
        return e.d(n, "a", n), n
    }, e.o = function(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e)
    }, e.p = "", e(e.s = 42)
}([function(t, e) {
    "use strict";

    function n(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = function o(t, e) {
        n(this, o), this.data = t, this.text = e.text || t, this.options = e
    };
    e["default"] = r
}, function(t, e) {
    "use strict";

    function n(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = function() {
        function t() {
            n(this, t), this.startBin = "101", this.endBin = "101", this.middleBin = "01010", this.Lbinary = ["0001101", "0011001", "0010011", "0111101", "0100011", "0110001", "0101111", "0111011", "0110111", "0001011"], this.Gbinary = ["0100111", "0110011", "0011011", "0100001", "0011101", "0111001", "0000101", "0010001", "0001001", "0010111"], this.Rbinary = ["1110010", "1100110", "1101100", "1000010", "1011100", "1001110", "1010000", "1000100", "1001000", "1110100"]
        }
        return t.prototype.encode = function(t, e, n) {
            var r = "";
            n = n || "";
            for (var o = 0; o < t.length; o++) "L" == e[o] ? r += this.Lbinary[t[o]] : "G" == e[o] ? r += this.Gbinary[t[o]] : "R" == e[o] && (r += this.Rbinary[t[o]]), o < t.length - 1 && (r += n);
            return r
        }, t
    }();
    e["default"] = r
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }

    function u(t, e) {
        for (var n = 0; n < e; n++) t = "0" + t;
        return t
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = n(0),
        c = r(s),
        f = function(t) {
            function e(n, r) {
                return o(this, e), i(this, t.call(this, n, r))
            }
            return a(e, t), e.prototype.encode = function() {
                for (var t = "110", e = 0; e < this.data.length; e++) {
                    var n = parseInt(this.data[e]),
                        r = n.toString(2);
                    r = u(r, 4 - r.length);
                    for (var o = 0; o < r.length; o++) t += "0" == r[o] ? "100" : "110"
                }
                return t += "1001", {
                    data: t,
                    text: this.text
                }
            }, e.prototype.valid = function() {
                return this.data.search(/^[0-9]+$/) !== -1
            }, e
        }(c["default"]);
    e["default"] = f
}, function(t, e) {
    "use strict";

    function n(t, e) {
        var n, r = {};
        for (n in t) t.hasOwnProperty(n) && (r[n] = t[n]);
        for (n in e) e.hasOwnProperty(n) && "undefined" != typeof e[n] && (r[n] = e[n]);
        return r
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e["default"] = n
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(0),
        s = r(u),
        c = function(t) {
            function e(n, r) {
                o(this, e);
                var a = i(this, t.call(this, n.substring(1), r));
                a.bytes = [];
                for (var u = 0; u < n.length; ++u) a.bytes.push(n.charCodeAt(u));
                return a.encodings = [740, 644, 638, 176, 164, 100, 224, 220, 124, 608, 604, 572, 436, 244, 230, 484, 260, 254, 650, 628, 614, 764, 652, 902, 868, 836, 830, 892, 844, 842, 752, 734, 590, 304, 112, 94, 416, 128, 122, 672, 576, 570, 464, 422, 134, 496, 478, 142, 910, 678, 582, 768, 762, 774, 880, 862, 814, 896, 890, 818, 914, 602, 930, 328, 292, 200, 158, 68, 62, 424, 412, 232, 218, 76, 74, 554, 616, 978, 556, 146, 340, 212, 182, 508, 268, 266, 956, 940, 938, 758, 782, 974, 400, 310, 118, 512, 506, 960, 954, 502, 518, 886, 966, 668, 680, 692, 5379], a
            }
            return a(e, t), e.prototype.encode = function() {
                var t, e = this.bytes,
                    n = e.shift() - 105;
                if (103 === n) t = this.nextA(e, 1);
                else if (104 === n) t = this.nextB(e, 1);
                else {
                    if (105 !== n) throw new f;
                    t = this.nextC(e, 1)
                }
                return {
                    text: this.text == this.data ? this.text.replace(/[^\x20-\x7E]/g, "") : this.text,
                    data: this.getEncoding(n) + t.result + this.getEncoding((t.checksum + n) % 103) + this.getEncoding(106)
                }
            }, e.prototype.getEncoding = function(t) {
                return this.encodings[t] ? (this.encodings[t] + 1e3).toString(2) : ""
            }, e.prototype.valid = function() {
                return this.data.search(/^[\x00-\x7F\xC8-\xD3]+$/) !== -1
            }, e.prototype.nextA = function(t, e) {
                if (t.length <= 0) return {
                    result: "",
                    checksum: 0
                };
                var n, r;
                if (t[0] >= 200) r = t[0] - 105, t.shift(), 99 === r ? n = this.nextC(t, e + 1) : 100 === r ? n = this.nextB(t, e + 1) : 98 === r ? (t[0] = t[0] > 95 ? t[0] - 96 : t[0], n = this.nextA(t, e + 1)) : n = this.nextA(t, e + 1);
                else {
                    var o = t[0];
                    r = o < 32 ? o + 64 : o - 32, t.shift(), n = this.nextA(t, e + 1)
                }
                var i = this.getEncoding(r),
                    a = r * e;
                return {
                    result: i + n.result,
                    checksum: a + n.checksum
                }
            }, e.prototype.nextB = function(t, e) {
                if (t.length <= 0) return {
                    result: "",
                    checksum: 0
                };
                var n, r;
                t[0] >= 200 ? (r = t[0] - 105, t.shift(), 99 === r ? n = this.nextC(t, e + 1) : 101 === r ? n = this.nextA(t, e + 1) : 98 === r ? (t[0] = t[0] < 32 ? t[0] + 96 : t[0], n = this.nextB(t, e + 1)) : n = this.nextB(t, e + 1)) : (r = t[0] - 32, t.shift(), n = this.nextB(t, e + 1));
                var o = this.getEncoding(r),
                    i = r * e;
                return {
                    result: o + n.result,
                    checksum: i + n.checksum
                }
            }, e.prototype.nextC = function(t, e) {
                if (t.length <= 0) return {
                    result: "",
                    checksum: 0
                };
                var n, r;
                t[0] >= 200 ? (r = t[0] - 105, t.shift(), n = 100 === r ? this.nextB(t, e + 1) : 101 === r ? this.nextA(t, e + 1) : this.nextC(t, e + 1)) : (r = 10 * (t[0] - 48) + t[1] - 48, t.shift(), t.shift(), n = this.nextC(t, e + 1));
                var o = this.getEncoding(r),
                    i = r * e;
                return {
                    result: o + n.result,
                    checksum: i + n.checksum
                }
            }, e
        }(s["default"]),
        f = function(t) {
            function e() {
                o(this, e);
                var n = i(this, t.call(this));
                return n.name = "InvalidStartCharacterException", n.message = "The encoding does not start with a start character.", n
            }
            return a(e, t), e
        }(Error);
    e["default"] = c
}, function(t, e) {
    "use strict";

    function n(t) {
        for (var e = 0, n = 0; n < t.length; n++) {
            var r = parseInt(t[n]);
            e += (n + t.length) % 2 === 0 ? r : 2 * r % 10 + Math.floor(2 * r / 10)
        }
        return (10 - e % 10) % 10
    }

    function r(t) {
        for (var e = 0, n = [2, 3, 4, 5, 6, 7], r = 0; r < t.length; r++) {
            var o = parseInt(t[t.length - 1 - r]);
            e += n[r % n.length] * o
        }
        return (11 - e % 11) % 11
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.mod10 = n, e.mod11 = r
}, function(t, e) {
    "use strict";

    function n(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function r(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function(t) {
            function e(o, i) {
                n(this, e);
                var a = r(this, t.call(this));
                return a.name = "InvalidInputException", a.symbology = o, a.input = i, a.message = '"' + a.input + '" is not a valid input for ' + a.symbology, a
            }
            return o(e, t), e
        }(Error),
        a = function(t) {
            function e() {
                n(this, e);
                var o = r(this, t.call(this));
                return o.name = "InvalidElementException", o.message = "Not supported type to render on", o
            }
            return o(e, t), e
        }(Error),
        u = function(t) {
            function e() {
                n(this, e);
                var o = r(this, t.call(this));
                return o.name = "NoElementException", o.message = "No element to render on.", o
            }
            return o(e, t), e
        }(Error);
    e.InvalidInputException = i, e.InvalidElementException = a, e.NoElementException = u
}, function(t, e) {
    "use strict";

    function n(t) {
        var e = ["width", "height", "textMargin", "fontSize", "margin", "marginTop", "marginBottom", "marginLeft", "marginRight"];
        for (var n in e) e.hasOwnProperty(n) && (n = e[n], "string" == typeof t[n] && (t[n] = parseInt(t[n], 10)));
        return "string" == typeof t.displayValue && (t.displayValue = "false" != t.displayValue), t
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e["default"] = n
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var n = {
        width: 2,
        height: 100,
        format: "auto",
        displayValue: !0,
        fontOptions: "",
        font: "monospace",
        text: void 0,
        textAlign: "center",
        textPosition: "bottom",
        textMargin: 2,
        fontSize: 20,
        background: "#ffffff",
        lineColor: "#000000",
        margin: 10,
        marginTop: void 0,
        marginBottom: void 0,
        marginLeft: void 0,
        marginRight: void 0,
        valid: function() {}
    };
    e["default"] = n
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        return e.height + (e.displayValue && t.text.length > 0 ? e.fontSize + e.textMargin : 0) + e.marginTop + e.marginBottom
    }

    function i(t, e, n) {
        if (n.displayValue && e < t) {
            if ("center" == n.textAlign) return Math.floor((t - e) / 2);
            if ("left" == n.textAlign) return 0;
            if ("right" == n.textAlign) return Math.floor(t - e)
        }
        return 0
    }

    function a(t, e, n) {
        for (var r = 0; r < t.length; r++) {
            var a, u = t[r],
                s = (0, l["default"])(e, u.options);
            a = s.displayValue ? c(u.text, s, n) : 0;
            var f = u.data.length * s.width;
            u.width = Math.ceil(Math.max(a, f)), u.height = o(u, s), u.barcodePadding = i(a, f, s)
        }
    }

    function u(t) {
        for (var e = 0, n = 0; n < t.length; n++) e += t[n].width;
        return e
    }

    function s(t) {
        for (var e = 0, n = 0; n < t.length; n++) t[n].height > e && (e = t[n].height);
        return e
    }

    function c(t, e, n) {
        var r;
        r = "undefined" == typeof n ? document.createElement("canvas").getContext("2d") : n, r.font = e.fontOptions + " " + e.fontSize + "px " + e.font;
        var o = r.measureText(t).width;
        return o
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.getTotalWidthOfEncodings = e.calculateEncodingAttributes = e.getBarcodePadding = e.getEncodingHeight = e.getMaximumHeightOfEncodings = void 0;
    var f = n(3),
        l = r(f);
    e.getMaximumHeightOfEncodings = s, e.getEncodingHeight = o, e.getBarcodePadding = i, e.calculateEncodingAttributes = a, e.getTotalWidthOfEncodings = u
}, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(20),
        o = n(19),
        i = n(26),
        a = n(29),
        u = n(28),
        s = n(34),
        c = n(36),
        f = n(35),
        l = n(27);
    e["default"] = {
        CODE39: r.CODE39,
        CODE128: o.CODE128,
        CODE128A: o.CODE128A,
        CODE128B: o.CODE128B,
        CODE128C: o.CODE128C,
        EAN13: i.EAN13,
        EAN8: i.EAN8,
        EAN5: i.EAN5,
        EAN2: i.EAN2,
        UPC: i.UPC,
        ITF14: a.ITF14,
        ITF: u.ITF,
        MSI: s.MSI,
        MSI10: s.MSI10,
        MSI11: s.MSI11,
        MSI1010: s.MSI1010,
        MSI1110: s.MSI1110,
        pharmacode: c.pharmacode,
        codabar: f.codabar,
        GenericBarcode: l.GenericBarcode
    }
}, function(t, e) {
    "use strict";

    function n(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = function() {
        function t(e) {
            n(this, t), this.api = e
        }
        return t.prototype.handleCatch = function(t) {
            if ("InvalidInputException" !== t.name) throw t;
            if (this.api._options.valid === this.api._defaults.valid) throw t.message;
            this.api._options.valid(!1), this.api.render = function() {}
        }, t.prototype.wrapBarcodeCall = function(t) {
            try {
                var e = t.apply(void 0, arguments);
                return this.api._options.valid(!0), e
            } catch (n) {
                return this.handleCatch(n), this.api
            }
        }, t
    }();
    e["default"] = r
}, function(t, e) {
    "use strict";

    function n(t) {
        return t.marginTop = t.marginTop || t.margin, t.marginBottom = t.marginBottom || t.margin, t.marginRight = t.marginRight || t.margin, t.marginLeft = t.marginLeft || t.margin, t
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e["default"] = n
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t) {
        if ("string" == typeof t) return i(t);
        if (Array.isArray(t)) {
            for (var e = [], n = 0; n < t.length; n++) e.push(o(t[n]));
            return e
        }
        if ("undefined" != typeof HTMLCanvasElement && t instanceof HTMLImageElement) return a(t);
        if ("undefined" != typeof SVGElement && t instanceof SVGElement) return {
            element: t,
            options: (0, c["default"])(t),
            renderer: l["default"].SVGRenderer
        };
        if ("undefined" != typeof HTMLCanvasElement && t instanceof HTMLCanvasElement) return {
            element: t,
            options: (0, c["default"])(t),
            renderer: l["default"].CanvasRenderer
        };
        if (t && t.getContext) return {
            element: t,
            renderer: l["default"].CanvasRenderer
        };
        if (t && "object" === ("undefined" == typeof t ? "undefined" : u(t)) && !t.nodeName) return {
            element: t,
            renderer: l["default"].ObjectRenderer
        };
        throw new p.InvalidElementException
    }

    function i(t) {
        var e = document.querySelectorAll(t);
        if (0 !== e.length) {
            for (var n = [], r = 0; r < e.length; r++) n.push(o(e[r]));
            return n
        }
    }

    function a(t) {
        var e = document.createElement("canvas");
        return {
            element: e,
            options: (0, c["default"])(t),
            renderer: l["default"].CanvasRenderer,
            afterRender: function() {
                t.setAttribute("src", e.toDataURL())
            }
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol ? "symbol" : typeof t
        },
        s = n(37),
        c = r(s),
        f = n(39),
        l = r(f),
        p = n(6);
    e["default"] = o
}, function(t, e) {
    "use strict";

    function n(t) {
        function e(t) {
            if (Array.isArray(t))
                for (var r = 0; r < t.length; r++) e(t[r]);
            else t.text = t.text || "", t.data = t.data || "", n.push(t)
        }
        var n = [];
        return e(t), n
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e["default"] = n
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(4),
        s = r(u),
        c = function(t) {
            function e(n, r) {
                return o(this, e), i(this, t.call(this, String.fromCharCode(208) + n, r))
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^[\x00-\x5F\xC8-\xCF]+$/) !== -1
            }, e
        }(s["default"]);
    e["default"] = c
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(4),
        s = r(u),
        c = function(t) {
            function e(n, r) {
                return o(this, e), i(this, t.call(this, String.fromCharCode(209) + n, r))
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^[\x20-\x7F\xC8-\xCF]+$/) !== -1
            }, e
        }(s["default"]);
    e["default"] = c
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(4),
        s = r(u),
        c = function(t) {
            function e(n, r) {
                return o(this, e), i(this, t.call(this, String.fromCharCode(210) + n, r))
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^(\xCF*[0-9]{2}\xCF*)+$/) !== -1
            }, e
        }(s["default"]);
    e["default"] = c
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }

    function u(t) {
        var e, n = t.match(/^[\x00-\x5F\xC8-\xCF]*/)[0].length,
            r = t.match(/^[\x20-\x7F\xC8-\xCF]*/)[0].length,
            o = t.match(/^(\xCF*[0-9]{2}\xCF*)*/)[0].length;
        return e = o >= 2 ? String.fromCharCode(210) + f(t) : n > r ? String.fromCharCode(208) + s(t) : String.fromCharCode(209) + c(t), e = e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/, function(t, e) {
            return String.fromCharCode(203) + e
        })
    }

    function s(t) {
        var e = t.match(/^([\x00-\x5F\xC8-\xCF]+?)(([0-9]{2}){2,})([^0-9]|$)/);
        if (e) return e[1] + String.fromCharCode(204) + f(t.substring(e[1].length));
        var n = t.match(/^[\x00-\x5F\xC8-\xCF]+/);
        return n[0].length === t.length ? t : n[0] + String.fromCharCode(205) + c(t.substring(n[0].length))
    }

    function c(t) {
        var e = t.match(/^([\x20-\x7F\xC8-\xCF]+?)(([0-9]{2}){2,})([^0-9]|$)/);
        if (e) return e[1] + String.fromCharCode(204) + f(t.substring(e[1].length));
        var n = t.match(/^[\x20-\x7F\xC8-\xCF]+/);
        return n[0].length === t.length ? t : n[0] + String.fromCharCode(206) + s(t.substring(n[0].length))
    }

    function f(t) {
        var e = t.match(/^(\xCF*[0-9]{2}\xCF*)+/)[0],
            n = e.length;
        if (n === t.length) return t;
        t = t.substring(n);
        var r = t.match(/^[\x00-\x5F\xC8-\xCF]*/)[0].length,
            o = t.match(/^[\x20-\x7F\xC8-\xCF]*/)[0].length;
        return r >= o ? e + String.fromCharCode(206) + s(t) : e + String.fromCharCode(205) + c(t)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = n(4),
        p = r(l),
        h = function(t) {
            function e(n, r) {
                if (o(this, e), n.search(/^[\x00-\x7F\xC8-\xD3]+$/) !== -1) var a = i(this, t.call(this, u(n), r));
                else var a = i(this, t.call(this, n, r));
                return i(a)
            }
            return a(e, t), e
        }(p["default"]);
    e["default"] = h
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.CODE128C = e.CODE128B = e.CODE128A = e.CODE128 = void 0;
    var o = n(18),
        i = r(o),
        a = n(15),
        u = r(a),
        s = n(16),
        c = r(s),
        f = n(17),
        l = r(f);
    e.CODE128 = i["default"], e.CODE128A = u["default"], e.CODE128B = c["default"], e.CODE128C = l["default"]
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }

    function u(t) {
        return s(f(t))
    }

    function s(t) {
        return b[t].toString(2)
    }

    function c(t) {
        return y[t]
    }

    function f(t) {
        return y.indexOf(t)
    }

    function l(t) {
        for (var e = 0, n = 0; n < t.length; n++) e += f(t[n]);
        return e %= 43
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.CODE39 = void 0;
    var p = n(0),
        h = r(p),
        d = function(t) {
            function e(n, r) {
                return o(this, e), n = n.toUpperCase(), r.mod43 && (n += c(l(n))), i(this, t.call(this, n, r))
            }
            return a(e, t), e.prototype.encode = function() {
                for (var t = u("*"), e = 0; e < this.data.length; e++) t += u(this.data[e]) + "0";
                return t += u("*"), {
                    data: t,
                    text: this.text
                }
            }, e.prototype.valid = function() {
                return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/) !== -1
            }, e
        }(h["default"]),
        y = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "-", ".", " ", "$", "/", "+", "%", "*"],
        b = [20957, 29783, 23639, 30485, 20951, 29813, 23669, 20855, 29789, 23645, 29975, 23831, 30533, 22295, 30149, 24005, 21623, 29981, 23837, 22301, 30023, 23879, 30545, 22343, 30161, 24017, 21959, 30065, 23921, 22385, 29015, 18263, 29141, 17879, 29045, 18293, 17783, 29021, 18269, 17477, 17489, 17681, 20753, 35770];
    e.CODE39 = d
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }

    function u(t) {
        var e, n = 0;
        for (e = 0; e < 12; e += 2) n += parseInt(t[e]);
        for (e = 1; e < 12; e += 2) n += 3 * parseInt(t[e]);
        return (10 - n % 10) % 10
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = n(1),
        c = r(s),
        f = n(0),
        l = r(f),
        p = function(t) {
            function e(n, r) {
                o(this, e), n.search(/^[0-9]{12}$/) !== -1 && (n += u(n));
                var a = i(this, t.call(this, n, r));
                return !r.flat && r.fontSize > 10 * r.width ? a.fontSize = 10 * r.width : a.fontSize = r.fontSize, a.guardHeight = r.height + a.fontSize / 2 + r.textMargin, a.lastChar = r.lastChar, a
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^[0-9]{13}$/) !== -1 && this.data[12] == u(this.data)
            }, e.prototype.encode = function() {
                return this.options.flat ? this.flatEncoding() : this.guardedEncoding()
            }, e.prototype.getStructure = function() {
                return ["LLLLLL", "LLGLGG", "LLGGLG", "LLGGGL", "LGLLGG", "LGGLLG", "LGGGLL", "LGLGLG", "LGLGGL", "LGGLGL"]
            }, e.prototype.guardedEncoding = function() {
                var t = new c["default"],
                    e = [],
                    n = this.getStructure()[this.data[0]],
                    r = this.data.substr(1, 6),
                    o = this.data.substr(7, 6);
                return this.options.displayValue && e.push({
                    data: "000000000000",
                    text: this.text.substr(0, 1),
                    options: {
                        textAlign: "left",
                        fontSize: this.fontSize
                    }
                }), e.push({
                    data: "101",
                    options: {
                        height: this.guardHeight
                    }
                }), e.push({
                    data: t.encode(r, n),
                    text: this.text.substr(1, 6),
                    options: {
                        fontSize: this.fontSize
                    }
                }), e.push({
                    data: "01010",
                    options: {
                        height: this.guardHeight
                    }
                }), e.push({
                    data: t.encode(o, "RRRRRR"),
                    text: this.text.substr(7, 6),
                    options: {
                        fontSize: this.fontSize
                    }
                }), e.push({
                    data: "101",
                    options: {
                        height: this.guardHeight
                    }
                }), this.options.lastChar && this.options.displayValue && (e.push({
                    data: "00"
                }), e.push({
                    data: "00000",
                    text: this.options.lastChar,
                    options: {
                        fontSize: this.fontSize
                    }
                })), e
            }, e.prototype.flatEncoding = function() {
                var t = new c["default"],
                    e = "",
                    n = this.getStructure()[this.data[0]];
                return e += "101", e += t.encode(this.data.substr(1, 6), n), e += "01010", e += t.encode(this.data.substr(7, 6), "RRRRRR"), e += "101", {
                    data: e,
                    text: this.text
                }
            }, e
        }(l["default"]);
    e["default"] = p
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(1),
        s = r(u),
        c = n(0),
        f = r(c),
        l = function(t) {
            function e(n, r) {
                o(this, e);
                var a = i(this, t.call(this, n, r));
                return a.structure = ["LL", "LG", "GL", "GG"], a
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^[0-9]{2}$/) !== -1
            }, e.prototype.encode = function() {
                var t = new s["default"],
                    e = this.structure[parseInt(this.data) % 4],
                    n = "1011";
                return n += t.encode(this.data, e, "01"), {
                    data: n,
                    text: this.text
                }
            }, e
        }(f["default"]);
    e["default"] = l
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(1),
        s = r(u),
        c = n(0),
        f = r(c),
        l = function(t) {
            function e(n, r) {
                o(this, e);
                var a = i(this, t.call(this, n, r));
                return a.structure = ["GGLLL", "GLGLL", "GLLGL", "GLLLG", "LGGLL", "LLGGL", "LLLGG", "LGLGL", "LGLLG", "LLGLG"], a
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^[0-9]{5}$/) !== -1
            }, e.prototype.encode = function() {
                var t = new s["default"],
                    e = this.checksum(),
                    n = "1011";
                return n += t.encode(this.data, this.structure[e], "01"), {
                    data: n,
                    text: this.text
                }
            }, e.prototype.checksum = function() {
                var t = 0;
                return t += 3 * parseInt(this.data[0]), t += 9 * parseInt(this.data[1]), t += 3 * parseInt(this.data[2]), t += 9 * parseInt(this.data[3]), t += 3 * parseInt(this.data[4]), t % 10
            }, e
        }(f["default"]);
    e["default"] = l
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }

    function u(t) {
        var e, n = 0;
        for (e = 0; e < 7; e += 2) n += 3 * parseInt(t[e]);
        for (e = 1; e < 7; e += 2) n += parseInt(t[e]);
        return (10 - n % 10) % 10
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = n(1),
        c = r(s),
        f = n(0),
        l = r(f),
        p = function(t) {
            function e(n, r) {
                return o(this, e), n.search(/^[0-9]{7}$/) !== -1 && (n += u(n)), i(this, t.call(this, n, r))
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^[0-9]{8}$/) !== -1 && this.data[7] == u(this.data)
            }, e.prototype.encode = function() {
                var t = new c["default"],
                    e = "",
                    n = this.data.substr(0, 4),
                    r = this.data.substr(4, 4);
                return e += t.startBin, e += t.encode(n, "LLLL"), e += t.middleBin, e += t.encode(r, "RRRR"), e += t.endBin, {
                    data: e,
                    text: this.text
                }
            }, e
        }(l["default"]);
    e["default"] = p
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }

    function u(t) {
        var e, n = 0;
        for (e = 1; e < 11; e += 2) n += parseInt(t[e]);
        for (e = 0; e < 11; e += 2) n += 3 * parseInt(t[e]);
        return (10 - n % 10) % 10
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = n(1),
        c = r(s),
        f = n(0),
        l = r(f),
        p = function(t) {
            function e(n, r) {
                o(this, e), n.search(/^[0-9]{11}$/) !== -1 && (n += u(n));
                var a = i(this, t.call(this, n, r));
                return a.displayValue = r.displayValue, r.fontSize > 10 * r.width ? a.fontSize = 10 * r.width : a.fontSize = r.fontSize, a.guardHeight = r.height + a.fontSize / 2 + r.textMargin, a
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^[0-9]{12}$/) !== -1 && this.data[11] == u(this.data)
            }, e.prototype.encode = function() {
                return this.options.flat ? this.flatEncoding() : this.guardedEncoding()
            }, e.prototype.flatEncoding = function() {
                var t = new c["default"],
                    e = "";
                return e += "101", e += t.encode(this.data.substr(0, 6), "LLLLLL"), e += "01010", e += t.encode(this.data.substr(6, 6), "RRRRRR"), e += "101", {
                    data: e,
                    text: this.text
                }
            }, e.prototype.guardedEncoding = function() {
                var t = new c["default"],
                    e = [];
                return this.displayValue && e.push({
                    data: "00000000",
                    text: this.text.substr(0, 1),
                    options: {
                        textAlign: "left",
                        fontSize: this.fontSize
                    }
                }), e.push({
                    data: "101" + t.encode(this.data[0], "L"),
                    options: {
                        height: this.guardHeight
                    }
                }), e.push({
                    data: t.encode(this.data.substr(1, 5), "LLLLL"),
                    text: this.text.substr(1, 5),
                    options: {
                        fontSize: this.fontSize
                    }
                }), e.push({
                    data: "01010",
                    options: {
                        height: this.guardHeight
                    }
                }), e.push({
                    data: t.encode(this.data.substr(6, 5), "RRRRR"),
                    text: this.text.substr(6, 5),
                    options: {
                        fontSize: this.fontSize
                    }
                }), e.push({
                    data: t.encode(this.data[11], "R") + "101",
                    options: {
                        height: this.guardHeight
                    }
                }), this.displayValue && e.push({
                    data: "00000000",
                    text: this.text.substr(11, 1),
                    options: {
                        textAlign: "right",
                        fontSize: this.fontSize
                    }
                }), e
            }, e
        }(l["default"]);
    e["default"] = p
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.UPC = e.EAN2 = e.EAN5 = e.EAN8 = e.EAN13 = void 0;
    var o = n(21),
        i = r(o),
        a = n(24),
        u = r(a),
        s = n(23),
        c = r(s),
        f = n(22),
        l = r(f),
        p = n(25),
        h = r(p);
    e.EAN13 = i["default"], e.EAN8 = u["default"], e.EAN5 = c["default"], e.EAN2 = l["default"], e.UPC = h["default"]
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.GenericBarcode = void 0;
    var u = n(0),
        s = r(u),
        c = function(t) {
            function e(n, r) {
                return o(this, e), i(this, t.call(this, n, r))
            }
            return a(e, t), e.prototype.encode = function() {
                return {
                    data: "10101010101010101010101010101010101010101",
                    text: this.text
                }
            }, e.prototype.valid = function() {
                return !0
            }, e
        }(s["default"]);
    e.GenericBarcode = c
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.ITF = void 0;
    var u = n(0),
        s = r(u),
        c = function(t) {
            function e(n, r) {
                o(this, e);
                var a = i(this, t.call(this, n, r));
                return a.binaryRepresentation = {
                    0: "00110",
                    1: "10001",
                    2: "01001",
                    3: "11000",
                    4: "00101",
                    5: "10100",
                    6: "01100",
                    7: "00011",
                    8: "10010",
                    9: "01010"
                }, a
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^([0-9]{2})+$/) !== -1
            }, e.prototype.encode = function() {
                for (var t = "1010", e = 0; e < this.data.length; e += 2) t += this.calculatePair(this.data.substr(e, 2));
                return t += "11101", {
                    data: t,
                    text: this.text
                }
            }, e.prototype.calculatePair = function(t) {
                for (var e = "", n = this.binaryRepresentation[t[0]], r = this.binaryRepresentation[t[1]], o = 0; o < 5; o++) e += "1" == n[o] ? "111" : "1", e += "1" == r[o] ? "000" : "0";
                return e
            }, e
        }(s["default"]);
    e.ITF = c
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }

    function u(t) {
        for (var e = 0, n = 0; n < 13; n++) e += parseInt(t[n]) * (3 - n % 2 * 2);
        return 10 * Math.ceil(e / 10) - e
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.ITF14 = void 0;
    var s = n(0),
        c = r(s),
        f = function(t) {
            function e(n, r) {
                o(this, e), n.search(/^[0-9]{13}$/) !== -1 && (n += u(n));
                var a = i(this, t.call(this, n, r));
                return a.binaryRepresentation = {
                    0: "00110",
                    1: "10001",
                    2: "01001",
                    3: "11000",
                    4: "00101",
                    5: "10100",
                    6: "01100",
                    7: "00011",
                    8: "10010",
                    9: "01010"
                }, a
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^[0-9]{14}$/) !== -1 && this.data[13] == u(this.data)
            }, e.prototype.encode = function() {
                for (var t = "1010", e = 0; e < 14; e += 2) t += this.calculatePair(this.data.substr(e, 2));
                return t += "11101", {
                    data: t,
                    text: this.text
                }
            }, e.prototype.calculatePair = function(t) {
                for (var e = "", n = this.binaryRepresentation[t[0]], r = this.binaryRepresentation[t[1]], o = 0; o < 5; o++) e += "1" == n[o] ? "111" : "1", e += "1" == r[o] ? "000" : "0";
                return e
            }, e
        }(c["default"]);
    e.ITF14 = f
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(2),
        s = r(u),
        c = n(5),
        f = function(t) {
            function e(n, r) {
                return o(this, e), i(this, t.call(this, n + (0, c.mod10)(n), r))
            }
            return a(e, t), e
        }(s["default"]);
    e["default"] = f
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(2),
        s = r(u),
        c = n(5),
        f = function(t) {
            function e(n, r) {
                return o(this, e), n += (0, c.mod10)(n), n += (0, c.mod10)(n), i(this, t.call(this, n, r))
            }
            return a(e, t), e
        }(s["default"]);
    e["default"] = f
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(2),
        s = r(u),
        c = n(5),
        f = function(t) {
            function e(n, r) {
                return o(this, e), i(this, t.call(this, n + (0, c.mod11)(n), r))
            }
            return a(e, t), e
        }(s["default"]);
    e["default"] = f
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = n(2),
        s = r(u),
        c = n(5),
        f = function(t) {
            function e(n, r) {
                return o(this, e), n += (0, c.mod11)(n), n += (0, c.mod10)(n), i(this, t.call(this, n, r))
            }
            return a(e, t), e
        }(s["default"]);
    e["default"] = f
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.MSI1110 = e.MSI1010 = e.MSI11 = e.MSI10 = e.MSI = void 0;
    var o = n(2),
        i = r(o),
        a = n(30),
        u = r(a),
        s = n(32),
        c = r(s),
        f = n(31),
        l = r(f),
        p = n(33),
        h = r(p);
    e.MSI = i["default"], e.MSI10 = u["default"], e.MSI11 = c["default"], e.MSI1010 = l["default"], e.MSI1110 = h["default"]
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.codabar = void 0;
    var u = n(0),
        s = r(u),
        c = function(t) {
            function e(n, r) {
                o(this, e), 0 === n.search(/^[0-9\-\$\:\.\+\/]+$/) && (n = "A" + n + "A");
                var a = i(this, t.call(this, n.toUpperCase(), r));
                return a.text = a.options.text || a.text.replace(/[A-D]/g, ""), a
            }
            return a(e, t), e.prototype.valid = function() {
                return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/) !== -1
            }, e.prototype.encode = function() {
                for (var t = [], e = this.getEncodings(), n = 0; n < this.data.length; n++) t.push(e[this.data.charAt(n)]), n !== this.data.length - 1 && t.push("0");
                return {
                    text: this.text,
                    data: t.join("")
                }
            }, e.prototype.getEncodings = function() {
                return {
                    0: "101010011",
                    1: "101011001",
                    2: "101001011",
                    3: "110010101",
                    4: "101101001",
                    5: "110101001",
                    6: "100101011",
                    7: "100101101",
                    8: "100110101",
                    9: "110100101",
                    "-": "101001101",
                    $: "101100101",
                    ":": "1101011011",
                    "/": "1101101011",
                    ".": "1101101101",
                    "+": "101100110011",
                    A: "1011001001",
                    B: "1010010011",
                    C: "1001001011",
                    D: "1010011001"
                }
            }, e
        }(s["default"]);
    e.codabar = c
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.pharmacode = void 0;
    var u = n(0),
        s = r(u),
        c = function(t) {
            function e(n, r) {
                o(this, e);
                var a = i(this, t.call(this, n, r));
                return a.number = parseInt(n, 10), a
            }
            return a(e, t), e.prototype.encode = function() {
                for (var t = this.number, e = ""; !isNaN(t) && 0 != t;) t % 2 === 0 ? (e = "11100" + e, t = (t - 2) / 2) : (e = "100" + e, t = (t - 1) / 2);
                return e = e.slice(0, -2), {
                    data: e,
                    text: this.text
                }
            }, e.prototype.valid = function() {
                return this.number >= 3 && this.number <= 131070
            }, e
        }(s["default"]);
    e.pharmacode = c
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t) {
        var e = {};
        for (var n in s["default"]) s["default"].hasOwnProperty(n) && (t.hasAttribute("jsbarcode-" + n.toLowerCase()) && (e[n] = t.getAttribute("jsbarcode-" + n.toLowerCase())), t.hasAttribute("data-" + n.toLowerCase()) && (e[n] = t.getAttribute("data-" + n.toLowerCase())));
        return e.value = t.getAttribute("jsbarcode-value") || t.getAttribute("data-value"), e = (0, a["default"])(e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(7),
        a = r(i),
        u = n(8),
        s = r(u);
    e["default"] = o
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(3),
        a = r(i),
        u = n(9),
        s = function() {
            function t(e, n, r) {
                o(this, t), this.canvas = e, this.encodings = n, this.options = r
            }
            return t.prototype.render = function() {
                if (!this.canvas.getContext) throw new Error("The browser does not support canvas.");
                this.prepareCanvas();
                for (var t = 0; t < this.encodings.length; t++) {
                    var e = (0, a["default"])(this.options, this.encodings[t].options);
                    this.drawCanvasBarcode(e, this.encodings[t]), this.drawCanvasText(e, this.encodings[t]), this.moveCanvasDrawing(this.encodings[t])
                }
                this.restoreCanvas()
            }, t.prototype.prepareCanvas = function() {
                var t = this.canvas.getContext("2d");
                t.save(), (0, u.calculateEncodingAttributes)(this.encodings, this.options, t);
                var e = (0, u.getTotalWidthOfEncodings)(this.encodings),
                    n = (0, u.getMaximumHeightOfEncodings)(this.encodings);
                this.canvas.width = e + this.options.marginLeft + this.options.marginRight, this.canvas.height = n, t.clearRect(0, 0, this.canvas.width, this.canvas.height), this.options.background && (t.fillStyle = this.options.background, t.fillRect(0, 0, this.canvas.width, this.canvas.height)), t.translate(this.options.marginLeft, 0)
            }, t.prototype.drawCanvasBarcode = function(t, e) {
                var n, r = this.canvas.getContext("2d"),
                    o = e.data;
                n = "top" == t.textPosition ? t.marginTop + t.fontSize + t.textMargin : t.marginTop, r.fillStyle = t.lineColor;
                for (var i = 0; i < o.length; i++) {
                    var a = i * t.width + e.barcodePadding;
                    "1" === o[i] ? r.fillRect(a, n, t.width, t.height) : o[i] && r.fillRect(a, n, t.width, t.height * o[i])
                }
            }, t.prototype.drawCanvasText = function(t, e) {
                var n = this.canvas.getContext("2d"),
                    r = t.fontOptions + " " + t.fontSize + "px " + t.font;
                if (t.displayValue) {
                    var o, i;
                    i = "top" == t.textPosition ? t.marginTop + t.fontSize - t.textMargin : t.height + t.textMargin + t.marginTop + t.fontSize, n.font = r, "left" == t.textAlign || e.barcodePadding > 0 ? (o = 0, n.textAlign = "left") : "right" == t.textAlign ? (o = e.width - 1, n.textAlign = "right") : (o = e.width / 2, n.textAlign = "center"), n.fillText(e.text, o, i)
                }
            }, t.prototype.moveCanvasDrawing = function(t) {
                var e = this.canvas.getContext("2d");
                e.translate(t.width, 0)
            }, t.prototype.restoreCanvas = function() {
                var t = this.canvas.getContext("2d");
                t.restore()
            }, t
        }();
    e["default"] = s
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var o = n(38),
        i = r(o),
        a = n(41),
        u = r(a),
        s = n(40),
        c = r(s);
    e["default"] = {
        CanvasRenderer: i["default"],
        SVGRenderer: u["default"],
        ObjectRenderer: c["default"]
    }
}, function(t, e) {
    "use strict";

    function n(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = function() {
        function t(e, r, o) {
            n(this, t), this.object = e, this.encodings = r, this.options = o
        }
        return t.prototype.render = function() {
            this.object.encodings = this.encodings
        }, t
    }();
    e["default"] = r
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t, e, n) {
        var r = document.createElementNS(l, "g");
        return r.setAttribute("transform", "translate(" + t + ", " + e + ")"), n.appendChild(r), r
    }

    function a(t, e) {
        t.setAttribute("style", "fill:" + e.lineColor + ";")
    }

    function u(t, e, n, r, o) {
        var i = document.createElementNS(l, "rect");
        return i.setAttribute("x", t), i.setAttribute("y", e), i.setAttribute("width", n), i.setAttribute("height", r), o.appendChild(i), i
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = n(3),
        c = r(s),
        f = n(9),
        l = "http://www.w3.org/2000/svg",
        p = function() {
            function t(e, n, r) {
                o(this, t), this.svg = e, this.encodings = n, this.options = r
            }
            return t.prototype.render = function() {
                var t = this.options.marginLeft;
                this.prepareSVG();
                for (var e = 0; e < this.encodings.length; e++) {
                    var n = this.encodings[e],
                        r = (0, c["default"])(this.options, n.options),
                        o = i(t, r.marginTop, this.svg);
                    a(o, r), this.drawSvgBarcode(o, r, n), this.drawSVGText(o, r, n), t += n.width
                }
            }, t.prototype.prepareSVG = function() {
                for (; this.svg.firstChild;) this.svg.removeChild(this.svg.firstChild);
                (0, f.calculateEncodingAttributes)(this.encodings, this.options);
                var t = (0, f.getTotalWidthOfEncodings)(this.encodings),
                    e = (0, f.getMaximumHeightOfEncodings)(this.encodings),
                    n = t + this.options.marginLeft + this.options.marginRight;
                this.setSvgAttributes(n, e), this.options.background && u(0, 0, n, e, this.svg).setAttribute("style", "fill:" + this.options.background + ";")
            }, t.prototype.drawSvgBarcode = function(t, e, n) {
                var r, o = n.data;
                r = "top" == e.textPosition ? e.fontSize + e.textMargin : 0;
                for (var i = 0, a = 0, s = 0; s < o.length; s++) a = s * e.width + n.barcodePadding, "1" === o[s] ? i++ : i > 0 && (u(a - e.width * i, r, e.width * i, e.height, t), i = 0);
                i > 0 && u(a - e.width * (i - 1), r, e.width * i, e.height, t)
            }, t.prototype.drawSVGText = function(t, e, n) {
                var r = document.createElementNS(l, "text");
                if (e.displayValue) {
                    var o, i;
                    r.setAttribute("font-family", e.font);
                    r.setAttribute("font-size", e.fontSize + "px"), i = "top" == e.textPosition ? e.fontSize - e.textMargin : e.height + e.textMargin + e.fontSize, "left" == e.textAlign || n.barcodePadding > 0 ? (o = 0, r.setAttribute("text-anchor", "start")) : "right" == e.textAlign ? (o = n.width - 1, r.setAttribute("text-anchor", "end")) : (o = n.width / 2, r.setAttribute("text-anchor", "middle")), r.setAttribute("x", o), r.setAttribute("y", i), r.appendChild(document.createTextNode(n.text)), t.appendChild(r)
                }
            }, t.prototype.setSvgAttributes = function(t, e) {
                var n = this.svg;
                n.setAttribute("width", t + "px"), n.setAttribute("height", e + "px"), n.setAttribute("x", "0px"), n.setAttribute("y", "0px"), n.setAttribute("viewBox", "0 0 " + t + " " + e), n.setAttribute("xmlns", l), n.setAttribute("version", "1.1"), n.style.transform = "translate(0,0)"
            }, t
        }();
    e["default"] = p
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            "default": t
        }
    }

    function o(t, e) {
        E.prototype[e] = E.prototype[e.toUpperCase()] = E.prototype[e.toLowerCase()] = function(n, r) {
            var o = this;
            return o._errorHandler.wrapBarcodeCall(function() {
                r.text = "undefined" == typeof r.text ? void 0 : "" + r.text;
                var a = (0, l["default"])(o._options, r);
                a = (0, _["default"])(a);
                var u = t[e],
                    s = i(n, u, a);
                return o._encodings.push(s), o
            })
        }
    }

    function i(t, e, n) {
        t = "" + t;
        var r = new e(t, n);
        if (!r.valid()) throw new m.InvalidInputException(r.constructor.name, t);
        var o = r.encode();
        o = (0, h["default"])(o);
        for (var i = 0; i < o.length; i++) o[i].options = (0, l["default"])(n, o[i].options);
        return o
    }

    function a() {
        return c["default"].CODE128 ? "CODE128" : Object.keys(c["default"])[0]
    }

    function u(t, e, n) {
        e = (0, h["default"])(e);
        for (var r = 0; r < e.length; r++) e[r].options = (0, l["default"])(n, e[r].options), (0, y["default"])(e[r].options);
        (0, y["default"])(n);
        var o = t.renderer,
            i = new o(t.element, e, n);
        i.render(), t.afterRender && t.afterRender()
    }
    var s = n(10),
        c = r(s),
        f = n(3),
        l = r(f),
        p = n(14),
        h = r(p),
        d = n(12),
        y = r(d),
        b = n(13),
        g = r(b),
        v = n(7),
        _ = r(v),
        w = n(11),
        x = r(w),
        m = n(6),
        O = n(8),
        C = r(O),
        E = function() {},
        j = function(t, e, n) {
            var r = new E;
            if ("undefined" == typeof t) throw Error("No element to render on was provided.");
            return r._renderProperties = (0, g["default"])(t), r._encodings = [], r._options = C["default"], r._errorHandler = new x["default"](r), "undefined" != typeof e && (n = n || {}, n.format || (n.format = a()), r.options(n)[n.format](e, n).render()), r
        };
    j.getModule = function(t) {
        return c["default"][t]
    };
    for (var P in c["default"]) c["default"].hasOwnProperty(P) && o(c["default"], P);
    E.prototype.options = function(t) {
        return this._options = (0, l["default"])(this._options, t), this
    }, E.prototype.blank = function(t) {
        var e = "0".repeat(t);
        return this._encodings.push({
            data: e
        }), this
    }, E.prototype.init = function() {
        if (this._renderProperties) {
            Array.isArray(this._renderProperties) || (this._renderProperties = [this._renderProperties]);
            var t;
            for (var e in this._renderProperties) {
                t = this._renderProperties[e];
                var n = (0, l["default"])(this._options, t.options);
                "auto" == n.format && (n.format = a()), this._errorHandler.wrapBarcodeCall(function() {
                    var e = n.value,
                        r = c["default"][n.format.toUpperCase()],
                        o = i(e, r, n);
                    u(t, o, n)
                })
            }
        }
    }, E.prototype.render = function() {
        if (!this._renderProperties) throw new m.NoElementException;
        if (Array.isArray(this._renderProperties))
            for (var t = 0; t < this._renderProperties.length; t++) u(this._renderProperties[t], this._encodings, this._options);
        else u(this._renderProperties, this._encodings, this._options);
        return this
    }, E.prototype._defaults = C["default"], "undefined" != typeof window && (window.JsBarcode = j), "undefined" != typeof jQuery && (jQuery.fn.JsBarcode = function(t, e) {
        var n = [];
        return jQuery(this).each(function() {
            n.push(this)
        }), j(n, t, e)
    }), t.exports = j
}]);
/* */
/* particle */
! function(Y, O) {
    "use strict";

    function s(n, o) {
        function r() {
            p.width = n.offsetWidth, p.height = n.offsetHeight, l.fillStyle = o.dotColor, l.strokeStyle = o.lineColor, l.lineWidth = o.lineWidth
        }

        function a() {
            if (x) {
                e = Y.innerWidth, d = Y.innerHeight, l.clearRect(0, 0, p.width, p.height);
                for (var t = 0; t < u.length; t++) u[t].updatePosition();
                for (t = 0; t < u.length; t++) u[t].draw();
                i || requestAnimationFrame(a)
            }
        }

        function h() {
            switch (this.stackPos, this.active = !0, this.layer = Math.ceil(3 * Math.random()), this.parallaxOffsetX = 0, this.parallaxOffsetY = 0, this.position = {
                x: Math.ceil(Math.random() * p.width),
                y: Math.ceil(Math.random() * p.height)
            }, this.speed = {}, o.directionX) {
                case "left":
                    this.speed.x = +(-o.maxSpeedX + Math.random() * o.maxSpeedX - o.minSpeedX).toFixed(2);
                    break;
                case "right":
                    this.speed.x = +(Math.random() * o.maxSpeedX + o.minSpeedX).toFixed(2);
                    break;
                default:
                    this.speed.x = +(-o.maxSpeedX / 2 + Math.random() * o.maxSpeedX).toFixed(2), this.speed.x += 0 < this.speed.x ? o.minSpeedX : -o.minSpeedX
            }
            switch (o.directionY) {
                case "up":
                    this.speed.y = +(-o.maxSpeedY + Math.random() * o.maxSpeedY - o.minSpeedY).toFixed(2);
                    break;
                case "down":
                    this.speed.y = +(Math.random() * o.maxSpeedY + o.minSpeedY).toFixed(2);
                    break;
                default:
                    this.speed.y = +(-o.maxSpeedY / 2 + Math.random() * o.maxSpeedY).toFixed(2), this.speed.x += 0 < this.speed.y ? o.minSpeedY : -o.minSpeedY
            }
        }

        function s(t) {
            void 0 !== o[t] && o[t].call(n)
        }
        var p, l, e, d, f, c, x = !!O.createElement("canvas").getContext,
            u = [],
            m = 0,
            y = 0,
            g = !navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i),
            w = !!Y.DeviceOrientationEvent,
            v = 0,
            X = 0,
            i = !1;
        return o = function(t) {
                t = t || {};
                for (var i = 1; i < arguments.length; i++) {
                    var e = arguments[i];
                    if (e)
                        for (var a in e) e.hasOwnProperty(a) && ("object" == typeof e[a] ? deepExtend(t[a], e[a]) : t[a] = e[a])
                }
                return t
            }({}, Y[S].defaults, o), h.prototype.draw = function() {
                l.beginPath(), l.arc(this.position.x + this.parallaxOffsetX, this.position.y + this.parallaxOffsetY, o.particleRadius / 2, 0, 2 * Math.PI, !0), l.closePath(), l.fill(), l.beginPath();
                for (var t = u.length - 1; t > this.stackPos; t--) {
                    var i = u[t],
                        e = this.position.x - i.position.x,
                        a = this.position.y - i.position.y;
                    Math.sqrt(e * e + a * a).toFixed(2) < o.proximity && (l.moveTo(this.position.x + this.parallaxOffsetX, this.position.y + this.parallaxOffsetY), o.curvedLines ? l.quadraticCurveTo(Math.max(i.position.x, i.position.x), Math.min(i.position.y, i.position.y), i.position.x + i.parallaxOffsetX, i.position.y + i.parallaxOffsetY) : l.lineTo(i.position.x + i.parallaxOffsetX, i.position.y + i.parallaxOffsetY))
                }
                l.stroke(), l.closePath()
            }, h.prototype.updatePosition = function() {
                if (o.parallax) {
                    if (w && !g) f = (v - -30) * ((e - 0) / 60) + 0, c = (X - -30) * ((d - 0) / 60) + 0;
                    else f = m, c = y;
                    this.parallaxTargX = (f - e / 2) / (o.parallaxMultiplier * this.layer), this.parallaxOffsetX += (this.parallaxTargX - this.parallaxOffsetX) / 10, this.parallaxTargY = (c - d / 2) / (o.parallaxMultiplier * this.layer), this.parallaxOffsetY += (this.parallaxTargY - this.parallaxOffsetY) / 10
                }
                var t = n.offsetWidth,
                    i = n.offsetHeight;
                switch (o.directionX) {
                    case "left":
                        this.position.x + this.speed.x + this.parallaxOffsetX < 0 && (this.position.x = t - this.parallaxOffsetX);
                        break;
                    case "right":
                        this.position.x + this.speed.x + this.parallaxOffsetX > t && (this.position.x = 0 - this.parallaxOffsetX);
                        break;
                    default:
                        (this.position.x + this.speed.x + this.parallaxOffsetX > t || this.position.x + this.speed.x + this.parallaxOffsetX < 0) && (this.speed.x = -this.speed.x)
                }
                switch (o.directionY) {
                    case "up":
                        this.position.y + this.speed.y + this.parallaxOffsetY < 0 && (this.position.y = i - this.parallaxOffsetY);
                        break;
                    case "down":
                        this.position.y + this.speed.y + this.parallaxOffsetY > i && (this.position.y = 0 - this.parallaxOffsetY);
                        break;
                    default:
                        (this.position.y + this.speed.y + this.parallaxOffsetY > i || this.position.y + this.speed.y + this.parallaxOffsetY < 0) && (this.speed.y = -this.speed.y)
                }
                this.position.x += this.speed.x, this.position.y += this.speed.y
            }, h.prototype.setStackPos = function(t) {
                this.stackPos = t
            },
            function() {
                if (x) {
                    (p = O.createElement("canvas")).className = "pg-canvas", p.style.display = "block", n.insertBefore(p, n.firstChild), l = p.getContext("2d"), r();
                    for (var t = Math.round(p.width * p.height / o.density), i = 0; i < t; i++) {
                        var e = new h;
                        e.setStackPos(i), u.push(e)
                    }
                    Y.addEventListener("resize", function() {
                        ! function() {
                            r();
                            for (var t = n.offsetWidth, i = n.offsetHeight, e = u.length - 1; 0 <= e; e--)(u[e].position.x > t || u[e].position.y > i) && u.splice(e, 1);
                            var a = Math.round(p.width * p.height / o.density);
                            if (a > u.length)
                                for (; a > u.length;) {
                                    var s = new h;
                                    u.push(s)
                                } else a < u.length && u.splice(a);
                            for (e = u.length - 1; 0 <= e; e--) u[e].setStackPos(e)
                        }()
                    }, !1), O.addEventListener("mousemove", function(t) {
                        m = t.pageX, y = t.pageY
                    }, !1), w && !g && Y.addEventListener("deviceorientation", function() {
                        X = Math.min(Math.max(-event.beta, -30), 30), v = Math.min(Math.max(-event.gamma, -30), 30)
                    }, !0), a(), s("onInit")
                }
            }(), {
                option: function(t, i) {
                    return i ? void(o[t] = i) : o[t]
                },
                destroy: function() {
                    console.log("destroy"), p.parentNode.removeChild(p), s("onDestroy"), M && M(n).removeData("plugin_" + S)
                },
                start: function() {
                    i = !1, a()
                },
                pause: function() {
                    i = !0
                }
            }
    }
    var S = "particleground",
        M = Y.jQuery;
    Y[S] = function(t, i) {
        return new s(t, i)
    }, Y[S].defaults = {
        minSpeedX: .1,
        maxSpeedX: .7,
        minSpeedY: .1,
        maxSpeedY: .7,
        directionX: "center",
        directionY: "center",
        density: 1e4,
        dotColor: "#666666",
        lineColor: "#666666",
        particleRadius: 7,
        lineWidth: 1,
        curvedLines: !1,
        proximity: 100,
        parallax: !0,
        parallaxMultiplier: 5,
        onInit: function() {},
        onDestroy: function() {}
    }, M && (M.fn[S] = function(t) {
        if ("string" != typeof t) return "object" != typeof t && t ? void 0 : this.each(function() {
            M.data(this, "plugin_" + S) || M.data(this, "plugin_" + S, new s(this, t))
        });
        var i, e = t,
            a = Array.prototype.slice.call(arguments, 1);
        return this.each(function() {
            M.data(this, "plugin_" + S) && "function" == typeof M.data(this, "plugin_" + S)[e] && (i = M.data(this, "plugin_" + S)[e].apply(this, a))
        }), void 0 !== i ? i : this
    })
}(window, document),
function() {
    for (var s = 0, t = ["ms", "moz", "webkit", "o"], i = 0; i < t.length && !window.requestAnimationFrame; ++i) window.requestAnimationFrame = window[t[i] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[t[i] + "CancelAnimationFrame"] || window[t[i] + "CancelRequestAnimationFrame"];
    window.requestAnimationFrame || (window.requestAnimationFrame = function(t) {
        var i = (new Date).getTime(),
            e = Math.max(0, 16 - (i - s)),
            a = window.setTimeout(function() {
                t(i + e)
            }, e);
        return s = i + e, a
    }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(t) {
        clearTimeout(t)
    })
}();